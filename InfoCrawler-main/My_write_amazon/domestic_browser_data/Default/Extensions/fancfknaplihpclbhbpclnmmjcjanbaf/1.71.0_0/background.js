var background=function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function c(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof l?Promise.resolve(e.value.v).then(c,u):d(i[0][2],e)}(o[e](t))}catch(e){d(i[0][3],e)}}function c(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function u(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=i(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));let p;const g=new Uint8Array(16);var h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function f(e,t,n){if(h.randomUUID&&!e)return h.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!p){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p=crypto.getRandomValues.bind(crypto)}return p(g)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(r)}function _(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function m(){return crypto.randomUUID?crypto.randomUUID():f()}class v extends Error{}function T(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return atob(t)}}function y(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function S(e){if(void 0!==e)try{return function(e,t){if("string"!=typeof e)throw new v("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new v(`Invalid token specified: missing part #${n+1}`);let o;try{o=T(r)}catch(e){throw new v(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new v(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}(e)}catch(e){return null}}v.prototype.name="InvalidTokenError";const E=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google español",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ES-419",langCodeForSpeech:"es-ES",voice:"Google español",supportsFormality:!0,langCodeForIta:"es-419"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HE",langCodeForSpeech:"he",langCodeForIta:"he"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"VI",langCodeForSpeech:"vi",langCodeForIta:"vi"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],I={"EN-US":"EN","EN-GB":"EN","ES-419":"ES","PT-PT":"PT","PT-BR":"PT","ZH-HANT":"ZH"},A=[{langCode:"EN",langCodeForIta:"en"},{langCode:"PT",langCodeForIta:"pt"}],b=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT","JA","KO","ZH"],w="EN",O=0,R="inline",N="automatic",P="manual",L="input",C="input_alternatives",x="side_panel",k="customization",D="",U=1,M=2,G=3,$={notLoggedIn:1500,loggedInFree:5e3},V={notLoggedIn:2e3,loggedInFree:2e3},F=1,j=2,W=3,H=1,q=2,B=1,J=2,z=3,Y="HINT_KEYBOARD_SHORTCUT",X="SHOW_ADS_FOR_MS_ADDINS",K="NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY",Q="INLINE_TRANSLATION_TRIGGER_ICON",Z="INLINE_TRANSLATION_SETTINGS_ICON",ee="INLINE_TRANSLATION_SETTING_POPUP",te="INLINE_TRANSLATION_TOOLBAR_TARGET_LANGUAGE_SELECTOR",ne="INLINE_TRANSLATION_WRITE_TOOLBAR_LANGUAGE_SELECTOR",re="INPUT_TRANSLATION_SETTING_USE_ADVANCED_WINDOW",oe="INPUT_TRANSLATION_TRIGGER_ICON",ie="INPUT_IMPROVE_TRIGGER_ICON",ae="INPUT_TRANSLATION_SETTINGS_ICON",se="INPUT_TRANSLATION_SETTING_POPUP",le="INPUT_TRANSLATION_SETTING_LANGUAGE_SELECTOR",ce="SETTINGS_PAGE_FPT",ue="SETTINGS_PAGE_READING",de="SETTINGS_PAGE_WRITING",pe="SETTINGS_PAGE_INTEGRATIONS",ge="SETTINGS_PAGE_TRANSLATOR_READING_TARGET_LANGUAGE_SELECTOR",he="SETTINGS_PAGE_TRANSLATOR_WRITING_TARGET_LANGUAGE_SELECTOR",fe="SETTINGS_PAGE_FULL_PAGE_TRANSLATION_TARGET_LANGUAGE_SELECTOR",_e="FPT_HIDE_MODAL",me="INPUT_TRANSLATION_READ_MORE_LINK",ve="INLINE_TRANSLATION_READ_MORE_LINK",Te="FPT_TRANSLATION_READ_MORE_LINK",ye="FPT_TRANSLATION_POPUP_MENU_OPTION",Se="FPT_TRANSLATION_POPUP_OPEN_SETTINGS",Ee="FPT_TRANSLATION_POPUP_CLOSE_BUTTON",Ie="FPT_TRANSLATION_POPUP_SHOW_ORIGINAL",Ae="FPT_TRANSLATION_POPUP_OPEN_SIDEBAR_BUTTON",be="EXTENSION_HUB_TOGGLE_SWITCH",we="HUB_CUSTOMIZE_SHORTCUT",Oe="HUB_LOGIN_BUTTON",Re="HUB_UPGRADE_TO_PRO_LINK",Ne="HUB_TRY_PRO_LINK",Pe="SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",Le="HUB_FPT_ENABLE_CHECKBOX",Ce="HUB_FPT_DISABLE_CHECKBOX",xe="DEEPL_WRITE_ICON",ke="gmailOnboardingPopup",De="gmailOnboardingIcon",Ue="gmailCharLimitLogin",Me="gmailFeedbackSurvey",Ge="HUB_VIEW_INTEGRATIONS",$e="HUB_CLOSE_CUSTOMIZATIONS_WIDGET",Ve="GSLIDES_FEEDBACK_SURVEY",Fe="GSLIDES_CHAR_LIMIT_LOGIN",je="ZENDESK_TRY_PRO_LINK",We="ONBOARDING_SIGN_UP",He="ONBOARDING_SKIP_SIGN_UP",qe="ONBOARDING_LOGIN_LINK",Be="ONBOARDING_SEE_ALL_INTEGRATIONS",Je="ICON_TOGGLE_IN_HUB_TRANSLATOR",ze="ICON_TOGGLE_IN_HUB_WRITE",Ye="MANAGE_ICON_SETTINGS",Xe="WRITE_LANGUAGE_SWITCHED_IN_HUB",Ke="WRITE_LANGUAGE_SWITCHED_IN_SETTINGS",Qe="SIDE_PANEL_ICON_ON_WEBSITE",Ze="HUB_ONBOARDING_LINK",et="INLINE_SELECTION_TRANSLATE_ICON",tt="INLINE_SELECTION__WRITE_ICON",nt="INPUT_SELECTION_TRANSLATE_ICON",rt="INPUT_SELECTION__WRITE_ICON",ot="INLINE_SELECTION_TRIGGER_OFF_ICON",it="INPUT_SELECTION_TRIGGER_OFF_ICON",at="SIDE_PANEL_LOGIN_BUTTON",st="SIDE_PANEL_SETTINGS_BUTTON",lt="SIDE_PANEL_LOGOUT_BUTTON",ct="SIDE_PANEL_UPGRADE_BUTTON",ut="SIDE_PANEL_TRANSLATOR_TAB",dt="SIDE_PANEL_TRANSLATOR_TARGET_LANG",pt="SIDE_PANEL_TRANSLATOR_SOURCE_LANG",gt="SIDE_PANEL_TRANSLATION_DIR_INDICATOR",ht="SIDE_PANEL_SOURCE_TEXT_FIELD",ft="SIDE_PANEL_TARGET_TEXT_FIELD",_t="REVIEW_WINDOW_CLOSE_ICON",mt="REVIEW_WINDOW_TRANSLATE_ALTERNATIVES",vt="REVIEW_WINDOW_WRITE_ALTERNATIVES",Tt="USER_PROFILE_SURVEY_CLOSE_BUTTON",yt="USER_PROFILE_SURVEY_REMIND_LATER_BUTTON",St="USER_PROFILE_SURVEY_LAUNCH_BUTTON",Et="EXPERIENCE_FEEDBACK_AMAZING_BUTTON",It="EXPERIENCE_FEEDBACK_NOT_GOOD_BUTTON",At="EXPERIENCE_FEEDBACK_CLOSE_BUTTON",bt="EXPERIENCE_FEEDBACK_REMIND_LATER_BUTTON",wt="EXPERIENCE_FEEDBACK_WRITE_REVIEW_BUTTON",Ot="DOWNLOAD_LOGS_BUTTON",Rt="SIDE_PANEL_SOURCE_TEXT_FIELD_OCR_ICON",Nt="OCR_TRANSLATION_INSTRUCTIONS_OPEN_SHORTCUT_SETTINGS_BUTTON",Pt="SIDE_PANEL_VIEW_PORT",Lt="INPUT_INLINE_HIGHLIGHT",Ct="SIDE_PANEL_ENABLE_INLINE_HIGHLIGHTS_BUTTON",xt="SIDE_PANEL_DISABLE_INLINE_HIGHLIGHTS_BUTTON",kt="INLINE_HIGHLIGHT_DISMISS_BUTTON",Dt="trigger-translation",Ut="change-language",Mt="screenshot-translation",Gt="unknown",$t="CLICK_ON_SHORTCUT_NOTIFICATION",Vt="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",Ft="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",jt="CLICK_ON_LOGOUT_MENU_ENTRY",Wt="DISABLE_PER_SITE",Ht="DISABLE_EVERYWHERE",qt="ENABLE_EVERYWHERE",Bt="ENABLE_PER_SITE",Jt="INPUT_TRANSLATION",zt="INLINE_TRANSLATION",Yt="FULL_PAGE_TRANSLATION",Xt=1,Kt=2,Qt=3,Zt=4,en="OPEN_PAGE",tn="BACK_BUTTON",nn="NEXT_BUTTON",rn="NAVIGATION",on=0,an=1,sn=2,ln=3,cn=4,un="cofdbpoegempjloogbagkncekinflcnj",dn="fancfknaplihpclbhbpclnmmjcjanbaf",pn="ocpdpnakdghopjcifldjidbdmfobmmoi",gn="firefox-extension@deepl.com",hn={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},fn=1,_n=2,mn=3,vn=1,Tn=2;const yn="DEFAULT",Sn="GDOCS",En="ZENDESK",In="WHATSAPP_WEB",An="TWITTER",bn="GMAIL",wn="GSLIDES",On="LINKEDIN",Rn="YOUTUBE",Nn="source",Pn="target",Ln="translate",Cn="write",xn="USER",kn="EXTENSION",Dn="USER",Un="AUTOMATIC",Mn="OPEN_TICKET",Gn="DETECT_TICKET_LANGUAGE",$n="SWITCH_TICKET_LANGUAGE",Vn="ENABLE_AUTOTRANSLATE",Fn="DISABLE_AUTOTRANSLATE",jn="TRANSLATE_MESSAGE",Wn="TRANSLATE_INPUT",Hn="ERROR",qn="TRANSLATION",Bn="LOGIN",Jn="CHAT",zn="MESSAGE",Yn={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},Xn="free",Kn="pro",Qn="none",Zn="TEXT_REFINEMENT_REQUEST",er="GDOCS_INSERT_COPY",tr="GDOCS_DISCARD_COPY",nr="GDOCS_CHAR_LIMIT_REACHED",rr="RESULT_ACCEPTED",or="RESULT_REVERTED",ir="GET_ALTERNATIVES_FOR_INPUT",ar="ERROR",sr="RESULT_ACCEPTED",lr="RESULT_REVERTED",cr="ALTERNATIVES_OPENED",ur="SEGMENTATION_SELECTED",dr="ALTERNATIVE_SELECTED",pr="READING_VIEW_TRANSLATE",gr="COMPOSE_VIEW_TRANSLATE",hr="COMPOSE_VIEW_IMPROVE",fr="ANONYMOUS_USER_LIMIT_EXCEEDED",_r="FREE_ACCOUNT_LIMIT_EXCEEDED",mr="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",vr="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",Tr="PRO_TRIAL",yr="LOGIN",Sr="SIGNUP",Er="word",Ir="sentence",Ar="None",br="Pro",wr="Free",Or=Object.assign(Object.assign({},{simple:"simple",business:"business",academic:"academic",casual:"casual"}),{enthusiastic:"enthusiastic",friendly:"friendly",confident:"confident",diplomatic:"diplomatic"}),Rr="auto",Nr="formal",Pr="informal";Or.simple,Or.business,Or.academic,Or.casual,Or.enthusiastic,Or.friendly,Or.confident,Or.diplomatic;const Lr="admin",Cr="development",xr="normal",kr="sideload",Dr="other",Ur="permissions_increase",Mr="unknown",Gr="inline",$r="input",Vr="input_alternatives",Fr="customization",jr="inline_highlights",Wr="",Hr="translation",qr="improvement",Br="inline_correction",Jr="login",zr="auto_login",Yr="ocr",Xr="fpt",Kr="translate",Qr="write",Zr="new_session",eo="recreated_session",to="error",no="user_interaction",ro="connection",oo="session",io="update_target_language",ao="update_source_language",so="update_formality",lo="update_style",co="select_alternative",uo="page_load",po="right_click",go="sidebar_closed",ho="SIDEPANEL_PORT",fo="Translate",_o="FullPageTranslation",mo={auth:{accessToken:"a_t",refreshToken:"r_t",idToken:"i_t",isLoggedIn:"isLoggedIn",writeServiceType:"writeServiceType",docTranslatorServiceType:"docTranslatorServiceType",apiServiceType:"apiServiceType",translatorServiceType:"translatorServiceType",accountId:"accountId",lastLogoutTrigger:"last_logout_trigger",last_login:"last_login",organizationId:"organizationId"},glossary:{activeTermbaseId:"activeTermbaseId",isGlossaryEnabled:"isGlossaryEnabled",hasTermbaseService:"hasTermbaseService",canCreateGlossary:"canCreateGlossary"},browserInstanceId:"browserInstanceId",whiteLabelLogoId:"whiteLabelLogoId",accountCountry:"accountCountry",translationLanguages:"translationLanguages",selectedTargetLanguage:"selectedTargetLanguage",targetLanguageUserInput:"targetLanguageUserInput",targetLanguageSidePanel:"targetLanguageSidePanel",installationId:"installationId",customTranslatorName:"customTranslatorName"},vo={brave:"Brave",chrome:"Chrome",edge:"Edge",firefox:"Firefox",opera:"Opera",safari:"Safari"};function To(e,t){let n;try{switch(e){case vo.chrome:case vo.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case vo.edge:n=t.split("Edg/")[1].split(" ")[0];break;case vo.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case vo.opera:n=t.split("OPR/")[1].split(" ")[0];break;case vo.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&function(e){return e===vo.chrome||e===vo.edge||e===vo.brave||e===vo.opera}(e)&&(n=yo(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function yo(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}const So="unknown_user_agent",Eo="unknown_platform",Io="unknown_browser",Ao="unknown_browser_version",bo="unknown_browser_language";function wo(e){return r(this,void 0,void 0,(function*(){const t=Oo(),{browserInstanceId:n}=yield mI([mo.browserInstanceId]),r=function(){switch(chrome.runtime.id){case un:return"chrome_web_store";case dn:return"edge_addon_store";case gn:return"firefox_addon_store";case pn:return"local";default:return"unknown"}}();return(null==e?void 0:e.isSnakeCase)?{os:`brex_${t.platform}`,os_version:`brex_${t.browser}_${t.browserVersion}`,app_version:"1.71.0",app_build:r,instance_id:null!=n?n:"unknown"}:{os:`brex_${t.platform}`,osVersion:`brex_${t.browser}_${t.browserVersion}`,appVersion:"1.71.0",appBuild:r,instanceId:null!=n?n:"unknown"}}))}function Oo(){var e,t;const n=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||So,r=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||Eo;let o=Io,i=Ao,a=(null===navigator||void 0===navigator?void 0:navigator.language)||bo;(null===(t=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===t?void 0:t.getUILanguage)&&(a=chrome.i18n.getUILanguage());try{o=Ro(n),i=To(o,n)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:n,platform:r,browser:o,browserVersion:i,browserLang:a}}const Ro=e=>{let t=Io;try{const n=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||yo(vo.edge),o=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||yo(vo.opera),a=e.match(/safari/i),s=yo(vo.brave);n?(t=vo.chrome,r&&(t=vo.edge),i&&(t=vo.opera),s&&(t=vo.brave)):r?t=vo.edge:o?t=vo.firefox:i?t=vo.opera:a&&(t=vo.safari)}catch(e){console.error("Could not get the name of the brower",e)}return t};function No(){if({IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.71.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.71.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.browserBuild.toLowerCase()===vo.firefox.toLowerCase();const e=chrome.runtime.getURL("");return Oo().browser===vo.firefox||/moz-extension:\/\//gm.test(e)}const Po={try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",firefox_privacy_policy:"FIREFOX_PRIVACY_POLICY",ms_office_addins_ads:"ADDINS_ADS",get_free_account:"GET_FREE_ACCOUNT",learn_why_geo_blocked:"LEARN_WHY_GEO_BLOCKED"},Lo={DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",FIREFOX_PRIVACY_POLICY:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",MSOFFICE_ADDINS_ADS:"https://www.deepl.com/en/microsoft-365",GET_FREE_ACCOUNT:"https://www.deepl.com/en/signup?cta=free-login-signup",LEARN_WHY_GEO_BLOCKED:"https://www.deepl.com/restricted-territories"};function Co(e){if(void 0!==e.destination)switch(e.destination){case Po.try_DeepL_Pro:return e.utmContent?ko(Lo.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Lo.DEEPL_COM_PRO;case Po.try_DeepL_Pro_Write:return(null==e?void 0:e.utmContent)?ko(Lo.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Lo.DEEPL_COM_PRO_WRITE;case Po.show_more_translation:return e?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(Lo.DEEPL_COM_TRANSLATOR),o=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=o,r.href}(e):void console.error("Invalid action.");case Po.deepl_translator_home:return(null==e?void 0:e.utmContent)?ko(Lo.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Lo.DEEPL_COM_TRANSLATOR;case Po.deepl_write_home:return(null==e?void 0:e.utmContent)?ko(Lo.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Lo.DEEPL_COM_WRITE;case Po.deepl_translator_docs:return(null==e?void 0:e.utmContent)?ko(Lo.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Lo.DEEPL_COM_DOCTRANS;case Po.deepl_terms_of_service_free:return Lo.DEEPL_COM_TERMS_OF_SERVICE_FREE;case Po.shortcut_settings:return Lo.SHORTCUT_SETTINGS;case Po.support_article:return Lo.SUPPORT_ARTICLE;case Po.external.whatsapp:return Lo.EXTERNAL.WHATSAPP;case Po.external.twitter:return Lo.EXTERNAL.TWITTER;case Po.external.youtube:return Lo.EXTERNAL.YOUTUBE;case Po.external.facebook:return Lo.EXTERNAL.FACEBOOK;case Po.external.github:return Lo.EXTERNAL.GITHUB;case Po.external.discord:return Lo.EXTERNAL.DISCORD;case Po.external.telegram:return Lo.EXTERNAL.TELEGRAM;case Po.external.reddit:return Lo.EXTERNAL.REDDIT;case Po.external.gmail:return Lo.EXTERNAL.GMAIL;case Po.external.gdocs:return Lo.EXTERNAL.GDOCS;case Po.external.gslides:return Lo.EXTERNAL.GSLIDES;case Po.external.linkedIn:return Lo.EXTERNAL.LINKEDIN;case Po.external.msOffice:return Lo.EXTERNAL.MSOFFICE;case Po.deepl_support:return Lo.DEEPL_SUPPORT;case Po.chrome_write_a_review:return Lo.CHROME_WEBSTORE;case Po.edge_write_a_review:return Lo.EDGE_WEBSTORE;case Po.firefox_write_a_review:return Lo.FIREFOX_WEBSTORE;case Po.firefox_privacy_policy:return Lo.FIREFOX_PRIVACY_POLICY;case Po.firefox_shortcut_docs:return Lo.FIREFOX_SHORTCUT_DOCS;case Po.deepl_create_account:if(e){let t=[];if(e.utmContent){t=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",e.utmContent]]]}if(e.redirectToOnboarding&&!No()){const e=`${chrome.runtime.getURL("")}onboarding.html`;t.push(["redirectUri",e])}return ko(Lo.DEEPL_CREATE_ACCOUNT,t)}return Lo.DEEPL_CREATE_ACCOUNT;case Po.ms_office_addins_ads:return Lo.MSOFFICE_ADDINS_ADS;case Po.get_free_account:return Lo.GET_FREE_ACCOUNT;case Po.learn_why_geo_blocked:return Lo.LEARN_WHY_GEO_BLOCKED;default:return}}function xo(e){const t=Co(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];t.id&&chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function ko(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const Do=Object.prototype.toString;function Uo(e){switch(Do.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Jo(e,Error)}}function Mo(e,t){return Do.call(e)===`[object ${t}]`}function Go(e){return Mo(e,"ErrorEvent")}function $o(e){return Mo(e,"DOMError")}function Vo(e){return Mo(e,"String")}function Fo(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function jo(e){return null===e||Fo(e)||"object"!=typeof e&&"function"!=typeof e}function Wo(e){return Mo(e,"Object")}function Ho(e){return"undefined"!=typeof Event&&Jo(e,Event)}function qo(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Bo(e){return"number"==typeof e&&e!=e}function Jo(e,t){try{return e instanceof t}catch(e){return!1}}function zo(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Yo(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Xo(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Ko(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{zo(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Qo(e,t,n=!1){return!!Vo(e)&&(Mo(t,"RegExp")?t.test(e):!!Vo(t)&&(n?e===t:e.includes(t)))}function Zo(e,t=[],n=!1){return t.some((t=>Qo(e,t,n)))}function ei(e,t,n=250,r,o,i,a){if(!(i.exception&&i.exception.values&&a&&Jo(a.originalException,Error)))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var l,c;s&&(i.exception.values=(l=ti(e,t,o,a.originalException,r,i.exception.values,s,0),c=n,l.map((e=>(e.value&&(e.value=Yo(e.value,c)),e)))))}function ti(e,t,n,r,o,i,a,s){if(i.length>=n+1)return i;let l=[...i];if(Jo(r[o],Error)){ni(a,s);const i=e(t,r[o]),c=l.length;ri(i,o,c,s),l=ti(e,t,n,r[o],o,[i,...l],i,c)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(Jo(r,Error)){ni(a,s);const c=e(t,r),u=l.length;ri(c,`errors[${i}]`,u,s),l=ti(e,t,n,r,o,[c,...l],c,u)}})),l}function ni(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function ri(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function oi(e){return e&&e.Math==Math?e:void 0}const ii="object"==typeof globalThis&&oi(globalThis)||"object"==typeof window&&oi(window)||"object"==typeof self&&oi(self)||"object"==typeof global&&oi(global)||function(){return this}()||{};function ai(){return ii}function si(e,t,n){const r=n||ii,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const li=ai();function ci(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,a=0;const s=" > ",l=s.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(c=ui(n,u),!("html"===c||i>1&&a+o.length*l+c.length>=d));)o.push(c),a+=c.length,n=n.parentNode;return o.reverse().join(s)}catch(e){return"<unknown>"}}function ui(e,t){const n=e,r=[];let o,i,a,s,l;if(!n||!n.tagName)return"";if(li.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(c&&c.length)c.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&Vo(o))for(i=o.split(/\s+/),l=0;l<i.length;l++)r.push(`.${i[l]}`);const u=["aria-label","type","name","title","alt"];for(l=0;l<u.length;l++)a=u[l],s=n.getAttribute(a),s&&r.push(`[${a}="${s}"]`);return r.join("")}function di(){try{return li.document.location.href}catch(e){return""}}function pi(e){return li.document&&li.document.querySelector?li.document.querySelector(e):null}function gi(e){if(!li.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const hi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,fi=["debug","info","warn","error","log","assert","trace"],_i={};function mi(e){if(!("console"in ii))return e();const t=ii.console,n={},r=Object.keys(_i);r.forEach((e=>{const r=_i[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const vi=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return hi?fi.forEach((n=>{t[n]=(...t)=>{e&&mi((()=>{ii.console[n](`Sentry Logger [${n}]:`,...t)}))}})):fi.forEach((e=>{t[e]=()=>{}})),t}(),Ti=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function yi(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:a,protocol:s,publicKey:l}=e;return`${s}://${l}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${a}`}function Si(e){const t=Ti.exec(e);if(!t)return void mi((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i,a="",s]=t.slice(1);let l="",c=s;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return Ei({host:i,pass:o,path:l,projectId:c,port:a,protocol:n,publicKey:r})}function Ei(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ii(e){const t="string"==typeof e?Si(e):Ei(e);if(t&&function(e){if(!hi)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(vi.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(vi.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(vi.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(vi.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Ai extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function bi(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&Oi(o,r),e[t]=o}function wi(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){hi&&vi.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Oi(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,wi(e,"__sentry_original__",t)}catch(e){}}function Ri(e){return e.__sentry_original__}function Ni(e){if(Uo(e))return{message:e.message,name:e.name,stack:e.stack,...Li(e)};if(Ho(e)){const t={type:e.type,target:Pi(e.target),currentTarget:Pi(e.currentTarget),...Li(e)};return"undefined"!=typeof CustomEvent&&Jo(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Pi(e){try{return t=e,"undefined"!=typeof Element&&Jo(t,Element)?ci(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Li(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Ci(e){return xi(e,new Map)}function xi(e,t){if(function(e){if(!Wo(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=xi(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(xi(e,t))})),r}return e}const ki=/\(error: (.*)\)/,Di=/captureMessage|captureException/;function Ui(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const i=ki.test(n)?n.replace(ki,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Di.test(t[t.length-1].function||"")&&(t.pop(),Di.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const Mi="<anonymous>";function Gi(e){try{return e&&"function"==typeof e&&e.name||Mi}catch(e){return Mi}}const $i={},Vi={};function Fi(e,t){$i[e]=$i[e]||[],$i[e].push(t)}function ji(e,t){Vi[e]||(t(),Vi[e]=!0)}function Wi(e,t){const n=e&&$i[e];if(n)for(const r of n)try{r(t)}catch(t){hi&&vi.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Gi(r)}\nError:`,t)}}function Hi(e){const t="console";Fi(t,e),ji(t,qi)}function qi(){"console"in ii&&fi.forEach((function(e){e in ii.console&&bi(ii.console,e,(function(t){return _i[e]=t,function(...t){Wi("console",{args:t,level:e});const n=_i[e];n&&n.apply(ii.console,t)}}))}))}function Bi(){const e=ii,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Ji(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function zi(e){const{message:t,event_id:n}=e;if(t)return t;const r=Ji(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Yi(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Xi(e,t){const n=Ji(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Ki(e){if(e&&e.__sentry_captured__)return!0;try{wi(e,"__sentry_captured__",!0)}catch(e){}return!1}function Qi(e){return Array.isArray(e)?e:[e]}const Zi=ii;let ea,ta,na;function ra(e){Fi("dom",e),ji("dom",oa)}function oa(){if(!Zi.document)return;const e=Wi.bind(null,"dom"),t=ia(e,!0);Zi.document.addEventListener("click",t,!1),Zi.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Zi[t]&&Zi[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(bi(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=i[n]=i[n]||{refCount:0};if(!a.handler){const r=ia(e);a.handler=r,t.call(this,n,r,o)}a.refCount++}catch(e){}return t.call(this,n,r,o)}})),bi(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function ia(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;wi(n,"_sentryCaptured",!0),r&&!r._sentryId&&wi(r,"_sentryId",Bi());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==ta)return!1;try{if(!e.target||e.target._sentryId!==na)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),ta=n.type,na=r?r._sentryId:void 0}clearTimeout(ea),ea=Zi.setTimeout((()=>{na=void 0,ta=void 0}),1e3)}}const aa=ai();function sa(){if(!("fetch"in aa))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function la(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function ca(){if("string"==typeof EdgeRuntime)return!0;if(!sa())return!1;if(la(aa.fetch))return!0;let e=!1;const t=aa.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=la(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){hi&&vi.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function ua(e){const t="fetch";Fi(t,e),ji(t,da)}function da(){ca()&&bi(ii,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:ga(t),method:pa(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:ga(t),method:pa(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Wi("fetch",{...o}),e.apply(ii,t).then((e=>(Wi("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Wi("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function pa(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ga(e){return"string"==typeof e?e:e?pa(e,"url")?e.url:e.toString?e.toString():"":""}let ha=null;function fa(e){const t="error";Fi(t,e),ji(t,_a)}function _a(){ha=ii.onerror,ii.onerror=function(e,t,n,r,o){return Wi("error",{column:r,error:o,line:n,msg:e,url:t}),!(!ha||ha.__SENTRY_LOADER__)&&ha.apply(this,arguments)},ii.onerror.__SENTRY_INSTRUMENTED__=!0}let ma=null;function va(e){const t="unhandledrejection";Fi(t,e),ji(t,Ta)}function Ta(){ma=ii.onunhandledrejection,ii.onunhandledrejection=function(e){return Wi("unhandledrejection",e),!(ma&&!ma.__SENTRY_LOADER__)||ma.apply(this,arguments)},ii.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ya=ai();const Sa=ii;let Ea;function Ia(e){const t="history";Fi(t,e),ji(t,Aa)}function Aa(){if(!function(){const e=ya.chrome,t=e&&e.app&&e.app.runtime,n="history"in ya&&!!ya.history.pushState&&!!ya.history.replaceState;return!t&&n}())return;const e=Sa.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Ea,t=String(n);Ea=t;Wi("history",{from:e,to:t})}return e.apply(this,t)}}Sa.onpopstate=function(...t){const n=Sa.location.href,r=Ea;Ea=n;if(Wi("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},bi(Sa.history,"pushState",t),bi(Sa.history,"replaceState",t)}const ba=ii,wa="__sentry_xhr_v3__";function Oa(e){Fi("xhr",e),ji("xhr",Ra)}function Ra(){if(!ba.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;bi(e,"open",(function(e){return function(...t){const n=Date.now(),r=Vo(t[0])?t[0].toUpperCase():void 0,o=function(e){if(Vo(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[wa]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[wa];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Wi("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?bi(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),bi(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[wa];return o&&Vo(n)&&Vo(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),bi(e,"send",(function(e){return function(...t){const n=this[wa];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Wi("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Na(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Pa(){return"undefined"!=typeof window&&(!Na()||void 0!==ii.process&&"renderer"===ii.process.type)}function La(e,t=100,n=1/0){try{return xa("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ca(e,t=3,n=102400){const r=La(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ca(e,t-1,n):r;var o}function xa(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!Bo(t))return t;const s=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(zo(t))return"[VueViewModel]";if(Wo(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Gi(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return s.replace("object ","");if(i(t))return"[Circular ~]";const c=t;if(c&&"function"==typeof c.toJSON)try{return xa("",c.toJSON(),l-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Ni(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=xa(e,t,l-1,r,o),d++}return a(t),u}const ka=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Da(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Ua(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function Ma(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ka.exec(t);return n?n.slice(1):[]}(e)[2]}var Ga;function $a(e){return new Fa((t=>{t(e)}))}function Va(e){return new Fa(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Ga||(Ga={}));class Fa{constructor(e){Fa.prototype.__init.call(this),Fa.prototype.__init2.call(this),Fa.prototype.__init3.call(this),Fa.prototype.__init4.call(this),this._state=Ga.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Fa(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Fa(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Ga.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ga.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ga.PENDING&&(qo(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ga.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ga.RESOLVED&&e[1](this._value),this._state===Ga.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ja(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Va(new Ai("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Fa(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{$a(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}function Wa(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Ha=["fatal","error","warning","log","info","debug"];function qa(e){return"warn"===e?"warning":Ha.includes(e)?e:"log"}function Ba(){return Date.now()/1e3}const Ja=function(){const{performance:e}=ii;if(!e||!e.now)return Ba;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),za=(()=>{const{performance:e}=ii;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,a=e.timing&&e.timing.navigationStart,s="number"==typeof a?Math.abs(a+n-r):t;return i||s<t?o<=s?e.timeOrigin:a:r})(),Ya="baggage",Xa="sentry-",Ka=/^sentry-/;function Qa(e){if(!Vo(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=es(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=es(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Ka)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Za(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===r?o:`${e},${o}`;return i.length>8192?(hi&&vi.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Xa}${t}`]=n),e)),{}))}function es(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const ts=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ns(e){if(!e)return;const t=e.match(ts);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function rs(e,t){const n=ns(e),r=Qa(t),{traceId:o,parentSpanId:i,parentSampled:a}=n||{};return n?{traceId:o||Bi(),parentSpanId:i||Bi().substring(16),spanId:Bi().substring(16),sampled:a,dsc:r||{}}:{traceId:o||Bi(),spanId:Bi().substring(16)}}function os(e=Bi(),t=Bi().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function is(e,t=[]){return[e,t]}function as(e,t){const[n,r]=e;return[n,[...r,t]]}function ss(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function ls(e,t){return(t||new TextEncoder).encode(e)}function cs(e,t){const[n,r]=e;let o=JSON.stringify(n);function i(e){"string"==typeof o?o="string"==typeof e?o+e:[ls(o,t),e]:o.push("string"==typeof e?ls(e,t):e)}for(const e of r){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(La(n))}i(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function us(e,t){const n="string"==typeof e.data?ls(e.data,t):e.data;return[Ci({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const ds={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function ps(e){return ds[e]}function gs(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function hs(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:yi(r)},...o&&{trace:Ci({...o})}}}function fs(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function _s(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ms(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),a=parseInt(t,10),s=1e3*(isNaN(a)?60:a);if(n)for(const e of n.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(o[e]=r+s);else o.all=r+s}else a?o.all=r+fs(a,r):429===t&&(o.all=r+6e4);return o}function vs(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Ts(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const ys="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ss="production";function Es(){return si("globalEventProcessors",(()=>[]))}function Is(e){Es().push(e)}function As(e,t,n,r=0){return new Fa(((o,i)=>{const a=e[r];if(null===t||"function"!=typeof a)o(t);else{const s=a({...t},n);ys&&a.id&&null===s&&vi.log(`Event processor "${a.id}" dropped event`),qo(s)?s.then((t=>As(e,t,n,r+1).then(o))).then(null,i):As(e,s,n,r+1).then(o).then(null,i)}}))}function bs(e){const t=Ja(),n={sid:Bi(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Ci({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ws(n,e),n}function ws(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ja(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Bi()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Os(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),ws(e,n)}function Rs(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:a,tags:s,origin:l}=Cs(e);return Ci({data:r,op:o,parent_span_id:i,span_id:t,status:a,tags:s,trace_id:n,origin:l})}function Ns(e){const{traceId:t,spanId:n}=e.spanContext();return os(t,n,xs(e))}function Ps(e){return"number"==typeof e?Ls(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ls(e.getTime()):Ja()}function Ls(e){return e>9999999999?e/1e3:e}function Cs(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function xs(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function ks(e,t,n,r,o,i){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Bi(),timestamp:t.timestamp||Ba()},c=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Ss);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Yo(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=Yo(a.value,i));const s=e.request;s&&s.url&&(s.url=Yo(s.url,i))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,c),void 0===t.type&&function(e,t){const n=ii._sentryDebugIds;if(!n)return;let r;const o=Ds.get(t);o?r=o:(r=new Map,Ds.set(t,r));const i=Object.keys(n).reduce(((e,o)=>{let i;const a=r.get(o);a?i=a:(i=t(o),r.set(o,i));for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(l,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new rl;return n.update(t),n}(r,n.captureContext);n.mechanism&&Xi(l,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){nl||(nl=new rl);return nl}().getScopeData();if(i){el(p,i.getScopeData())}if(u){el(p,u.getScopeData())}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),Zs(l,p);return As([...d,...Es(),...p.eventProcessors],l,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:La(e.data,t,n)}})))},...e.user&&{user:La(e.user,t,n)},...e.contexts&&{contexts:La(e.contexts,t,n)},...e.extra&&{extra:La(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=La(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Cs(e).data;return r&&(e.data=La(r,t,n)),e})));return r}(e,a,s):e)))}const Ds=new WeakMap;function Us(e){if(e)return function(e){return e instanceof rl||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ms.includes(e)))}(e)?{captureContext:e}:e}const Ms=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Gs(e,t){return dl().captureException(e,Us(t))}function $s(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return dl().captureMessage(e,n,r)}function Vs(e,t){return dl().captureEvent(e,t)}function Fs(e,t){dl().addBreadcrumb(e,t)}function js(e,t){dl().setContext(e,t)}function Ws(...e){const t=dl();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Hs(){return dl().getClient()}function qs(){return dl().getScope()}function Bs(e){const t=Hs(),n=pl(),r=qs(),{release:o,environment:i=Ss}=t&&t.getOptions()||{},{userAgent:a}=ii.navigator||{},s=bs({release:o,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),l=n.getSession();return l&&"ok"===l.status&&ws(l,{status:"exited"}),Js(),n.setSession(s),r.setSession(s),s}function Js(){const e=pl(),t=qs(),n=t.getSession()||e.getSession();n&&Os(n),zs(),e.setSession(),t.setSession()}function zs(){const e=pl(),t=qs(),n=Hs(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Ys(e=!1){e?Js():zs()}function Xs(e){return e.transaction}function Ks(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},a=Ci({environment:r.environment||Ss,release:r.release,user_segment:i,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function Qs(e){const t=Hs();if(!t)return{};const n=Ks(Cs(e).trace_id||"",t,qs()),r=Xs(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:i,source:a}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const s=Cs(r);return a&&"url"!==a&&(n.transaction=s.description),n.sampled=String(xs(r)),t.emit&&t.emit("createDsc",n),n}function Zs(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,transactionName:s}=t,l=Ci(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Ci(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Ci(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Ci(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});a&&(e.level=a);s&&(e.transaction=s)}(e,t),r&&function(e,t){e.contexts={trace:Rs(t),...e.contexts};const n=Xs(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Qs(t),...e.sdkProcessingMetadata};const r=Cs(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?Qi(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function el(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,sdkProcessingMetadata:s,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:p,transactionName:g,span:h}=t;tl(e,"extra",n),tl(e,"tags",r),tl(e,"user",o),tl(e,"contexts",i),tl(e,"sdkProcessingMetadata",s),a&&(e.level=a),g&&(e.transactionName=g),h&&(e.span=h),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function tl(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let nl;class rl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ol()}static clone(e){return e?e.clone():new rl}clone(){const e=new rl;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ws(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof rl){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Wo(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ol(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Ba(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:i,_level:a,_fingerprint:s,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:i,level:a,fingerprint:s||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){Zs(e,this.getScopeData());return As([...n,...Es(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Bi();if(!this._client)return vi.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Bi();if(!this._client)return vi.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Bi();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(vi.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function ol(){return{traceId:Bi(),spanId:Bi().substring(16)}}const il="7.120.3",al=parseFloat(il),sl=100;class ll{constructor(e,t,n,r=al){let o,i;this._version=r,t?o=t:(o=new rl,o.setClient(e)),n?i=n:(i=new rl,i.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return qo(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Bi(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Bi(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Bi();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=sl}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const a={timestamp:Ba(),...e},s=o?mi((()=>o(a,t))):a;null!==s&&(r.emit&&r.emit("beforeAddBreadcrumb",s,t),n.addBreadcrumb(s,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=ul(this);try{e(this)}finally{ul(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return ys&&vi.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(ys&&!n){this.getClient()?vi.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):vi.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&Os(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=Ss}=n&&n.getOptions()||{},{userAgent:i}=ii.navigator||{},a=bs({release:r,environment:o,user:t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&ws(s,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=cl().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);ys&&vi.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function cl(){return ii.__SENTRY__=ii.__SENTRY__||{extensions:{},hub:void 0},ii}function ul(e){const t=cl(),n=hl(t);return fl(t,e),n}function dl(){const e=cl();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=cl()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!hl(e).isOlderThan(al)||fl(e,new ll);var t;return hl(e)}(e)}function pl(){return dl().getIsolationScope()}function gl(e,t={}){const n=cl();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function hl(e){return si("hub",(()=>new ll),e)}function fl(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function _l(e){return(e||dl()).getScope().getTransaction()}const ml=ns;let vl=!1;function Tl(){const e=_l();if(e){const t="internal_error";ys&&vi.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var yl;function Sl(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}Tl.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(yl||(yl={}));const El=Sl;function Il(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=Sl(t);"unknown_error"!==n&&e.setStatus(n)}function Al(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(qo(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function bl(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Hs(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function wl(e){if(!bl())return;const t=Nl(e),n=dl(),r=e.scope?e.scope.getSpan():Ol();if(e.onlyIfParent&&!r)return;const o=(e.scope||qs()).clone();return Rl(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Ol(){return qs().getSpan()}function Rl(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!bl())return;const i=pl();let a;if(t&&!r)a=t.startChild(n);else if(t){const r=Qs(t),{traceId:o,spanId:i}=t.spanContext(),s=xs(t);a=e.startTransaction({traceId:o,parentSpanId:i,parentSampled:s,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:s,sampled:l}={...i.getPropagationContext(),...o.getPropagationContext()};a=e.startTransaction({traceId:t,parentSpanId:s,parentSampled:l,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(a),function(e,t,n){e&&(wi(e,Ll,n),wi(e,Pl,t))}(a,o,i),a}function Nl(e){if(e.startTime){const t={...e};return t.startTimestamp=Ps(e.startTime),delete t.startTime,t}return e}const Pl="_sentryScope",Ll="_sentryIsolationScope";let Cl;function xl(e){return Cl?Cl.get(e):void 0}function kl(e){const t=xl(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(Ci(r));return n}const Dl="sentry.source",Ul="sentry.sample_rate",Ml="sentry.op",Gl="sentry.origin";class $l{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Vl{constructor(e={}){this._traceId=e.traceId||Bi(),this._spanId=e.spanId||Bi().substring(16),this._startTime=e.startTimestamp||Ja(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Gl]:e.origin||"manual",[Ml]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Ml]}set op(e){this.setAttribute(Ml,e)}get origin(){return this._attributes[Gl]}set origin(e){this.setAttribute(Gl,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new Vl({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Xs(this);if(t.transaction=n,ys&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Cs(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;vi.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Il(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Xs(this);if(ys&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&vi.log(e.replace("Starting","Finishing"))}this._endTime=Ps(e)}toTraceparent(){return Ns(this)}toContext(){return Ci({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Rs(this)}getSpanJSON(){return Ci({data:this._getData(),description:this._name,op:this._attributes[Ml],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Gl],_metrics_summary:kl(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Fl extends Vl{constructor(e,t){super(e),this._contexts={},this._hub=t||dl(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Dl]&&{source:this._attributes[Dl]},...this._attributes[Ul]&&{sampleRate:this._attributes[Ul]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Dl,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new $l(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Ps(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Ci({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Qs(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(ys&&vi.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return ys&&vi.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Cs(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Cs(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(i=this)[Pl],isolationScope:i[Ll]};var i;const{metadata:a}=this,{source:s}=a,l={contexts:{...this._contexts,trace:Rs(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:r,capturedSpanIsolationScope:o,...Ci({dynamicSamplingContext:Qs(this)})},_metrics_summary:kl(this),...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(ys&&vi.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),l.measurements=this._measurements),ys&&vi.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),l}}const jl={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Wl=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Hl extends $l{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Cs(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class ql extends Fl{constructor(e,t,n=jl.idleTimeout,r=jl.finalTimeout,o=jl.heartbeatInterval,i=!1,a=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Wl[4],this._autoFinishAllowed=!a,i&&(ys&&vi.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Wl[3],this.end())}),this._finalTimeout)}end(e){const t=Ps(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){ys&&vi.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Cs(e).timestamp||(e.setStatus("cancelled"),e.end(t),ys&&vi.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Cs(e),o=n&&n<t,i=(this._finalTimeout+this._idleTimeout)/1e3,a=r&&n&&r-n<i;if(ys){const t=JSON.stringify(e,void 0,2);o?a||vi.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):vi.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&a})),ys&&vi.log("[Tracing] flushing IdleTransaction")}else ys&&vi.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Hl(t,n,this.spanContext().spanId,e),ys&&vi.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Wl[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(ys&&vi.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Wl[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),ys&&vi.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,ys&&vi.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(ys&&vi.log(`[Tracing] popActivity ${e}`),delete this.activities[e],ys&&vi.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Ja();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Wl[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(ys&&vi.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Wl[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){ys&&vi.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Bl(e,t,n){if(!bl(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Ul,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Ul,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Ul,Number(r))):(r=1,e.setAttribute(Ul,r)),Jl(r)?r?(e.sampled=Math.random()<r,e.sampled?(ys&&vi.log(`[Tracing] starting ${e.op} transaction - ${Cs(e).description}`),e):(ys&&vi.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(ys&&vi.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(ys&&vi.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Jl(e){return Bo(e)||"number"!=typeof e&&"boolean"!=typeof e?(ys&&vi.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(ys&&vi.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function zl(){const e=this.getScope().getSpan();return e?{"sentry-trace":Ns(e)}:{}}function Yl(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",i=e.instrumenter||"sentry";o!==i&&(ys&&vi.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let a=new Fl(e,this);return a=Bl(a,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Xl(e,t,n,r,o,i,a,s=!1){const l=e.getClient(),c=l&&l.getOptions()||{};let u=new ql(t,e,n,r,a,o,s);return u=Bl(u,c,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),u.isRecording()&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l&&l.emit&&l.emit("startTransaction",u),u}function Kl(){const e=cl();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Yl),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=zl),vl||(vl=!0,fa(Tl),va(Tl)))}function Ql(e,t,n){const r=_l();r&&r.setMeasurement(e,t,n)}function Zl(e,t,n,r){const o=gs(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=hs(e,o,r,t);delete e.sdkProcessingMetadata;return is(a,[[{type:i},e]])}function ec(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function tc(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function nc(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${ec(e)}${e.projectId}/envelope/`}(e)}?${tc(e,r)}`}const rc=[];function oc(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?Qi(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),i=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==i){const[e]=o.splice(i,1);o.push(e)}return o}function ic(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function ac(e,t,n){if(n[t.name])ys&&vi.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===rc.indexOf(t.name)&&(t.setupOnce(Is,dl),rc.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}ys&&vi.log(`Integration installed: ${t.name}`)}}function sc(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function lc(e){return e.replace(/[^\w\-./]+/gi,"")}const cc=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function uc(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of cc)if(e===t)return n;return e}(t)),"")}function dc(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=yi(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return is(o,[i])}const pc="Not capturing exception because it's already been captured.";class gc{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ii(e.dsn):ys&&vi.warn("No DSN provided, client will not send events."),this._dsn){const t=nc(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Ki(e))return void(ys&&vi.log(pc));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const i=Fo(e)?e:String(e),a=jo(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(a.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&Ki(t.originalException))return void(ys&&vi.log(pc));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?ys&&vi.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ws(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):$a(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return ys&&vi.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];ac(this,e,this._integrations),t||ic(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Zl(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=as(n,us(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=gs(n);return is({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:yi(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;ys&&vi.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(e){ys&&vi.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=dc(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&ac(e,t,n)})),n}(this,e),ic(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(ws(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Fa((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=pl()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),ks(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:i,dsc:a}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...e.contexts};const s=a||Ks(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(ys){const t=e;"log"===t.logLevel?vi.log(t.message):vi.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=fc(e),a=hc(e),s=e.type||"error",l=`before send for type \`${s}\``;if(a&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Va(new Ai(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const c="replay_event"===s?"replay":s,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",c,e),new Ai("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(hc(t)&&r)return r(t,n);if(fc(t)&&o){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(qo(e))return e.then((e=>{if(!Wo(e)&&null!==e)throw new Ai(n);return e}),(e=>{throw new Ai(`${t} rejected with ${e}`)}));if(!Wo(e)&&null!==e)throw new Ai(n);return e}(o,l)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",c,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Ai(`${l} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!i&&o&&this._updateSessionFromEvent(o,r),i){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=r.transaction_info;if(i&&a&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...a,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Ai)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Ai(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{ys&&vi.error("Error while sending event:",e)}));ys&&vi.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function hc(e){return void 0===e.type}function fc(e){return"transaction"===e.type}function _c(e){const t=Hs();t&&t.addEventProcessor&&t.addEventProcessor(e)}const mc="c",vc="g",Tc="s",yc="d";const Sc={[mc]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[vc]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[yc]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[Tc]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function Ec(e){const t=dl().getStackTop();t.client=e,t.scope.setClient(e)}function Ic(e,t,n=ja(e.bufferSize||30)){let r={};function o(o){const i=[];if(ss(o,((t,n)=>{const o=ps(n);if(_s(r,o)){const r=Ac(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return $a();const a=is(o[0],i),s=t=>{ss(a,((n,r)=>{const o=Ac(n,r);e.recordDroppedEvent(t,ps(r),o)}))};return n.add((()=>t({body:cs(a,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ys&&vi.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ms(r,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Ai)return ys&&vi.error("Skipped sending event because buffer is full."),s("queue_overflow"),$a();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Ac(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function bc(e,t){ys&&vi.info(`[Offline]: ${e}`,t)}function wc(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,i=5e3;function a(e,n,r){return o=["replay_event","replay_recording","client_report"],!ss(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function s(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(bc("Attempting to send previously queued event"),c(e).catch((e=>{bc("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function l(){o||(s(i),i=Math.min(2*i,36e5))}async function c(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=fs(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return s(r),i=5e3,t}catch(t){if(r&&await a(e,t,i))return await r.insert(e),l(),bc("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&l(),{send:c,flush:e=>n.flush(e)}}}function Oc(e,t){let n;return ss(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Rc(e){return[{type:"span"},e]}function Nc(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Pc(e)===Pc(t)}(e,o)}function Pc(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Lc=new Map,Cc=new Set;function xc(e,t){return function(e){if(ii._sentryModuleMetadata)for(const t of Object.keys(ii._sentryModuleMetadata)){const n=ii._sentryModuleMetadata[t];if(Cc.has(t))continue;Cc.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Lc.set(e.filename,n);break}}}(e),Lc.get(t)}const kc="ModuleMetadata",Dc=()=>({name:kc,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{ss(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=xc(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Uc=sc(kc,Dc),Mc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Gc=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],$c="InboundFilters",Vc=(e={})=>({name:$c,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Mc],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Gc],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return ys&&vi.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${zi(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));ys&&0===t.length&&vi.error(`Could not extract message for event ${zi(e)}`);return t}(e).some((e=>Zo(e,t)))}(e,t.ignoreErrors))return ys&&vi.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${zi(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Zo(n,t)}(e,t.ignoreTransactions))return ys&&vi.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${zi(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=jc(e);return!!n&&Zo(n,t)}(e,t.denyUrls))return ys&&vi.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${zi(e)}.\nUrl: ${jc(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=jc(e);return!n||Zo(n,t)}(e,t.allowUrls))return ys&&vi.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${zi(e)}.\nUrl: ${jc(e)}`),!0;return!1}(t,i)?null:t}}),Fc=sc($c,Vc);function jc(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return ys&&vi.error(`Cannot extract url for event ${zi(e)}`),null}}let Wc;const Hc="FunctionToString",qc=new WeakMap,Bc=()=>({name:Hc,setupOnce(){Wc=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ri(this),n=qc.has(Hs())&&void 0!==t?t:this;return Wc.apply(n,e)}}catch(e){}},setup(e){qc.set(e,!0)}}),Jc=sc(Hc,Bc),zc="LinkedErrors",Yc=sc(zc,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:zc,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();ei(vs,i.stackParser,i.maxValueLength,n,t,e,r)}}}));var Xc=Object.freeze({__proto__:null,FunctionToString:Jc,InboundFilters:Fc,LinkedErrors:Yc});class Kc{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},i=Ja()){const a=Math.floor(i),s=t.replace(/[^\w\-.]+/gi,"_");const l=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[lc(n)]=uc(String(e[n])));return t}(o),c=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(Ci(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,s,c,l);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<a&&(d.timestamp=a)):(d={metric:new Sc[e](n),timestamp:a,metricType:e,name:s,unit:c,tags:l},this._buckets.set(u,d));!function(e,t,n,r,o,i){const a=Ol();if(a){const s=xl(a)||new Map,l=`${e}:${t}@${r}`,c=s.get(i);if(c){const[,e]=c;s.set(i,[l,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else s.set(i,[l,{min:n,max:n,count:1,sum:n,tags:o}]);Cl||(Cl=new WeakMap),Cl.set(a,s)}}(e,s,"string"==typeof n?d.metric.weight-p:n,c,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Qc="MetricsAggregator",Zc=()=>({name:Qc,setupOnce(){},setup(e){e.metricsAggregator=new Kc(e)}});function eu(e,t,n,r={}){const o=Hs(),i=qs();if(o){if(!o.metricsAggregator)return void(ys&&vi.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:a,tags:s,timestamp:l}=r,{release:c,environment:u}=o.getOptions(),d=i.getTransaction(),p={};c&&(p.release=c),u&&(p.environment=u),d&&(p.transaction=Cs(d).description||""),ys&&vi.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,a,{...p,...s},l)}}const tu={increment:function(e,t=1,n){eu("c",e,t,n)},distribution:function(e,t,n){eu("d",e,t,n)},set:function(e,t,n){eu("s",e,t,n)},gauge:function(e,t,n){eu("g",e,t,n)},MetricsAggregator:sc(Qc,Zc),metricsAggregatorIntegration:Zc},nu=Xc,ru="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ou=ii;function iu(){ou.document?ou.document.addEventListener("visibilitychange",(()=>{const e=_l();if(ou.document.hidden&&e){const t="cancelled",{op:n,status:r}=Cs(e);ru&&vi.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):ru&&vi.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const au=(e,t,n)=>{let r,o;return i=>{t.value>=0&&(i||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},su=()=>ou.__WEB_VITALS_POLYFILL__?ou.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=ou.performance.timing,t=ou.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):ou.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],lu=()=>{const e=su();return e&&e.activationStart||0},cu=(e,t)=>{const n=su();let r="navigate";return n&&(r=ou.document&&ou.document.prerendering||lu()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},uu=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},du=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==ou.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ou.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let pu=-1;const gu=()=>(pu<0&&(ou.document&&ou.document.visibilityState&&(pu="hidden"!==ou.document.visibilityState||ou.document.prerendering?1/0:0),du((({timeStamp:e})=>{pu=e}),!0)),{get firstHiddenTime(){return pu}});let hu=0,fu=1/0,_u=0;const mu=e=>{e.forEach((e=>{e.interactionId&&(fu=Math.min(fu,e.interactionId),_u=Math.max(_u,e.interactionId),hu=_u?(_u-fu)/7+1:0)}))};let vu;const Tu=()=>{"interactionCount"in performance||vu||(vu=uu("event",mu,{type:"event",buffered:!0,durationThreshold:0}))},yu=()=>vu?hu:performance.interactionCount||0,Su=[],Eu={},Iu=e=>{const t=Su[Su.length-1],n=Eu[e.interactionId];if(n||Su.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Eu[t.id]=t,Su.push(t)}Su.sort(((e,t)=>t.latency-e.latency)),Su.splice(10).forEach((e=>{delete Eu[e.id]}))}},Au=(e,t)=>{t=t||{},Tu();const n=cu("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Iu(e),"first-input"===e.entryType){!Su.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Iu(e)}}));const t=(()=>{const e=Math.min(Su.length-1,Math.floor(yu()/50));return Su[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},i=uu("event",o,{durationThreshold:t.durationThreshold||40});r=au(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),du((()=>{o(i.takeRecords()),n.value<0&&yu()>0&&(n.value=0,n.entries=[]),r(!0)})))},bu={},wu=e=>{ou.document&&(ou.document.prerendering?addEventListener("prerenderingchange",(()=>wu(e)),!0):"complete"!==ou.document.readyState?addEventListener("load",(()=>wu(e)),!0):setTimeout(e,0))},Ou={},Ru={};let Nu,Pu,Lu,Cu,xu;function ku(e,t=!1){return ju("lcp",e,$u,Lu,t)}function Du(e,t){return Wu(e,t),Ru[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);uu(e,(t=>{Uu(e,{entries:t})}),t)}(e),Ru[e]=!0),Hu(e,t)}function Uu(e,t){const n=Ou[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){ru&&vi.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Gi(r)}\nError:`,t)}}function Mu(){return((e,t={})=>{const n=cu("CLS",0);let r,o=0,i=[];const a=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],a=i[i.length-1];o&&0!==i.length&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e]),o>n.value&&(n.value=o,n.entries=i,r&&r())}}))},s=uu("layout-shift",a);if(s){r=au(e,n,t.reportAllChanges);const o=()=>{a(s.takeRecords()),r(!0)};return du(o),o}})((e=>{Uu("cls",{metric:e}),Nu=e}),{reportAllChanges:!0})}function Gu(){return(e=>{const t=gu(),n=cu("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},i=e=>{e.forEach(o)},a=uu("first-input",i);r=au(e,n),a&&du((()=>{i(a.takeRecords()),a.disconnect()}),!0)})((e=>{Uu("fid",{metric:e}),Pu=e}))}function $u(){return(e=>{const t=gu(),n=cu("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-lu(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},i=uu("largest-contentful-paint",o);if(i){r=au(e,n);const t=()=>{bu[n.id]||(o(i.takeRecords()),i.disconnect(),bu[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{ou.document&&addEventListener(e,t,{once:!0,capture:!0})})),du(t,!0),t}})((e=>{Uu("lcp",{metric:e}),Lu=e}))}function Vu(){return((e,t)=>{t=t||{};const n=cu("TTFB"),r=au(e,n,t.reportAllChanges);wu((()=>{const e=su();if(e){if(n.value=Math.max(e.responseStart-lu(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{Uu("ttfb",{metric:e}),Cu=e}))}function Fu(){return Au((e=>{Uu("inp",{metric:e}),xu=e}))}function ju(e,t,n,r,o=!1){let i;return Wu(e,t),Ru[e]||(i=n(),Ru[e]=!0),r&&t({metric:r}),Hu(e,t,o?i:void 0)}function Wu(e,t){Ou[e]=Ou[e]||[],Ou[e].push(t)}function Hu(e,t,n){return()=>{n&&n();const r=Ou[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function qu(e){return"number"==typeof e&&isFinite(e)}function Bu(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Ju(e){return e/1e3}function zu(){return ou.addEventListener&&ou.performance}let Yu,Xu,Ku=0,Qu={};function Zu(){const e=zu();if(e&&za){e.mark&&ou.performance.mark("sentry-tracing-init");const t=ju("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Ju(za),r=Ju(t.startTime);ru&&vi.log("[Measurements] Adding FID"),Qu.fid={value:e.value,unit:"millisecond"},Qu["mark.fid"]={value:n+r,unit:"second"}}),Gu,Pu),n=function(e,t=!1){return ju("cls",e,Mu,Nu,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ru&&vi.log("[Measurements] Adding CLS"),Qu.cls={value:e.value,unit:""},Xu=t)}),!0),r=ku((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ru&&vi.log("[Measurements] Adding LCP"),Qu.lcp={value:e.value,unit:"millisecond"},Yu=t)}),!0),o=function(e){return ju("ttfb",e,Vu,Cu)}((({metric:e})=>{e.entries[e.entries.length-1]&&(ru&&vi.log("[Measurements] Adding TTFB"),Qu.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function ed(){Du("longtask",(({entries:e})=>{for(const t of e){const e=_l();if(!e)return;const n=Ju(za+t.startTime),r=Ju(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function td(){Du("event",(({entries:e})=>{for(const t of e){const e=_l();if(!e)return;if("click"===t.name){const n=Ju(za+t.startTime),r=Ju(t.duration),o={description:ci(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},i=gi(t.target);i&&(o.attributes={"ui.component_name":i}),e.startChild(o)}}}))}function nd(e,t){if(zu()&&za){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==rd[e.name])),o=Hs();if(!r||!o)return;const i=rd[r.name],a=o.getOptions(),s=Ju(za+r.startTime),l=Ju(n.value),c=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===c)return;const{routeName:u,parentContext:d,activeTransaction:p,user:g,replayId:h}=c,f=void 0!==g?g.email||g.id||g.ip_address:void 0,_=void 0!==p?p.getProfileId():void 0,m=new Vl({startTimestamp:s,endTimestamp:s+l,op:`ui.interaction.${i}`,name:ci(r.target),attributes:{release:a.release,environment:a.environment,transaction:u,...void 0!==f&&""!==f?{user:f}:{},...void 0!==_?{profile_id:_}:{},...void 0!==h?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),v=function(e,t,n){if(!bl(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ou.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Jl(r)?!0===r?n:!1===r?0:r*n:(ru&&vi.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,a,t);if(v&&Math.random()<v){const e=m?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=yi(t)),is(n,e.map(Rc))}([m],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{ru&&vi.error("Error while sending interaction:",e)}))}},ju("inp",n,Fu,xu);var n}(e,t);return()=>{n()}}return()=>{}}const rd={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function od(e){const t=zu();if(!t||!ou.performance.getEntries||!za)return;ru&&vi.log("[Tracing] Adding & adjusting spans using Performance API");const n=Ju(za),r=t.getEntries(),{op:o,start_timestamp:i}=Cs(e);if(r.slice(Ku).forEach((t=>{const r=Ju(t.startTime),o=Ju(t.duration);if(!("navigation"===e.op&&i&&n+r<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{id(e,t,r,n)})),id(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),id(e,t,"fetch",n,"cache","domainLookupStart"),id(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Bu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Ju(t.requestStart),endTimestamp:n+Ju(t.responseEnd)}),Bu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Ju(t.responseStart),endTimestamp:n+Ju(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const i=o+n,a=i+r;Bu(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,r,o,n);const i=gu(),a=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&a&&(ru&&vi.log("[Measurements] Adding FP"),Qu.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(ru&&vi.log("[Measurements] Adding FCP"),Qu.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=Wa(n),s={};ad(s,t,"transferSize","http.response_transfer_size"),ad(s,t,"encodedBodySize","http.response_content_length"),ad(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);a.protocol&&(s["url.scheme"]=a.protocol.split(":").pop());a.host&&(s["server.address"]=a.host);s["url.same_origin"]=n.includes(ou.location.origin);const l=i+r,c=l+o;Bu(e,{description:n.replace(ou.location.origin,""),endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:l,data:s})}(e,t,t.name,r,o,n)}})),Ku=Math.max(r.length-1,0),function(e){const t=ou.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),qu(n.rtt)&&(Qu["connection.rtt"]={value:n.rtt,unit:"millisecond"}));qu(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);qu(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=su();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(ru&&vi.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Qu),["fcp","fp","lcp"].forEach((e=>{if(!Qu[e]||!i||n>=i)return;const t=Qu[e].value,r=n+Ju(t),o=Math.abs(1e3*(r-i)),a=o-t;ru&&vi.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${a})`),Qu[e].value=o}));const t=Qu["mark.fid"];t&&Qu.fid&&(Bu(e,{description:"first input delay",endTimestamp:t.value+Ju(Qu.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Qu["mark.fid"]),"fcp"in Qu||delete Qu.cls,Object.keys(Qu).forEach((e=>{Ql(e,Qu[e].value,Qu[e].unit)})),function(e){Yu&&(ru&&vi.log("[Measurements] Adding LCP Data"),Yu.element&&e.setTag("lcp.element",ci(Yu.element)),Yu.id&&e.setTag("lcp.id",Yu.id),Yu.url&&e.setTag("lcp.url",Yu.url.trim().slice(0,200)),e.setTag("lcp.size",Yu.size));Xu&&Xu.sources&&(ru&&vi.log("[Measurements] Adding CLS Data"),Xu.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,ci(t.node)))))}(e)}Yu=void 0,Xu=void 0,Qu={}}function id(e,t,n,r,o,i){const a=i?t[i]:t[`${n}End`],s=t[`${n}Start`];s&&a&&Bu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+Ju(s),endTimestamp:r+Ju(a)})}function ad(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}function sd(e,t,n,r,o="auto.http.browser"){if(!bl()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Il(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const a=qs(),s=Hs(),{method:l,url:c}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(c),d=u?Wa(u).host:void 0,p=i?wl({name:`${l} ${c}`,onlyIfParent:!0,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[Gl]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&s){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const i=o||n.getSpan(),a=pl(),{traceId:s,spanId:l,sampled:c,dsc:u}={...a.getPropagationContext(),...n.getPropagationContext()},d=i?Ns(i):os(s,l,c),p=Za(u||(i?Qs(i):Ks(s,t,n))),g=r.headers||("undefined"!=typeof Request&&Jo(e,Request)?e.headers:void 0);if(g){if("undefined"!=typeof Headers&&Jo(g,Headers)){const e=new Headers(g);return e.append("sentry-trace",d),p&&e.append(Ya,p),e}if(Array.isArray(g)){const e=[...g,["sentry-trace",d]];return p&&e.push([Ya,p]),e}{const e="baggage"in g?g.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...g,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,s,a,n,p)}return p}const ld=["localhost",/^\/(?!\/)/],cd={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:ld,tracePropagationTargets:ld};function ud(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:i,enableHTTPTimings:a}={traceFetch:cd.traceFetch,traceXHR:cd.traceXHR,...e},s="function"==typeof i?i:e=>!0,l=e=>function(e,t){return Zo(e,t||ld)}(e,r||o),c={};t&&ua((e=>{const t=sd(e,s,l,c);if(t){const n=gd(e.fetchData.url),r=n?Wa(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}a&&t&&dd(t)})),n&&Oa((e=>{const t=function(e,t,n,r){const o=e.xhr,i=o&&o[wa];if(!bl()||!o||o.__sentry_own_request__||!i)return;const a=t(i.url);if(e.endTimestamp&&a){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(Il(t,i.status_code),t.end(),delete r[e]))}const s=qs(),l=pl(),c=gd(i.url),u=c?Wa(c).host:void 0,d=a?wl({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":c,url:i.url,"server.address":u,[Gl]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Hs();if(o.setRequestHeader&&n(i.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...l.getPropagationContext(),...s.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Ya,n)}catch(e){}}(o,d?Ns(d):os(e,t,n),Za(r||(d?Qs(d):Ks(e,p,s))))}return d}(e,s,l,c);a&&t&&dd(t)}))}function dd(e){const{url:t}=Cs(e).data||{};if(!t||"string"!=typeof t)return;const n=Du("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!za)return r;return[...r,["http.request.redirect_start",pd(e.redirectStart)],["http.request.fetch_start",pd(e.fetchStart)],["http.request.domain_lookup_start",pd(e.domainLookupStart)],["http.request.domain_lookup_end",pd(e.domainLookupEnd)],["http.request.connect_start",pd(e.connectStart)],["http.request.secure_connection_start",pd(e.secureConnectionStart)],["http.request.connection_end",pd(e.connectEnd)],["http.request.request_start",pd(e.requestStart)],["http.request.response_start",pd(e.responseStart)],["http.request.response_end",pd(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function pd(e=0){return((za||performance.timeOrigin)+e)/1e3}function gd(e){try{return new URL(e,ou.location.origin).href}catch(e){return}}const hd={...jl,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!ou||!ou.location)return void(ru&&vi.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=ou.location.href;t&&(r=e({name:ou.location.pathname,startTimestamp:za?za/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Ia((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:ou.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...cd};function fd(e){const t=pi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function _d(e){const t=e.attributes&&e.attributes[Dl],n=e.data&&e.data[Dl],r=e.metadata&&e.metadata.source;return t||n||r}const md={...jl,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...cd};function vd(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Ol();return"pageload"===(n&&Cs(n).op)?n:void 0}function Td(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Ol();return"navigation"===(n&&Cs(n).op)?n:void 0}function yd(e){const t=pi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Sd=10;function Ed(e){const t=e.attributes&&e.attributes[Dl],n=e.data&&e.data[Dl],r=e.metadata&&e.metadata.source;return t||n||r}const Id=ii;let Ad=0;function bd(){return Ad>0}function wd(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(Ri(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>wd(e,t)));return e.apply(this,r)}catch(e){throw Ad++,setTimeout((()=>{Ad--})),Ws((r=>{r.addEventProcessor((e=>(t.mechanism&&(Yi(e,void 0),Xi(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Gs(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}Oi(r,e),wi(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Od="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Rd(e,t){const n=Pd(e,t),r={type:t&&t.name,value:Cd(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Nd(e,t){return{exception:{values:[Rd(e,t)]}}}function Pd(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Ld.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Ld=/Minified React error #\d+;/i;function Cd(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function xd(e,t,n,r){const o=Dd(e,t,n&&n.syntheticException||void 0,r);return Xi(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),$a(o)}function kd(e,t,n="info",r,o){const i=Ud(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),$a(i)}function Dd(e,t,n,r,o){let i;if(Go(t)&&t.error){return Nd(e,t.error)}if($o(t)||Mo(t,"DOMException")){const o=t;if("stack"in t)i=Nd(e,t);else{const t=o.name||($o(o)?"DOMError":"DOMException"),a=o.message?`${t}: ${o.message}`:t;i=Ud(e,a,n,r),Yi(i,a)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(Uo(t))return Nd(e,t);if(Wo(t)||Ho(t)){return i=function(e,t,n,r){const o=Hs(),i=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:Ho(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Md(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ca(t,i)}};if(n){const t=Pd(e,n);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,n,o),Xi(i,{synthetic:!0}),i}return i=Ud(e,t,n,r),Yi(i,`${t}`),Xi(i,{synthetic:!0}),i}function Ud(e,t,n,r){const o={};if(r&&n){const r=Pd(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Fo(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Md(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Ni(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Yo(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Yo(r,t)}return""}(e),r=t?"promise rejection":"exception";if(Go(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(Ho(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Gd(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:yi(r)}},i=function(e){return[{type:"user_report"},e]}(e);return is(o,[i])}class $d extends gc{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:il}))),version:il}),e._metadata=o}(e,"browser",["browser"],Id.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Id.document&&Id.document.addEventListener("visibilitychange",(()=>{"hidden"===Id.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return xd(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return kd(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Od&&vi.warn("SDK not enabled, will not capture user feedback."));const t=Gd(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Od&&vi.log("No outcomes to send"));if(!this._dsn)return void(Od&&vi.log("No dsn provided, will not send outcomes"));Od&&vi.log("Sending outcomes:",e);const t=(n=e,is((r=this._options.tunnel&&yi(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:Ba(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let Vd;function Fd(e,t=function(){if(Vd)return Vd;if(la(Id.fetch))return Vd=Id.fetch.bind(Id);const e=Id.document;let t=Id.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Od&&vi.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Vd=t.bind(Id)}()){let n=0,r=0;return Ic(e,(function(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Vd=void 0,n-=i,r--,Va(e)}}))}function jd(e){return Ic(e,(function(t){return new Fa(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Wd="?";function Hd(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const qd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Bd=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jd=[30,e=>{const t=qd.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Bd.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=ip(t[1]||Wd,t[2]);return Hd(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],zd=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yd=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xd=[50,e=>{const t=zd.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Yd.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Wd;return[n,e]=ip(n,e),Hd(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Kd=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Qd=[40,e=>{const t=Kd.exec(e);return t?Hd(t[2],t[1]||Wd,+t[3],t[4]?+t[4]:void 0):void 0}],Zd=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ep=[10,e=>{const t=Zd.exec(e);return t?Hd(t[2],t[3]||Wd,+t[1]):void 0}],tp=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,np=[20,e=>{const t=tp.exec(e);return t?Hd(t[5],t[3]||t[4]||Wd,+t[1],+t[2]):void 0}],rp=[Jd,Xd,Qd],op=Ui(...rp),ip=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Wd,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ap=1024,sp="Breadcrumbs",lp=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:sp,setupOnce(){},setup(e){t.console&&Hi(function(e){return function(t){if(Hs()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:qa(t.level),message:Ko(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Ko(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Fs(n,{input:t.args,level:t.level})}}(e)),t.dom&&ra(function(e,t){return function(n){if(Hs()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>ap&&(Od&&vi.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=ap),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=ci(t,{keyAttrs:i,maxStringLength:a}),o=gi(t)}catch(e){r="<unknown>"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};o&&(s.data={"ui.component_name":o}),Fs(s,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Oa(function(e){return function(t){if(Hs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[wa];if(!n||!r||!o)return;const{method:i,url:a,status_code:s,body:l}=o;Fs({category:"xhr",data:{method:i,url:a,status_code:s},type:"http"},{xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&ua(function(e){return function(t){if(Hs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Fs({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Fs({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&Ia(function(e){return function(t){if(Hs()!==e)return;let n=t.from,r=t.to;const o=Wa(Id.location.href);let i=n?Wa(n):void 0;const a=Wa(r);i&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Fs({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Hs()===e&&Fs({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:zi(t)},{event:t})}}(e))}}},cp=sc(sp,lp);const up="Dedupe",dp=()=>{let e;return{name:up,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!hp(e,t))return!1;if(!gp(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=fp(t),r=fp(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!hp(e,t))return!1;if(!gp(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Od&&vi.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},pp=sc(up,dp);function gp(e,t){let n=_p(e),r=_p(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function hp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function fp(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _p(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const mp="GlobalHandlers",vp=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:mp,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){fa((t=>{const{stackParser:n,attachStacktrace:r}=Ep();if(Hs()!==e||bd())return;const{msg:o,url:i,line:a,column:s,error:l}=t,c=void 0===l&&Vo(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Go(e)?e.message:e,a="Error";const s=i.match(o);s&&(a=s[1],i=s[2]);const l={exception:{values:[{type:a,value:i}]}};return yp(l,t,n,r)}(o,i,a,s):yp(Dd(n,l||o,void 0,r,!1),i,a,s);c.level="error",Vs(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}))}(e),Sp("onerror")),t.onunhandledrejection&&(!function(e){va((t=>{const{stackParser:n,attachStacktrace:r}=Ep();if(Hs()!==e||bd())return;const o=function(e){if(jo(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=jo(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Dd(n,o,void 0,r,!0);i.level="error",Vs(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Sp("onunhandledrejection"))}}},Tp=sc(mp,vp);function yp(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],a=i[0]=i[0]||{},s=a.stacktrace=a.stacktrace||{},l=s.frames=s.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Vo(t)&&t.length>0?t:di();return 0===l.length&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),e}function Sp(e){Od&&vi.log(`Global Handler attached: ${e}`)}function Ep(){const e=Hs();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Ip="HttpContext",Ap=()=>({name:Ip,setupOnce(){},preprocessEvent(e){if(!Id.navigator&&!Id.location&&!Id.document)return;const t=e.request&&e.request.url||Id.location&&Id.location.href,{referrer:n}=Id.document||{},{userAgent:r}=Id.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}),bp=sc(Ip,Ap),wp="LinkedErrors",Op=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:wp,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();ei(Rd,i.stackParser,i.maxValueLength,n,t,e,r)}}},Rp=sc(wp,Op),Np=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Pp="TryCatch",Lp=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Pp,setupOnce(){t.setTimeout&&bi(Id,"setTimeout",xp),t.setInterval&&bi(Id,"setInterval",xp),t.requestAnimationFrame&&bi(Id,"requestAnimationFrame",kp),t.XMLHttpRequest&&"XMLHttpRequest"in Id&&bi(XMLHttpRequest.prototype,"send",Dp);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Np).forEach(Up)}}}},Cp=sc(Pp,Lp);function xp(e){return function(...t){const n=t[0];return t[0]=wd(n,{mechanism:{data:{function:Gi(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function kp(e){return function(t){return e.apply(this,[wd(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Gi(e)},handled:!1,type:"instrument"}})])}}function Dp(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&bi(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Gi(t)},handled:!1,type:"instrument"}},r=Ri(t);return r&&(n.mechanism.data.handler=Gi(r)),wd(t,n)}))})),e.apply(this,t)}}function Up(e){const t=Id,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(bi(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=wd(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Gi(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,wd(r,{mechanism:{data:{function:"addEventListener",handler:Gi(r),target:e},handled:!1,type:"instrument"}}),o])}})),bi(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const Mp=[Vc(),Bc(),Lp(),lp(),vp(),Op(),dp(),Ap()];function Gp(e){return[...Mp]}function $p(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Gp()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Id.SENTRY_RELEASE&&Id.SENTRY_RELEASE.id&&(e.release=Id.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||op,Array.isArray(n)?Ui(...n):n),integrations:oc(e),transport:e.transport||(sa()?Fd:jd)};var n;!function(e,t){!0===t.debug&&(ys?vi.enable():mi((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),qs().update(t.initialScope);const n=new e(t);Ec(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}($d,t),e.autoSessionTracking&&function(){if(void 0===Id.document)return void(Od&&vi.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Bs({ignoreDuration:!0}),Ys(),Ia((({from:e,to:t})=>{void 0!==e&&e!==t&&(Bs({ignoreDuration:!0}),Ys())}))}()}var Vp=Object.freeze({__proto__:null,Breadcrumbs:cp,Dedupe:pp,GlobalHandlers:Tp,HttpContext:bp,LinkedErrors:Rp,TryCatch:Cp});const Fp=ii,jp="sentryReplaySession",Wp="Unable to send Replay",Hp=15e4,qp=5e3,Bp=2e7,Jp=36e5;function zp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}var Yp;function Xp(e){const t=zp([e,"optionalAccess",e=>e.host]);return Boolean(zp([t,"optionalAccess",e=>e.shadowRoot])===e)}function Kp(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Qp(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Zp).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Zp(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Qp(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Yp||(Yp={}));class eg{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=zp([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function tg({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function ng({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function rg(e){return e.toLowerCase()}function og(e){return e.toUpperCase()}const ig="__rrweb_original__";function ag(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?rg(t):null}function sg(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let lg=1;const cg=new RegExp("[^a-z0-9-_:]");function ug(){return lg++}let dg,pg;const gg=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,hg=/^(?:[a-z+]+:)?\/\//i,fg=/^www\..*/i,_g=/^(data:)([^,]*),(.*)/i;function mg(e,t){return(e||"").replace(gg,((e,n,r,o,i,a)=>{const s=r||i||a,l=n||o||"";if(!s)return e;if(hg.test(s)||fg.test(s))return`url(${l}${s}${l})`;if(_g.test(s))return`url(${l}${s}${l})`;if("/"===s[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${l})`;const c=t.split("/"),u=s.split("/");c.pop();for(const e of u)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`}))}const vg=/^[^ \t\n\r\u000c]+/,Tg=/^[, \t\n\r\u000c]+/;function yg(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Sg(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Eg(){const e=document.createElement("a");return e.href="",e.href}function Ig(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?yg(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Tg),!(n>=t.length);){let i=r(vg);if(","===i.slice(-1))i=yg(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=yg(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?mg(r,Eg()):"object"===t&&"data"===n?yg(e,r):"function"==typeof i?i(n,r,o):r:yg(e,r):r}function Ag(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function bg(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:bg(e.parentNode,t,n,r+1):-1}function wg(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Og(e,t,n,r,o,i){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===a)return!1;if("INPUT"===a.tagName){const e=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let s=-1,l=-1;if(i){if(l=bg(a,wg(r,o)),l<0)return!0;s=bg(a,wg(t,n),l>=0?l:1/0)}else{if(s=bg(a,wg(t,n)),s<0)return!1;l=bg(a,wg(r,o),s>=0?s:1/0)}return s>=0?!(l>=0)||s<=l:!(l>=0)&&!!i}catch(e){}return!!i}function Rg(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:g,maskInputOptions:h={},maskTextFn:f,maskInputFn:_,dataURLOptions:m={},inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:S=!1}=t,E=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Yp.Document,childNodes:[],compatMode:e.compatMode}:{type:Yp.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Yp.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:a,maskInputOptions:s={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:h=!1,rootId:f,maskAllText:_,maskTextClass:m,unmaskTextClass:v,maskTextSelector:T,unmaskTextSelector:y}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,i),E=function(e){if(e instanceof HTMLFormElement)return"form";const t=rg(e.tagName);return cg.test(t)?"div":t}(e);let I={};const A=e.attributes.length;for(let t=0;t<A;t++){const r=e.attributes[t];r.name&&!Ag(E,r.name,r.value)&&(I[r.name]=Ig(n,E,rg(r.name),r.value,e,l))}if("link"===E&&a){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Qp(t)),r&&(delete I.rel,delete I.href,I._cssText=mg(r,t.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Qp(e.sheet);t&&(I._cssText=mg(t,Eg()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){const t=e,n=ag(t),r=sg(t,og(E),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Og(t,m,T,v,y,tg({type:n,tagName:og(E),maskInputOptions:s}));I.value=ng({isMasked:e,element:t,value:r,maskInputFn:c})}o&&(I.checked=o)}"option"===E&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===E&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=ig in o?o[ig]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(I.rr_dataURL=t)}if("img"===E&&d){dg||(dg=n.createElement("canvas"),pg=dg.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{dg.width=t.naturalWidth,dg.height=t.naturalHeight,pg.drawImage(t,0,0),I.rr_dataURL=dg.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?I.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==E&&"video"!==E||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();I={class:I.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==E||g(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);let b;try{customElements.get(E)&&(b=!0)}catch(e){}return{type:Yp.Element,tagName:E,attributes:I,childNodes:[],isSVG:Sg(e)||void 0,needBlock:S,rootId:f,isCustom:b}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:a,inlineStylesheet:g,maskAttributeFn:l,maskInputOptions:h,maskInputFn:_,dataURLOptions:m,inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:S,rootId:E,maskAllText:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:a,maskTextFn:s,maskInputOptions:l,maskInputFn:c,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const g="STYLE"===d||void 0,h="SCRIPT"===d||void 0,f="TEXTAREA"===d||void 0;if(g&&p){try{e.nextSibling||e.previousSibling||zp([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Qp(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=mg(p,Eg())}h&&(p="SCRIPT_PLACEHOLDER");const _=Og(e,r,i,o,a,n);g||h||f||!p||!_||(p=s?s(p,e.parentElement):p.replace(/[\S]/g,"*"));f&&p&&(l.textarea||_)&&(p=c?c(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=ng({isMasked:Og(e,r,i,o,a,tg({type:null,tagName:d,maskInputOptions:l})),element:e,value:p,maskInputFn:c})}return{type:Yp.Text,textContent:p||"",isStyle:g,rootId:u}}(e,{maskAllText:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:f,maskInputOptions:h,maskInputFn:_,rootId:E});case e.CDATA_SECTION_NODE:return{type:Yp.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Yp.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function Ng(e){return null==e?"":e.toLowerCase()}function Pg(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:g=!0,maskInputOptions:h={},maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T={},inlineImages:y=!1,recordCanvas:S=!1,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A=5e3,onStylesheetLoad:b,stylesheetLoadTimeout:w=5e3,keepIframeSrcFn:O=()=>!1,newlyAddedElement:R=!1}=t;let{preserveWhiteSpace:N=!0}=t;const P=Rg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,dataURLOptions:T,inlineImages:y,recordCanvas:S,keepIframeSrcFn:O,newlyAddedElement:R});if(!P)return console.warn(e,"not serialized"),null;let L;L=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Yp.Comment)return!0;if(e.type===Yp.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Ng(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Ng(e.attributes.name)||"icon"===Ng(e.attributes.rel)||"apple-touch-icon"===Ng(e.attributes.rel)||"shortcut icon"===Ng(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Ng(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Ng(e.attributes.property).match(/^(og|twitter|fb):/)||Ng(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Ng(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Ng(e.attributes.name)||"googlebot"===Ng(e.attributes.name)||"bingbot"===Ng(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Ng(e.attributes.name)||"generator"===Ng(e.attributes.name)||"framework"===Ng(e.attributes.name)||"publisher"===Ng(e.attributes.name)||"progid"===Ng(e.attributes.name)||Ng(e.attributes.property).match(/^article:/)||Ng(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Ng(e.attributes.name)||"yandex-verification"===Ng(e.attributes.name)||"csrf-token"===Ng(e.attributes.name)||"p:domain_verify"===Ng(e.attributes.name)||"verify-v1"===Ng(e.attributes.name)||"verification"===Ng(e.attributes.name)||"shopify-checkout-api-token"===Ng(e.attributes.name)))return!0}}return!1}(P,v)&&(N||P.type!==Yp.Text||P.isStyle||P.textContent.replace(/^\s+|\s+$/gm,"").length)?ug():-2;const C=Object.assign(P,{id:L});if(r.add(e,C),-2===L)return null;E&&E(e);let x=!p;if(C.type===Yp.Element){x=x&&!C.needBlock,delete C.needBlock;const t=e.shadowRoot;t&&Kp(t)&&(C.isShadowHost=!0)}if((C.type===Yp.Document||C.type===Yp.Element)&&x){v.headWhitespace&&C.type===Yp.Element&&"head"===C.tagName&&(N=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:S,preserveWhiteSpace:N,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O};for(const n of Array.from(e.childNodes)){const e=Pg(n,t);e&&C.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Pg(n,t);r&&(Kp(e.shadowRoot)&&(r.isShadow=!0),C.childNodes.push(r))}}return e.parentNode&&Xp(e.parentNode)&&Kp(e.parentNode)&&(C.isShadow=!0),C.type===Yp.Element&&"iframe"===C.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&I){const n=Pg(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:S,preserveWhiteSpace:N,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O});n&&I(e,n)}}),A),C.type===Yp.Element&&"link"===C.tagName&&"stylesheet"===C.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(b){const t=Pg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:S,preserveWhiteSpace:N,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O});t&&b(e,t)}}),w),C}function Lg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function Cg(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const xg="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let kg={map:{},getId:()=>(console.error(xg),-1),getNode:()=>(console.error(xg),null),removeNodeFromMap(){console.error(xg)},has:()=>(console.error(xg),!1),reset(){console.error(xg)}};function Dg(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),l=this;s<=0||s>t?(r&&(!function(...e){th("clearTimeout")(...e)}(r),r=null),o=a,e.apply(l,i)):r||!1===n.trailing||(r=nh((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(l,i)}),s))}}function Ug(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){nh((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Ug(e,t,i||{},!0)}function Mg(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(kg=new Proxy(kg,{get:(e,t,n)=>("map"===t&&console.error(xg),Reflect.get(e,t,n))}));let Gg=Date.now;function $g(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Lg([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Lg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Lg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Lg([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Lg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Lg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Vg(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Fg(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function jg(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Wg(e,t,n,r,o){if(!e)return!1;const i=jg(e);if(!i)return!1;const a=wg(t,n);if(!o){const e=r&&i.matches(r);return a(i)&&!e}const s=bg(i,a);let l=-1;return!(s<0)&&(r&&(l=bg(i,wg(null,r))),s>-1&&l<0||s<l)}function Hg(e,t){return-2===t.getId(e)}function qg(e,t){if(Xp(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||qg(e.parentNode,t))}function Bg(e){return Boolean(e.changedTouches)}function Jg(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function zg(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Yg(e){return Boolean(Lg([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Gg=()=>(new Date).getTime());class Xg{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Kg(e){let t=null;return Lg([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Qg(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Kg(n);)n=t;return n}(e);return t.contains(n)}function Zg(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Qg(e))}const eh={};function th(e){const t=eh[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return eh[e]=r.bind(window)}function nh(...e){return th("setTimeout")(...e)}var rh=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(rh||{}),oh=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(oh||{}),ih=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ih||{}),ah=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ah||{});function sh(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function lh(e){return"__ln"in e}class ch{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=sh([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&lh(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&lh(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const uh=(e,t)=>`${e}@${t}`;class dh{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new ch,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Zg(o))return;const i=Xp(o.parentNode)?this.mirror.getId(Kg(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=Pg(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Jg(e,this.mirror)&&this.iframeManager.addIframe(e),zg(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Yg(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)gh(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)fh(this.droppedSet,e)||gh(this.removes,e,this.mirror)?fh(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!Hg(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Og(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,jg(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=ag(t),o=t.tagName;r=sg(t,o,n);const i=tg({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=ng({isMasked:Og(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:r,maskInputFn:this.maskInputFn})}if(Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Ag(t.tagName,n)&&(o.attributes[n]=Ig(this.doc,rg(t.tagName),rg(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===i?r:[r,i]:o._unchangedStyles[e]=[r,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Xp(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Hg(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ph(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||qg(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[uh(n,r)]?ph(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Xp(e.target)||!Kp(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Hg(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[uh(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Wg(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Yg(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ph(e,t){e.delete(t),t.childNodes.forEach((t=>ph(e,t)))}function gh(e,t,n){return 0!==e.length&&hh(e,t,n)}function hh(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||hh(e,r,n)}function fh(e,t){return 0!==e.size&&_h(e,t)}function _h(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||_h(e,n))}let mh;const vh=e=>{if(!mh)return e;return(...t)=>{try{return e(...t)}catch(e){if(mh&&!0===mh(e))return()=>{};throw e}}};function Th(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const yh=[];function Sh(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Eh(e,t){const n=new dh;yh.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Th([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const i=new r(vh((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Ih({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:a}){if(!1===a.mouseInteraction)return()=>{};const s=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,l=[];let c=null;return Object.keys(ih).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((a=>{let s=rg(a);const u=(t=>a=>{const s=Sh(a);if(Wg(s,r,o,i,!0))return;let l=null,u=t;if("pointerType"in a){switch(a.pointerType){case"mouse":l=ah.Mouse;break;case"touch":l=ah.Touch;break;case"pen":l=ah.Pen}l===ah.Touch?ih[t]===ih.MouseDown?u="TouchStart":ih[t]===ih.MouseUp&&(u="TouchEnd"):ah.Pen}else Bg(a)&&(l=ah.Touch);null!==l?(c=l,(u.startsWith("Touch")&&l===ah.Touch||u.startsWith("Mouse")&&l===ah.Mouse)&&(l=null)):ih[t]===ih.Click&&(l=c,c=null);const d=Bg(a)?a.changedTouches[0]:a;if(!d)return;const p=n.getId(s),{clientX:g,clientY:h}=d;vh(e)({type:ih[u],id:p,x:g,y:h,...null!==l&&{pointerType:l}})})(a);if(window.PointerEvent)switch(ih[a]){case ih.MouseDown:case ih.MouseUp:s=s.replace("mouse","pointer");break;case ih.TouchStart:case ih.TouchEnd:return}l.push(Cg(s,u,t))})),vh((()=>{l.forEach((e=>e()))}))}function Ah({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:a}){return Cg("scroll",vh(Dg(vh((a=>{const s=Sh(a);if(!s||Wg(s,r,o,i,!0))return;const l=n.getId(s);if(s===t&&t.defaultView){const n=$g(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:s.scrollLeft,y:s.scrollTop})})),a.scroll||100)),t)}const bh=["INPUT","TEXTAREA","SELECT"],wh=new WeakMap;function Oh({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:a,ignoreSelector:s,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:g,maskTextSelector:h,unmaskTextSelector:f}){function _(e){let n=Sh(e);const u=e.isTrusted,_=n&&og(n.tagName);if("OPTION"===_&&(n=n.parentElement),!n||!_||bh.indexOf(_)<0||Wg(n,r,o,i,!0))return;const v=n;if(v.classList.contains(a)||s&&v.matches(s))return;const T=ag(n);let y=sg(v,_,T),S=!1;const E=tg({maskInputOptions:l,tagName:_,type:T}),I=Og(n,p,h,g,f,E);"radio"!==T&&"checkbox"!==T||(S=n.checked),y=ng({isMasked:I,element:n,value:y,maskInputFn:c}),m(n,d?{text:y,isChecked:S,userTriggered:u}:{text:y,isChecked:S});const A=n.name;"radio"===T&&A&&S&&t.querySelectorAll(`input[type="radio"][name="${A}"]`).forEach((e=>{if(e!==n){const t=ng({isMasked:I,element:e,value:sg(e,_,T),maskInputFn:c});m(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function m(t,r){const o=wh.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){wh.set(t,r);const o=n.getId(t);vh(e)({...r,id:o})}}const v=("last"===u.input?["change"]:["input","change"]).map((e=>Cg(e,vh(_),t))),T=t.defaultView;if(!T)return()=>{v.forEach((e=>e()))};const y=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),S=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&v.push(...S.map((e=>Ug(e[0],e[1],{set(){vh(_)({target:this,isTrusted:!1})}},!1,T)))),vh((()=>{v.forEach((e=>e()))}))}function Rh(e){return function(e,t){if(Ch("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ch("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ch("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ch("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Nh(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Ph({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Th([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Th([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=Th([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Th([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Th([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Th([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),vh((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):()=>{}}function Lh(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Eh(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const l=Dg(vh((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),c=vh(Dg(vh((e=>{const t=Sh(e),{clientX:n,clientY:o}=Bg(e)?e.changedTouches[0]:e;a||(a=Gg()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Gg()-a}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?oh.Drag:e instanceof MouseEvent?oh.MouseMove:oh.TouchMove)})),o,{trailing:!1})),u=[Cg("mousemove",c,n),Cg("touchmove",c,n),Cg("drag",c,n)];return vh((()=>{u.forEach((e=>e()))}))}(e),i=Ih(e),a=Ah(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Cg("resize",vh(Dg(vh((()=>{const t=Vg(),o=Fg();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),l=Oh(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:a}){const s=vh((a=>Dg(vh((i=>{const s=Sh(i);if(!s||Wg(s,t,n,r,!0))return;const{currentTime:l,volume:c,muted:u,playbackRate:d}=s;e({type:a,id:o.getId(s),currentTime:l,volume:c,muted:u,playbackRate:d})})),i.media||500))),l=[Cg("play",s(0),a),Cg("pause",s(1),a),Cg("seeked",s(2),a),Cg("volumechange",s(3),a),Cg("ratechange",s(4),a)];return vh((()=>{l.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:vh(((r,o,i)=>{const[a,s]=i,{id:l,styleId:c}=Nh(o,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:s}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Nh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:a}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Nh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replace:a}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Nh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replaceSync:a}),r.apply(o,i)}))}));const l={};xh("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(xh("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),xh("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),xh("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach((([r,o])=>{c[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(c[r].insertRule,{apply:vh(((r,o,i)=>{const[a,s]=i,{id:l,styleId:c}=Nh(o.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:[...Rh(o),s||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Nh(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:[...Rh(o),a]}]}),r.apply(o,i)}))})})),vh((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),d=Ph(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:vh(((o,a,s)=>{const[l,c,u]=s;if(n.has(l))return i.apply(a,[l,c,u]);const{id:d,styleId:p}=Nh(Th([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:l,value:c,priority:u},index:Rh(a.parentRule)}),o.apply(a,s)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:vh(((o,i,s)=>{const[l]=s;if(n.has(l))return a.apply(i,[l]);const{id:c,styleId:u}=Nh(Th([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,remove:{property:l},index:Rh(i.parentRule)}),o.apply(i,s)}))}),vh((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),g=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=Mg(t.fonts,"add",(function(t){return function(n){return nh(vh((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),vh((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:a}=e;let s=!0;const l=vh((()=>{const e=t.getSelection();if(!e||s&&Th([e,"optionalAccess",e=>e.isCollapsed]))return;s=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const a=e.getRangeAt(t),{startContainer:s,startOffset:c,endContainer:u,endOffset:d}=a;Wg(s,r,o,i,!0)||Wg(u,r,o,i,!0)||l.push({start:n.getId(s),startOffset:c,end:n.getId(u),endOffset:d})}a({ranges:l})}));return l(),Cg("selectionchange",l)}(e),f=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Mg(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),_=[];for(const t of e.plugins)_.push(t.observer(t.callback,n,t.options));return vh((()=>{yh.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),l(),c(),u(),d(),p(),g(),h(),f(),_.forEach((e=>e()))}))}function Ch(e){return void 0!==window[e]}function xh(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class kh{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Dh(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}class Uh{constructor(){this.crossOriginIframeMirror=new kh(ug),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Mh{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new kh(ug),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new kh(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Dh([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case rh.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:rh.IncrementalSnapshot,data:{source:oh.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case rh.Meta:case rh.Load:case rh.DomContentLoaded:return!1;case rh.Plugin:return t;case rh.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case rh.IncrementalSnapshot:switch(t.data.source){case oh.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case oh.Drag:case oh.TouchMove:case oh.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case oh.ViewportResize:return!1;case oh.MediaInteraction:case oh.MouseInteraction:case oh.Scroll:case oh.CanvasMutation:case oh.Input:return this.replaceIds(t.data,e,["id"]),t;case oh.StyleSheetRule:case oh.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case oh.Font:return t;case oh.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case oh.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Dh([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Yp.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Gh{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class $h{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Kp(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Eh({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ah({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),nh((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Ph({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Mg(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Zg(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Vh{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Fh{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Xg,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Zp(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class jh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){th("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Wh,Hh;const qh=new eg;function Bh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:a=null,ignoreClass:s="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:g=null,inlineStylesheet:h=!0,maskAllInputs:f,maskInputOptions:_,slimDOMOptions:m,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,maxCanvasSize:S=null,packFn:E,sampling:I={},dataURLOptions:A={},mousemoveWait:b,recordCanvas:w=!1,recordCrossOriginIframes:O=!1,recordAfter:R=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:N=!1,collectFonts:P=!1,inlineImages:L=!1,plugins:C,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:k=new Set([]),errorHandler:D,onMutation:U,getCanvasManager:M}=e;mh=D;const G=!O||window.parent===window;let $=!1;if(!G)try{window.parent.document&&($=!1)}catch(e){$=!0}if(G&&!t)throw new Error("emit function is required");void 0!==b&&void 0===I.mousemove&&(I.mousemove=b),qh.reset();const V=!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==_?_:{},F=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m}:m||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const H=e=>{for(const t of C||[])t.eventProcessor&&(e=t.eventProcessor(e));return E&&!$&&(e=E(e)),e};Wh=(e,o)=>{const i=e;if(i.timestamp=Gg(),!Ts([yh,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||i.type===rh.FullSnapshot||i.type===rh.IncrementalSnapshot&&i.data.source===oh.Mutation||yh.forEach((e=>e.unfreeze())),G)Ts([t,"optionalCall",e=>e(H(i),o)]);else if($){const e={type:"rrweb",event:H(i),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(i.type===rh.FullSnapshot)j=i,W=0;else if(i.type===rh.IncrementalSnapshot){if(i.data.source===oh.Mutation&&i.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&j&&i.timestamp-j.timestamp>n;(e||t)&&Z(!0)}};const q=e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.Mutation,...e}})},B=e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Scroll,...e}}),J=e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.CanvasMutation,...e}}),z=new Fh({mutationCb:q,adoptedStyleSheetCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.AdoptedStyleSheet,...e}})}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Uh:new Mh({mirror:qh,mutationCb:q,stylesheetManager:z,recordCrossOriginIframes:O,wrappedEmit:Wh});for(const e of C||[])e.getMirror&&e.getMirror({nodeMirror:qh,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const X=new jh,K=function(e,t){try{return e?e(t):new Vh}catch(e){return console.warn("Unable to initialize CanvasManager"),new Vh}}(M,{mirror:qh,win:window,mutationCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.CanvasMutation,...e}}),recordCanvas:w,blockClass:o,blockSelector:i,unblockSelector:a,maxCanvasSize:S,sampling:I.canvas,dataURLOptions:A,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Gh:new $h({mutationCb:q,scrollCb:B,bypassOptions:{onMutation:U,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskInputOptions:V,dataURLOptions:A,maskAttributeFn:v,maskTextFn:y,maskInputFn:T,recordCanvas:w,inlineImages:L,sampling:I,slimDOMOptions:F,iframeManager:Y,stylesheetManager:z,canvasManager:K,keepIframeSrcFn:x,processedNodeManager:X},mirror:qh}),Z=(e=!1)=>{Wh({type:rh.Meta,data:{href:window.location.href,width:Fg(),height:Vg()}},e),z.reset(),Q.init(),yh.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new eg,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:a=!1,maskTextClass:s="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:g=!1,maskAllInputs:h=!1,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOM:v=!1,dataURLOptions:T,preserveWhiteSpace:y,onSerialize:S,onIframeLoad:E,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:b,keepIframeSrcFn:w=()=>!1}=t;return Pg(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:s,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:T,inlineImages:p,recordCanvas:g,preserveWhiteSpace:y,onSerialize:S,onIframeLoad:E,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:b,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:qh,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskAllInputs:V,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,slimDOM:F,dataURLOptions:A,recordCanvas:w,inlineImages:L,onSerialize:e=>{Jg(e,qh)&&Y.addIframe(e),zg(e,qh)&&z.trackLinkElement(e),Yg(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{z.attachLinkElement(e,t)},keepIframeSrcFn:x});if(!t)return console.warn("Failed to snapshot the document");Wh({type:rh.FullSnapshot,data:{node:t,initialOffset:$g(window)}}),yh.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&z.adoptStyleSheets(document.adoptedStyleSheets,qh.getId(document))};Hh=Z;try{const e=[],t=e=>vh(Lh)({onMutation:U,mutationCb:q,mousemoveCb:(e,t)=>Wh({type:rh.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.MouseInteraction,...e}}),scrollCb:B,viewportResizeCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.ViewportResize,...e}}),inputCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Input,...e}}),mediaInteractionCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.MediaInteraction,...e}}),styleSheetRuleCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.StyleSheetRule,...e}}),styleDeclarationCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Font,...e}}),selectionCb:e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.Selection,...e}})},customElementCb:e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.CustomElement,...e}})},blockClass:o,ignoreClass:s,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,maskInputOptions:V,inlineStylesheet:h,sampling:I,recordCanvas:w,inlineImages:L,userTriggeredOnInput:N,collectFonts:P,doc:e,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,keepIframeSrcFn:x,blockSelector:i,unblockSelector:a,slimDOMOptions:F,dataURLOptions:A,mirror:qh,iframeManager:Y,stylesheetManager:z,shadowDomManager:Q,processedNodeManager:X,canvasManager:K,ignoreCSSAttributes:k,plugins:Ts([C,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Wh({type:rh.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});Y.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Cg("DOMContentLoaded",(()=>{Wh({type:rh.DomContentLoaded,data:{}}),"DOMContentLoaded"===R&&n()}))),e.push(Cg("load",(()=>{Wh({type:rh.Load,data:{}}),"load"===R&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),Hh=void 0,mh=void 0}}catch(e){console.warn(e)}}Bh.mirror=qh,Bh.takeFullSnapshot=function(e){if(!Hh)throw new Error("please take full snapshot after start recording");Hh(e)};function Jh(e){return e>9999999999?e:1e3*e}function zh(e){return e>9999999999?e/1e3:e}function Yh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:rh.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:La(t,10,1e3)}}),"console"===t.category))))}function Xh(e){return e.closest("button,a")||e}function Kh(e){const t=Qh(e);return t&&t instanceof Element?Xh(t):t}function Qh(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Zh;function ef(e){return Zh||(Zh=[],bi(Fp,"open",(function(e){return function(...t){if(Zh)try{Zh.forEach((e=>e()))}catch(e){}return e.apply(Fp,t)}}))),Zh.push(e),()=>{const t=Zh?Zh.indexOf(e):-1;t>-1&&Zh.splice(t,1)}}class tf{constructor(e,t,n=Yh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=ef((()=>{this._lastMutation=rf()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!nf.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:zh(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=zh(e)}registerScroll(e=Date.now()){this._lastScroll=zh(e)}registerClick(e){const t=Xh(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=rf();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:a}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Fp.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o)}else if(i>1){const e={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Fp.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const nf=["A","BUTTON","INPUT"];function rf(){return Date.now()/1e3}function of(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===oh.Mutation&&e.registerMutation(t.timestamp),n===oh.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===oh.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Bh.mirror.getNode(r);o instanceof HTMLElement&&n===ih.Click&&e.registerClick(o)}}catch(e){}}function af(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var sf;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(sf||(sf={}));const lf=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function cf(e){const t={};for(const n in e)if(lf.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const uf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Kh(e.event):Qh(e.event),n=ci(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return af({category:`ui.${e.name}`,...df(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var i,a,s;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(i=e.clickDetector,a=n,s=Kh(t.event),i.handleClick(a,s)),Yh(e,n)};function df(e,t){const n=Bh.mirror.getId(e),r=n&&Bh.mirror.getNode(n),o=r&&Bh.mirror.getMeta(r),i=o&&function(e){return e.type===sf.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===sf.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:cf(i.attributes)}}:{}}}function pf(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!i)return null;const s=t||r||o,l=1===i.length;if(!s&&l)return null;const c=ci(a,{maxStringLength:200})||"<unknown>",u=df(a,c);return af({category:"ui.keyDown",message:c,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&Yh(e,n)}const gf={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:a,encodedBodySize:s,responseStatus:l,transferSize:c}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:ff(i),end:ff(o),name:r,data:{size:c,statusCode:l,decodedBodySize:a,encodedBodySize:s}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=ff(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:a,domContentLoadedEventStart:s,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:g,transferSize:h,type:f}=e;if(0===o)return null;return{type:`${t}.${f}`,start:ff(g),end:ff(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:a,duration:o,domInteractive:c,domContentLoadedEventStart:s,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function hf(e){return gf[e.entryType]?gf[e.entryType](e):null}function ff(e){return((za||Fp.performance.timeOrigin)+e)/1e3}function _f(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Du(e,n))})),r.push(ku((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,i=ff(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:o,size:o,nodeId:r?Bh.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const mf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function vf(e,t){mf&&(vi.info(e),t&&yf(e))}function Tf(e,t){mf&&(vi.info(e),t&&setTimeout((()=>{yf(e)}),0))}function yf(e){Fs({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Sf extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Ef{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Bp)throw new Sf;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Jh(e):null}}class If{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){vf("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const i=({data:t})=>{const a=t;if(a.method===e&&a.id===n){if(this._worker.removeEventListener("message",i),!a.success)return mf&&vi.error("[Replay]",a.response),void o(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Af{constructor(e){this._worker=new If(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Jh(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Bp?Promise.reject(new Sf):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{mf&&vi.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class bf{constructor(e){this._fallback=new Ef,this._compression=new Af(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void vf("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){mf&&vi.warn("[Replay] Failed to add events when switching buffers.",e)}}}function wf({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;vf("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new bf(n)}catch(e){vf("[Replay] Failed to create compression worker")}}(t);if(e)return e}return vf("[Replay] Using simple buffer"),new Ef}function Of(){try{return"sessionStorage"in Fp&&!!Fp.sessionStorage}catch(e){return!1}}function Rf(e){!function(){if(!Of())return;try{Fp.sessionStorage.removeItem(jp)}catch(e){}}(),e.session=void 0}function Nf(e){return void 0!==e&&Math.random()<e}function Pf(e){const t=Date.now();return{id:e.id||Bi(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Lf(e){if(Of())try{Fp.sessionStorage.setItem(jp,JSON.stringify(e))}catch(e){}}function Cf({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Nf(e)?"session":!!t&&"buffer"}(e,t),i=Pf({sampled:o,previousSessionId:r});return n&&Lf(i),i}function xf(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function kf(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return xf(e.started,t,r)||xf(e.lastActivity,n,r)}function Df(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!kf(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Uf({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const i=o.stickySession&&function(e){if(!Of())return null;try{const t=Fp.sessionStorage.getItem(jp);if(!t)return null;const n=JSON.parse(t);return Tf("[Replay] Loading existing session",e),Pf(n)}catch(e){return null}}(e);return i?Df(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Tf("[Replay] Session in sessionStorage is expired, creating new one..."),Cf(o,{previousSessionId:i.id})):i:(Tf("[Replay] Creating new session",e),Cf(o,{previousSessionId:r}))}function Mf(e,t,n){return!!$f(e,t)&&(Gf(e,t,n),!0)}async function Gf(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===rh.Custom}(e))return t(e)}catch(e){return mf&&vi.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Sf?"addEventSizeExceeded":"addEvent";mf&&vi.error(t),await e.stop({reason:n});const r=Hs();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function $f(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Jh(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(vf(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Vf(e){return!e.type}function Ff(e){return"transaction"===e.type}function jf(e){return"feedback"===e.type}function Wf(e){const t=function(){const e=Hs();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Vf(n)&&!Ff(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Ff(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Hf(e){return t=>{e.isEnabled()&&Vf(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Yh(e,af({category:"replay.hydrate-error"}))}}(e,t)}}function qf(e,t=!1){const n=t?Wf(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Vf(t)&&!Ff(t)&&!jf(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(jf(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:rh.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return mf&&vi.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Wp&&!(!t.exception||t.type)&&Nf(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Bf(e,t){return t.map((({type:t,start:n,end:r,name:o,data:i})=>{const a=e.throttledAddEvent({type:rh.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof a?Promise.resolve(null):a}))}function Jf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Bf(e,[n]),!1))))}}function zf(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!mf||!e.getOptions()._experiments.traceInternals)&&Nc(t,Hs())}(e,t.name)||e.addUpdate((()=>(Bf(e,[t]),!0))))}function Yf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[wa];if(!t||!n||!o)return null;const{method:i,url:a,status_code:s}=o;return void 0===a?null:{type:"resource.xhr",name:a,start:t/1e3,end:n/1e3,data:{method:i,statusCode:s}}}(t);zf(e,n)}}function Xf(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=o_(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Kf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Qf(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[o_(e)];if(!e)return[void 0]}catch(t){return mf&&vi.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return mf&&vi.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Zf(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function e_(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:a,request:s,response:l}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:Ci({method:i,statusCode:a,request:s,response:l})}}function t_(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function n_(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Hp,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Hp);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function r_(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function o_(e){return new URLSearchParams(e).toString()}function i_(e,t){const n=function(e,t=Fp.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Fp.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return Zo(n,t)}async function a_(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:a,method:s,status_code:l=0,request_body_size:c,response_body_size:u}=e.data,d=i_(a,n.networkDetailAllowUrls)&&!i_(a,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return c_(e[0],t);if(2===e.length)return c_(e[1],t);return{}}(n,t):{};if(!e)return n_(o,r,void 0);const i=s_(n),[a,s]=Qf(i),l=n_(o,r,a);if(s)return Zf(l,s);return l}(n,t.input,c):t_(c),g=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,i){if(!e&&void 0!==i)return t_(i);const a=o?l_(o.headers,r):{};if(!o||!t&&void 0!==i)return n_(a,i,void 0);const[s,l]=await async function(e){const t=function(e){try{return e.clone()}catch(e){mf&&vi.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return mf&&vi.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),c=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:i}){try{const a=e&&e.length&&void 0===r?Xf(e,n):r;return o?n_(i,a,t?e:void 0):t_(a)}catch(e){return mf&&vi.warn("[Replay] Failed to serialize response body",e),n_(i,r,void 0)}}(s,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:a});if(l)return Zf(c,l);return c}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:i,url:a,method:s,statusCode:l,request:p,response:g}}(e,t,n),o=e_("resource.fetch",r);zf(n.replay,o)}catch(e){mf&&vi.error("[Replay] Failed to capture fetch breadcrumb",e)}}function s_(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function l_(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function c_(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?l_(n,t):Array.isArray(n)?{}:r_(n,t):{}}async function u_(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:a,xhr:s}=t,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!l)return null;if(!s||!i_(l,n.networkDetailAllowUrls)||i_(l,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:l,method:c,statusCode:u,request:t_(d),response:t_(p)}}const g=s[wa],h=g?r_(g.request_headers,n.networkRequestHeaders):{},f=r_(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(s),n.networkResponseHeaders),[_,m]=n.networkCaptureBodies?Qf(a):[void 0],[v,T]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return mf&&vi.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return mf&&vi.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return mf&&vi.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(s):[void 0],y=n_(h,d,_),S=n_(f,p,v);return{startTimestamp:o,endTimestamp:i,url:l,method:c,statusCode:u,request:m?Zf(y,m):y,response:T?Zf(S,T):S}}(e,t,n),o=e_("resource.xhr",r);zf(n.replay,o)}catch(e){mf&&vi.error("[Replay] Failed to capture xhr breadcrumb",e)}}function d_(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const i=Xf(o,n.textEncoder),a=r.getResponseHeader("content-length")?Kf(r.getResponseHeader("content-length")):function(e,t,n){try{return Xf("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==a&&(e.data.response_body_size=a)}function p_(e){const t=Hs();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:s}=e.getOptions(),l={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:s};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(d_(t,n,e),u_(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,i=Xf(r?s_(r):void 0,n.textEncoder),a=o?Kf(o.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==a&&(e.data.response_body_size=a)}(t,n,e),a_(t,n,e))}catch(e){mf&&vi.warn("Error when enriching network breadcrumb")}}(l,e,t))):(ua(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:i,url:a}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:a,data:{method:i,statusCode:o?o.status:void 0}}}(t);zf(e,n)}}(e)),Oa(Yf(e)))}catch(e){}}let g_=null;const h_=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(g_===t||!t)return null;if(g_=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return af(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>qp?(n=!0,`${e.slice(0,qp)}…`):e;if("object"==typeof e)try{const t=La(e,7);return JSON.stringify(t).length>qp?(n=!0,`${JSON.stringify(t,null,2).slice(0,qp)}…`):t}catch(e){}return e}));return af({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return af(t)}(t);n&&Yh(e,n)};function f_(e){return!(!e||!e.on)}function __(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function m_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(mf&&vi.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&of(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Mf(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Mf(e,function(e){const t=e.getOptions();return{type:rh.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(vf(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Lf(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function v_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){const a=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:s,errorIds:l,traceIds:c,initialTimestamp:u}=r,d=Hs(),p=qs(),g=d&&d.getTransport(),h=d&&d.getDsn();if(!(d&&g&&h&&i.sampled))return;const f={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:l,trace_ids:c,urls:s,replay_id:t,segment_id:n,replay_type:i.sampled},_=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const i=await ks(e.getOptions(),r,o,t,e,pl());if(!i)return null;i.platform=i.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:s,version:l}=a&&a.sdk||{};return i.sdk={...i.sdk,name:s||"sentry.javascript.unknown",version:l||"0.0.0"},i}({scope:p,client:d,replayId:t,event:f});if(!_)return d.recordDroppedEvent("event_processor","replay",f),void vf("An event processor returned `null`, will not send event.");delete _.sdkProcessingMetadata;const m=function(e,t,n,r){return is(hs(e,gs(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(_,a,h,d.getOptions().tunnel);let v;try{v=await g.send(m)}catch(e){const t=new Error(Wp);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new T_(v.statusCode);const T=ms({},v);if(_s(T,"replay"))throw new y_(T);return v}class T_ extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class y_ extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function S_(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await v_(e),!0}catch(n){if(n instanceof T_||n instanceof y_)throw n;if(js("Replays",{_retryCount:t.count}),mf&&r._experiments&&r._experiments.captureExceptions&&Gs(n),t.count>=3){const e=new Error(`${Wp} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await S_(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const E_="__THROTTLED";function I_(e,t,n){const r=new Map;let o=!1;return(...i)=>{const a=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(a),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":E_}o=!1;const s=r.get(a)||0;return r.set(a,s+1),e(...i)}}class A_{constructor({options:e,recordingOptions:t}){A_.prototype.__init.call(this),A_.prototype.__init2.call(this),A_.prototype.__init3.call(this),A_.prototype.__init4.call(this),A_.prototype.__init5.call(this),A_.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,i;const a=n.maxWait?Math.max(n.maxWait,t):0;function s(){return l(),r=e(),r}function l(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function c(){return o&&clearTimeout(o),o=setTimeout(s,t),a&&void 0===i&&(i=setTimeout(s,a)),r}return c.cancel=l,c.flush=function(){return void 0!==o||void 0!==i?s():r},c}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=I_(((e,t)=>function(e,t,n){return $f(e,t)?Gf(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new tf(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Tf(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Tf("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Uf({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Tf("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Uf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Bh({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:m_(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{vf("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Rf(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),vf("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),vf("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();vf("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&xf(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Fp.location.pathname}${Fp.location.hash}${Fp.location.search}`,t=`${Fp.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===E_){const e=af({category:"replay.throttled"});this.addUpdate((()=>!Mf(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||qs().getTransaction(),t=(e&&Cs(e).data||{})[Dl];if(e&&t&&["route","custom"].includes(t))return Cs(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=wf({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){mf&&vi.error("[Replay]",e),mf&&this._options._experiments&&this._options._experiments.captureExceptions&&Gs(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Uf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Df(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Fp.document.addEventListener("visibilitychange",this._handleVisibilityChange),Fp.addEventListener("blur",this._handleWindowBlur),Fp.addEventListener("focus",this._handleWindowFocus),Fp.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=qs(),n=Hs();t.addScopeListener(h_(e)),ra(uf(e)),Ia(Jf(e)),p_(e);const r=qf(e,!f_(n));n&&n.addEventProcessor?n.addEventProcessor(r):_c(r),f_(n)&&(n.on("beforeSendEvent",Hf(e)),n.on("afterSendEvent",Wf(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=_f(this)}_removeListeners(){try{Fp.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Fp.removeEventListener("blur",this._handleWindowBlur),Fp.removeEventListener("focus",this._handleWindowFocus),Fp.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Fp.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=af({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=af({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{pf(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;kf(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):vf("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:rh.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(hf).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Bf(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Bf(e,[__(Fp.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await S_({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Hs();t&&t.recordDroppedEvent("send_error","replay")}}else mf&&vi.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(mf&&vi.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return vf(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&vf("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){mf&&vi.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Lf(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=af({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function b_(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),mi((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const w_='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',O_=["content-length","content-type","accept"];let R_=!1;class N_{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:s={},sessionSampleRate:l,errorSampleRate:c,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:g=750,mutationLimit:h=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:v=[],networkCaptureBodies:T=!0,networkRequestHeaders:y=[],networkResponseHeaders:S=[],mask:E=[],maskAttributes:I=["title","placeholder"],unmask:A=[],block:b=[],unblock:w=[],ignore:O=[],maskFn:R,beforeAddRecordingEvent:N,beforeErrorSampling:P,blockClass:L,blockSelector:C,maskInputOptions:x,maskTextClass:k,maskTextSelector:D,ignoreClass:U}={}){this.name=N_.id;const M=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:l,ignoreClass:c}){const u={maskTextSelector:b_(e,[".sentry-mask","[data-sentry-mask]"],s,l),unmaskTextSelector:b_(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:b_(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,a),unblockSelector:b_(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:b_(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return i instanceof RegExp&&(u.blockClass=i),s instanceof RegExp&&(u.maskTextClass=s),u}({mask:E,unmask:A,block:b,unblock:w,ignore:O,blockClass:L,blockSelector:C,maskTextClass:k,maskTextSelector:D,ignoreClass:U});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...x||{},password:!0},maskTextFn:R,maskInputFn:R,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:I,maskAllText:u,privacyOptions:M,key:e,value:t,el:n}),...M,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Jp),stickySession:o,sessionSampleRate:l,errorSampleRate:c,useCompression:i,workerUrl:a,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:g,mutationLimit:h,slowClickTimeout:f,slowClickIgnoreSelectors:_,networkDetailAllowUrls:m,networkDetailDenyUrls:v,networkCaptureBodies:T,networkRequestHeaders:P_(y),networkResponseHeaders:P_(S),beforeAddRecordingEvent:N,beforeErrorSampling:P,_experiments:s},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),"number"==typeof c&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${c} })`),this._initialOptions.errorSampleRate=c),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${w_}`:w_),this._isInitialized&&Pa())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return R_}set _isInitialized(e){R_=e}setupOnce(){Pa()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Hs(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Ci(e)};if(!n)return mi((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&mi((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new A_({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Hs().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function P_(e){return[...O_,...e.map((e=>e.toLowerCase()))]}var L_;function C_(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:C_(e.parentNode,t,n,r+1):-1}function x_(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}N_.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(L_||(L_={}));const k_="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let D_={map:{},getId:()=>(console.error(k_),-1),getNode:()=>(console.error(k_),null),removeNodeFromMap(){console.error(k_)},has:()=>(console.error(k_),!1),reset(){console.error(k_)}};function U_(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){j_((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>U_(e,t,i||{},!0)}function M_(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function G_(e,t,n,r,o){if(!e)return!1;const i=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!i)return!1;const a=C_(i,x_(t,n));let s=-1;return!(a<0)&&(r&&(s=C_(i,x_(null,r))),a>-1&&s<0||a<s)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(D_=new Proxy(D_,{get:(e,t,n)=>("map"===t&&console.error(k_),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const $_={};function V_(e){const t=$_[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return $_[e]=r.bind(window)}function F_(...e){return V_("requestAnimationFrame")(...e)}function j_(...e){return V_("setTimeout")(...e)}var W_=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(W_||{});let H_;function q_(e){H_=e}const B_=e=>{if(!H_)return e;return(...t)=>{try{return e(...t)}catch(e){if(H_&&!0===H_(e))return()=>{};throw e}}};for(var J_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z_="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Y_=0;Y_<64;Y_++)z_[J_.charCodeAt(Y_)]=Y_;const X_=new Map;const K_=(e,t,n)=>{if(!e||!em(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=X_.get(e);return n||(n=new Map,X_.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Q_(e,t,n){if(e instanceof Array)return e.map((e=>Q_(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=J_[n[t]>>2],o+=J_[(3&n[t])<<4|n[t+1]>>4],o+=J_[(15&n[t+1])<<2|n[t+2]>>6],o+=J_[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Q_(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Q_(e.data,t,n),e.width,e.height]}}if(em(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:K_(e,t,n)}}return e}const Z_=(e,t,n)=>e.map((e=>Q_(e,t,n))),em=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function tm(e,t,n,r,o){const i=[];try{const a=M_(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...a){if(!G_(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(a[0]&&"object"==typeof a[0]){const e=a[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...a])}}));i.push(a)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function nm(e,t,n,r,o,i,a,s){const l=[],c=Object.getOwnPropertyNames(e);for(const a of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if("function"!=typeof e[a])continue;const c=M_(e,a,(function(e){return function(...l){const c=e.apply(this,l);if(K_(c,s,this),"tagName"in this.canvas&&!G_(this.canvas,r,o,i)){const e=Z_(l,s,this),r={type:t,property:a,args:e};n(this.canvas,r)}return c}}));l.push(c)}catch(r){const o=U_(e,a,{set(e){n(this.canvas,{type:t,property:a,args:[e],setter:!0})}});l.push(o)}return l}class rm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:i,maxCanvasSize:a,recordCanvas:s,dataURLOptions:l,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&q_(c),e.enableManualSnapshot||B_((()=>{s&&"all"===t&&this.initCanvasMutationObserver(n,r,o,i),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,i,a,{dataURLOptions:l})}))()}initCanvasFPSObserver(e,t,n,r,o,i,a){const s=tm(t,n,r,o,!0),l=this.takeSnapshot(!1,e,t,n,r,o,i,a.dataURLOptions);this.resetObservers=()=>{s(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=tm(e,t,n,r,!1),i=function(e,t,n,r,o){const i=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of a)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const a=M_(t.CanvasRenderingContext2D.prototype,s,(function(i){return function(...a){return G_(this.canvas,n,r,o)||j_((()=>{const n=Z_(a,t,this);e(this.canvas,{type:W_["2D"],property:s,args:n})}),0),i.apply(this,a)}}));i.push(a)}catch(n){const r=U_(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:W_["2D"],property:s,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),a=function(e,t,n,r,o){const i=[];return i.push(...nm(t.WebGLRenderingContext.prototype,W_.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...nm(t.WebGL2RenderingContext.prototype,W_.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),i(),a()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,i,a,s,l){const c=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(c.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:i,height:a}=t;this.mutationCb({id:n,type:W_["2D"],commands:[{property:"clearRect",args:[0,0,i,a]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,a]}]})};const d=1e3/t;let p,g=0;const h=t=>{g&&t-g<d||(g=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{G_(e,r,o,i)||t.push(e)})),t})(l).forEach((t=>{const n=this.mirror.getId(t);if(!c.get(n)&&t.width&&t.height){if(c.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Ts([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:s,maxCanvasSize:a},[e])})).catch((e=>{B_((()=>{throw e}))()}))}}))),p=F_(h)};return p=F_(h),p}startPendingCanvasMutationFlusher(){F_((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,F_(e)};F_(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),F_((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const om={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},im="ReplayCanvas",am=1280,sm=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,am):am,n?Math.min(n,am):am]};let o;const i=new Promise((e=>o=e));return{name:im,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new rm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...om[e||"medium"]||om.medium}},async snapshot(e){(await i).snapshot(e)}}},lm=sc(im,sm),cm=ii,um="#ffffff",dm="inherit",pm="rgba(108, 95, 199, 1)",gm={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:um,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:pm,submitBorder:pm,submitOutlineFocus:"#29232f",submitForeground:um,submitForegroundHover:um,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:dm,inputForeground:dm,inputBorder:"var(--border)",inputOutlineFocus:pm,formBorderRadius:"20px",formContentBorderRadius:"6px"},hm=gm,fm={...gm,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},_m="widget",mm="api";async function vm({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:i=!0}={}){const a=Hs(),s=a&&a.getTransport(),l=a&&a.getDsn();if(!a||!s||!l)return;const c={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Ws((async e=>{e.clearBreadcrumbs(),[mm,_m].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await ks(e.getOptions(),n,r,t,e,pl());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:a,event:c});if(!t)return;a.emit&&a.emit("beforeSendFeedback",t,{includeReplay:Boolean(i)});const n=Zl(t,l,a.getOptions()._metadata,a.getOptions().tunnel);let o;try{o=await s.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Tm({name:e,email:t,message:n,source:r=mm,url:o=di()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return vm({feedback:{name:e,email:t,message:n,url:o,source:r}},i)}const ym="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Sm(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Em(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Im({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=cm.document,i=o.createElement("div");i.id=e;const a=i.attachShadow({mode:"open"});return a.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Em("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Em(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),a.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:a,host:i}}catch(e){throw vi.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Am(e,t,n){if(!e)return;e.hideError();try{return await Tm({...t,source:_m},n)}catch(t){ym&&vi.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function bm(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function wm(e,t,...n){const r=cm.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Om(r,e);return r}function Om(e,t){const n=cm.document;if(null!=t)if(Array.isArray(t))for(const n of t)Om(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Rm({buttonLabel:e,onClick:t}){const n=wm("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),t=bm(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=bm(e("g"),{clipPath:"url(#clip0_57_80)"}),r=bm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),i=bm(e("clipPath"),{id:"clip0_57_80"}),a=bm(e("rect"),{width:"20",height:"20",fill:"white"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),{get el(){return t}}}().el,e?wm("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Nm(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Pm({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:i,isRequiredLabel:a,cancelButtonLabel:s,submitButtonLabel:l,showName:c,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:g,defaultEmail:h,onCancel:f,onSubmit:_}){const{el:m}=function({label:e}){return{el:wm("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:l});const v=wm("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const T=wm("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:g}),y=wm("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:h}),S=wm("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),E=wm("button",{type:"button",className:"btn btn--default","aria-label":s,onClick:e=>{f&&f(e)}},s),I=wm("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(_){const t=new FormData(e.target),n={name:Nm(t,"name"),email:Nm(t,"email"),message:Nm(t,"message")};_(n)}}catch(e){}}},[v,c&&wm("label",{htmlFor:"name",className:"form__label"},[wm("span",{className:"form__label__text"},e,d&&wm("span",{className:"form__label__text--required"},` ${a}`)),T]),!c&&T,u&&wm("label",{htmlFor:"email",className:"form__label"},[wm("span",{className:"form__label__text"},n,p&&wm("span",{className:"form__label__text--required"},` ${a}`)),y]),!u&&y,wm("label",{htmlFor:"message",className:"form__label"},[wm("span",{className:"form__label__text"},o,wm("span",{className:"form__label__text--required"},` ${a}`)),S]),wm("div",{className:"btn-group"},[m,E])]);return{get el(){return I},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}function Lm({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:i,colorScheme:a,defaultName:s,defaultEmail:l,onClosed:c,onCancel:u,onSubmit:d,...p}){let g=null;function h(){g&&(g.open=!1)}const{el:f,showError:_,hideError:m}=Pm({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:o,defaultName:s,defaultEmail:l,onSubmit:d,onCancel:u,...p});return g=wm("dialog",{className:"dialog",open:!0,onClick:function(){h(),c&&c()}},wm("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},wm("h2",{className:"dialog__header"},e,t&&wm("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),n=bm(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=bm(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),i=t("style");return i.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(i.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(i),n.append(o),{get el(){return n}}}({colorScheme:a}).el)),f)),{get el(){return g},showError:_,hideError:m,open:function(){g&&(g.open=!0)},close:h,checkIsOpen:function(){return g&&!0===g.open||!1}}}function Cm({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=wm("div",{className:"success-message",onClick:n},function(){const e=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),t=bm(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=bm(e("g"),{clipPath:"url(#clip0_57_156)"}),r=bm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=bm(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const i=e("defs"),a=bm(e("clipPath"),{id:"clip0_57_156"}),s=bm(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return a.appendChild(s),i.appendChild(a),t.appendChild(i).appendChild(a).appendChild(s),{get el(){return t}}}().el,e);return{el:r,remove:n}}function xm({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,i,a=!1;async function s(t){if(!i)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void i.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Am(i,t)?(g(),function(){if(e)try{const t=Cm({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),c()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){vi.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function l(){const e=Hs(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{ym&&vi.error(e)}))}function c(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(i)return i.open(),a=!0,n.onFormOpen&&n.onFormOpen(),void l();const t=n.useSentryUser,r=qs(),o=r&&r.getUser();if(i=Lm({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{c(),a=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),c()},onSubmit:s}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),u(),n.onFormOpen&&n.onFormOpen(),l()}catch(e){vi.error(e)}}function p(){i&&(i.close(),a=!1,n.onFormClose&&n.onFormClose())}function g(){if(i){p();const e=i.el;e&&e.remove(),i=void 0}}function h(){a||d(),u()}return r?r.addEventListener("click",h):t&&(o=Rm({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return i},showActor:c,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:g}}const km=cm.document;class Dm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:i=!0,showName:a=!0,useSentryUser:s={email:"email",name:"username"},themeDark:l,themeLight:c,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:g="Send Bug Report",formTitle:h="Report a Bug",emailPlaceholder:f="your.email@example.org",emailLabel:_="Email",messagePlaceholder:m="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:T="Your Name",nameLabel:y="Name",isRequiredLabel:S="(required)",successMessageText:E="Thank you for your report!",onFormClose:I,onFormOpen:A,onSubmitError:b,onSubmitSuccess:w}={}){this.name=Dm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:i,showName:a,useSentryUser:s,colorScheme:u,themeDark:{...fm,...l},themeLight:{...hm,...c},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:g,formTitle:h,emailLabel:_,emailPlaceholder:f,messageLabel:v,messagePlaceholder:m,nameLabel:y,namePlaceholder:T,isRequiredLabel:S,successMessageText:E,onFormClose:I,onFormOpen:A,onSubmitError:b,onSubmitSuccess:w}}setupOnce(){if(Pa())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){ym&&vi.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Sm(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?km.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return ym&&vi.error("[Feedback] Unable to attach to target element"),null;const o=xm({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return ym&&vi.error(e),null}}createWidget(e){try{return this._createWidget(Sm(this.options,e||{}))}catch(e){return ym&&vi.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){ym&&vi.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=km.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=xm({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(km)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:i}=e,{shadow:a,host:s}=Im({id:t,colorScheme:r,themeLight:o,themeDark:i});this._shadow=a,this._host=s,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&km.body.appendChild(this._host),r}}Dm.__initStatic();const Um="CaptureConsole",Mm=(e={})=>{const t=e.levels||fi;return{name:Um,setupOnce(){},setup(e){"console"in ii&&Hi((({args:n,level:r})=>{Hs()===e&&t.includes(r)&&function(e,t){const n={level:qa(t),extra:{arguments:e}};Ws((r=>{if(r.addEventProcessor((e=>(e.logger="console",Xi(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Ko(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void $s(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Gs(o,n);$s(Ko(e," "),n)}))}(n,r)}))}}};sc(Um,Mm);const Gm="Debug",$m=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Gm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,mi((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};sc(Gm,$m);const Vm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Fm="Dedupe",jm=()=>{let e;return{name:Fm,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Hm(e,t))return!1;if(!Wm(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=qm(t),r=qm(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Hm(e,t))return!1;if(!Wm(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Vm&&vi.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Wm(e,t){let n=Bm(e),r=Bm(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Hm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function qm(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Bm(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}sc(Fm,jm);const Jm="ExtraErrorData",zm=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Jm,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!Uo(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=Uo(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=Uo(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=Uo(n)?n.toString():n}}return r}catch(e){Vm&&vi.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(i){const t={...e.contexts},r=La(i,n);return Wo(r)&&(wi(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};sc(Jm,zm);var Ym="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};const Xm=ii,Km="ReportingObserver",Qm=new WeakMap,Zm=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Qm.has(Hs()))for(const t of e)Ws((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}$s(`${n}: ${r}`)}))}return{name:Km,setupOnce(){if(!("ReportingObserver"in aa))return;new Xm.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Qm.set(e,!0)}}};sc(Km,Zm);const ev="RewriteFrames",tv=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=t?function(e,t){e=Da(e).slice(1),t=Da(t).slice(1);const n=Ua(e.split("/")),r=Ua(t.split("/")),o=Math.min(n.length,r.length);let i=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){i=e;break}let a=[];for(let e=i;e<n.length;e++)a.push("..");return a=a.concat(r.slice(i)),a.join("/")}(t,o):Ma(o);e.filename=`${n}${i}`}return e});return{name:ev,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};sc(ev,tv);const nv="SessionTiming",rv=()=>{const e=Date.now();return{name:nv,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};sc(nv,rv);const ov="HttpClient",iv=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:ov,setupOnce(){},setup(e){!function(e,t){if(!ca())return;ua((n=>{if(Hs()!==e)return;const{response:r,args:o}=n,[i,a]=o;r&&function(e,t,n,r){if(lv(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,i,a,s;uv()&&([{headers:o,cookies:a},{headers:i,cookies:s}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=sv(t))}catch(t){Vm&&vi.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Vs(cv({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:i,requestCookies:a,responseCookies:s}))}}(t,i,r,a)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in ii))return;Oa((n=>{if(Hs()!==e)return;const r=n.xhr,o=r[wa];if(!o)return;const{method:i,request_headers:a}=o;try{!function(e,t,n,r){if(lv(e,t.status,t.responseURL)){let e,o,i;if(uv()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=sv(e))}catch(e){Vm&&vi.log("Could not extract cookies from response headers")}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Vm&&vi.log("Could not extract headers from response")}e=r}Vs(cv({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:o}))}}(t,r,i,a)}catch(e){Vm&&vi.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function av(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function sv(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function lv(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!Nc(n,Hs());var r,o}function cv(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:av(e.responseHeaders)}}};return Xi(n,{type:"http.client",handled:!1}),n}function uv(){const e=Hs();return!!e&&Boolean(e.getOptions().sendDefaultPii)}sc(ov,iv);const dv=ii,pv="ContextLines",gv=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:pv,setupOnce(){},processEvent:e=>function(e,t){const n=dv.document,r=dv.location&&(o=dv.location.href,o.split(/[\?#]/,1)[0]);var o;if(!n||!r)return e;const i=e.exception&&e.exception.values;if(!i||!i.length)return e;const a=n.documentElement.innerHTML;if(!a)return e;const s=["<!DOCTYPE html>","<html>",...a.split("\n"),"</html>"];return i.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>Xo(e,0))),t.context_line=Xo(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>Xo(e,0)))}(t,e,r),e}(e,s,r,t))))})),e}(e,t)}};function hv(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function fv(e){return hv(e.getAllKeys())}function _v(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=hv(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await cs(t,e.textEncoder);await function(e,t,n){return e((e=>fv(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),hv(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>fv(e).then((t=>{if(0!==t.length)return hv(e.get(t[0])).then((n=>(e.delete(t[0]),hv(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function i(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const a=i(),s=[];for(;r.length;){const e=i(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?o(t):i()])}return[a,s]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}sc(pv,gv);const mv=1e6,vv=String(0),Tv="main";let yv="",Sv="",Ev="",Iv=Id.navigator&&Id.navigator.userAgent||"",Av="";const bv=Id.navigator&&Id.navigator.language||Id.navigator&&Id.navigator.languages&&Id.navigator.languages[0]||"";const wv=Id.navigator&&Id.navigator.userAgentData;var Ov;function Rv(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[vv]:{name:Tv}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:za||0,a=i-(za||i);for(let i=0;i<e.samples.length;i++){const s=e.samples[i];if(void 0===s.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[i]={elapsed_since_start_ns:((s.timestamp+a-o)*mv).toFixed(0),stack_id:t,thread_id:vv};continue}let l=e.stacks[s.stackId];const c=[];for(;l;){c.push(l.frameId);const t=e.frames[l.frameId];void 0===r.frames[l.frameId]&&(r.frames[l.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),l=void 0===l.parentId?void 0:e.stacks[l.parentId]}const u={elapsed_since_start_ns:((s.timestamp+a-o)*mv).toFixed(0),stack_id:n,thread_id:vv};r.stacks[n]=c,r.samples[i]=u,n++}return r}(e):e}function Nv(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Od&&vi.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),i=Rv(n),a=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),s="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(a).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ss,runtime:{name:"javascript",version:Id.navigator.userAgent},os:{name:yv,version:Sv,build_number:Iv},device:{locale:bv,model:Av,manufacturer:Iv,architecture:Ev,is_emulator:!1},debug_meta:{images:Cv(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||Bi(),trace_id:o,active_thread_id:vv,relative_start_ns:"0",relative_end_ns:(1e6*(s-a)).toFixed(0)}]}}function Pv(e){return"pageload"===e.op}"object"==typeof(Ov=wv)&&null!==Ov&&"getHighEntropyValues"in Ov&&wv.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(yv=e.platform||"",Ev=e.architecture||"",Av=e.model||"",Sv=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Iv=`${t.brand} ${t.version}`}})).catch((e=>{}));const Lv=new WeakMap;function Cv(e){const t=ii._sentryDebugIds;if(!t)return[];const n=Hs(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let i;const a=Lv.get(o);a?i=a:(i=new Map,Lv.set(o,i));const s=Object.keys(t).reduce(((e,n)=>{let r;const a=i.get(n);a?r=a:(r=o(n),i.set(n,r));for(let o=r.length-1;o>=0;o--){const i=r[o],a=i&&i.filename;if(i&&a){e[a]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&s[t]&&l.push({type:"sourcemap",code_file:t,debug_id:s[t]});return l}let xv=!1;function kv(e){if(xv)return Od&&vi.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Od&&vi.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Hs(),n=t&&t.getOptions();if(!n)return Od&&vi.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Od&&vi.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Od&&vi.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Od&&vi.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Od&&vi.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Od&&vi.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Dv(e,t,n,r){return function(e){return e.samples.length<2?(Od&&vi.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Od&&vi.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Nv(e,t,n,r):null}const Uv=new Map;function Mv(e){const t=Uv.get(e);return t&&Uv.delete(e),t}function Gv(e){let t;Pv(e)&&(t=1e3*Ja());const n=function(){const e=Id.Profiler;if("function"!=typeof e)return void(Od&&vi.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Od&&(vi.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),vi.log("[Profiling] Disabling profiling for current user session.")),xv=!0}}();if(!n)return e;Od&&vi.log(`[Profiling] started profiling transaction: ${Cs(e).description}`);const r=Bi();async function o(){return e&&n?n.stop().then((t=>(i&&(Id.clearTimeout(i),i=void 0),Od&&vi.log(`[Profiling] stopped profiling of transaction: ${Cs(e).description}`),t?(function(e,t){if(Uv.set(e,t),Uv.size>30){const e=Uv.keys().next().value;Uv.delete(e)}}(r,t),null):(Od&&vi.log(`[Profiling] profiler returned null profile for: ${Cs(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Od&&vi.log("[Profiling] error while stopping profiler:",e),null))):null}let i=Id.setTimeout((()=>{Od&&vi.log("[Profiling] max profile duration elapsed, stopping profiling for:",Cs(e).description),o()}),3e4);const a=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),a()}),(()=>{a()})),e):a()},e}const $v="BrowserProfiling",Vv=()=>({name:$v,setupOnce(){},setup(e){const t=qs().getTransaction();t&&Pv(t)&&kv(t)&&Gv(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{kv(e)&&Gv(e)})),e.on("beforeEnvelope",(e=>{if(!Uv.size)return;const t=function(e){const t=[];return ss(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Od&&vi.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Od&&vi.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const i=Mv(r);if(!i){Od&&vi.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const a=Dv(r,o,i,e);a&&n.push(a)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):vi.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Fv=sc($v,Vv);let jv={};Id.Sentry&&Id.Sentry.Integrations&&(jv=Id.Sentry.Integrations);const Wv={...jv,...nu,...Vp};var Hv=Object.freeze({__proto__:null,Breadcrumbs:cp,BrowserClient:$d,BrowserProfilingIntegration:Fv,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Kl(),ru&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...hd,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Zu(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&nd(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&ed(),this.options._experiments.enableInteractions&&td(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:i,startTransactionOnPageLoad:a,markBackgroundTransactions:s,traceFetch:l,traceXHR:c,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,g=r&&r.tracePropagationTargets,h=g||this.options.tracePropagationTargets;ru&&this._hasSetTracePropagationTargets&&g&&vi.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),a,i),s&&iu(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),ud({traceFetch:l,traceXHR:c,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(ru&&vi.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=this.options,a="pageload"===e.op;let s;if(a){const t=a?fd("sentry-trace"):"",n=a?fd("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:l}=rs(t,n);s={traceId:r,parentSpanId:i,parentSampled:l,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else s={trimEnd:!0,...e};const l="function"==typeof n?n(s):s,c=void 0===l?{...s,sampled:!1}:l;c.metadata=c.name!==s.name?{...c.metadata,source:"custom"}:c.metadata,this._latestRoute.name=c.name,this._latestRoute.context=c,!1===c.sampled&&ru&&vi.log(`[Tracing] Will not send ${c.op} transaction because of beforeNavigate.`),ru&&vi.log(`[Tracing] Starting ${c.op} transaction on scope`);const{location:u}=ou,d=Xl(t,c,r,o,!0,{location:u},i,a);return a&&ou.document&&(ou.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ou.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(ou.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),od(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",i=_l();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:s}=ou,l={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Dl]:this._latestRoute.context?_d(this._latestRoute.context):"url"}};e=Xl(a,l,t,n,!0,{location:s},r)};["click"].forEach((e=>{ou.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Hs(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=_l(),i=qs(),a=void 0!==i?i.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],i=e.duration,s=e.startTime,l=Object.keys(this._interactionIdToRouteNameMapping),c=l.length>0?l.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(l.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===i&&e.startTime===s)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,i);else if(l.length<10||void 0===c||i>this._interactionIdToRouteNameMapping[c].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(c&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[c],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:i,parentContext:n,user:a,activeTransaction:o,replayId:r,startTime:s})}}}))};Du("event",e),Du("first-input",e)}},Dedupe:pp,Feedback:Dm,FunctionToString:Jc,GlobalHandlers:Tp,HttpContext:bp,Hub:ll,InboundFilters:Fc,Integrations:Wv,LinkedErrors:Rp,ModuleMetadata:Uc,Replay:N_,ReplayCanvas:lm,SDK_VERSION:il,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ml,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Gl,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Ul,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Dl,Scope:rl,TryCatch:Cp,WINDOW:Id,addBreadcrumb:Fs,addEventProcessor:_c,addGlobalEventProcessor:Is,addIntegration:function(e){const t=Hs();t&&t.addIntegration?t.addIntegration(e):ys&&vi.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:Kl,breadcrumbsIntegration:lp,browserApiErrorsIntegration:Lp,browserProfilingIntegration:Vv,browserTracingIntegration:(e={})=>{const t=!!ru&&!(!e.tracePropagationTargets&&!e.tracingOrigins);Kl(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...md,...e},r=Zu(),o={};n.enableInp&&nd(o,n.interactionsSampleRate),n.enableLongTask&&ed(),n._experiments.enableInteractions&&td();const i={name:void 0,context:void 0};function a(e){const t=dl(),{beforeStartSpan:o,idleTimeout:a,finalTimeout:s,heartbeatInterval:l}=n,c="pageload"===e.op;let u;if(c){const t=c?yd("sentry-trace"):"",n=c?yd("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:a}=rs(t,n);u={traceId:r,parentSpanId:i,parentSampled:a,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,i.name=d.name,i.context=d,!1===d.sampled&&ru&&vi.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),ru&&vi.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=ou,g=Xl(t,d,a,s,!0,{location:p},l,c);return c&&ou.document&&(ou.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ou.document.readyState)&&g.sendAutoFinishSignal()})),["interactive","complete"].includes(ou.document.readyState)&&g.sendAutoFinishSignal()),g.registerBeforeFinishCallback((e=>{r(),od(e)})),g}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:s,traceFetch:l,traceXHR:c,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,g=r&&r.tracePropagationTargets,h=g||n.tracePropagationTargets;let f;ru&&t&&g&&vi.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let _=ou.location&&ou.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{f&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${Cs(f).op}`),f.end()),f=a({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{f&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${Cs(f).op}`),f.end()),f=a({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&ou.location){const t={name:ou.location.pathname,startTimestamp:za?za/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Dl]:"url"}};vd(e,t)}n.instrumentNavigation&&e.emit&&ou.location&&Ia((({to:t,from:n})=>{if(void 0===n&&_&&-1!==_.indexOf(t))_=void 0;else if(n!==t){_=void 0;const t={name:ou.location.pathname,origin:"auto.navigation.browser",attributes:{[Dl]:"url"}};Td(e,t)}})),s&&iu(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=e,a="ui.action.click",s=_l();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(ru&&vi.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(ru&&vi.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const{location:l}=ou,c={name:t.name,op:a,trimEnd:!0,data:{[Dl]:t.context?Ed(t.context):"url"}};n=Xl(dl(),c,r,o,!0,{location:l},i)};["click"].forEach((e=>{ou.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,i),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Hs(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,i=void 0!==o?o.getReplayId():void 0,a=_l(),s=qs(),l=void 0!==s?s.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],s=n.duration,c=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===s&&e.startTime===c)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,s);else if(u.length<Sd||void 0===d||s>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Sd&&delete e[d],e[r]={routeName:n,duration:s,parentContext:o,user:l,activeTransaction:a,replayId:i,startTime:c})}}}))};Du("event",n),Du("first-input",n)}(o,i),ud({traceFetch:l,traceXHR:c,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},captureConsoleIntegration:Mm,captureEvent:Vs,captureException:Gs,captureMessage:$s,captureSession:Ys,captureUserFeedback:function(e){const t=Hs();t&&t.captureUserFeedback(e)},chromeStackLineParser:Jd,close:async function(e){const t=Hs();return t?t.close(e):(ys&&vi.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){dl().configureScope(e)},contextLinesIntegration:gv,continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=qs(),{traceparentData:o,dynamicSamplingContext:i,propagationContext:a}=function(e,t){const n=ns(e),r=Qa(t),{traceId:o,parentSpanId:i,parentSampled:a}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Bi(),parentSpanId:i||Bi().substring(16),spanId:Bi().substring(16),sampled:a,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Bi(),spanId:Bi().substring(16)}}}(e,t);r.setPropagationContext(a),ys&&o&&vi.log(`[Tracing] Continuing trace ${o.traceId}.`);const s={...o,metadata:Ci({dynamicSamplingContext:i})};return n?gl((()=>n(s))):s},createTransport:Ic,createUserFeedbackEnvelope:Gd,debugIntegration:$m,dedupeIntegration:jm,defaultIntegrations:Mp,defaultRequestInstrumentationOptions:cd,defaultStackLineParsers:rp,defaultStackParser:op,endSession:Js,eventFromException:xd,eventFromMessage:kd,exceptionFromError:Rd,extraErrorDataIntegration:zm,extractTraceparentData:ml,feedbackIntegration:e=>new Dm(e),flush:async function(e){const t=Hs();return t?t.flush(e):(ys&&vi.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:Bc,geckoStackLineParser:Xd,getActiveSpan:Ol,getActiveTransaction:_l,getClient:Hs,getCurrentHub:dl,getCurrentScope:qs,getDefaultIntegrations:Gp,getHubFromCarrier:hl,getReplay:function(){const e=Hs();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},getSpanStatusFromHttpCode:Sl,globalHandlersIntegration:vp,httpClientIntegration:iv,httpContextIntegration:Ap,inboundFiltersIntegration:Vc,init:$p,instrumentOutgoingRequests:ud,isInitialized:function(){return!!Hs()},lastEventId:function(){return dl().lastEventId()},linkedErrorsIntegration:Op,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:_v})}(wc(e))},makeFetchTransport:Fd,makeMain:ul,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function i(t,r){const i=r?`${t}:${r}`:t;let a=o.get(i);if(!a){const s=Si(t);if(!s)return;const l=nc(s,n.tunnel);a=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Oc(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:l}):e({...n,url:l}),o.set(i,a)}return[t,a]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Oc(e,n)}}).map((e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return is(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},makeXHRTransport:jd,metrics:tu,moduleMetadataIntegration:Dc,onLoad:function(e){e()},onProfilingStartRouteTransaction:function(e){return e?kv(e)?Gv(e):e:(Od&&vi.log("[Profiling] Transaction is undefined, skipping profiling"),e)},opera10StackLineParser:ep,opera11StackLineParser:np,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},replayCanvasIntegration:sm,replayIntegration:e=>new N_(e),reportingObserverIntegration:Zm,rewriteFramesIntegration:tv,sendFeedback:Tm,sessionTimingIntegration:rv,setContext:js,setCurrentClient:Ec,setExtra:function(e,t){dl().setExtra(e,t)},setExtras:function(e){dl().setExtras(e)},setHttpStatus:Il,setMeasurement:Ql,setTag:function(e,t){dl().setTag(e,t)},setTags:function(e){dl().setTags(e)},setUser:function(e){dl().setUser(e)},showReportDialog:(e={},t=dl())=>{if(!Id.document)return void(Od&&vi.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Od&&vi.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=Id.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=function(e,t){const n=Ii(e);if(!n)return"";const r=`${ec(n)}embed/error-page/`;let o=`dsn=${yi(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:a}=e;if(a){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{a()}finally{Id.removeEventListener("message",e)}};Id.addEventListener("message",e)}const s=Id.document.head||Id.document.body;s?s.appendChild(i):Od&&vi.error("Not injecting report dialog. No injection point found in HTML")},spanStatusfromHttpCode:El,startBrowserTracingNavigationSpan:Td,startBrowserTracingPageLoadSpan:vd,startInactiveSpan:wl,startSession:Bs,startSpan:function(e,t){const n=Nl(e);return gl((()=>Ws(e.scope,(r=>{const o=dl(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Rl(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Al((()=>t(a)),(()=>{if(a){const{status:e}=Cs(a);e&&"ok"!==e||a.setStatus("internal_error")}}),(()=>a&&a.end()))}))))},startSpanManual:function(e,t){const n=Nl(e);return gl((()=>Ws(e.scope,(r=>{const o=dl(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Rl(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function s(){a&&a.end()}return Al((()=>t(a,s)),(()=>{if(a&&a.isRecording()){const{status:e}=Cs(a);e&&"ok"!==e||a.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return dl().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const o=dl(),i=qs(),a=i.getSpan(),s=Nl(e),l=Rl(o,{parentSpan:a,spanContext:s,forceTransaction:!1,scope:i});return i.setSpan(l),Al((()=>t(l)),(e=>{l&&l.setStatus("internal_error"),n(e,l)}),(()=>{l&&l.end(),i.setSpan(a),r()}))},winjsStackLineParser:Qd,withActiveSpan:function(e,t){return Ws((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return gl((()=>e(pl())))},withScope:Ws,wrap:function(e){return wd(e)()}});function qv(e){if(void 0===e||""===e)return{langCode:void 0,regionalVariant:void 0};let t,n=e.toUpperCase();return e.toUpperCase()in I&&(n=Jv(e).toUpperCase(),t=function(e){const t=e.split("-");if(2===t.length)return t[0].toLowerCase()+"-"+t[1].toUpperCase();return e}(e.toUpperCase())),{langCode:n,regionalVariant:t}}function Bv(e){return e in I?I[e]:e}function Jv(e){return e.split("-")[0]}const zv=()=>{let e=navigator.languages?Jv(navigator.languages[0]).toUpperCase():w;var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return E.map((e=>e.langCode)).includes(e)?e:w},Yv=()=>{var e;if(!(null===(e=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===e?void 0:e.getUILanguage))return zv();{let e=chrome.i18n.getUILanguage();if(!e)return w;switch(e){case"en-US":return"EN-US";case"en-GB":return"EN-GB";case"pt-PT":return"PT-PT";case"pt-BR":return"PT-BR";case"zh-CN":return"ZH";default:{const t=Jv(e).toUpperCase();return E.filter((e=>t===e.langCode)).length>0?t:w}}}},Xv=()=>{const e={};return E.forEach((t=>{const n=Bv(t.langCode);e[n]=0})),e};function Kv(e){if(!e.lang)throw new Error("getLanguageInITAFormat - Language is required");const t=(e.languageList&&e.languageList.length>0?[...e.languageList,...A]:[...E,...A]).find((t=>t.langCode===e.lang.toUpperCase()));let n=null==t?void 0:t.langCodeForIta;return e.direction&&"source"===e.direction?"zh-Hans"==(null==t?void 0:t.langCodeForIta)?"zh":null!=n?n:"autodetect":null!=n?n:e.lang}const Qv="production",Zv="development",eT="testing";function tT(){return Qv}function nT(){return tT()===Zv}function rT(){return tT()===Qv}function oT(){return tT()===eT}function iT(){return r(this,void 0,void 0,(function*(){try{if(!(null===chrome||void 0===chrome?void 0:chrome.cookies)&&!localStorage)return!1;if(!chrome.cookies){return"true"===localStorage.getItem("dl_brex_playwright_env")}const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_brex_playwright_env"});return 0!==e.length&&"true"===e[0].value}catch(e){return!1}}))}function aT(...e){nT()&&console.log(...e)}const sT="Unidentified service name supplied to getServiceType",lT=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!t||!Object.keys(Yn).includes(t))throw new Error(sT);if(!e.isLoggedIn)return Xn;switch(t){case Yn.TRANSLATOR:return e.translatorServiceType;case Yn.WRITE:return e.writeServiceType;case Yn.API:return e.apiServiceType;case Yn.DOC_TRANSLATOR:return e.docTranslatorServiceType}throw new Error(sT)},cT=(e,t)=>lT(e,t)===Kn,uT=e=>e.isLoggedIn&&e.hasTermbaseService,dT=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/,/The message port closed before a response was received/,/NetworkError when attempting to fetch resource/,/JSON.parse: unexpected character at line 1 column 1 of the JSON data/].some((t=>t.test(e))),pT={dsn:"https://0d368beeb4bc3e66f983b2c83eb342dc@o4509354486530048.ingest.de.sentry.io/4509882758201424",release:"deepl-browser-extension@1.71.0",environment:tT(),tracesSampleRate:rT()?.001:1,sampleRate:rT()?.001:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/,/The message port closed before a response was received/,/NetworkError when attempting to fetch resource/,/JSON.parse: unexpected character at line 1 column 1 of the JSON data/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return dT(t)?null:(nT()&&console.error(e),e)}};function gT(e,t){null==t||t.captureException(e)}const hT="GEO_BLOCKED",fT="ENTRY_NOT_FOUND",_T="SERVER_ERROR",mT="INSTALLATION_ERROR",vT="TRANSLATED_INPUT_NOT_SET",TT="OCR_ERROR_OPENING_SIDE_PANEL",yT="OCR_ERROR_IN_TRANSLATE_CAPTURE",ST="SSO_ENFORCED_AUTO_LOGIN_ERROR",ET="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",IT="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",AT="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",bT="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",wT="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED",OT="LOGIN_REQUIRED";class RT extends Error{constructor(e){super(e),this.name=OT,e&&(this.message=e)}}class NT extends Error{constructor(e){super(e),this.name=hT}}class PT extends Error{constructor(e,t){super(t),this.name=ET,this.limit=e,t&&(this.message=t)}}class LT extends Error{constructor(e,t){super(t),this.name=IT,this.limit=e,t&&(this.message=t)}}class CT extends Error{constructor(e,t){super(t),this.name=bT,this.limit=e,t&&(this.message=t)}}class xT extends Error{constructor(e,t){super(t),this.name=wT,this.limit=e,t&&(this.message=t)}}class kT extends Error{constructor(e,t){super(t),this.name=AT,this.limit=e,t&&(this.message=t)}}class DT extends Error{constructor(e,t){super(t),this.name=e,t&&(this.message=t)}}function UT(e,t){try{gT(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}const MT={EVENT_ID_UNSPECIFIED:0,EVENT_ID_TRANSLATION_REQUEST:60001,EVENT_ID_ERROR:60002,EVENT_ID_TRANSLATION_ERROR:60003,EVENT_ID_CONTENT_SCRIPT_ERROR:60004,EVENT_ID_INPUT_INJECTION_DATA:60005,EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED:60006,EVENT_ID_EXTENSION_OPENED:60007,EVENT_ID_LOGO_CLICKED:60008,EVENT_ID_NOTIFICATION_VIEWED:60009,EVENT_ID_SHORTCUT_USED:60010,EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION:60011,EVENT_ID_DOC_TRANS_CLICKED:60012,EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED:60013,EVENT_ID_INLINE_SETTING_OPENED:60014,EVENT_ID_SETTING_CHANGED:60015,EVENT_ID_AUTO_DETECT_LANG:60016,EVENT_ID_RIGHT_CLICK:60017,EVENT_ID_INLINE_POSITION_CHANGE:60018,EVENT_ID_INLINE_DRAG_START:60019,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED:60020,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED:60021,EVENT_ID_FPT_HIDE:60022,EVENT_ID_INLINE_COPY:60023,EVENT_ID_INLINE_LISTEN:60024,EVENT_ID_ICON_HOVER:60025,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:60026,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:60027,EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY:60028,EVENT_ID_ONBOARDING_STEP_CHANGE:60029,EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE:60030,EVENT_ID_READ_MORE_CLICKED:60031,EVENT_ID_LAND_ON_WEBSITE:60032,EVENT_ID_CLOSE_VOICE_OVER:60033,EVENT_ID_OPEN_INPUT_HIGHLIGHTER:60034,EVENT_ID_CLOSE_INPUT_HIGHLIGHTER:60035,EVENT_ID_GDOCS_REPLACE_TEXT:60036,EVENT_ID_INSTALL_SUCCESS:60037,EVENT_ID_OPEN_INLINE_HIGHLIGHTER:60038,EVENT_ID_CLOSE_INLINE_HIGHLIGHTER:60039,EVENT_ID_DICTIONARY_STATUS:60040,EVENT_ID_OPEN_DICTIONARY_SECTION:60041,EVENT_ID_HOVER_DISABLED_DICTIONARY:60042,EVENT_ID_DICTIONARY_ERROR:60043,EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET:60044,EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE:60045,EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE:60046,EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE:60047,EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE:60048,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE:60049,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT:60050,EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR:60051,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN:60052,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED:60053,EVENT_ID_LOGIN:60054,EVENT_ID_LOGOUT:60055,EVENT_ID_SESSION_TYPE:60056,EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED:60057,EVENT_ID_ONBOARDING_MODAL_SHOWN:60058,EVENT_ID_UI_LOCATION_CLICKED:60059,EVENT_ID_INSTALLATION_ID_CREATED:60060,EVENT_ID_BROWSER_INSTANCE_ID_CREATED:60061,EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST:60062,EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY:60063,EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY:60064,EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED:60065,EVENT_ID_DEEPL_WRITE_ERROR:60066,EVENT_ID_SESSION_STARTED:60067,EVENT_ID_LOGGED_IN:60068,EVENT_ID_LOGGED_OUT:60069,EVENT_ID_CUSTOMIZATION_ON_OFF:60070,EVENT_ID_WRITE_RESULT_ACCEPTED:60071,EVENT_ID_WRITE_RESULT_REVERTED:60072,EVENT_ID_TRANSLATION_RESULT_ACCEPTED:60073,EVENT_ID_TRANSLATION_RESULT_REVERTED:60074,EVENT_ID_GMAIL_CHAR_LIMIT_REACHED:60075,EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED:60076,EVENT_ID_UPGRADE_NOTIFICATION_CLOSED:60077,EVENT_ID_UPGRADE_NOTIFICATION_ACTION:60078,EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED:60079,EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED:60080,EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED:80081,EVENT_ID_GLOSSARY_ENABLED:60082,EVENT_ID_GLOSSARY_DISABLED:60083,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:60084,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES:60085,EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING:60086,EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED:60087,EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT:60088,EVENT_ID_ALTERNATIVE_SELECTED:60089,EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL:60090,EVENT_ID_IFRAME_TRANSLATION_FAILED:60091,EVENT_ID_ADS_BUTTON_CLICKED:60092,EVENT_ID_ADS_SHOWN:60093,EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED:60094,EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK:60095,EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK:60096,EVENT_ID_GET_WEBSITE_USER_DATA_FAILED:60097,EVENT_ID_WRITE_TEXT_STYLES_CHANGED:60098,EVENT_ID_WRITE_TEXT_STYLES_APPLIED:60099,EVENT_ID_WRITE_TEXT_TONES_CHANGED:60100,EVENT_ID_EXPERIMENT_TRIGGER:60101,EVENT_ID_TRANSLATION_FORMALITY_CHANGED:60102,EVENT_ID_SIDE_PANEL_OPENED:60103,EVENT_ID_UI_INTERACTION_SIDE_PANEL:60104,EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS:60105,EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED:60106,EVENT_ID_SEND_EXTENSION_INFO_DATA:60107,EVENT_ID_REPLACE_INPUT_FIELD_SELECTION:60108,EVENT_ID_ITA_SESSION:60109,EVENT_ID_SCREEN_CAPTURE_OCR_ERROR:60110,EVENT_ID_FPT_POPUP_OPEN:60111,EVENT_ID_NATIVE_MESSAGE_RECEIVED_FROM_DESKTOP_APP:60112,EVENT_ID_OCR_TRANSLATION_INSTRUCTIONS_CLOSED:60113,EVENT_ID_VIEW_PORT_DIMENSION:60114,EVENT_ID_INLINE_HIGHLIGHTS_SHOWN:60115,EVENT_ID_OPTIONAL_PERMISSION:60116},GT={FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_UNSPECIFIED:0,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_PAGE_LOAD:1,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_RIGHT_CLICK:2,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_SIDEBAR_CLOSED:3},$T={CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2},VT={CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK:3},FT={ITA_SESSION_TYPE_UNSPECIFIED:0,ITA_SESSION_TYPE_TRANSLATE:1,ITA_SESSION_TYPE_WRITE:2},jT={ITA_SESSION_EVENT_TYPE_UNSPECIFIED:0,ITA_SESSION_EVENT_TYPE_NEW_SESSION:1,ITA_SESSION_EVENT_TYPE_RECREATED_SESSION:2,ITA_SESSION_EVENT_TYPE_ERROR:3,ITA_SESSION_EVENT_TYPE_USER_INTERACTION:4},WT={ITA_ERROR_TYPE_UNSPECIFIED:0,ITA_ERROR_TYPE_CONNECTION:1,ITA_ERROR_TYPE_SESSION:2},HT={ITA_USER_INTERACTION_TYPE_UNSPECIFIED:0,ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE:1,ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE:2,ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY:3,ITA_USER_INTERACTION_TYPE_UPDATE_STYLE:4,ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE:5};function qT(){return{url:"https://s.deepl.com/chrome/statistics"}}function BT(e){switch(e){case P:return 1;case N:return 2;case R:return 3;case L:return 4;case C:return 5;case x:return 6;case k:return 7;default:return 0}}function JT(e){switch(e){case fT:return 1;case _T:return 2}}function zT(e){switch(e){case F:return H;case j:return q;default:return 0}}function YT(e){switch(e){case F:return B;case j:return J;case W:return z;default:return 0}}function XT(e){switch(e){case Y:return 1;case K:return 2;default:return 0}}function KT(e){switch(e){case oe:return 1;case Q:return 2;case ee:return 3;case se:return 4;case ce:return 5;case ue:return 6;case de:return 7;case _e:return 8;case ae:return 9;case Z:return 10;case me:return 11;case ve:return 12;case Te:return 13;case be:return 14;case we:return 15;case Oe:return 16;case Re:return 17;case Ne:return 18;case Pe:return 19;case Le:return 20;case Ce:return 21;case xe:return 22;case Ge:return 23;case $e:return 24;case ke:return 25;case De:return 26;case Ue:return 27;case Me:return 28;case Ve:return 29;case Fe:return 30;case je:return 31;case pe:return 32;case We:return 33;case He:return 34;case qe:return 35;case Be:return 36;case ie:return 37;case Je:return 38;case ze:return 39;case Ye:return 40;case Xe:return 41;case Ke:return 42;case Qe:return 43;case Ze:return 44;case et:return 45;case tt:return 46;case nt:return 47;case rt:return 48;case ot:return 49;case it:return 50;case at:return 51;case st:return 52;case lt:return 53;case ct:return 54;case ut:return 55;case dt:return 56;case pt:return 57;case gt:return 58;case ht:return 59;case ft:return 60;case re:return 61;case _t:return 62;case mt:return 63;case vt:return 64;case Tt:return 65;case yt:return 66;case St:return 67;case Et:return 68;case It:return 69;case ye:return 70;case Se:return 71;case Ee:return 72;case Ie:return 73;case Ae:return 74;case te:return 75;case ne:return 76;case le:return 77;case ge:return 78;case he:return 79;case fe:return 80;case At:return 81;case bt:return 82;case wt:return 83;case Ot:return 84;case Rt:return 85;case Nt:return 86;case Pt:return 87;case Lt:return 88;case Ct:return 89;case xt:return 90;case kt:return 96;default:return 0}}function QT(e){switch(e){case Dt:return 1;case Mt:return 2;default:return 0}}function ZT(e){switch(e){case $t:return MT.EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION;case Vt:return MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES;case Ft:return MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE;case jt:return MT.EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY;default:return 0}}function ey(e){switch(e){case Jt:return 1;case zt:return 2;case Yt:return 3;default:return 0}}function ty(e){switch(e){case Ht:return 1;case Wt:return 2;case qt:return 3;case Bt:return 4;default:return 0}}function ny(e){switch(e){case"top":return Xt;case"right":return Kt;case"bottom":return Qt;case"left":return Zt;default:return 0}}function ry(e){switch(e){case Po.shortcut_settings:return Lo.SHORTCUT_SETTINGS;case Po.support_article:return Lo.SUPPORT_ARTICLE;case Po.external.whatsapp:return Lo.EXTERNAL.WHATSAPP;case Po.external.twitter:return Lo.EXTERNAL.TWITTER;case Po.external.youtube:return Lo.EXTERNAL.YOUTUBE;case Po.external.facebook:return Lo.EXTERNAL.FACEBOOK;case Po.external.github:return Lo.EXTERNAL.GITHUB;case Po.external.discord:return Lo.EXTERNAL.DISCORD;case Po.external.telegram:return Lo.EXTERNAL.TELEGRAM;case Po.external.reddit:return Lo.EXTERNAL.REDDIT;case Po.external.gmail:return Lo.EXTERNAL.GMAIL;case Po.external.gdocs:return Lo.EXTERNAL.GDOCS;case Po.external.gslides:return Lo.EXTERNAL.GSLIDES;case Po.external.msOffice:return Lo.EXTERNAL.MSOFFICE;default:return""}}function oy(e){switch(e){case en:return 1;case tn:return 2;case nn:return 3;case rn:return 4;default:return 0}}function iy(e){switch(e){case un:return an;case dn:return sn;case gn:return cn;case pn:return ln;default:return on}}function ay(e){return hn[e]||0}function sy(e){switch(e){case yn:return 1;case Sn:return 2;case In:return 3;case An:return 4;case En:return 5;case bn:return 6;case wn:return 7;case On:return 8;case Rn:return 9;default:return 0}}function ly(e){switch(e){case Nn:return 1;case Pn:return 2;default:return 0}}function cy(e){switch(e){case Ln:return 1;case Cn:return 2;default:return 0}}function uy(e){switch(e){case Or.simple:return 1;case Or.business:return 2;case Or.academic:return 3;case Or.casual:return 4;case Or.enthusiastic:return 5;case Or.friendly:return 6;case Or.confident:return 7;case Or.diplomatic:return 8;default:return 0}}function dy(e){switch(e){case Rr:return 0;case Nr:return 1;case Pr:return 2;default:return 0}}function py(e){switch(e){case MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:case MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:return!0;default:return!1}}function gy(e){switch(e){case xn:return 1;case kn:return 2;default:return 0}}function hy(e){switch(e){case Dn:return 1;case Un:return 2;default:return 0}}function fy(e){switch(e){case qn:return 1;case Bn:return 2;default:return 0}}function _y(e){switch(e){case zn:return 1;case Jn:return 2;default:return 0}}function my(e){switch(e){case Xn:return 1;case Kn:return 2;case Qn:return 3;default:return 0}}function vy(e){switch(e){case pr:return 1;case gr:return 2;case hr:return 3;default:return 0}}function Ty(e){switch(e){case fr:return 1;case _r:return 2;case mr:return 3;case vr:return 4;default:return 0}}function yy(e){switch(e){case Ln:return 1;case Cn:return 2;default:return 0}}function Sy(e){switch(e){case yr:return 1;case Sr:return 2;case Tr:return 3;default:return 0}}function Ey(e){switch(e){case Er:return 1;case Ir:return 2;default:return 0}}function Iy(e){switch(e){case Ar:return 1;case br:return 2;case wr:return 3;default:return 0}}function Ay(e){switch(e){case xr:return 1;case Cr:return 2;case Lr:return 3;case kr:return 4;case Dr:return 5;default:return 0}}function by(e){switch(e){case Ur:return 1;case Mr:return 2;default:return 0}}function wy(e){switch(e){case chrome.runtime.OnInstalledReason.INSTALL:return 1;case chrome.runtime.OnInstalledReason.UPDATE:return 2;case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return 3;case chrome.runtime.OnInstalledReason.SHARED_MODULE_UPDATE:return 4;default:return 0}}function Oy(e){switch(e){case Gr:return 1;case $r:return 2;case Vr:return 3;case Fr:return 4;case jr:return 5;default:return 0}}function Ry(e){switch(e){case Hr:return 1;case qr:return 2;case Br:return 3;default:return 0}}function Ny(e){switch(e){case Jr:return 1;case zr:return 2;case Yr:return 3;case Xr:return 4;default:return 0}}function Py(e){switch(e){case Kr:return FT.ITA_SESSION_TYPE_TRANSLATE;case Qr:return FT.ITA_SESSION_TYPE_WRITE;default:return FT.ITA_SESSION_TYPE_UNSPECIFIED}}function Ly(e){switch(e){case Zr:return jT.ITA_SESSION_EVENT_TYPE_NEW_SESSION;case eo:return jT.ITA_SESSION_EVENT_TYPE_RECREATED_SESSION;case to:return jT.ITA_SESSION_EVENT_TYPE_ERROR;case no:return jT.ITA_SESSION_EVENT_TYPE_USER_INTERACTION;default:return jT.ITA_SESSION_EVENT_TYPE_UNSPECIFIED}}function Cy(e){switch(e){case ro:return WT.ITA_ERROR_TYPE_CONNECTION;case oo:return WT.ITA_ERROR_TYPE_SESSION;default:return WT.ITA_ERROR_TYPE_UNSPECIFIED}}function xy(e){switch(e){case io:return HT.ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE;case ao:return HT.ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE;case so:return HT.ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY;case lo:return HT.ITA_USER_INTERACTION_TYPE_UPDATE_STYLE;case co:return HT.ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE;default:return HT.ITA_USER_INTERACTION_TYPE_UNSPECIFIED}}const ky=e=>{switch(e){case vn:return $T.CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON;case Tn:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON;default:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED}},Dy=e=>{switch(e){case fn:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON;case _n:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON;case mn:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK;default:return VT.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED}};function Uy(e){switch(e){case uo:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_PAGE_LOAD;case po:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_RIGHT_CLICK;case go:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_SIDEBAR_CLOSED;default:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_UNSPECIFIED}}const My=["accountData","domainName"],Gy=[MT.EVENT_ID_SESSION_STARTED,MT.EVENT_ID_LOGGED_IN,MT.EVENT_ID_LOGGED_OUT],$y=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>$y(e,t))):Object.keys(e).reduce(((n,r)=>(t.includes(r)||(n[r]=$y(e[r],t)),n)),{}):e,Vy=(e,t=!1,n=!1)=>e?n&&t?e:!n&&Gy.includes(null==e?void 0:e.eventId)?null:$y(e,My):null,Fy=(e=!1,t=!1)=>!(!e&&!t)&&(!(!e&&t)&&(!(!e||t)||(!(!e||!t)||void 0)));function jy(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}const Wy=e=>{var t,n,r,o,i,a,s,l,c;return{isLoggedIn:!!(null===(t=null==e?void 0:e.loginState)||void 0===t?void 0:t.accountId),translatorServiceType:my(null===(r=null===(n=null==e?void 0:e.featureSet)||void 0===n?void 0:n.translator)||void 0===r?void 0:r.service),docTranslatorServiceType:my(null===(i=null===(o=null==e?void 0:e.featureSet)||void 0===o?void 0:o.documentTranslation)||void 0===i?void 0:i.service),apiServiceType:my(null===(s=null===(a=null==e?void 0:e.featureSet)||void 0===a?void 0:a.api)||void 0===s?void 0:s.service),writeServiceType:my(null===(c=null===(l=null==e?void 0:e.featureSet)||void 0===l?void 0:l.write)||void 0===c?void 0:c.service)}};function Hy(e){return r(this,void 0,void 0,(function*(){let t,n,r,o,i,a,s,l,c,u,d,p,g=!1;try{const e=yield mI(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,u=e.firefoxAnonPermissionGranted,d=e.firefoxPersonalPermissionGranted}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{p=yield HI()}catch(e){console.error(e)}try{const e=yield LI();g=!!e.accountId,r=my(e.translatorServiceType),o=my(e.apiServiceType),i=my(e.docTranslatorServiceType),c=my(e.writeServiceType),s=g?2===r||2===o||2===c||2===i?M:G:U,l=e.sessionType?Iy(e.sessionType):Iy(Ar)}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{a=yield xI()}catch(e){console.error(e)}const h=Oo(),f=yield DI();let _,m;try{_=yield kI()}catch(e){console.error(e)}try{m=yield VI()}catch(e){console.error(e)}const v=Object.assign({eventId:void 0,extensionVersion:"1.71.0",sessionId:n,sessionType:l,installationId:t,browserInstanceId:a,originStore:iy(chrome.runtime.id),userInfos:Object.assign(Object.assign({},_&&{accountData:Object.assign({accountId:_},p&&{organizationId:p})}),{userType:s,translatorServiceType:r,apiServiceType:o,docTranslatorServiceType:i,writeServiceType:c}),userAgent:h.userAgent,platform:h.platform,browser:h.browser,browserVersion:h.browserVersion,browserLang:h.browserLang,clientExperiments:f},m&&{webInstanceId:m});let T=e?e(v):v;if(No()){if(!Fy(u,d))return;if(T=Vy(T,u,d),!T)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(T),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${T.eventId} request failed: ${e}`)}))}))}function qy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_REQUEST,translationRequestData:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({extensionVersion:"1.71.0",domainName:e.domainName,userId:e.installationId,translationTrigger:BT(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount}},e.translationPerformance&&{translationPerformance:e.translationPerformance}),{nicheIntegration:sy(e.nicheIntegration||yn)}),e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation,isAutoTermbase:e.glossaryTrackingInfo.isAutoTermbase}),e.isIta&&{isIta:e.isIta}),e.isInputReviewUiUsed&&{isInputReviewUiUsed:e.isInputReviewUiUsed})})))}))}function By(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ERROR,errorData:{extensionVersion:"1.71.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:Ny(e.errorCategory)}})))}))}function Jy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_ERROR,translationErrorData:{errorData:{extensionVersion:"1.71.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:BT(e.trigger),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function zy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CONTENT_SCRIPT_ERROR,contentScriptErrorData:{errorData:{extensionVersion:"1.71.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}))}function Yy(e){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INPUT_INJECTION_DATA,inputInjectionData:{extensionVersion:"1.71.0"}})))}))}function Xy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_EXTENSION_OPENED,extensionOpenedData:{extensionVersion:"1.71.0",domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:e.extensionOpenedFrom}})))}))}function Ky(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGO_CLICKED,logoClickedData:{extensionVersion:"1.71.0",logoClickedFrom:e.logoClickedFrom}})))}))}function Qy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_NOTIFICATION_VIEWED,notificationViewedData:{extensionVersion:"1.71.0",notificationType:XT(e.notificationType)}})))}))}function Zy(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SHORTCUT_USED,shortcutUsedData:{shortcutType:QT(e.shortcutType),uiLocation:e.location?KT(e.location):void 0,shortcut:e.shortcut,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function eS(e){return r(this,void 0,void 0,(function*(){const t={eventId:ZT(e.uiAction)};return py(t.eventId)&&(t.payload={nicheIntegration:sy(e.nicheIntegration||yn)}),Hy((e=>Object.assign(Object.assign({},e),t)))}))}function tS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_DOC_TRANS_CLICKED})))}))}function nS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED})))}))}function rS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_SETTING_OPENED,inlineSettingOpenedData:{uiFunction:ey(e.uiFunction),uiLocation:KT(e.uiLocation),nicheIntegration:sy(e.nicheIntegration)}})))}))}function oS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SETTING_CHANGED,settingChangedData:{settingType:ty(e.settingType),uiFunction:ey(e.uiFunction),uiLocation:KT(e.uiLocation),domainName:e.domainName}})))}))}function iS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_AUTO_DETECT_LANG,detectLanguageData:{language:e.language}})))}))}function aS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_RIGHT_CLICK,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}))}function sS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_POSITION_CHANGE,inlinePositionChangeData:{newPosition:ny(e.newPosition)}})))}))}function lS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_DRAG_START,inlineDragStartData:{nicheIntegration:sy((null==e?void 0:e.nicheIntegration)||yn)}})))}))}function cS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:_y(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}))}function uS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:_y(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}))}function dS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function pS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED,youtubeCommentTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function gS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_HIDE,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:KT(e.uiLocation)}})))}))}function hS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_COPY,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function fS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_LISTEN,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,textKind:ly(e.textKind),context:cy(e.context),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function _S(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ICON_HOVER,iconHoverData:{uiLocation:KT(e.uiLocation),domainName:e.domainName,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function mS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ONBOARDING_STEP_CHANGE,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:oy(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}))}function vS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE,onboardingOpenExternalPageData:{url:ry(e.url)}})))}))}function TS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LAND_ON_WEBSITE,landOnWebsiteData:{website:ay(e.website)}})))}))}function yS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_VOICE_OVER,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,textKind:ly(e.textKind),context:cy(e.context),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function SS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_OPEN_INPUT_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function ES(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_INPUT_HIGHLIGHTER,closeInputHighlighterData:{triggerType:ky(e)}})))}))}function IS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_REPLACE_TEXT,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}))}function AS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INSTALL_SUCCESS})))}))}function bS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_OPEN_INLINE_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function wS(e){return r(this,arguments,void 0,(function*({trigger:e}){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_INLINE_HIGHLIGHTER,closeInputHighlighterData:{triggerType:Dy(e)}})))}))}function OS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_DICTIONARY_STATUS,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}))}function RS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_OPEN_DICTIONARY_SECTION})))}))}function NS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_HOVER_DISABLED_DICTIONARY})))}))}function PS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_DICTIONARY_ERROR,errorData:{dictionaryError:JT(e.lingueeError)}})))}))}function LS(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Mn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET;break;case Gn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE;break;case $n:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE;break;case Vn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE;break;case Fn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE;break;case jn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE;break;case Wn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT;break;case Hn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR;break;default:return}return Hy((e=>Object.assign(Object.assign({},e),{eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}))}function CS(e){return r(this,void 0,void 0,(function*(){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=MT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=MT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES),t)return Hy((e=>Object.assign(Object.assign({},e),{eventId:t})))}))}function xS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGIN,loginData:{trigger:hy(e.trigger),reason:e.reason}})))}))}function kS(e){return r(this,void 0,void 0,(function*(){const t=Math.round((yield NI())/60);return Hy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_LOGOUT,logoutData:{trigger:gy(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}))}function DS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function US(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function MS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SESSION_TYPE,sessionTypeData:{sessionType:e.sessionType,trigger:fy(e.trigger)}})))}))}function GS(e){return r(this,void 0,void 0,(function*(){let t="";try{t=yield bI()}catch(e){e instanceof Error&&console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return Hy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_ONBOARDING_MODAL_SHOWN,onboardingModalShownData:{nicheIntegration:sy(e.nicheIntegration||yn),sessionType:t}})))}))}function $S(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UI_LOCATION_CLICKED,UILocationClickedData:{uiLocation:KT(e)}})))}))}function VS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INSTALLATION_ID_CREATED})))}))}function FS(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_BROWSER_INSTANCE_ID_CREATED})))}))}function jS(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Zn:n=MT.EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST;break;case er:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY;break;case tr:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY;break;case nr:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED;break;case ar:n=MT.EVENT_ID_DEEPL_WRITE_ERROR;break;case rr:n=MT.EVENT_ID_WRITE_RESULT_ACCEPTED;break;case or:n=MT.EVENT_ID_WRITE_RESULT_REVERTED;break;case ir:n=MT.EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT;break;default:return}return Hy((e=>Object.assign(Object.assign({},e),{eventId:n,deeplWriteMetaData:Object.assign({lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:sy(t.nicheIntegration||yn),error:t.error,style:uy(t.style),trigger:Oy(t.trigger),domainName:t.domainName},t.isInputReviewUiUsed&&{isInputReviewUiUsed:t.isInputReviewUiUsed})})))}))}function WS(){return r(this,void 0,void 0,(function*(){if(!(yield AI()))return;const e=yield kI();return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SESSION_STARTED,accountData:{accountUuid:e}})))}))}function HS(){return r(this,void 0,void 0,(function*(){const e=yield kI();return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGGED_IN,accountData:{accountUuid:e}})))}))}function qS(){return r(this,void 0,void 0,(function*(){const e=yield kI();return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGGED_OUT,accountData:{accountUuid:e}})))}))}function BS(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case sr:n=MT.EVENT_ID_TRANSLATION_RESULT_ACCEPTED;break;case lr:n=MT.EVENT_ID_TRANSLATION_RESULT_REVERTED;break;default:return}return Hy((e=>Object.assign(Object.assign({},e),{eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:sy(t.nicheIntegration||yn),error:t.error}})))}))}function JS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CUSTOMIZATION_ON_OFF,customizationOnOffData:{nicheIntegration:sy(e.nicheIntegration||yn),uiLocation:KT(e.uiLocation),customizationEnabled:e.customizationEnabled}})))}))}function zS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GMAIL_CHAR_LIMIT_REACHED,gmailCharLimitReachedData:{gmailActionType:vy(e.gmailActionType)}})))}))}function YS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED,upgradeNotificationDisplayedData:{type:Ty(e)}})))}))}function XS(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_CLOSED,upgradeNotificationClosedData:{type:Ty(e)}})))}))}function KS(e,t){return r(this,void 0,void 0,(function*(){return Hy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_ACTION,upgradeNotificationActionData:{type:Ty(e),action:Sy(t)}})))}))}function QS(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case cr:n=MT.EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED;break;case ur:n=MT.EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED;break;case dr:n=MT.EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED;break;default:return}return Hy((e=>Object.assign(Object.assign({},e),{eventId:n,alternativesMetaData:Object.assign({sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:sy(t.nicheIntegration||yn),contentProcessingMode:yy(t.contentProcessingMode)},t.alternativesSegmentation&&{alternativesSegmentation:Ey(t.alternativesSegmentation)})})))}))}function ZS(e,t){return r(this,void 0,void 0,(function*(){const n=e?MT.EVENT_ID_GLOSSARY_ENABLED:MT.EVENT_ID_GLOSSARY_DISABLED;return Hy((e=>Object.assign(Object.assign({},e),{eventId:n,glossaryMetadata:{nicheIntegration:sy(t.nicheIntegration||yn)}})))}))}function eE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:BT(e.trigger),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function tE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED})))}))}function nE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ALTERNATIVE_SELECTED,alternativesMetaData:Object.assign({sourceLang:e.sourceLang,targetLang:e.targetLang,numberOfAlternatives:e.numberOfAlternatives,selectedAlternativeIndex:e.selectedAlternative,nicheIntegration:sy(e.nicheIntegration||yn),contentProcessingMode:yy(e.contentProcessingMode)},e.alternativesSegmentation&&{alternativesSegmentation:Ey(e.alternativesSegmentation)})})))}))}function rE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL})))}))}function oE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_IFRAME_TRANSLATION_FAILED,errorData:{extensionVersion:"1.71.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}))}function iE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_ADS_BUTTON_CLICKED})))}))}function aE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ADS_SHOWN,adsShownData:{matchedWord:e.matchedWord}})))}))}function sE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_STYLES_CHANGED,writeTextStylesData:{style:uy(e.style)}})))}))}function lE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_STYLES_APPLIED,writeTextStylesData:{style:uy(e.style)}})))}))}function cE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_TONES_CHANGED,writeTextStylesData:{style:uy(e.tone)}})))}))}function uE(e){return r(this,void 0,void 0,(function*(){const t=Wy(e);return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function dE(e){return r(this,void 0,void 0,(function*(){const t=Wy(e);return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function pE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_GET_WEBSITE_USER_DATA_FAILED})))}))}function gE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_FORMALITY_CHANGED,translationFormalityData:{formality:dy(e.formality)}})))}))}function hE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_SIDE_PANEL_OPENED})))}))}function fE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS})))}))}function _E(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SEND_EXTENSION_INFO_DATA,extensionInfoData:Object.assign(Object.assign({enabled:e.enabled,id:e.id,version:e.version,installType:Ay(e.installType)},e.installReason&&{installReason:wy(e.installReason)}),e.disabledReason&&{disabledReason:by(e.disabledReason)})})))}))}function mE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_REPLACE_INPUT_FIELD_SELECTION,replaceInputFieldData:{replacementType:Ry(e.replacementType)}})))}))}function vE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_HIGHLIGHTS_SHOWN,inlineHighlightData:{numberOfCorrections:e.numberOfCorrections}})))}))}function TE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ITA_SESSION,itaSessionData:Object.assign(Object.assign(Object.assign({itaSessionType:Py(e.itaSessionType),itaSessionEventType:Ly(e.itaSessionEventType)},e.itaErrorType&&{itaErrorType:Cy(e.itaErrorType)}),e.itaErrorMessage&&{itaErrorMessage:e.itaErrorMessage}),e.itaUserInteractionType&&{itaUserInteractionType:xy(e.itaUserInteractionType)})})))}))}function yE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SCREEN_CAPTURE_OCR_ERROR,errorData:{extensionVersion:"1.71.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:Ny(Yr)}})))}))}function SE(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_POPUP_OPEN,fptPopupOpenData:{trigger:Uy(e.trigger)}})))}))}function EE(){return r(this,void 0,void 0,(function*(){return Hy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_OCR_TRANSLATION_INSTRUCTIONS_CLOSED})))}))}const IE="TG-2929",AE="PT-247",bE="PT-1003",wE="PT-1252",OE="PT-1209",RE="PT-1269",NE=(e,t)=>{if(!e||!Array.isArray(e)||0===e.length)return 1;const n=e.find((e=>e.name===t));return n?n.variant:1},PE=(e,t)=>2===NE(e,t);let LE;const CE="dlBrowserExtension",xE="dlCache",kE="actionLogs",DE="dlclientstate",UE="dlexperiments",ME="dlcustomlogo",GE={newWebsiteState:50,dlTrackDictionaryStatus:50,dlTrackIconHover:50,dlTrackInlinePositionChange:50,dlExperimentsUpdated:50,default:300},$E=1500;function VE(e){return GE[e]||GE.default}function FE(){return new Promise(((e,t)=>{let n=indexedDB.open(CE,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){LE=t.target.result,e()},n.onupgradeneeded=function(t){if(LE=t.target.result,LE.objectStoreNames.contains(xE)||LE.createObjectStore(xE,{keyPath:"id"}),!LE.objectStoreNames.contains(kE)){LE.createObjectStore(kE,{keyPath:"id"}).createIndex("action","action",{unique:!1})}e()}}))}function jE(e,t,n){return r(this,void 0,void 0,(function*(){return LE||(yield FE()),new Promise(((r,o)=>{let i=LE.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});i.onsuccess=function(){r()},i.onerror=function(e){o(e)}}))}))}function WE(e,t){return r(this,void 0,void 0,(function*(){return LE||(yield FE()),new Promise(((n,r)=>{let o=LE.transaction(t,"readonly").objectStore(t).get(e);o.onerror=function(e){r(e)},o.onsuccess=function(){o.result?n(o.result):n(null)}}))}))}function HE(e){return r(this,void 0,void 0,(function*(){try{yield jE(DE,e,xE)}catch(e){gT(e,Hv)}}))}function qE(){return r(this,void 0,void 0,(function*(){const e=yield WE(DE,xE);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}))}function BE(e){return r(this,void 0,void 0,(function*(){try{yield jE(UE,e,xE)}catch(e){gT(e,Hv)}}))}function JE(){return r(this,void 0,void 0,(function*(){const e=yield WE(UE,xE);if(!e||!e.meta)return[];return(Date.now()-e.meta.createdAt)/6e4>9?[]:e.data&&0!==e.data.length?e.data:[]}))}function zE(e){return r(this,void 0,void 0,(function*(){try{yield jE(ME,e,xE)}catch(e){gT(e,Hv)}}))}function YE(){return r(this,void 0,void 0,(function*(){const e=yield WE(ME,xE);if(e)return{imageBlob:e.data,imageCachedAt:e.meta.createdAt}}))}function XE(e){return r(this,void 0,void 0,(function*(){if(LE||(yield FE()),!function(){if(!LE)return!1;if(null===LE.version)return!1;if(No())try{return"readonly"===LE.transaction(xE,"readonly").mode}catch(e){return!1}return!0}())return void aT("Database not ready for mutations, skipping action log");if(!LE.objectStoreNames.contains(kE))return;const t=Date.now(),n={id:`${t}-${Math.random().toString(36).substring(2,11)}`,action:e.action,timestamp:t,error:e.error};return new Promise(((e,t)=>{const r=LE.transaction(kE,"readwrite").objectStore(kE).put(n);r.onsuccess=function(){e()},r.onerror=function(e){t(e)}}))}))}function KE(){return r(this,void 0,void 0,(function*(){return LE||(yield FE()),LE.objectStoreNames.contains(kE)?new Promise(((e,t)=>{const n=LE.transaction(kE,"readonly").objectStore(kE).getAll();n.onsuccess=function(){e(n.result||[])},n.onerror=function(e){t(e)}})):[]}))}function QE(){return r(this,void 0,void 0,(function*(){try{aT("Starting efficient action logs cleanup...");const e=yield KE();if(aT(`Found ${e.length} total logs`),e.length>$E){aT(`Total logs (${e.length}) exceed global limit (1500)`);const t=e.sort(((e,t)=>e.timestamp-t.timestamp)),n=t.slice(-1500),r=t.slice(0,t.length-$E);aT(`Global cleanup: keeping ${n.length}, removing ${r.length} oldest logs`),LE||(yield FE());const o=LE.transaction(kE,"readwrite"),i=o.objectStore(kE);yield new Promise(((e,t)=>{o.oncomplete=()=>e(),o.onerror=()=>t(o.error);for(const e of r)i.delete(e.id)})),aT(`Successfully removed ${r.length} log entries due to global limit`),e.splice(0,e.length,...n)}const t=new Map;for(const n of e)t.has(n.action)||t.set(n.action,[]),t.get(n.action).push(n);const n=[];for(const[e,r]of t){const t=VE(e);if(r.length>t){const o=r.sort(((e,t)=>e.timestamp-t.timestamp)),i=o.slice(-t),a=o.slice(0,o.length-t);n.push(...a.map((e=>e.id))),aT(`Action "${e}": keeping ${i.length}, removing ${a.length} old logs`)}else aT(`Action "${e}": ${r.length} logs (within limit of ${t})`)}if(n.length>0){aT(`Removing ${n.length} total log entries...`),LE||(yield FE());const e=LE.transaction(kE,"readwrite"),t=e.objectStore(kE);yield new Promise(((r,o)=>{e.oncomplete=()=>r(),e.onerror=()=>o(e.error);for(const e of n)t.delete(e)})),aT(`Successfully removed ${n.length} log entries`);aT(`Remaining logs after cleanup: ${(yield KE()).length}`)}else aT("No cleanup needed - all actions within limits")}catch(e){aT("Error during efficient action logs cleanup:",e),gT(e,Hv)}}))}function ZE(e){return r(this,void 0,void 0,(function*(){try{if(e.error&&(t=e.error,[/Could not establish connection\. Receiving end does not exist\./,/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((e=>e.test(t)))))return;const n=yield JE();if(!PE(n,bE))return}catch(e){return void aT("Failed to get experiment data for action logging feature:",e)}var t;try{yield XE(e)}catch(e){gT(e,Hv)}}))}function eI(){return r(this,void 0,void 0,(function*(){aT("=== MANUAL CLEANUP STARTED ===");try{const e=yield KE();aT(`Before cleanup: ${e.length} total logs`),yield QE();const t=yield KE();return aT(`After cleanup: ${t.length} total logs`),aT(`Removed: ${e.length-t.length} logs`),aT("=== MANUAL CLEANUP COMPLETED ==="),{beforeCount:e.length,afterCount:t.length,removedCount:e.length-t.length}}catch(e){throw aT("Manual cleanup failed:",e),gT(e,Hv),e}}))}function tI(){return r(this,void 0,void 0,(function*(){try{const e=yield KE(),t=new Map;for(const n of e)t.has(n.action)||t.set(n.action,[]),t.get(n.action).push(n);const n={totalLogs:e.length,totalLogsLimit:$E,totalLogsExceeded:e.length>$E,totalLogsExcess:Math.max(0,e.length-$E),actionTypes:t.size,actionsNeedingCleanup:[],allActions:[]};for(const[e,r]of t){const t=VE(e),o=r.length>t;n.allActions.push({action:e,currentCount:r.length,limit:t,needsCleanup:o}),o&&n.actionsNeedingCleanup.push({action:e,currentCount:r.length,limit:t,excessCount:r.length-t})}return n.allActions.sort(((e,t)=>t.currentCount-e.currentCount)),aT("=== CLEANUP STATS DEBUG ==="),aT(`Total logs: ${n.totalLogs}/${n.totalLogsLimit} ${n.totalLogsExceeded?"(EXCEEDS GLOBAL LIMIT)":""}`),n.totalLogsExceeded&&aT(`Global limit excess: ${n.totalLogsExcess} logs`),aT(`Action types: ${n.actionTypes}`),aT(`Actions needing cleanup: ${n.actionsNeedingCleanup.length}`),aT("Top 10 actions by log count:"),n.allActions.slice(0,10).forEach(((e,t)=>{aT(`${t+1}. ${e.action}: ${e.currentCount}/${e.limit} ${e.needsCleanup?"(NEEDS CLEANUP)":""}`)})),n.actionsNeedingCleanup.length>0&&(aT("Actions needing cleanup:"),n.actionsNeedingCleanup.forEach((e=>{aT(`- ${e.action}: ${e.currentCount}/${e.limit} (excess: ${e.excessCount})`)}))),aT("=== END CLEANUP STATS DEBUG ==="),n}catch(e){return aT("Error getting cleanup stats:",e),gT(e,Hv),null}}))}const nI=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){const e=new URL("https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ");try{const t=yield rI();e.search=t.toString()}catch(e){console.error("Error setting query parameters on feedback survey URL:",e)}return e.toString()}));e&&chrome.tabs.create({url:e,active:!0})}));function rI(){return r(this,void 0,void 0,(function*(){const e=new URLSearchParams,t=gI();e.set(t.key,t.value);const n=yield hI();n&&e.set(n.key,n.value);const r=fI();e.set(r.key,r.value);const o=yield _I();return e.set(o.key,o.value),e}))}const oI=(e,t,n=void 0,r=void 0)=>{const o=[];let i=[],a=0;for(const s of e){const e=n?n(s):s,l=iI(e);i.length>0&&(a+l>t||r&&i.length>=r)&&(o.push(i),i=[],a=0),i.push(s),a+=l}return i.length>0&&o.push(i),o},iI=e=>(new TextEncoder).encode(e).length;function aI(e){return r(this,void 0,void 0,(function*(){const t=yield createImageBitmap(e);try{const e=[16,32,48,128],n={};for(const r of e){const e=new OffscreenCanvas(r,r).getContext("2d",{alpha:!0,desynchronized:!1});if(!e)throw new Error(`Failed to get 2D rendering context for size ${r}`);e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.drawImage(t,0,0,r,r),n[r]=e.getImageData(0,0,r,r)}yield chrome.action.setIcon({imageData:n})}finally{t.close()}}))}function sI(){return r(this,void 0,void 0,(function*(){yield chrome.action.setIcon({path:"images/deepl_32.png"})}))}function lI(){return r(this,void 0,void 0,(function*(){yield chrome.action.setTitle({title:chrome.i18n.getMessage("appName")})}))}function cI(e){return r(this,void 0,void 0,(function*(){yield chrome.action.setTitle({title:e})}))}const uI=e=>r(void 0,void 0,void 0,(function*(){try{yield e()}catch(e){nT()&&console.log(e)}}));function dI(){return r(this,void 0,void 0,(function*(){if((yield GI(Yn.TRANSLATOR))||(yield GI(Yn.WRITE)))return!0;const e=yield $N();return PE(e,AE)}))}const pI=()=>r(void 0,void 0,void 0,(function*(){const e=new URL("https://www.deepl.com/extension-uninstall");try{const{installationId:t}=yield chrome.storage.sync.get(["installationId"]),n=new URLSearchParams({installation_id:t||"",utm_source:"browser_extension",utm_content:"uninstall_event"});if(yield dI()){n.set("survey","1");(yield rI()).forEach(((e,t)=>{n.set(t,e)}))}e.search=n.toString()}catch(e){console.error("Error setting query parameters on uninstall URL:",e)}chrome.runtime.setUninstallURL(e.toString())}));function gI(){const{browser:e}=Oo(),t="0",n="1",r="2",o="3",i="4",a="5";let s=a;switch(e){case vo.chrome:s=t;break;case vo.firefox:s=n;break;case vo.edge:s=r;break;case vo.opera:s=o;break;case vo.brave:s=i;break;default:s=a}return{key:"br",value:s}}function hI(){return r(this,void 0,void 0,(function*(){const{accountCountry:e}=yield chrome.storage.local.get([mo.accountCountry]);return e?{key:"c",value:e}:null}))}function fI(){return{key:"il",value:chrome.i18n.getUILanguage()}}function _I(){return r(this,void 0,void 0,(function*(){const e="0",t="1",n="2",r=yield AI(),o=(yield GI(Yn.TRANSLATOR))||(yield GI(Yn.WRITE));return{key:"ut",value:r?o?n:t:e}}))}function mI(e){return r(this,void 0,void 0,(function*(){if(e.includes("session")){const e=yield chrome.storage.sync.get(["session"]);e&&!e.session&&(yield vI())}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}))}function vI(){return r(this,void 0,void 0,(function*(){const e=m();yield chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{yield WS()}catch(e){console.error(e)}}))}function TI(){return r(this,void 0,void 0,(function*(){const{session:e}=yield mI(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?yield vI():yield chrome.storage.sync.set({session:Object.assign(Object.assign({},e),{timestamp:Date.now()})})}))}function yI(e,t,n){return r(this,void 0,void 0,(function*(){const r=S(e);return yield chrome.storage.local.set({a_t:e,r_t:t,[mo.auth.idToken]:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:null==r?void 0:r.sessionType,organizationId:null==r?void 0:r.organizationId}),null==r?void 0:r.sessionType}))}function SI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.auth.accessToken,mo.auth.refreshToken,mo.auth.idToken,"delegatedLoginMapping",mo.auth.organizationId]),yield chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}))}function EI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),yield chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}))}function II(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.accessToken,mo.auth.refreshToken,mo.auth.idToken]);return{access_token:e?e[mo.auth.accessToken]:void 0,refresh_token:e?e[mo.auth.refreshToken]:void 0,id_token:e?e[mo.auth.idToken]:void 0}}))}function AI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.isLoggedIn]);return!(!e||!e.isLoggedIn)}))}function bI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["sessionType"]);return null==e?void 0:e.sessionType}))}function wI(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get(["installationId"])).installationId}))}function OI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[mo.auth.last_login]:Date.now()})}))}function RI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.auth.last_login])}))}function NI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.last_login]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}))}function PI(e){return r(this,void 0,void 0,(function*(){var t,n,r,o,i;const a=e.featureSet.translator.service,s=e.featureSet.write.service,l=e.featureSet.api.service,c=e.featureSet.documentTranslation.service,u=e.featureSet.glossary.termbaseService,d=e.featureSet.glossary.maxGlossaries,p=e.featureSet.glossary.creation;let g,h;(null===(t=e.loginState)||void 0===t?void 0:t.accountId)&&(g=e.loginState.accountId),(null===(r=null===(n=e.featureSet)||void 0===n?void 0:n.integrations)||void 0===r?void 0:r.browserExtension)&&(h=null===(i=null===(o=e.featureSet)||void 0===o?void 0:o.integrations)||void 0===i?void 0:i.browserExtension);let f=null==e?void 0:e.menuTranslatePageHead;yield chrome.storage.local.set({translatorServiceType:a,writeServiceType:s,apiServiceType:l,docTranslatorServiceType:c,accountId:g||"",featureSet:h,hasTermbaseService:u&&d>0,customTranslatorName:null!=f?f:"",canCreateGlossary:p}),f?cI(f):lI()}))}function LI(){return r(this,void 0,void 0,(function*(){return yield chrome.storage.local.get([mo.auth.isLoggedIn,"isProUser","sessionType",mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.accountId,mo.glossary.hasTermbaseService,mo.auth.organizationId])}))}function CI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({browserInstanceId:m()})}))}function xI(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}))}function kI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.accountId,mo.auth.accessToken,mo.auth.idToken]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=S(e.a_t),n=S(e[mo.auth.idToken]);return(null==t?void 0:t.sub)||(null==n?void 0:n.sub)}}))}function DI(){return r(this,void 0,void 0,(function*(){let e=[];try{e=yield JE()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}))}function UI(){return r(this,arguments,void 0,(function*(e=mo.auth.translatorServiceType){const t=yield LI(),n=!!t.accountId,r=t[e];return n?r===Kn?M:G:U}))}function MI(){return r(this,arguments,void 0,(function*(e=mo.auth.translatorServiceType){const t=yield UI(e);let n;switch(e){case mo.auth.translatorServiceType:n=$;break;case mo.auth.writeServiceType:n=V;break;default:n=$}switch(t){case U:return n.notLoggedIn;case G:return n.loggedInFree;case M:return;default:return n.notLoggedIn}}))}function GI(e){return r(this,void 0,void 0,(function*(){const t=yield chrome.storage.local.get([mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.isLoggedIn]);return cT(t,e)}))}function $I(){return r(this,void 0,void 0,(function*(){var e;const t=yield chrome.storage.local.get([mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.isLoggedIn]);return Object.assign(Object.assign({},t),{isLoggedIn:null!==(e=t.isLoggedIn)&&void 0!==e&&e})}))}function VI(){return r(this,void 0,void 0,(function*(){if(No())return;const e=yield chrome.cookies.get({name:"dapUid",url:"https://www.deepl.com"});return e?e.value:void 0}))}function FI(e){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[mo.whiteLabelLogoId]:e.whiteLabelLogoId,[mo.accountCountry]:e.locale.countryCode})}))}function jI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.whiteLabelLogoId]),yield chrome.storage.local.remove([mo.accountCountry])}))}function WI(){return r(this,void 0,void 0,(function*(){var e;let t;try{t=yield chrome.storage.local.get([mo.translationLanguages])}catch(e){return console.error("Failed to get translation languages, fallback to static supported languages:",e),E}return null!==(e=null==t?void 0:t.translationLanguages)&&void 0!==e?e:E}))}function HI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.organizationId]);return null==e?void 0:e.organizationId}))}const qI=["requireLogin","suggestIdp","customExtensionIcon","enforceSsoAutologin","skipOnboarding","preventFeedbackSurvey","hideWrite"],BI=()=>r(void 0,void 0,void 0,(function*(){try{return yield chrome.storage.managed.get(qI)}catch(e){return}})),JI=()=>r(void 0,void 0,void 0,(function*(){const e=yield BI();if(void 0===e)return;const{isLoggedIn:t}=yield LI();if(e.requireLogin&&!t)throw new RT})),zI=()=>r(void 0,void 0,void 0,(function*(){var e;const t=yield BI();return void 0!==t&&(null!==(e=t.customExtensionIcon)&&void 0!==e&&e)})),YI=()=>r(void 0,void 0,void 0,(function*(){var e,t;const n=yield BI();return void 0===n?{enforceSsoAutologin:!1,autoLoginSsoDomain:void 0}:{enforceSsoAutologin:null!==(e=n.enforceSsoAutologin)&&void 0!==e&&e,autoLoginSsoDomain:null!==(t=n.suggestIdp)&&void 0!==t?t:void 0}}));function XI(){return r(this,arguments,void 0,(function*(e=!1){if(!e){let e;try{e=yield JE()}catch(e){}if(e&&e.length)return e}const t=yield wI();if(!t)throw new Error("Installation ID is not valid");let n=[];try{n=yield JE()}catch(e){}const r=`https://experimentation.deepl.com/experiments/${t}`;let o;try{const e=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(o=(yield e.json()).client_experiments,!o)return[];const t=yield KI();return t.length&&(o=o.map((e=>{const n=t.find((t=>t.id===e.id));return n?Object.assign(Object.assign({},e),{variant:n.variant}):e}))),yield BE(o),o}catch(e){return[]}}))}function KI(){return r(this,void 0,void 0,(function*(){if(No())return[];const e=yield chrome.cookies.get({name:"dl_experiment_override",url:"https://www.deepl.com"});if(!e)return[];return e.value.split("|").map((e=>{const[t,n]=e.split("-");return{id:parseInt(t),variant:parseInt(n)}})).filter((e=>!isNaN(e.id)&&!isNaN(e.variant)))}))}const QI=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);function ZI(e){return r(this,void 0,void 0,(function*(){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return QI.get(n)}(Bv(e.sourceLang),Bv(e.targetLang)),n=encodeURIComponent(e.text),o=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let i=function(e){return r(this,void 0,void 0,(function*(){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new DT(fT)):(console.error("Dictionary Server Error"),new DT(_T));{try{t=yield e.text()}catch(e){throw new DT(_T)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}))}(yield fetch(o));return i}))}function eA(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const tA="ACCESS_DENIED",nA="INVALID_REQUEST",rA="INVALID_GRANT",oA="GET_TOKEN_ERROR",iA="INVALID_NONCE",aA="TOO_MANY_REQUESTS",sA="REGION_UNAVAILABLE";class lA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=tA}}class cA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=nA}}class uA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=rA}}class dA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=aA}}class pA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=oA}}class gA extends Error{constructor(e){super(e),this.name=iA}}class hA extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=sA}}function fA(e,t,n){if(200!==e){if(451===e)throw new hA(`dl-oidc (get tokens): region unavailable - http status: ${e}`,e);if("invalid_request"===t.error)throw new cA(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new uA(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);if("too_many_requests"===t.error)throw new dA(`dl-oidc (get tokens): too many requests - http status: ${e}`,e);throw new pA(`dl-oidc (get tokens): http status: ${e}`,e)}if(null==n?void 0:n.scopes){if(n.scopes.split(" ").includes("openid")){if(!t||!t.id_token)throw new cA("dl-oidc (get tokens): missing id_token in response",400);const e=S(t.id_token);if(!e)throw new cA("dl-oidc (get tokens): invalid id_token payload",400);if(n.nonce&&(null==e?void 0:e.nonce)!==n.nonce)throw new gA("dl-oidc (get tokens): invalid nonce")}}}function _A(e,t){const n=e.split("?")[1];if(!n)return;const r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}let mA;function vA(e){return r(this,void 0,void 0,(function*(){if(mA)return mA;try{const t=yield fetch(`${e}/.well-known/openid-configuration`);if(!t.ok)throw t;const n=yield t.json();return mA=((e,t,n)=>{const r=new URL(t),o=new URL(e);return r.origin===o.origin?n:{authorization_endpoint:n.authorization_endpoint,token_endpoint:n.token_endpoint.replace(r.origin,o.href),introspection_endpoint:n.introspection_endpoint.replace(r.origin,o.href),end_session_endpoint:n.end_session_endpoint,revocation_endpoint:n.revocation_endpoint.replace(r.origin,o.href),userinfo_endpoint:n.userinfo_endpoint.replace(r.origin,o.href),jwks_uri:n.jwks_uri.replace(r.origin,o.href)}})(e,n.issuer,n),mA}catch(t){return console.error("Error while fetching OIDC endpoints",t,e),{authorization_endpoint:`${e}/authorize`,token_endpoint:`${e}/token`,introspection_endpoint:`${e}/introspect`,end_session_endpoint:`${e}/endsession`,revocation_endpoint:`${e}/revoke`,userinfo_endpoint:`${e}/userinfo`,jwks_uri:`${e}/.well-known/jwks`}}}))}const TA=["email","idp","offline_access","openid","profile","service_level","organization"].join(" ");function yA(e,t){return r(this,arguments,void 0,(function*(e,t,n=void 0){const{authorization_endpoint:o}=yield vA(e.authURL),i=y(),a=y(),s=yield function(e){return r(this,void 0,void 0,(function*(){const t=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}))}(a),l=new URLSearchParams([["client_id",e.clientId],["response_type","code"],["redirect_uri",t],["scope",TA],["code_challenge",s],["code_challenge_method","S256"],["nonce",i]]);n&&l.append("identity_provider",n),e.isSignUp?l.append("prompt","create"):l.append("prompt","select_account");const c=new URL(o);return c.search=l.toString(),{url:c.toString(),nonce:i,codeVerifier:a}}))}const SA=new class{get state(){return this._state}constructor(e,t,n){this.failureCountThreshold=e,this.openTimeRange=t,this.openDefaultErrorGenerator=n,this._state="CLOSED",this._failureCount=0,this._failureTripTimeoutHandle=void 0}execute(e){return r(this,void 0,void 0,(function*(){if("OPEN"===this._state)throw this.openDefaultErrorGenerator();try{return yield e()}catch(e){throw this.handleFailure(),e}}))}handleFailure(){if(this._failureCount++,this._failureCount<this.failureCountThreshold)return;this._state="OPEN",void 0!==this._failureTripTimeoutHandle&&clearTimeout(this._failureTripTimeoutHandle);const e=Math.random()*(this.openTimeRange.maxMs-this.openTimeRange.minMs)+this.openTimeRange.minMs;this._failureTripTimeoutHandle=setTimeout((()=>{this._state="CLOSED",this._failureCount=0}),e)}}(1,{minMs:2e4,maxMs:4e4},(()=>new pA("dl-oidc (get tokens): circuit breaker open")));function EA(e){return r(this,arguments,void 0,(function*(e,t=!1,n=2e3,o=!0){const i=yield e.storage.getTokens();if(!i)return null;const{token_endpoint:a}=yield vA(e.authURL),s=()=>r(this,void 0,void 0,(function*(){const n=yield fetch(a,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(Object.assign({client_id:e.clientId},t?{grant_type:"legacy_session",scope:TA,id_token:i.id_token}:{grant_type:"refresh_token",refresh_token:i.refresh_token}))}),r=yield n.json();fA(n.status,r,{scopes:TA});const{access_token:o,refresh_token:s,id_token:l}=r;return{access_token:o,refresh_token:s,id_token:l}})),l=()=>new Promise(((e,t)=>{let o=0;const i=()=>r(this,void 0,void 0,(function*(){try{const t=yield s();e(t)}catch(e){if(e instanceof cA||e instanceof uA||e instanceof lA)return void t(e);if(o>=2)return void t(e);o++,setTimeout(i,o*n)}}));i()}));return yield o?SA.execute((()=>l())):l()}))}const IA=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=!1,n=6e4){const r=yield e.storage.getTokens();if(!r)return;const o=function(e){var t;const n=S(e);return 1e3*(null!==(t=null==n?void 0:n.exp)&&void 0!==t?t:0)}(r.access_token)-Date.now()<n,i=((e,t)=>{if(!e)return!1;const n=S(e);return(null==n?void 0:n.iss)===t})(r.id_token,e.legacyAuthURL);if(t||o||i){const t=yield EA(e,i);return t&&(yield e.storage.saveTokens(t)),null==t?void 0:t.access_token}return r.access_token}));function AA(e,t){return r(this,arguments,void 0,(function*(e,t,n={},o){var{omitCookies:i}=n,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["omitCookies"]);function s(t){return r(this,void 0,void 0,(function*(){return yield fetch(e,Object.assign(Object.assign(Object.assign({},a),{headers:Object.assign(Object.assign({},a.headers),{Authorization:t?`Bearer ${t}`:"None"})}),i&&{credentials:"omit"}))}))}void 0===o&&(o=!1);const l=yield IA(t,o);let c=yield s(l);if(401===c.status||403===c.status){if(!l)throw c;const e=yield EA(t);if(!e)throw c;yield t.storage.saveTokens(e),c=yield s(e.access_token)}if(451===c.status)throw new hA(`dl-oidc (auth fetch): region unavailable - http status: ${c.status}`,c.status);return c}))}const bA=(e=>({fetch:(t,n={},r=!1)=>AA(t,e,n,r),getAccessToken:(...t)=>r(void 0,[...t],void 0,(function*(t=!1,n=6e4){return IA(e,t,n)})),initTokens:(t,n=!0)=>function(e,t){return r(this,arguments,void 0,(function*(e,{redirect_uri:t,response_url:n,nonce:r,code_verifier:o},i=!0){const{token_endpoint:a}=yield vA(e.authURL),s=_A(n,"code");if(!s){const e=_A(n,"error");if("access_denied"===e)throw new lA("dl-oidc (get tokens): access denied - undefined code",401);if("invalid_request"===e)throw new cA("dl-oidc (get tokens): invalid request - undefined code",400)}let l={client_id:e.clientId,code_verifier:o,grant_type:"authorization_code",redirect_uri:t};s&&(l.code=s);const c=yield fetch(a,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}),u=yield c.json();return fA(c.status,u,{nonce:r,scopes:TA}),i&&(yield e.storage.saveTokens(u)),u}))}(e,t,n),createLoginParameters:(t,n)=>yA(e,t,n),createSignUpParameters:(t,n)=>yA(Object.assign(Object.assign({},e),{isSignUp:!0}),t,n),createLogoutParameters:t=>function(e,t){return r(this,void 0,void 0,(function*(){const n=yield e.storage.getTokens();if(!n)return;const r=n.id_token,{end_session_endpoint:o}=yield vA(e.authURL),i=new URLSearchParams([["client_id",e.clientId],["id_token_hint",r],["post_logout_redirect_uri",t]]),a=new URL(o);return a.search=i.toString(),{url:a.toString()}}))}(e,t)}))({clientId:"chromeExtension",authURL:"https://auth.deepl.com",legacyAuthURL:"https://www.deepl.com",storage:{getTokens:()=>r(void 0,void 0,void 0,(function*(){const e=yield II();return e.access_token&&e.refresh_token&&e.id_token?e:null})),saveTokens:e=>r(void 0,void 0,void 0,(function*(){yI(e.access_token,e.refresh_token,e.id_token)}))}});function wA(){return r(this,arguments,void 0,(function*(e=!1,t=!0){if(!e){const e=yield qE();if(e)return e}const n=jy("getClientState",{v:"20180814"},_()),r=yield bA.fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n),credentials:"omit"},t),o=(yield r.json()).result;return o&&(HE(o),PI(o)),o}))}const OA=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield yI(e.access_token,e.refresh_token,e.id_token);try{yield wA(!0,!1),yield zP(),xS(t),HS(),n&&MS({sessionType:n,trigger:"LOGIN"})}catch(e){console.error(e)}yield OI()})),RA="ITA_REQUEST_TRANSLATION",NA="ITA_CLOSE_TRANSLATION_SESSION",PA="ITA_REQUEST_WRITE",LA="ITA_WRITE_UPDATE_SOURCE_TEXT",CA="ITA_RESTORE_TRANSLATE_SESSION",xA="ITA_TRANSLATE_SOURCE_LANGUAGE",kA="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",DA="ITA_TARGET_TEXT_FIELD",UA="ITA_WRITE_TARGET_TEXT_FIELD",MA="ITA_UPDATE_FORMALITY",GA="ERROR",$A="ITA_DOCUMENT_STATE",VA="ITA_WRITE_DOCUMENT_STATE",FA="ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",jA="ITA_WRITE_UPDATE_STYLE_VARIANT",WA="ITA_RESTORE_WRITE_SESSION",HA="ITA_WRITE_SOURCE_LANGUAGE",qA="ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",BA="ITA_CLOSE_WRITE_SESSION",JA="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED",zA="ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED",YA="ITA_TRANSLATE_GENERIC_ERROR",XA="ITA_WRITE_GENERIC_ERROR",KA="ITA_TRANSLATE_GEO_BLOCKED_ERROR",QA={REQUEST:{ITA_SELECT_ALTERNATIVE:"ITA_SELECT_WRITE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_WRITE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_TRANSLATE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}},ZA={REQUEST:{ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ITA_SELECT_ALTERNATIVE:"ITA_SELECT_TRANSLATE_ALTERNATIVE",ITA_UPDATE_SOURCE_LANGUAGE:"ITA_UPDATE_SOURCE_LANGUAGE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_TRANSLATE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_WRITE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS",ITA_TARGET_LANGUAGE:"ITA_TARGET_LANGUAGE"}},eb={dlTranslate:"dlTranslate",dlTranslateInline:"dlTranslateInline",dlTranslateInput:"dlTranslateInput",dlTranslateSelectionRightClick:"dlTranslateSelectionRightClick",dlTranslateSelectedArea:"dlTranslateSelectedArea",dlTriggerTranslationShortcut:"dlTriggerTranslationShortcut"},tb={dlImproveInline:"dlImproveInline",dlImproveInput:"dlImproveInput"},nb={dlShowOriginal:"dlShowOriginal",dlTabChanged:"dlTabChanged",dlDefaultPopUpMounting:"dlDefaultPopUpMounting",dlGetWebsiteData:"dlGetWebsiteData",dlShowNotification:"dlShowNotification",dlErrorVisibility:"dlErrorVisibility",dlShowAskForAReviewPopup:"dlShowAskForAReviewPopup",dlShowCustomerSegmentationSurvey:"dlShowCustomerSegmentationSurvey",dlShowArabicSurveyPopup:"dlShowArabicSurveyPopup",dlShowAlert:"dlShowAlert",dlSelectCaptureArea:"dlSelectCaptureArea",dlChangeActiveTabStatus:"dlChangeActiveTabStatus",dlShowPageLoadPopup:"dlShowPageLoadPopup",dlTranslateWebPageByRightMenuClick:"dlTranslateWebPageByRightMenuClick",dlChangeLanguageShortcut:"dlChangeLanguageShortcut"};function rb(e){return r(this,arguments,void 0,(function*(e,t=!0){let n,o=!1;try{const e=yield YI();o=e.enforceSsoAutologin,n=e.autoLoginSsoDomain}catch(e){console.error(e),By({errorCode:e.name,errorMessage:e.message,errorCategory:Jr})}yield(()=>r(this,void 0,void 0,(function*(){var r;const i=e?bA.createSignUpParameters:bA.createLoginParameters,a=yield i(chrome.identity.getRedirectURL(),o?n:void 0);let s;(oT()||(yield iT()))&&(a.url="http://localhost:3000/loginPage?regularUrl="+encodeURIComponent(a.url));try{s=yield chrome.identity.launchWebAuthFlow(Object.assign({interactive:t,url:a.url},!1===t&&!No()&&{abortOnLoadForNonInteractive:!1,timeoutMsForNonInteractive:1e4}))}catch(e){throw console.error(e),By({errorCode:e.name,errorMessage:e.message,errorCategory:Jr}),e}if(!s){const e=null===(r=chrome.runtime.lastError)||void 0===r?void 0:r.message;if(console.error("response url undefined",e),e&&(/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)))return;{const n=t?"interactive login":"non-interactive login";throw gT(`login - response url undefined. ${e} - ${n}`,Hv),By({errorCode:e,errorMessage:`${e} - ${n}`,errorCategory:Jr}),new Error(`login - response url undefined. ${e} - ${n}`)}}try{const e=yield bA.initTokens({redirect_uri:chrome.identity.getRedirectURL(),response_url:s,nonce:a.nonce,code_verifier:a.codeVerifier},!1);yield OA(e,{trigger:Dn,reason:"explicit_login"}),ZE({action:"LOGIN_SUCCESS"})}catch(e){throw console.error(e),ZE({action:"LOGIN_ERROR",error:e.message}),By({errorCode:e.name,errorMessage:e.message,errorCategory:Jr}),e}})))(),pI()}))}function ob(e){return r(this,void 0,void 0,(function*(){const t=yield II(),n=yield bA.createLogoutParameters(chrome.identity.getRedirectURL());if(!n)return;const o=()=>r(this,void 0,void 0,(function*(){try{yield qS()}catch(e){console.error(e)}yield Promise.all([RI(),SI(),jI(),sI(),lI()]),yield chrome.storage.local.set({[mo.auth.lastLogoutTrigger]:e.trigger});try{yield kS({trigger:e.trigger,reason:e.reason}),ZE({action:`LOGOUT_${e.trigger}-TRIGGER_${e.reason}-REASON`})}catch(e){console.error(e)}yield wA(!0),EI(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:nb.dlShowAlert,payload:{error:e.reason}})})),pI()}));t.id_token?chrome.identity.launchWebAuthFlow({url:n.url,interactive:!0},(()=>{o(),ZE({action:"LOGOUT_SUCCESS"})})):yield o()}))}function ib(){return r(this,void 0,void 0,(function*(){const e=jy("getClientState",{v:"20180814"},_()),t=yield fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)});return(yield t.json()).result}))}const ab="PROTOCOL_ERROR",sb="FULL_PAGE_SERVER_ERROR",lb="-32003",cb="403",ub="401";class db extends Error{constructor(e){super(e),this.name=ab,this.message=e}}class pb extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class gb extends Error{constructor(e){super(e),this.name=sb,this.message=e}}function hb(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function fb(e,t){return{jsonrpc:"2.0",method:e,params:t,id:hb()}}const _b={TRANSLATE:"translate",WRITE:"write"},mb="pro",vb="LMT_split_text",Tb="LMT_handle_jobs",yb="getTermbases";const Sb=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:o,textType:i,advancedMode:a})=>{const s=await Ab(n,e),l=o?`${s}&method=${vb}&${o}`:`${s}&method=${vb}`,c=fb(vb,{commonJobParams:{mode:e,...!0===a&&{advancedMode:!0},textType:i},lang:{lang_user_selected:r},texts:t});return await Ib(l,{method:"POST",headers:{"Content-Type":"application/json"},body:wb(c)},n)},Eb=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:o,textType:i,formality:a,termbase:s,styleVariant:l,queryParameter:c,regionalVariant:u})=>{const d=await Ab(o,e),p=c?`${d}&method=${Tb}&${c}`:`${d}&method=${Tb}`,g=fb(Tb,{commonJobParams:{mode:e,...i&&{textType:i},...a&&{formality:a},...l&&{style_variant:l},...s&&{termbase:s},...l&&{style_variant:l},...u&&{regionalVariant:u}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:bb(t)});return await Ib(p,{method:"POST",headers:{"Content-Type":"application/json"},body:wb(g)},o)},Ib=async(e,t,n)=>{const r=await AA(e,{authURL:n.auth.authUrl,legacyAuthURL:n.auth.legacyAuthUrl,clientId:n.auth.clientId,storage:{getTokens:()=>n.auth.getAuthTokens(),saveTokens:async e=>{await n.auth.setAuthTokens(e.access_token,e.refresh_token,e.id_token)}}},{...t,omitCookies:n.omitCookies});return await Ob({response:r,isHtml:!1})},Ab=async({auth:e,baseUrls:t,isTermbase:n},r=void 0)=>{const o=await e.getAuthTokens(),i=r===_b.WRITE?t.write:t.translate;if(n)return t.glossary;if(!o||!o.access_token)return i.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(o.access_token),t=e&&"Pro"===e.sessionType;return o.access_token&&t?i.pro:i.free}{const t=await e.getServiceLevels();switch(r){case _b.WRITE:return t.write===mb?i.pro:i.free;case _b.TRANSLATE:return t.translator===mb?i.pro:i.free;default:return i.free}}},bb=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},wb=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},Ob=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new pb(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);if(401===e.status)throw new pb(e.status.toString(),`Translation failed: Http status code ${e.status} unauthorized request.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new db("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new gb(`FPT failed: Http status code ${e.status}`):new pb(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new db("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new db('JSON_RPC: Missing field "code" in error response');throw new pb(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new pb(e.status.toString(),`Http status code ${e.status}`);return n},Rb=_b;function Nb(e){return r(this,arguments,void 0,(function*({texts:e,mode:t=_b.TRANSLATE,targetLang:n}){return kb((o=>r(this,void 0,void 0,(function*(){return yield async function({texts:e,mode:t=_b.TRANSLATE,targetLang:n,config:r}){const o=await Sb({mode:t,texts:e,config:r}),i=o.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===_b.WRITE&&{write_variant_requests:["main","variants"]}})));return await Eb({mode:t,jobs:i,sourceLang:o.result.lang.detected,targetLang:t===_b.WRITE?o.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:o})}))))}))}const Pb=e=>r(void 0,[e],void 0,(function*({mode:e,texts:t,sourceLang:n="auto",textType:o="plaintext",advancedMode:i}){return kb((a=>r(void 0,void 0,void 0,(function*(){return yield Sb({mode:e,texts:t,sourceLang:n,config:a,textType:o,advancedMode:i})}))))})),Lb=e=>r(void 0,[e],void 0,(function*({mode:e,jobs:t,sourceLang:n,targetLang:o,textType:i,formality:a,termbase:s,styleVariant:l,regionalVariant:c}){return kb((u=>r(void 0,void 0,void 0,(function*(){return yield Eb({mode:e,jobs:t,sourceLang:n,targetLang:o,config:u,textType:i,formality:a,termbase:s,styleVariant:l,regionalVariant:c})}))))})),Cb=()=>r(void 0,void 0,void 0,(function*(){return kb((e=>r(void 0,void 0,void 0,(function*(){return yield(async({config:e})=>{const t=`${await Ab({...e,isTermbase:!0})}&method=${yb}`,n=fb(yb,{});return await Ib(t,{method:"POST",headers:{"Content-Type":"application/json"},body:wb(n)},e)})({config:e})}))))}));let xb;const kb=e=>r(void 0,void 0,void 0,(function*(){try{return yield e(Db())}catch(e){if(e.name===tA||e.name===nA||e.name===rA||e.name===lb||e.name===cb||e.name===ub){if(xb)throw e;xb=setTimeout((()=>r(void 0,void 0,void 0,(function*(){try{yield ob({trigger:kn,reason:e.name})}finally{clearTimeout(xb),xb=void 0}}))),5e3)}throw e}})),Db=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0"},auth:{clientId:"chromeExtension",authUrl:"https://auth.deepl.com",legacyAuthUrl:"https://www.deepl.com",getAuthTokens:II,setAuthTokens:yI,getServiceLevels:()=>r(void 0,void 0,void 0,(function*(){const e=yield $I();return{translator:e.translatorServiceType,write:e.writeServiceType}})),tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),Ub=e=>r(void 0,void 0,void 0,(function*(){const t=e.nicheIntegration===yn||e.nicheIntegration===bn||e.nicheIntegration===wn||!e.nicheIntegration,n=yield GI(Yn.TRANSLATOR),r=yield GI(Yn.WRITE);if(!((!n||!r)&&t))return;const o=e.sourceTexts.reduce(((e,t)=>e+t.length),0),i=e.isWriteRequest?mo.auth.writeServiceType:mo.auth.translatorServiceType,a=yield MI(i);if(e.isWriteRequest){if(n&&!r&&o>a)throw new xT(a,"Char limit exceeded (Translator Pro, Write Free)");if(!r&&o>a)throw new CT(a,"Char limit exceeded (Write Free Or Anonymous)")}else{let e;try{e=yield UI()}catch(t){e=U,console.log(t)}if(e===G&&r&&o>a)throw new kT(a,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(e===G&&o>a)throw new PT(a,"Char limit exceeded (Translator Free)");if(e===U&&o>a)throw new LT(a,"Char limit exceeded (Translator Anon)")}})),Mb=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},Gb=e=>e.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),$b=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=void 0){yield JI(),yield Ub(e);const n=yield LI(),r=lT(n,Yn.TRANSLATOR)===Qn;const o=e.isWriteRequest?Rb.WRITE:Rb.TRANSLATE;if(r&&o===Rb.TRANSLATE)throw new pb(cb,"User is not allowed to use the DeepL Translator, please contact your admin");const{activeTermbaseId:i,isGlossaryEnabled:a}=yield mI([mo.glossary.activeTermbaseId,mo.glossary.isGlossaryEnabled]),{isLoggedIn:s,hasTermbaseService:l}=yield LI(),{textLinesComponents:c,sentences:u,sourceLang:d}=yield Vb(e);let p,g=!1,h=!1;const f=qv(e.targetLangCode);if(uT({isLoggedIn:s,hasTermbaseService:l})&&i&&!e.isWriteRequest&&a)try{const[e]=yield TN(),t=Mb(i,e);if(t)for(let e of t.termDictionaries)if(e.languagePair===`${Jv(d)}>${Jv(f.langCode)}`.toLowerCase()){p={id:t.id,dictionaryId:e.id},g=!0,h=t.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}let _;o===Rb.WRITE?"EN"===d&&f.regionalVariant&&["EN-GB","EN-US"].includes(f.regionalVariant.toUpperCase())&&(_=f.regionalVariant):_=f.regionalVariant;const m=Object.assign(Object.assign(Object.assign({mode:o,sourceLang:d,targetLang:e.isWriteRequest?d:f.langCode,textType:e.textType},e.formality&&{formality:e.formality}),p&&{termbase:p}),_&&{regionalVariant:_}),v=null!=t?t:jb;let T=(yield v(m,u)).result;const y=Gb(T);e.autoImproveForTranslate&&o===Rb.TRANSLATE&&(T=yield Fb(e,m,T));const S=T.translations.map(((e,t)=>{var n,r;return`${u[t].prefix}${null!==(r=null===(n=e.beams[0])||void 0===n?void 0:n.sentences[0].text)&&void 0!==r?r:""}`})),E=c.map((e=>e.map((e=>S[e]))));return Object.assign({processedText:E,result:T},g&&{glossaryTrackingInfo:{isGlossaryEnabled:!!p,isGlossaryShared:h,didGlossaryChangeTranslation:y}})})),Vb=e=>r(void 0,void 0,void 0,(function*(){const t=[],n=[],r=e.isWriteRequest?Rb.WRITE:Rb.TRANSLATE,o=yield Pb({texts:e.sourceTexts,mode:r,textType:e.textType});for(const e of o.result.texts){const r=[];for(const t of e.chunks)for(const e of t.sentences)n.push(e),r.push(n.length-1);t.push(r)}return{sentences:n,textLinesComponents:t,sourceLang:o.result.lang.detected}})),Fb=(e,t,n)=>r(void 0,void 0,void 0,(function*(){const r=Jv(e.targetLangCode).toUpperCase();if(Jv(n.source_lang).toUpperCase()===r&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>4&&(o=r,b.includes(Jv(o).toUpperCase()))){return(yield Lb(Object.assign(Object.assign({},t),{mode:Rb.WRITE}))).result}var o;return n})),jb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),r=Object.assign(Object.assign({},e),{jobs:n});return yield Lb(r)}));function Wb(){return r(this,void 0,void 0,(function*(){if(!(yield II()).access_token)return;const e=jy("getCurrentAccount",{v:"20180814"},_()),t=yield bA.fetch("https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e),credentials:"omit"}),n=(yield t.json()).result;return FI(n),n}))}const Hb=20;function qb(e){return r(this,void 0,void 0,(function*(){if(!(yield II()).access_token)throw Error("User is not authenticated");let t;try{const e=yield YE();t=null==e?void 0:e.imageBlob;const n=null==e?void 0:e.imageCachedAt;if(t&&n){const e=Date.now()-n;if(e/6e4<Hb){return{imageObjectURL:yield Bb(t),imageBlob:t}}}}catch(e){console.error("Error getting cached custom logo",e)}try{const t=`https://w.deepl.com/organization/logo/${e}`,n=yield bA.fetch(t,{method:"GET",credentials:"omit"}),r=yield n.blob();yield createImageBitmap(r);const o=yield Bb(r);return yield zE(r),{imageObjectURL:o,imageBlob:r}}catch(e){if(t){return{imageObjectURL:yield Bb(t),imageBlob:t}}throw e}}))}function Bb(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(e)}))}))}const Jb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield $I();return`${cT(n,e)?"https://oneshot-pro.www.deepl.com/v1":"https://oneshot-free.www.deepl.com/v1"}/${"translate"===t?"translate":"write"}`})),zb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield bA.fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),r=yield n.json();if(200===n.status)return r;if(451===n.status)throw new NT;const o=r;throw aT(o),new Error(JSON.stringify(o.errors))})),Yb=e=>Qb(e,ew),Xb=e=>Qb(e,tw),Kb=(e,t,n)=>{const r=!!e.glossary_id,o=t.some((e=>{var t,n;return null!==(n=null===(t=e.glossary_highlights)||void 0===t?void 0:t.some((e=>e.replacement.source!==e.replacement.target)))&&void 0!==n&&n}));return{isGlossaryEnabled:r,didGlossaryChangeTranslation:o,isGlossaryShared:n}},Qb=(e,t)=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield JI(),yield Ub(e);const n=yield Zb(e);let o=Promise.resolve(!1);var i;n.glossary_id&&(i=n.glossary_id,o=r(void 0,void 0,void 0,(function*(){var e;try{const[t]=yield TN(),n=Mb(i,t);return null!==(e=null==n?void 0:n.shared)&&void 0!==e&&e}catch(e){return aT({e:e,message:"fetching glossaries failed"}),!1}})));const a=yield t(n);return{translations:a,glossaryTrackingInfo:Kb(n,a,yield o)}})),Zb=e=>r(void 0,void 0,void 0,(function*(){const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:o}=yield mI([mo.glossary.activeTermbaseId,mo.auth.isLoggedIn,mo.glossary.isGlossaryEnabled,mo.glossary.hasTermbaseService]);let i,a,s=yield WI();uT({isLoggedIn:n,hasTermbaseService:o})&&t&&r&&(i=t);try{a=yield wo({isSnakeCase:!0})}catch(e){console.error(e)}return{text:e.sourceTexts,target_lang:Kv({lang:e.targetLangCode,languageList:s}),glossary_id:null!=i?i:void 0,source_lang:e.sourceLang,formality:e.formality,usage_type:e.usageType,language_model:e.language_model,app_information:a}})),ew=e=>r(void 0,void 0,void 0,(function*(){return yield nw(e)})),tw=e=>r(void 0,void 0,void 0,(function*(){const t=e.text,n=oI(t,24576,(e=>JSON.stringify(e)),100).map((t=>Object.assign(Object.assign({},e),{text:t})));if(1===n.length)return yield nw(n[0]);return(yield Promise.all(n.map(nw))).flat()})),nw=e=>r(void 0,void 0,void 0,(function*(){const t=yield Jb(Yn.TRANSLATOR,"translate");return(yield zb(e,t)).translations})),rw=(e,t=()=>!1)=>{if(e.length>100)return Xb;return t(e)?Xb:Yb},ow=e=>r(void 0,[e],void 0,(function*({sourceTexts:e,selectedTargetLanguage:t,sourceLanguage:n,formality:r,isFullPageTranslation:o}){const i=o?_o:fo,a=yield $N(),s=PE(a,wE),l=o&&!s?"classic":void 0,c=rw(e),u=yield c({sourceTexts:e,targetLangCode:t,sourceLang:n,formality:r,usageType:i,language_model:l});return{glossaryTrackingInfo:u.glossaryTrackingInfo,processedTranslation:u.translations.map((e=>({text:e.text,detected_source_language:e.detected_source_language})))}})),iw=e=>r(void 0,[e],void 0,(function*({payload:e}){yield TI();const t=yield mI(["selectedTargetLanguage","installationId"]),n=new Date;let r;const o=e.texts,i=o.reduce(((e,t)=>e+t.length),0);try{r=yield ow({sourceTexts:o,selectedTargetLanguage:t.selectedTargetLanguage,sourceLanguage:e.sourceLang,isFullPageTranslation:e.isFullPageTranslation})}catch(n){try{n instanceof Error&&Jy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.sourceLang,trigger:e.trigger,characterCount:i})}catch(e){console.log(e)}throw n}const a=(new Date).getTime()-n.getTime();eP();try{qy({installationId:t.installationId,trigger:e.trigger,websiteLanguage:e.sourceLang,targetLanguage:t.selectedTargetLanguage,characterCount:i,translationPerformance:{isFirstRequest:e.isFirstTime,processingTimeInMs:a},domainName:e.domainName,glossaryTrackingInfo:r.glossaryTrackingInfo})}catch(e){console.error(e)}return r.processedTranslation.map((e=>e.text))})),aw=e=>r(void 0,[e],void 0,(function*({payload:{message:e,messageLang:t,domainName:n}}){yield TI();const r=yield mI(["selectedTargetLanguage","installationId"]);let o;try{o=yield ow({sourceTexts:[e],selectedTargetLanguage:r.selectedTargetLanguage,sourceLanguage:t})}catch(o){throw uI((()=>pS({errorCode:o.name,domainName:n,targetLang:r.selectedTargetLanguage,messageLang:t,messageLength:e.length}))),o}return eP(),uI((()=>qy({installationId:r.installationId,trigger:k,websiteLanguage:t,targetLanguage:r.selectedTargetLanguage,characterCount:e.length,domainName:n,nicheIntegration:Rn,glossaryTrackingInfo:o.glossaryTrackingInfo}))),o.processedTranslation})),sw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,messageLang:t,message:n}}){yield TI();const r=yield mI(["selectedTargetLanguage","installationId"]);let o;try{o=yield ow({sourceTexts:[n],selectedTargetLanguage:r.selectedTargetLanguage,sourceLanguage:t})}catch(o){throw o instanceof Error&&uI((()=>uS({errorCode:o.name,domainName:e,targetLang:r.selectedTargetLanguage,messageLang:t,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:zn}))),o}return eP(),uI((()=>cS({messageLang:t,targetLang:r.selectedTargetLanguage,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:zn}))),uI((()=>qy({installationId:r.installationId,trigger:k,websiteLanguage:t,targetLanguage:r.selectedTargetLanguage,characterCount:n.length,domainName:e,nicheIntegration:In,glossaryTrackingInfo:o.glossaryTrackingInfo}))),o.processedTranslation})),lw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,messageLang:t,messages:n,detectedLanguages:r}}){yield TI();const o=yield mI(["selectedTargetLanguage","installationId"]);let i;try{i=yield ow({sourceTexts:n,selectedTargetLanguage:o.selectedTargetLanguage,sourceLanguage:t})}catch(i){if(i instanceof Error)try{uS({errorCode:i.name,domainName:e,targetLang:o.selectedTargetLanguage,messageLang:t,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:null==r?void 0:r.length,numberOfMessages:n.length,translator:Jn})}catch(e){console.log(e)}throw i}eP();try{cS({messageLang:t,targetLang:o.selectedTargetLanguage,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:null==r?void 0:r.length,numberOfMessages:n.length,translator:Jn}),qy({installationId:o.installationId,trigger:k,websiteLanguage:t,targetLanguage:o.selectedTargetLanguage,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e,nicheIntegration:In})}catch(e){console.error(e)}return[{detected_source_language:i.processedTranslation[0].detected_source_language,texts:i.processedTranslation.map((e=>e.text))}]})),cw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,message:t,messageLang:n}}){yield TI();const{selectedTargetLanguage:r,installationId:o}=yield mI(["selectedTargetLanguage","installationId"]),i=t.replace(/\n/g,"<br>");let a;try{a=yield ow({sourceTexts:[i],selectedTargetLanguage:r,sourceLanguage:n})}catch(o){throw o instanceof Error&&uI((()=>dS({errorCode:o.name,domainName:e,targetLang:r,messageLang:n,messageLength:t.length}))),o}eP(),uI((()=>qy({installationId:o,trigger:k,websiteLanguage:n,targetLanguage:r,characterCount:t.length,domainName:e,nicheIntegration:An})));return a.processedTranslation[0].text.replace(/<br\s*\/?>/gi,"\n")})),uw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,message:t,messageLang:n,trigger:r}}){yield TI();const o=yield mI(["selectedTargetLanguage","installationId"]);let i;try{i=yield ow({sourceTexts:[t],selectedTargetLanguage:o.selectedTargetLanguage})}catch(i){throw i instanceof Error&&uI((()=>Jy({errorCode:i.name,errorMessage:i.message,domainName:e,targetLang:o.selectedTargetLanguage,websiteLanguage:n,characterCount:t.length,trigger:r,nicheIntegration:On}))),i}return eP(),uI((()=>qy({installationId:o.installationId,trigger:r||k,websiteLanguage:n,targetLanguage:o.selectedTargetLanguage,characterCount:t.length,domainName:e,nicheIntegration:On,glossaryTrackingInfo:i.glossaryTrackingInfo}))),i.processedTranslation})),dw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,requests:t,sourceLang:n,targetLang:r}}){yield TI();const o=yield mI(["selectedTargetLanguage","installationId"]),i=bn,a=t.reduce(((e,t)=>e+t.text.length),0);let s;try{s=yield ow({sourceTexts:t.map((e=>e.text))||[],selectedTargetLanguage:r,sourceLanguage:n})}catch(t){throw t instanceof Error&&uI((()=>Jy({errorCode:t.name,errorMessage:t.message,domainName:e,targetLang:r,trigger:L,characterCount:a}))),t}eP(),EP();const l=s.processedTranslation[0].detected_source_language;uI((()=>qy({installationId:o.installationId,trigger:k,websiteLanguage:l,targetLanguage:r,characterCount:a,domainName:e,nicheIntegration:i,glossaryTrackingInfo:s.glossaryTrackingInfo})));const c=s.processedTranslation.map((e=>e.text));return[{detected_source_language:l,text:c.join(""),texts:c}]})),pw=e=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield JI(),yield Ub(Object.assign(Object.assign({},e),{isWriteRequest:!0}));const t=yield gw(e);return{improvements:yield hw(t)}})),gw=e=>r(void 0,void 0,void 0,(function*(){let t;try{t=yield wo({isSnakeCase:!0})}catch(e){console.error(e)}return{text:e.sourceTexts,requested_language:e.sourceLangCode?Kv({lang:e.sourceLangCode,direction:"source"}):void 0,style_variant:e.style_variant,app_information:t,corrections_only:e.correctionsOnly,allow_partial_failures:e.allowPartialFailures}})),hw=e=>r(void 0,void 0,void 0,(function*(){const t=yield Jb(Yn.WRITE,"write");return(yield zb(e,t)).improvements})),fw=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=void 0,n=void 0,r=void 0){if(0===e.length)return{processedImprovements:[]};return{processedImprovements:(yield pw({sourceTexts:e,sourceLangCode:t||void 0,correctionsOnly:n,allowPartialFailures:r})).improvements.map((e=>({text:e.text,detected_source_language:e.detected_source_language,error:e.error})))}})),_w=e=>r(void 0,[e],void 0,(function*({payload:{requests:e,platformBehavior:t,skipDapReporting:n,sourceLang:r}}){yield TI();const o=t||yn,i=t!==yn?Fr:$r;let a;try{a=yield fw(e.map((e=>e.text)),r)}catch(t){throw uI((()=>jS(ar,{lang:r,sourceLength:e.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name,trigger:i}))),t}return eP(),t===bn?EP():t===wn&&AP(),!0!==n&&uI((()=>jS(Zn,{lang:r,sourceLength:e.reduce(((e,t)=>e+t.text.length),0),targetLength:a.processedImprovements.reduce(((e,t)=>e+t.text.length),0),nicheIntegration:o,trigger:i}))),[{detected_source_language:a.processedImprovements[0].detected_source_language,text:a.processedImprovements.map((e=>e.text)).join(""),texts:a.processedImprovements.map((e=>e.text))}]}));var mw,vw,Tw={},yw={},Sw={},Ew={};function Iw(){return mw||(mw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;function t(e){return e.unshift("[Statsig]"),e}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class n{static info(...r){n.level>=e.LogLevel.Info&&console.info("  INFO ",...t(r))}static debug(...r){n.level>=e.LogLevel.Debug&&console.debug(" DEBUG ",...t(r))}static warn(...r){n.level>=e.LogLevel.Warn&&console.warn("  WARN ",...t(r))}static error(...r){n.level>=e.LogLevel.Error&&console.error(" ERROR ",...t(r))}}e.Log=n,n.level=e.LogLevel.Warn}(Ew)),Ew}function Aw(){return vw||(vw=1,function(e){var t,n,r;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;const o=Iw();e._getStatsigGlobal=()=>{try{return"undefined"!=typeof __STATSIG__?__STATSIG__:c}catch(e){return c}};e._getStatsigGlobalFlag=t=>(0,e._getStatsigGlobal)()[t];e._getInstance=t=>{const n=(0,e._getStatsigGlobal)();return t?n.instances&&n.instances[t]:(n.instances&&Object.keys(n.instances).length>1&&o.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),n.firstInstance)};const i="__STATSIG__",a="undefined"!=typeof window?window:{},s=void 0!==Ym?Ym:{},l="undefined"!=typeof globalThis?globalThis:{},c=null!==(r=null!==(n=null!==(t=a[i])&&void 0!==t?t:s[i])&&void 0!==n?n:l[i])&&void 0!==r?r:{instance:e._getInstance};a[i]=c,s[i]=c,l[i]=c}(Sw)),Sw}var bw,ww={};function Ow(){return bw||(bw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;const t=new Map,n="start",r="end",o="statsig::diagnostics";function i(e,t,n,r){return Object.assign({key:n,action:t,step:r,timestamp:Date.now()},e)}function a(e,n){var r;const o=null!==(r=t.get(e))&&void 0!==r?r:[];o.push(n),t.set(e,o)}function s(e,t){if(t in e)return e[t]}e.Diagnostics={_getMarkers:e=>t.get(e),_markInitOverallStart:e=>{a(e,i({},n,"overall"))},_markInitOverallEnd:(e,t,n)=>{a(e,i({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:n},r,"overall"))},_markInitNetworkReqStart:(e,t)=>{a(e,i(t,n,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{a(e,i(t,r,"initialize","network_request"))},_markInitProcessStart:e=>{a(e,i({},n,"initialize","process"))},_markInitProcessEnd:(e,t)=>{a(e,i(t,r,"initialize","process"))},_clearMarkers:e=>{t.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:s(e,"code"),name:s(e,"name"),message:s(e,"message")}},_getDiagnosticsData(t,n,r,o){var i;return{success:!0===(null==t?void 0:t.ok),statusCode:null==t?void 0:t.status,sdkRegion:null===(i=null==t?void 0:t.headers)||void 0===i?void 0:i.get("x-statsig-region"),isDelta:!0===r.includes('"is_delta":true')||void 0,attempt:n,error:e.Diagnostics._formatError(o)}},_enqueueDiagnosticsEvent(t,n,r,i){const a=e.Diagnostics._getMarkers(r);if(null==a||a.length<=0)return-1;const s=a[a.length-1].timestamp-a[0].timestamp;e.Diagnostics._clearMarkers(r);const l=function(e,t){const n={eventName:o,user:e,value:null,metadata:t,time:Date.now()};return n}(t,{context:"initialize",markers:a.slice(),statsigOptions:i});return n.enqueue(l),s}}}(ww)),ww}var Rw,Nw,Pw,Lw={},Cw={},xw={},kw={};function Dw(){if(Rw)return kw;return Rw=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw._isTypeMatch=kw._typeOf=void 0,kw._typeOf=function(e){return Array.isArray(e)?"array":typeof e},kw._isTypeMatch=function(e,t){const n=e=>Array.isArray(e)?"array":null===e?"null":typeof e;return n(e)===n(t)},kw}function Uw(){return Nw||(Nw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;const t=Dw();e._DJB2=e=>{let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return String(t>>>0)};e._DJB2Object=(t,n)=>(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(t,n)));e._getSortedObject=(n,r)=>{if(null==n)return null;const o=Object.keys(n).sort(),i={};return o.forEach((o=>{const a=n[o];0!==r&&"object"===(0,t._typeOf)(a)?i[o]=(0,e._getSortedObject)(a,null!=r?r-1:r):i[o]=a})),i}}(xw)),xw}function Mw(){if(Pw)return Cw;Pw=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw._getStorageKey=Cw._getUserStorageKey=void 0;const e=Uw();function t(t,n,r){var o;if(r)return r(t,n);const i=n&&n.customIDs?n.customIDs:{},a=[`uid:${null!==(o=null==n?void 0:n.userID)&&void 0!==o?o:""}`,`cids:${Object.keys(i).sort(((e,t)=>e.localeCompare(t))).map((e=>`${e}-${i[e]}`)).join(",")}`,`k:${t}`];return(0,e._DJB2)(a.join("|"))}return Cw._getUserStorageKey=t,Cw._getStorageKey=function(n,r,o){return r?t(n,r,o):(0,e._DJB2)(`k:${n}`)},Cw}var Gw,$w={};function Vw(){return Gw||(Gw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault={[e.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[e.Endpoint._initialize]:"https://featureassets.org/v1",[e.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}($w)),$w}var Fw,jw={};function Ww(){return Fw||(Fw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;e._getWindowSafe=()=>"undefined"!=typeof window?window:null;e._getDocumentSafe=()=>{var t;const n=(0,e._getWindowSafe)();return null!==(t=null==n?void 0:n.document)&&void 0!==t?t:null};e._isServerEnv=()=>{if(null!==(0,e._getDocumentSafe)())return!1;const t="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||t};e._addWindowEventListenerSafe=(t,n)=>{const r=(0,e._getWindowSafe)();"function"==typeof(null==r?void 0:r.addEventListener)&&r.addEventListener(t,n)};e._addDocumentEventListenerSafe=(t,n)=>{const r=(0,e._getDocumentSafe)();"function"==typeof(null==r?void 0:r.addEventListener)&&r.addEventListener(t,n)};e._getCurrentPageUrlSafe=()=>{var t;try{return null===(t=(0,e._getWindowSafe)())||void 0===t?void 0:t.location.href.split(/[?#]/)[0]}catch(e){return}};e._getUnloadEvent=()=>{const t=(0,e._getWindowSafe)();if(!t)return"beforeunload";return"onpagehide"in t?"pagehide":"beforeunload"}}(jw)),jw}var Hw,qw={};function Bw(){if(Hw)return qw;Hw=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw._createLayerParameterExposure=qw._createConfigExposure=qw._mapExposures=qw._createGateExposure=qw._isExposureEvent=void 0;const e="statsig::config_exposure",t="statsig::gate_exposure",n="statsig::layer_exposure",r=(e,t,n,r,o)=>(n.bootstrapMetadata&&(r.bootstrapMetadata=n.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:i(n,r),secondaryExposures:o,time:Date.now()});qw._isExposureEvent=({eventName:r})=>r===t||r===e||r===n;function o(e,t){return e.map((e=>"string"==typeof e?(null!=t?t:{})[e]:e)).filter((e=>null!=e))}qw._createGateExposure=(e,n,i)=>{var a,s,l;const c={gate:n.name,gateValue:String(n.value),ruleID:n.ruleID};return null!=(null===(a=n.__evaluation)||void 0===a?void 0:a.version)&&(c.configVersion=n.__evaluation.version),r(t,e,n.details,c,o(null!==(l=null===(s=n.__evaluation)||void 0===s?void 0:s.secondary_exposures)&&void 0!==l?l:[],i))},qw._mapExposures=o;qw._createConfigExposure=(t,n,i)=>{var a,s,l,c;const u={config:n.name,ruleID:n.ruleID};return null!=(null===(a=n.__evaluation)||void 0===a?void 0:a.version)&&(u.configVersion=n.__evaluation.version),null!=(null===(s=n.__evaluation)||void 0===s?void 0:s.passed)&&(u.rulePassed=String(n.__evaluation.passed)),r(e,t,n.details,u,o(null!==(c=null===(l=n.__evaluation)||void 0===l?void 0:l.secondary_exposures)&&void 0!==c?c:[],i))};qw._createLayerParameterExposure=(e,t,i,a)=>{var s,l,c,u,d,p,g;const h=t.__evaluation,f=!0===(null===(s=null==h?void 0:h.explicit_parameters)||void 0===s?void 0:s.includes(i));let _="",m=null!==(l=null==h?void 0:h.undelegated_secondary_exposures)&&void 0!==l?l:[];f&&(_=null!==(c=h.allocated_experiment_name)&&void 0!==c?c:"",m=null!==(u=h.secondary_exposures)&&void 0!==u?u:[]);const v=null===(d=t.__evaluation)||void 0===d?void 0:d.parameter_rule_ids,T={config:t.name,parameterName:i,ruleID:null!==(p=null==v?void 0:v[i])&&void 0!==p?p:t.ruleID,allocatedExperiment:_,isExplicitParameter:String(f)};return null!=(null===(g=t.__evaluation)||void 0===g?void 0:g.version)&&(T.configVersion=t.__evaluation.version),r(n,e,t.details,T,o(m,a))};const i=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t);return qw}var Jw,zw={};function Yw(){return Jw||(Jw=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.LoggingEnabledOption=zw.LogEventCompressionMode=void 0,zw.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},zw.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),zw}var Xw,Kw={};function Qw(){return Xw||(Xw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;const t=Iw(),n=Ww(),r={},o={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>r[e]?r[e]:null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]},getAllKeys:()=>Object.keys(r)};let i=null;try{const e=(0,n._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(i={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,n)=>e.localStorage.setItem(t,n),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){t.Log.warn("Failed to setup localStorageProvider.")}let a=null!=i?i:o,s=a;function l(t){try{return t()}catch(t){if(t instanceof Error&&"SecurityError"===t.name)return e.Storage._setProvider(o),null;throw t}}e.Storage={isReady:()=>s.isReady(),isReadyResolver:()=>s.isReadyResolver(),getProviderName:()=>s.getProviderName(),getItem:e=>l((()=>s.getItem(e))),setItem:(e,t)=>l((()=>s.setItem(e,t))),removeItem:e=>s.removeItem(e),getAllKeys:()=>s.getAllKeys(),_setProvider:e=>{a=e,s=e},_setDisabled:e=>{s=e?o:a}},e._getObjectFromStorage=function(t){const n=e.Storage.getItem(t);return JSON.parse(null!=n?n:"null")},e._setObjectInStorage=function(t,n){e.Storage.setItem(t,JSON.stringify(n))}}(Kw)),Kw}var Zw,eO={};function tO(){if(Zw)return eO;Zw=1,Object.defineProperty(eO,"__esModule",{value:!0}),eO.UrlConfiguration=void 0;const e=Uw(),t=Vw(),n={[t.Endpoint._initialize]:"i",[t.Endpoint._rgstr]:"e",[t.Endpoint._download_config_specs]:"d"};return eO.UrlConfiguration=class{constructor(e,r,o,i){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=n[e],r&&(this.customUrl=r),!r&&o&&(this.customUrl=o.endsWith("/")?`${o}${e}`:`${o}/${e}`),i&&(this.fallbackUrls=i);const a=t.NetworkDefault[e];this.defaultUrl=`${a}/${e}`}getUrl(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}getChecksum(){var t;const n=(null!==(t=this.fallbackUrls)&&void 0!==t?t:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+n)}},eO}var nO,rO,oO={};function iO(){return nO||(nO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;const t=Ww(),n="foreground",r="background",o=[];let i=n,a=!1;e._isCurrentlyVisible=()=>i===n;e._isUnloading=()=>a;e._subscribeToVisiblityChanged=e=>{o.unshift(e)};e._notifyVisibilityChanged=e=>{e!==i&&(i=e,o.forEach((t=>t(e))))},(0,t._addWindowEventListenerSafe)("focus",(()=>{a=!1,(0,e._notifyVisibilityChanged)(n)})),(0,t._addWindowEventListenerSafe)("blur",(()=>(0,e._notifyVisibilityChanged)(r))),(0,t._addDocumentEventListenerSafe)("visibilitychange",(()=>{(0,e._notifyVisibilityChanged)("visible"===document.visibilityState?n:r)})),(0,t._addWindowEventListenerSafe)((0,t._getUnloadEvent)(),(()=>{a=!0,(0,e._notifyVisibilityChanged)(r)}))}(oO)),oO}function aO(){if(rO)return Lw;rO=1;var e=Lw.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.EventLogger=void 0;const t=Mw(),n=Uw(),r=Iw(),o=Vw(),i=Ww(),a=Bw(),s=Yw(),l=Qw(),c=tO(),u=iO(),d={};return Lw.EventLogger=class p{static _safeFlushAndForget(e){var t;null===(t=d[e])||void 0===t||t.flush().catch((()=>{}))}static _safeRetryFailedLogs(e){var t;null===(t=d[e])||void 0===t||t._retryFailedLogs()}constructor(e,t,n,i){var a,l;this._sdkKey=e,this._emitter=t,this._network=n,this._options=i,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!==(a=null==i?void 0:i.loggingEnabled)&&void 0!==a?a:!0===(null==i?void 0:i.disableLogging)?s.LoggingEnabledOption.disabled:s.LoggingEnabledOption.browserOnly,(null==i?void 0:i.loggingEnabled)&&void 0!==i.disableLogging&&r.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!==(l=null==i?void 0:i.loggingBufferMaxSize)&&void 0!==l?l:100;const u=null==i?void 0:i.networkConfig;this._logEventUrlConfig=new c.UrlConfiguration(o.Endpoint._rgstr,null==u?void 0:u.logEventUrl,null==u?void 0:u.api,null==u?void 0:u.logEventFallbackUrls)}setLogEventCompressionMode(e){this._network.setLogEventCompressionMode(e)}setLoggingEnabled(e){if("disabled"===this._loggingEnabled&&"disabled"!==e){const e=this._getStorageKey(),t=(0,l._getObjectFromStorage)(e);t&&this._queue.push(...t),l.Storage.removeItem(e)}this._loggingEnabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&p._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(e){var t;const n=null!==(t=this._nonExposedChecks[e])&&void 0!==t?t:0;this._nonExposedChecks[e]=n+1}reset(){this.flush().catch((()=>{})),this._lastExposureTimeMap={}}start(){var e;const t=(0,i._isServerEnv)();t&&"always"!==(null===(e=this._options)||void 0===e?void 0:e.loggingEnabled)||(d[this._sdkKey]=this,t||(0,u._subscribeToVisiblityChanged)((e=>{"background"===e?p._safeFlushAndForget(this._sdkKey):"foreground"===e&&p._safeRetryFailedLogs(this._sdkKey)})),this._retryFailedLogs(),this._startBackgroundFlushInterval())}stop(){return e(this,void 0,void 0,(function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete d[this._sdkKey],yield this.flush()}))}flush(){return e(this,void 0,void 0,(function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;const e=this._queue;this._queue=[],yield this._sendEvents(e)}))}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout((()=>p._safeFlushAndForget(this._sdkKey)),200))}_shouldLogEvent(e){var n;if("always"!==(null===(n=this._options)||void 0===n?void 0:n.loggingEnabled)&&(0,i._isServerEnv)())return!1;if(!(0,a._isExposureEvent)(e))return!0;const r=e.user?e.user:{statsigEnvironment:void 0},o=(0,t._getUserStorageKey)(this._sdkKey,r),s=e.metadata?e.metadata:{},l=[e.eventName,o,s.gate,s.config,s.ruleID,s.allocatedExperiment,s.parameterName,String(s.isExplicitParameter),s.reason].join("|"),c=this._lastExposureTimeMap[l],u=Date.now();return!(c&&u-c<6e5)&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[l]=u,!0)}_sendEvents(t){return e(this,void 0,void 0,(function*(){var e,n;if("disabled"===this._loggingEnabled)return this._saveFailedLogsToStorage(t),!1;try{const o=(0,u._isUnloading)()&&this._network.isBeaconSupported()&&null==(null===(n=null===(e=this._options)||void 0===e?void 0:e.networkConfig)||void 0===n?void 0:n.networkOverrideFunc);this._emitter({name:"pre_logs_flushed",events:t});return(o?this._sendEventsViaBeacon(t):yield this._sendEventsViaPost(t)).success?(this._emitter({name:"logs_flushed",events:t}),!0):(r.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(t),!1)}catch(e){return r.Log.warn("Failed to flush events."),!1}}))}_sendEventsViaPost(t){return e(this,void 0,void 0,(function*(){var e;const n=yield this._network.post(this._getRequestData(t)),r=null!==(e=null==n?void 0:n.code)&&void 0!==e?e:-1;return{success:r>=200&&r<300}}))}_sendEventsViaBeacon(e){return{success:this._network.beacon(this._getRequestData(e))}}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[o.NetworkParam.EventCount]:String(e.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();const t=this._getStorageKey();try{const n=this._getFailedLogsFromStorage(t);(0,l._setObjectInStorage)(t,[...n,...e])}catch(e){r.Log.warn("Unable to save failed logs to storage")}}_getFailedLogsFromStorage(e){let t=[];try{const n=(0,l._getObjectFromStorage)(e);return Array.isArray(n)&&(t=n),t}catch(e){return[]}}_retryFailedLogs(){const t=this._getStorageKey();(()=>e(this,void 0,void 0,(function*(){l.Storage.isReady()||(yield l.Storage.isReadyResolver());const e=(0,l._getObjectFromStorage)(t);e&&(l.Storage.removeItem(t),yield this._sendEvents(e))})))().catch((()=>{r.Log.warn("Failed to flush stored logs")}))}_getStorageKey(){return`statsig.failed_logs.${(0,n._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);const t={},n=this._getCurrentPageUrl();n&&(t.statsigMetadata={currentPage:n});const o=Object.assign(Object.assign({},e),t);r.Log.debug("Enqueued Event:",o),this._queue.push(o)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,i._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;const n=null!==(t=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==t?t:1e4,r=setInterval((()=>{const e=d[this._sdkKey];e&&e._flushIntervalId===r?p._safeFlushAndForget(this._sdkKey):clearInterval(r)}),n);this._flushIntervalId=r}},Lw}var sO,lO={};function cO(){return sO||(sO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.30.0";let t={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>t,add:e=>{t=Object.assign(Object.assign({},t),e)}}}(lO)),lO}var uO,dO={};var pO,gO,hO={},fO={},_O={};function mO(){if(pO)return _O;return pO=1,Object.defineProperty(_O,"__esModule",{value:!0}),_O.getUUID=void 0,_O.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(n=>{let r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:7&r|8).toString(16)}))},_O}function vO(){if(gO)return fO;gO=1,Object.defineProperty(fO,"__esModule",{value:!0}),fO.getCookieName=fO.StableID=void 0;const e=Mw(),t=Iw(),n=Ww(),r=Qw(),o=mO(),i={},a={},s={};function l(t){return`statsig.stable_id.${(0,e._getStorageKey)(t)}`}function c(e,n){const o=l(n);try{(0,r._setObjectInStorage)(o,e)}catch(e){t.Log.warn("Failed to save StableID to storage")}}function u(e,t){if(!a[t]||null==(0,n._getDocumentSafe)())return;const r=new Date;r.setFullYear(r.getFullYear()+1),document.cookie=`${d(t)}=${encodeURIComponent(e)}; expires=${r.toUTCString()}; path=/`}function d(t){return`statsig.stable_id.${(0,e._getStorageKey)(t)}`}return fO.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:e=>{if(s[e])return null;if(null!=i[e])return i[e];let t=null;return t=function(e){if(!a[e]||null==(0,n._getDocumentSafe)())return null;const t=document.cookie.split(";");for(const n of t){const[t,r]=n.trim().split("=");if(t===d(e))return decodeURIComponent(r)}return null}(e),null!=t?(i[e]=t,c(t,e),t):(t=function(e){const t=l(e);return(0,r._getObjectFromStorage)(t)}(e),null==t&&(t=(0,o.getUUID)()),c(t,e),u(t,e),i[e]=t,t)},setOverride:(e,t)=>{i[t]=e,c(e,t),u(e,t)},_setCookiesEnabled:(e,t)=>{a[e]=t},_setDisabled:(e,t)=>{s[e]=t}},fO.getCookieName=d,fO}var TO,yO={};function SO(){if(TO)return yO;TO=1,Object.defineProperty(yO,"__esModule",{value:!0}),yO._getFullUserHash=yO._normalizeUser=void 0;const e=Uw(),t=Iw();return yO._normalizeUser=function(e,n,r){try{const t=JSON.parse(JSON.stringify(e));return null!=n&&null!=n.environment?t.statsigEnvironment=n.environment:null!=r&&(t.statsigEnvironment={tier:r}),t}catch(e){return t.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},yO._getFullUserHash=function(t){return t?(0,e._DJB2Object)(t):null},yO}var EO,IO,AO={};function bO(){if(EO)return AO;EO=1,Object.defineProperty(AO,"__esModule",{value:!0}),AO._typedJsonParse=void 0;const e=Iw();return AO._typedJsonParse=function(t,n,r){try{const e=JSON.parse(t);if(e&&"object"==typeof e&&n in e)return e}catch(e){}return e.Log.error(`Failed to parse ${r}`),null},AO}function wO(){if(IO)return hO;IO=1;var e=hO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(hO,"__esModule",{value:!0}),hO._makeDataAdapterResult=hO.DataAdapterCore=void 0;const t=Iw(),n=vO(),r=SO(),o=Qw(),i=bO();function a(e,t,n,o){return{source:e,data:t,receivedAt:Date.now(),stableID:n,fullUserHash:(0,r._getFullUserHash)(o)}}hO.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._cacheLimit=10,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new s}attach(e,t,n){this._sdkKey=e,this._options=t}getDataSync(e){const t=e&&(0,r._normalizeUser)(e,this._options),n=this._getCacheKey(t),o=this._inMemoryCache.get(n,t);if(o&&this._getIsCacheValueValid(o))return o;const i=this._loadFromCache(n);return i&&this._getIsCacheValueValid(i)?(this._inMemoryCache.add(n,i,this._cacheLimit),this._inMemoryCache.get(n,t)):null}setData(e,t){const n=t&&(0,r._normalizeUser)(t,this._options),o=this._getCacheKey(n);this._inMemoryCache.add(o,a("Bootstrap",e,null,n),this._cacheLimit)}_getIsCacheValueValid(e){return null==e.stableID||e.stableID===n.StableID.get(this._getSdkKey())}_getDataAsyncImpl(n,r,i){return e(this,void 0,void 0,(function*(){o.Storage.isReady()||(yield o.Storage.isReadyResolver());const e=null!=n?n:this.getDataSync(r),a=[this._fetchAndPrepFromNetwork(e,r,i)];return(null==i?void 0:i.timeoutMs)&&a.push(new Promise((e=>setTimeout(e,i.timeoutMs))).then((()=>(t.Log.debug("Fetching latest value timed out"),null)))),yield Promise.race(a)}))}_prefetchDataImpl(t,n){return e(this,void 0,void 0,(function*(){const e=t&&(0,r._normalizeUser)(t,this._options),o=this._getCacheKey(e),i=yield this._getDataAsyncImpl(null,e,n);i&&this._inMemoryCache.add(o,Object.assign(Object.assign({},i),{source:"Prefetch"}),this._cacheLimit)}))}_fetchAndPrepFromNetwork(r,o,s){return e(this,void 0,void 0,(function*(){var e;const l=null!==(e=null==r?void 0:r.data)&&void 0!==e?e:null,c=null!=r&&this._isCachedResultValidFor204(r,o),u=yield this._fetchFromNetwork(l,o,s,c);if(!u)return t.Log.debug("No response returned for latest value"),null;const d=(0,i._typedJsonParse)(u,"has_updates","Response"),p=this._getSdkKey(),g=n.StableID.get(p);let h=null;if(!0===(null==d?void 0:d.has_updates))h=a("Network",u,g,o);else{if(!l||!1!==(null==d?void 0:d.has_updates))return null;h=a("NetworkNotModified",l,g,o)}const f=this._getCacheKey(o);return this._inMemoryCache.add(f,h,this._cacheLimit),this._writeToCache(f,h),h}))}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(t.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;const n=null===(t=o.Storage.getItem)||void 0===t?void 0:t.call(o.Storage,e);if(null==n)return null;const r=(0,i._typedJsonParse)(n,"source","Cached Result");return r?Object.assign(Object.assign({},r),{source:"Cache"}):null}_writeToCache(e,t){const n=JSON.stringify(t);for(let t=0;t<8;t++)try{o.Storage.setItem(e,n);break}catch(t){if(!(t instanceof Error)||!t.toString().includes("QuotaExceededError")&&!t.toString().includes("QUOTA_EXCEEDED_ERR")||this._cacheLimit<=1)throw t;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(e,this._cacheLimit-1)}this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e,t=this._cacheLimit){var n;const r=null!==(n=(0,o._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==n?n:{};r[e]=Date.now();const i=l(r,t);for(const e of i)delete r[e],o.Storage.removeItem(e);(0,o._setObjectInStorage)(this._lastModifiedStoreKey,r)}},hO._makeDataAdapterResult=a;class s{constructor(){this._data={}}get(e,n){var r;const o=this._data[e],i=null==o?void 0:o.stableID,a=null===(r=null==n?void 0:n.customIDs)||void 0===r?void 0:r.stableID;return a&&i&&a!==i?(t.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):o}add(e,t,n){const r=l(this._data,n-1);for(const e of r)delete this._data[e];this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function l(e,t){const n=Object.keys(e);return n.length<=t?[]:0===t?n:n.sort(((t,n)=>{const r=e[t],o=e[n];return"object"==typeof r&&"object"==typeof o?r.receivedAt-o.receivedAt:r-o})).slice(0,n.length-t)}return hO}var OO,RO={};var NO,PO,LO={},CO={};function xO(){if(NO)return CO;NO=1,Object.defineProperty(CO,"__esModule",{value:!0}),CO.SDKType=void 0;const e={};let t;return CO.SDKType={_get:n=>{var r;return(null!==(r=e[n])&&void 0!==r?r:"js-mono")+(null!=t?t:"")},_setClientType(t,n){e[t]=n},_setBindingType(e){t&&"-react"!==t||(t="-"+e)}},CO}function kO(){return PO||(PO=1,function(e){var t=LO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;const n=Iw(),r=xO(),o=cO();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const i="[Statsig] UnknownError";function a(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}function s(e){if(!e)return{};const t={};return Object.keys(e).forEach((n=>{const r=n,o=e[r];switch(typeof o){case"number":case"bigint":case"boolean":t[String(r)]=o;break;case"string":o.length<50?t[String(r)]=o:t[String(r)]="set";break;case"object":"environment"===r?t.environment=o:"networkConfig"===r?t.networkConfig=o:t[String(r)]=null!=o?"set":"unset"}})),t}e.ErrorBoundary=class{constructor(e,t,n,r){this._sdkKey=e,this._options=t,this._emitter=n,this._lastSeenError=r,this._seen=new Set}wrap(e,t){try{const n=e;(function(e){const t=new Set;let n=Object.getPrototypeOf(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter((e=>"function"==typeof(null==n?void 0:n[e]))).forEach((e=>t.add(e))),n=Object.getPrototypeOf(n);return Array.from(t)})(n).forEach((r=>{const o=n[r];"$EB"in o||(n[r]=(...n)=>this._capture(t?`${t}:${r}`:r,(()=>o.apply(e,n))),n[r].$EB=!0)}))}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){const e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=a(e))}_capture(e,t){try{const n=t();return n&&n instanceof Promise?n.catch((t=>this._onError(e,t))):n}catch(t){return this._onError(e,t),null}}_onError(l,c){try{n.Log.warn(`Caught error in ${l}`,{error:c});const u=()=>t(this,void 0,void 0,(function*(){var t,n,u,d,p,g,h;const f=c||Error(i),_=f instanceof Error,m=_?f.name:"No Name",v=a(f);if(this._lastSeenError=v,this._seen.has(m))return;if(this._seen.add(m),null===(n=null===(t=this._options)||void 0===t?void 0:t.networkConfig)||void 0===n?void 0:n.preventAllNetworkTraffic)return void(null===(u=this._emitter)||void 0===u||u.call(this,{name:"error",error:c,tag:l}));const T=r.SDKType._get(this._sdkKey),y=o.StatsigMetadataProvider.get(),S=_?f.stack:function(e){try{return JSON.stringify(e)}catch(e){return i}}(f),E=Object.assign({tag:l,exception:m,info:S,statsigOptions:s(this._options)},Object.assign(Object.assign({},y),{sdkType:T})),I=null!==(g=null===(p=null===(d=this._options)||void 0===d?void 0:d.networkConfig)||void 0===p?void 0:p.networkOverrideFunc)&&void 0!==g?g:fetch;yield I(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(T),"STATSIG-SDK-VERSION":String(y.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(E)}),null===(h=this._emitter)||void 0===h||h.call(this,{name:"error",error:c,tag:l})}));u().then((()=>{})).catch((()=>{}))}catch(e){}}}}(LO)),LO}var DO,UO={};var MO,GO={};var $O,VO={};var FO,jO={};function WO(){if(FO)return jO;FO=1,Object.defineProperty(jO,"__esModule",{value:!0}),jO.createMemoKey=jO.MemoPrefix=void 0,jO.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};const e=new Set([]),t=new Set(["userPersistedValues"]);return jO.createMemoKey=function(n,r,o){let i=`${n}|${r}`;if(!o)return i;for(const n of Object.keys(o)){if(t.has(n))return;e.has(n)?i+=`|${n}=true`:i+=`|${n}=${o[n]}`}return i},jO}var HO,qO,BO={},JO={},zO={};function YO(){if(HO)return zO;HO=1;var e=zO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(zO,"__esModule",{value:!0}),zO._fetchTxtRecords=void 0;const t=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),n=["i","e","d"];return zO._fetchTxtRecords=function(r){return e(this,void 0,void 0,(function*(){const e=yield r("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:t});if(!e.ok){const e=new Error("Failed to fetch TXT records from DNS");throw e.name="DnsTxtFetchError",e}const o=yield e.arrayBuffer();return function(e){const t=e.findIndex(((t,r)=>r<200&&"="===String.fromCharCode(t)&&n.includes(String.fromCharCode(e[r-1]))));if(-1===t){const e=new Error("Failed to parse TXT records from DNS");throw e.name="DnsTxtParseError",e}let r="";for(let n=t-1;n<e.length;n++)r+=String.fromCharCode(e[n]);return r.split(",")}(new Uint8Array(o))}))},zO}function XO(){if(qO)return JO;qO=1;var e=JO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(JO,"__esModule",{value:!0}),JO._isDomainFailure=JO.NetworkFallbackResolver=void 0;const t=YO(),n=Uw(),r=Iw(),o=Qw(),i=6048e5;function a(e,t){var n;const r=null!==(n=null==e?void 0:e.toLowerCase())&&void 0!==n?n:"";return t||r.includes("uncaught exception")||r.includes("failed to fetch")||r.includes("networkerror when attempting to fetch resource")}function s(e){return`statsig.network_fallback.${(0,n._DJB2)(e)}`}function l(e,t){const n=s(e);t&&0!==Object.keys(t).length?o.Storage.setItem(n,JSON.stringify(t)):o.Storage.removeItem(n)}return JO.NetworkFallbackResolver=class{constructor(e){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(t=e.networkConfig)||void 0===t?void 0:t.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var n;const r=null===(n=this._fallbackInfo)||void 0===n?void 0:n[t.endpoint];r&&(r.expiryTime=Date.now()+i,l(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:r})))}getActiveFallbackUrl(e,t){var n,i;if(null!=t.customUrl&&null!=t.fallbackUrls)return null;let a=this._fallbackInfo;null==a&&(a=null!==(n=function(e){const t=s(e),n=o.Storage.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return r.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==n?n:{},this._fallbackInfo=a);const c=a[t.endpoint];return!c||Date.now()>(null!==(i=c.expiryTime)&&void 0!==i?i:0)||t.getChecksum()!==c.urlConfigChecksum?(delete a[t.endpoint],this._fallbackInfo=a,l(e,this._fallbackInfo),null):c.url?c.url:null}tryFetchUpdatedFallbackInfo(t,n,r,o){return e(this,void 0,void 0,(function*(){var e,i;try{if(!a(r,o))return!1;const i=null==n.customUrl&&null==n.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(n):n.fallbackUrls,s=this._pickNewFallbackUrl(null===(e=this._fallbackInfo)||void 0===e?void 0:e[n.endpoint],i);return!!s&&(this._updateFallbackInfoWithNewUrl(t,n,s),!0)}catch(e){return null===(i=this._errorBoundary)||void 0===i||i.logError("tryFetchUpdatedFallbackInfo",e),!1}}))}_updateFallbackInfoWithNewUrl(e,t,n){var r,o,a;const s={urlConfigChecksum:t.getChecksum(),url:n,expiryTime:Date.now()+i,previous:[]},c=t.endpoint,u=null===(r=this._fallbackInfo)||void 0===r?void 0:r[c];u&&s.previous.push(...u.previous),s.previous.length>10&&(s.previous=[]);const d=null===(a=null===(o=this._fallbackInfo)||void 0===o?void 0:o[c])||void 0===a?void 0:a.url;null!=d&&s.previous.push(d),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[c]:s}),l(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(n){return e(this,void 0,void 0,(function*(){var e;const r=this._dnsQueryCooldowns[n.endpoint];if(r&&Date.now()<r)return null;this._dnsQueryCooldowns[n.endpoint]=Date.now()+144e5;const o=[],i=yield(0,t._fetchTxtRecords)(null!==(e=this._networkOverrideFunc)&&void 0!==e?e:fetch),a=function(e){try{return new URL(e).pathname}catch(e){return null}}(n.defaultUrl);for(const e of i){if(!e.startsWith(n.endpointDnsKey+"="))continue;const t=e.split("=");if(t.length>1){let e=t[1];e.endsWith("/")&&(e=e.slice(0,-1)),o.push(`https://${e}${a}`)}}return o}))}_pickNewFallbackUrl(e,t){var n;if(null==t)return null;const r=new Set(null!==(n=null==e?void 0:e.previous)&&void 0!==n?n:[]),o=null==e?void 0:e.url;let i=null;for(const e of t){const t=e.endsWith("/")?e.slice(0,-1):e;if(!r.has(e)&&t!==o){i=t;break}}return i}},JO._isDomainFailure=a,JO}var KO,QO={};function ZO(){if(KO)return QO;KO=1,Object.defineProperty(QO,"__esModule",{value:!0}),QO.SDKFlags=void 0;const e={};return QO.SDKFlags={setFlags:(t,n)=>{e[t]=n},get:(t,n)=>{var r,o;return null!==(o=null===(r=e[t])||void 0===r?void 0:r[n])&&void 0!==o&&o}},QO}var eR,tR={};function nR(){return eR||(eR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;const t=Aw(),n=Mw(),r=Iw(),o=Qw(),i=mO(),a=18e5,s=144e5,l={};function c(e,n){return setTimeout((()=>{var n;const r=null===(n=(0,t._getStatsigGlobal)())||void 0===n?void 0:n.instance(e);r&&r.$emt({name:"session_expired"})}),n)}function u(e){return`statsig.session_id.${(0,n._getStorageKey)(e)}`}e.SessionID={get:t=>e.StatsigSession.get(t).data.sessionID},e.StatsigSession={get:e=>{null==l[e]&&(l[e]=function(e){let t=function(e){const t=u(e);return(0,o._getObjectFromStorage)(t)}(e);const n=Date.now();t||(t={sessionID:(0,i.getUUID)(),startTime:n,lastUpdate:n});return{data:t,sdkKey:e}}(e));return function(e){const t=Date.now(),n=e.data,l=e.sdkKey;if(function({lastUpdate:e}){return Date.now()-e>a}(n)||function({startTime:e}){return Date.now()-e>s}(n)){n.sessionID=(0,i.getUUID)(),n.startTime=t;const e=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(l);e&&e.$emt({name:"session_expired"})}n.lastUpdate=t,function(e,t){const n=u(t);try{(0,o._setObjectInStorage)(n,e)}catch(e){r.Log.warn("Failed to save SessionID")}}(n,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);const d=t-n.startTime;return e.idleTimeoutID=c(l,a),e.ageTimeoutID=c(l,s-d),e}(l[e])},overrideInitialSessionID:(e,t)=>{l[t]=function(e,t){const n=Date.now();return{data:{sessionID:e,startTime:n,lastUpdate:n},sdkKey:t}}(e,t)}}}(tR)),tR}var rR,oR,iR={};function aR(){return rR||(rR=1,Object.defineProperty(iR,"__esModule",{value:!0}),iR.ErrorTag=void 0,iR.ErrorTag={NetworkError:"NetworkError"}),iR}function sR(){if(oR)return BO;oR=1;var e=BO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(BO,"__esModule",{value:!0}),BO.NetworkCore=void 0,Aw();const t=Aw(),n=Ow(),r=Iw(),o=Vw(),i=XO(),a=ZO(),s=xO(),l=Ww(),c=nR(),u=vO(),d=aR(),p=cO(),g=Yw(),h=iO(),f=new Set([408,500,502,503,504,522,524,599]);BO.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new i.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))}setLogEventCompressionMode(e){this._options.logEventCompressionMode=e}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){const e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){if(!_(e))return!1;const t=this._getInternalRequestArgs("POST",e),n=this._getPopulatedURL(t),r=navigator;return r.sendBeacon.bind(r)(n,t.body)}post(t){return e(this,void 0,void 0,(function*(){const e=this._getInternalRequestArgs("POST",t);return this._tryEncodeBody(e),yield this._tryToCompressBody(e),this._sendRequest(e)}))}get(e){const t=this._getInternalRequestArgs("GET",e);return this._sendRequest(t)}_sendRequest(t){return e(this,void 0,void 0,(function*(){var i,a,s,l;if(!_(t))return null;if(this._netConfig.preventAllNetworkTraffic)return null;const{method:c,body:u,retries:p,attempt:g}=t,m=t.urlConfig.endpoint;if(this._isRateLimited(m))return r.Log.warn(`Request to ${m} was blocked because you are making requests too frequently.`),null;const T=null!=g?g:1;let y=!1;const S=this._getPopulatedURL(t);let E=null;const I=(0,h._isUnloading)();try{const e={method:c,body:u,headers:Object.assign({},t.headers),priority:t.priority,keepalive:I};!function(e,t){if(e.urlConfig.endpoint!==o.Endpoint._initialize)return;n.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:t})}(t,T);const r=this._leakyBucket[m];r&&(r.lastRequestTime=Date.now(),this._leakyBucket[m]=r);const a=null!==(i=this._netConfig.networkOverrideFunc)&&void 0!==i?i:fetch;let s;if(E=yield Promise.race([a(S,e).finally((()=>clearTimeout(s))),new Promise(((e,t)=>{s=setTimeout((()=>{y=!0,t(new Error(`Timeout of ${this._timeout}ms expired.`))}),this._timeout)}))]),!E.ok){const e=yield E.text().catch((()=>"No Text")),t=new Error(`NetworkError: ${S} ${e}`);throw t.name="NetworkError",t}const l=yield E.text();return v(t,E,T,l),this._fallbackResolver.tryBumpExpiryTime(t.sdkKey,t.urlConfig),{body:l,code:E.status}}catch(n){const o=function(e){if("string"==typeof e)return e;if(e instanceof Error)return`${e.name}: ${e.message}`;return"Unknown Error"}(n),i=(A=y,(null!=o?o:"").includes("Timeout")||A);v(t,E,T,"",n);if((yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(t.sdkKey,t.urlConfig,o,i))&&(t.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig)),!p||T>p||!f.has(null!==(a=null==E?void 0:E.status)&&void 0!==a?a:500)){null===(s=this._emitter)||void 0===s||s.call(this,{name:"error",error:n,tag:d.ErrorTag.NetworkError,requestArgs:t});const e=`A networking error occurred during ${c} request to ${S}.`;return r.Log.error(e,o,n),null===(l=this._errorBoundary)||void 0===l||l.attachErrorIfNoneExists(e),null}return yield function(t){return e(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,Math.min(t*t*500,3e4))))}))}(T),this._sendRequest(Object.assign(Object.assign({},t),{retries:p,attempt:T+1}))}var A}))}_getLogEventCompressionMode(e){let t=null==e?void 0:e.logEventCompressionMode;return t||!0!==(null==e?void 0:e.disableCompression)||(t=g.LogEventCompressionMode.Disabled),t||(t=g.LogEventCompressionMode.Enabled),t}_isRateLimited(e){var t;const n=Date.now(),r=null!==(t=this._leakyBucket[e])&&void 0!==t?t:{count:0,lastRequestTime:n},o=n-r.lastRequestTime,i=Math.floor(.05*o);return r.count=Math.max(0,r.count-i),r.count>=50||(r.count+=1,r.lastRequestTime=n,this._leakyBucket[e]=r,!1)}_getPopulatedURL(e){var t;const n=null!==(t=e.fallbackUrl)&&void 0!==t?t:e.urlConfig.getUrl();e.urlConfig.endpoint!==o.Endpoint._initialize&&e.urlConfig.endpoint!==o.Endpoint._download_config_specs||(this._lastUsedInitUrl=n);const r=Object.assign({[o.NetworkParam.SdkKey]:e.sdkKey,[o.NetworkParam.SdkType]:s.SDKType._get(e.sdkKey),[o.NetworkParam.SdkVersion]:p.SDK_VERSION,[o.NetworkParam.Time]:String(Date.now()),[o.NetworkParam.SessionID]:c.SessionID.get(e.sdkKey)},e.params),i=Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");return`${n}${i?`?${i}`:""}`}_tryEncodeBody(e){var n;const i=(0,l._getWindowSafe)(),a=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof a&&null==(0,t._getStatsigGlobalFlag)("no-encode")&&(null==i?void 0:i.btoa))try{e.body=i.btoa(a).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!==(n=e.params)&&void 0!==n?n:{}),{[o.NetworkParam.StatsigEncoded]:"1"})}catch(t){r.Log.warn(`Request encoding failed for ${e.urlConfig.getUrl()}`,t)}}_tryToCompressBody(n){return e(this,void 0,void 0,(function*(){var e;const i=n.body;if("string"==typeof i&&function(e,n){if(!e.isCompressable)return!1;if(null!=(0,t._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;const r=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,o=!0===a.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(n.logEventCompressionMode){case g.LogEventCompressionMode.Disabled:return!1;case g.LogEventCompressionMode.Enabled:return!(r&&!o);case g.LogEventCompressionMode.Forced:return!0;default:return!1}}(n,this._options))try{const t=(new TextEncoder).encode(i),a=new CompressionStream("gzip"),s=a.writable.getWriter();s.write(t).catch(r.Log.error),s.close().catch(r.Log.error);const l=a.readable.getReader(),c=[];let u;for(;!(u=yield l.read()).done;)c.push(u.value);const d=c.reduce(((e,t)=>e+t.length),0),p=new Uint8Array(d);let g=0;for(const e of c)p.set(e,g),g+=e.length;n.body=p,n.params=Object.assign(Object.assign({},null!==(e=n.params)&&void 0!==e?e:{}),{[o.NetworkParam.IsGzipped]:"1"})}catch(e){r.Log.warn(`Request compression failed for ${n.urlConfig.getUrl()}`,e)}}))}_getInternalRequestArgs(e,t){const n=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig),r=Object.assign(Object.assign({},t),{method:e,fallbackUrl:n});return"data"in t&&m(r,t.data),r}};const _=e=>!!e.sdkKey||(r.Log.warn("Unable to make request without an SDK key"),!1),m=(e,t)=>{const{sdkKey:n,fallbackUrl:r}=e,o=u.StableID.get(n),i=c.SessionID.get(n),a=s.SDKType._get(n);e.body=JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},p.StatsigMetadataProvider.get()),{stableID:o,sessionID:i,sdkType:a,fallbackUrl:r})}))};function v(e,t,r,i,a){e.urlConfig.endpoint===o.Endpoint._initialize&&n.Diagnostics._markInitNetworkReqEnd(e.sdkKey,n.Diagnostics._getDiagnosticsData(t,r,i,a))}return BO}var lR,cR={};var uR,dR={};var pR,gR={};var hR,fR={};function _R(){if(hR)return fR;hR=1;var e=fR.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(fR,"__esModule",{value:!0}),fR.StatsigClientBase=void 0,Aw();const t=Aw(),n=kO(),r=aO(),o=Iw(),i=WO(),a=Ww(),s=nR(),l=vO(),c=Yw(),u=Qw();return fR.StatsigClientBase=class{constructor(e,i,c,d){var p,g,h,f;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const _=this.$emt.bind(this);null!=(null==d?void 0:d.logLevel)&&(o.Log.level=d.logLevel),(null==d?void 0:d.disableStorage)&&u.Storage._setDisabled(!0),(null==d?void 0:d.initialSessionID)&&s.StatsigSession.overrideInitialSessionID(d.initialSessionID,e),(null==d?void 0:d.storageProvider)&&u.Storage._setProvider(d.storageProvider),(null==d?void 0:d.enableCookies)&&l.StableID._setCookiesEnabled(e,d.enableCookies),(null==d?void 0:d.disableStableID)&&l.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=d?d:{},this._memoCache={},this.overrideAdapter=null!==(p=null==d?void 0:d.overrideAdapter)&&void 0!==p?p:null,this._logger=new r.EventLogger(e,_,c,d),this._errorBoundary=new n.ErrorBoundary(e,d,_),this._errorBoundary.wrap(this),this._errorBoundary.wrap(i),this._errorBoundary.wrap(this._logger),c.setErrorBoundary(this._errorBoundary),this.dataAdapter=i,this.dataAdapter.attach(e,d,c),this.storageProvider=u.Storage,null===(f=null===(h=null===(g=this.overrideAdapter)||void 0===g?void 0:g.loadFromStorage)||void 0===h?void 0:h.call(g))||void 0===f||f.catch((e=>this._errorBoundary.logError("OA::loadFromStorage",e))),this._primeReadyRipcord(),function(e,n){var r;if((0,a._isServerEnv)())return;const i=(0,t._getStatsigGlobal)(),s=null!==(r=i.instances)&&void 0!==r?r:{},l=n;null!=s[e]&&o.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");s[e]=l,i.firstInstance||(i.firstInstance=l);i.instances=s,__STATSIG__=i}(e,this)}updateRuntimeOptions(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,u.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,l.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(c.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return e(this,void 0,void 0,(function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()}))}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;const n=t=>{try{t(e)}catch(n){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,n);o.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach((e=>n(e))),null===(t=this._listeners["*"])||void 0===t||t.forEach(n)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,n){!0!==(null==n?void 0:n.disableExposureLog)?this._logger.enqueue(t):this._logger.incrementNonExposureCount(e)}_memoize(e,t){return(n,r)=>{if(this._options.disableEvaluationMemoization)return t(n,r);const o=(0,i.createMemoKey)(e,n,r);return o?(o in this._memoCache||(Object.keys(this._memoCache).length>=3e3&&(this._memoCache={}),this._memoCache[o]=t(n,r)),this._memoCache[o]):t(n,r)}}},fR}var mR,vR={};var TR,yR={};var SR,ER={};var IR,AR={};var bR,wR,OR={};function RR(){return wR||(wR=1,function(e){var t=yw.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=yw.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,Aw();const r=Aw(),o=Ow();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return o.Diagnostics}});const i=aO();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return i.EventLogger}});const a=Iw();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return a.Log}});const s=cO(),l=Qw();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return l.Storage}}),n(Aw(),e),n(Mw(),e),n((uO||(uO=1,Object.defineProperty(dO,"__esModule",{value:!0})),dO),e),n(wO(),e),n(Ow(),e),n((OO||(OO=1,Object.defineProperty(RO,"__esModule",{value:!0})),RO),e),n(kO(),e),n((DO||(DO=1,Object.defineProperty(UO,"__esModule",{value:!0})),UO),e),n((MO||(MO=1,Object.defineProperty(GO,"__esModule",{value:!0})),GO),e),n(Uw(),e),n(($O||($O=1,Object.defineProperty(VO,"__esModule",{value:!0})),VO),e),n(Iw(),e),n(WO(),e),n(Vw(),e),n(sR(),e),n((lR||(lR=1,Object.defineProperty(cR,"__esModule",{value:!0})),cR),e),n((uR||(uR=1,Object.defineProperty(dR,"__esModule",{value:!0})),dR),e),n(Ww(),e),n(xO(),e),n(nR(),e),n((pR||(pR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._fastApproxSizeOf=void 0,e._fastApproxSizeOf=(t,n)=>{let r=0;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i],s=t[a];if(r+=a.length,r+="object"==typeof s&&null!==s?(0,e._fastApproxSizeOf)(s,n)+2:String(s).length+1,r>=n)return r}return r}}(gR)),gR),e),n(vO(),e),n(_R(),e),n(aR(),e),n((mR||(mR=1,Object.defineProperty(vR,"__esModule",{value:!0}),vR.DataAdapterCachePrefix=void 0,vR.DataAdapterCachePrefix="statsig.cached"),vR),e),n(Bw(),e),n(cO(),e),n(Yw(),e),n((TR||(TR=1,Object.defineProperty(yR,"__esModule",{value:!0})),yR),e),n(function(){if(SR)return ER;SR=1,Object.defineProperty(ER,"__esModule",{value:!0}),ER._makeTypedGet=ER._mergeOverride=ER._makeLayer=ER._makeExperiment=ER._makeDynamicConfig=ER._makeFeatureGate=void 0;const e=Iw(),t=Dw();function n(e,t,n,r){var o;return{name:e,details:t,ruleID:null!==(o=null==n?void 0:n.rule_id)&&void 0!==o?o:"",__evaluation:n,value:r}}function r(e,t,r){var i,a;const s=null!==(i=null==r?void 0:r.value)&&void 0!==i?i:{};return Object.assign(Object.assign({},n(e,t,r,s)),{idType:null!==(a=null==r?void 0:r.id_type)&&void 0!==a?a:null,get:o(e,null==r?void 0:r.value)})}function o(n,r,o){return(i,a)=>{var s;const l=null!==(s=null==r?void 0:r[i])&&void 0!==s?s:null;return null==l?null!=a?a:null:null==a||(0,t._isTypeMatch)(l,a)?(null==o||o(i),l):(e.Log.warn(`Parameter type mismatch. '${n}.${i}' was found to be type '${typeof l}' but fallback/return type is '${typeof a}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=a?a:null)}}return ER._makeFeatureGate=function(e,t,r){var o;return Object.assign(Object.assign({},n(e,t,r,!0===(null==r?void 0:r.value))),{idType:null!==(o=null==r?void 0:r.id_type)&&void 0!==o?o:null})},ER._makeDynamicConfig=r,ER._makeExperiment=function(e,t,n){var o;const i=r(e,t,n);return Object.assign(Object.assign({},i),{groupName:null!==(o=null==n?void 0:n.group_name)&&void 0!==o?o:null})},ER._makeLayer=function(e,t,r,i){var a,s;return Object.assign(Object.assign({},n(e,t,r,void 0)),{get:o(e,null==r?void 0:r.value,i),groupName:null!==(a=null==r?void 0:r.group_name)&&void 0!==a?a:null,__value:null!==(s=null==r?void 0:r.value)&&void 0!==s?s:{}})},ER._mergeOverride=function(e,t,n,r){return Object.assign(Object.assign(Object.assign({},e),t),{get:o(e.name,n,r)})},ER._makeTypedGet=o,ER}(),e),n((IR||(IR=1,Object.defineProperty(AR,"__esModule",{value:!0})),AR),e),n(SO(),e),n(Qw(),e),n(bO(),e),n(Dw(),e),n(tO(),e),n(mO(),e),n(iO(),e),n((bR||(bR=1,Object.defineProperty(OR,"__esModule",{value:!0}),OR.UPDATE_DETAIL_ERROR_MESSAGES=OR.createUpdateDetails=void 0,OR.createUpdateDetails=(e,t,n,r,o,i)=>({duration:n,source:t,success:e,error:r,sourceUrl:o,warnings:i}),OR.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}),OR),e),n(ZO(),e),Object.assign((0,r._getStatsigGlobal)(),{Log:a.Log,SDK_VERSION:s.SDK_VERSION})}(yw)),yw}var NR,PR={},LR={},CR={};var xR,kR,DR={};function UR(){if(kR)return LR;kR=1,Object.defineProperty(LR,"__esModule",{value:!0});const e=RR(),t=function(){if(NR)return CR;NR=1,Object.defineProperty(CR,"__esModule",{value:!0}),CR.V1InitializeContainer=void 0;const e=RR();return CR.V1InitializeContainer=class{constructor(e){this._values=e}getGate(e){return this._getResultFromLookup(this._values.feature_gates,e)}getConfig(e){return this._getResultFromLookup(this._values.dynamic_configs,e)}getLayer(e){return this._getResultFromLookup(this._values.layer_configs,e)}getParamStore(e){return this._getResultFromLookup(this._values.param_stores,e)}getConfigList(){return Object.keys(this._values.dynamic_configs)}getExposureMapping(){return this._values.exposures}_getResultFromLookup(t,n){var r,o;return t&&null!==(o=null!==(r=t[n])&&void 0!==r?r:t[(0,e._DJB2)(n)])&&void 0!==o?o:null}},CR}(),n=function(){if(xR)return DR;xR=1,Object.defineProperty(DR,"__esModule",{value:!0}),DR.V2InitializeContainer=void 0;const e=RR();return DR.V2InitializeContainer=class{constructor(e){this._values=e}getGate(e){var t,n,r;const o=this._getResultFromLookup(this._values.feature_gates,e);return o?{name:e,value:!0===o.v,rule_id:null!==(t=o.r)&&void 0!==t?t:"default",secondary_exposures:null!==(n=o.s)&&void 0!==n?n:[],id_type:null!==(r=o.i)&&void 0!==r?r:""}:null}getConfig(e){var t,n,r,o;const i=this._getResultFromLookup(this._values.dynamic_configs,e);return i?{name:e,value:null!==(t=this._values.values[i.v])&&void 0!==t?t:{},rule_id:i.r,secondary_exposures:null!==(n=i.s)&&void 0!==n?n:[],id_type:null!==(r=i.i)&&void 0!==r?r:"",is_user_in_experiment:!0===i.ue,passed:!0===i.p,group_name:null!==(o=i.gn)&&void 0!==o?o:void 0,is_experiment_active:!0===i.ea,group:i.r,is_device_based:"stableID"===i.i}:null}getLayer(e){var t,n,r,o,i,a;const s=this._getResultFromLookup(this._values.layer_configs,e);return s?{name:e,value:null!==(t=this._values.values[s.v])&&void 0!==t?t:{},rule_id:s.r,secondary_exposures:null!==(n=s.s)&&void 0!==n?n:[],is_user_in_experiment:!0===s.ue,group_name:null!==(r=s.gn)&&void 0!==r?r:void 0,is_experiment_active:!0===s.ea,group:s.r,is_device_based:"stableID"===s.i,allocated_experiment_name:null!==(o=s.ae)&&void 0!==o?o:"",explicit_parameters:null!==(i=s.ep)&&void 0!==i?i:[],undelegated_secondary_exposures:null!==(a=s.us)&&void 0!==a?a:[],parameter_rule_ids:s.pr}:null}getParamStore(e){return this._getResultFromLookup(this._values.param_stores,e)}getConfigList(){return Object.keys(this._values.dynamic_configs)}getExposureMapping(){return this._values.exposures}_getResultFromLookup(t,n){var r,o;return t&&null!==(o=null!==(r=t[n])&&void 0!==r?r:t[(0,e._DJB2)(n)])&&void 0!==o?o:null}},DR}();return LR.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(r,o){var i,a;if(!r)return!1;const s=(0,e._typedJsonParse)(r.data,"has_updates","EvaluationResponse");if(null==s)return!1;if(this._source=r.source,!0!==(null==s?void 0:s.has_updates))return!0;return(null!==(i=s.time)&&void 0!==i?i:0)<this._lcut||(this._rawValues=r.data,this._lcut=s.time,this._receivedAt=r.receivedAt,"init-v2"===s.response_format?this._values=new n.V2InitializeContainer(s):this._values=new t.V1InitializeContainer(s),this._bootstrapMetadata=this._extractBootstrapMetadata(r.source,s),r.source&&s.user&&this._setWarningState(o,s),e.SDKFlags.setFlags(this._sdkKey,null!==(a=s.sdk_flags)&&void 0!==a?a:{})),!0}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){const t=this._values?this._values.getGate(e):null;return this._getDetailedStoreResult(t)}getConfig(e){const t=this._values?this._values.getConfig(e):null;return this._getDetailedStoreResult(t)}getConfigList(){return this._values?this._values.getConfigList():[]}getLayer(e){const t=this._values?this._values.getLayer(e):null;return this._getDetailedStoreResult(t)}getParamStore(e){const t=this._values?this._values.getParamStore(e):null;return this._getDetailedStoreResult(t)}getSource(){return this._source}getExposureMapping(){var e;return null===(e=this._values)||void 0===e?void 0:e.getExposureMapping()}_extractBootstrapMetadata(e,t){if("Bootstrap"!==e)return null;const n={};return t.user&&(n.user=t.user),t.sdkInfo&&(n.generatorSDKInfo=t.sdkInfo),n.lcut=t.time,n}_getDetailedStoreResult(e){return{result:e,details:this._getDetails(null==e)}}_setWarningState(t,n){var r,o;const i=e.StableID.get(this._sdkKey);if((null===(r=t.customIDs)||void 0===r?void 0:r.stableID)===i||!(null===(o=t.customIDs)||void 0===o?void 0:o.stableID)&&!i){if("user"in n){const r=n.user,o=Object.assign(Object.assign({},t),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,e._getFullUserHash)(o)!==(0,e._getFullUserHash)(r)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}getCurrentSourceDetails(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};const e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}_getDetails(e){var t,n;const r=this.getCurrentSourceDetails();let o=r.reason;const i=null!==(t=r.warnings)&&void 0!==t?t:[];if("Bootstrap"===this._source&&i.length>0&&(o+=i[0]),"Uninitialized"!==o&&"NoValues"!==o){o=`${o}:${e?"Unrecognized":"Recognized"}`}const a="Bootstrap"===this._source&&null!==(n=this._bootstrapMetadata)&&void 0!==n?n:void 0;return a&&(r.bootstrapMetadata=a),Object.assign(Object.assign({},r),{reason:o})}},LR}var MR,GR,$R={},VR={};function FR(){if(MR)return VR;MR=1,Object.defineProperty(VR,"__esModule",{value:!0}),VR._resolveDeltasResponse=void 0;const e=RR();function t(e,t){null==e||e.forEach((e=>{delete t[e]}))}return VR._resolveDeltasResponse=function(n,r){const o=(0,e._typedJsonParse)(r,"checksum","DeltasEvaluationResponse");if(!o)return{hadBadDeltaChecksum:!0};const i=function(e){const n=e;return t(e.deleted_gates,n.feature_gates),delete n.deleted_gates,t(e.deleted_configs,n.dynamic_configs),delete n.deleted_configs,t(e.deleted_layers,n.layer_configs),delete n.deleted_layers,n}(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{feature_gates:Object.assign(Object.assign({},e.feature_gates),t.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),t.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),t.dynamic_configs)})}(n,o)),a=(0,e._DJB2Object)({feature_gates:i.feature_gates,dynamic_configs:i.dynamic_configs,layer_configs:i.layer_configs},2);return a===o.checksumV2?JSON.stringify(i):{hadBadDeltaChecksum:!0,badChecksum:a,badMergedConfigs:i,badFullResponse:o.deltas_full_response}},VR}function jR(){if(GR)return $R;GR=1;var e=$R.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty($R,"__esModule",{value:!0});const t=RR(),n=FR();class r extends t.NetworkCore{constructor(e,n){super(e,n);const r=null==e?void 0:e.networkConfig;this._option=e,this._initializeUrlConfig=new t.UrlConfiguration(t.Endpoint._initialize,null==r?void 0:r.initializeUrl,null==r?void 0:r.api,null==r?void 0:r.initializeFallbackUrls)}fetchEvaluations(n,r,o,i,a){return e(this,void 0,void 0,(function*(){var e,s,l,c,u,d;const p=r?(0,t._typedJsonParse)(r,"has_updates","InitializeResponse"):null;let g={user:i,hash:null!==(l=null===(s=null===(e=this._option)||void 0===e?void 0:e.networkConfig)||void 0===s?void 0:s.initializeHashAlgorithm)&&void 0!==l?l:"djb2",deltasResponseRequested:!1,full_checksum:null};if(null==p?void 0:p.has_updates){const e=(null==p?void 0:p.hash_used)!==(null!==(d=null===(u=null===(c=this._option)||void 0===c?void 0:c.networkConfig)||void 0===u?void 0:u.initializeHashAlgorithm)&&void 0!==d?d:"djb2");g=Object.assign(Object.assign({},g),{sinceTime:a&&!e?p.time:0,previousDerivedFields:"derived_fields"in p&&a?p.derived_fields:{},deltasResponseRequested:!0,full_checksum:p.full_checksum,partialUserMatchSinceTime:e?0:p.time})}return this._fetchEvaluations(n,p,g,o)}))}_fetchEvaluations(t,r,o,i){return e(this,void 0,void 0,(function*(){var e,a;const s=yield this.post({sdkKey:t,urlConfig:this._initializeUrlConfig,data:o,retries:2,isStatsigEncodable:!0,priority:i});if(204===(null==s?void 0:s.code))return'{"has_updates": false}';if(200!==(null==s?void 0:s.code))return null!==(e=null==s?void 0:s.body)&&void 0!==e?e:null;if(!0!==(null==r?void 0:r.has_updates)||!0!==(null===(a=s.body)||void 0===a?void 0:a.includes('"is_delta":true'))||!0!==o.deltasResponseRequested)return s.body;const l=(0,n._resolveDeltasResponse)(r,s.body);return"string"==typeof l?l:this._fetchEvaluations(t,r,Object.assign(Object.assign(Object.assign({},o),l),{deltasResponseRequested:!1}),i)}))}}return $R.default=r,$R}var WR,HR={};function qR(){if(WR)return HR;WR=1,Object.defineProperty(HR,"__esModule",{value:!0}),HR._makeParamStoreGetter=void 0;const e=RR(),t={disableExposureLog:!0};function n(e){return null==e||!1===e.disableExposureLog}function r(t,n){return null!=n&&!(0,e._isTypeMatch)(t,n)}return HR._makeParamStoreGetter=function(o,i,a){return(s,l)=>{if(null==i)return l;const c=i[s];if(null==c||null!=l&&(0,e._typeOf)(l)!==c.param_type)return l;switch(c.ref_type){case"static":return function(e){return e.value}(c);case"gate":return function(e,r,o){return e.getFeatureGate(r.gate_name,n(o)?void 0:t).value?r.pass_value:r.fail_value}(o,c,a);case"dynamic_config":return function(e,o,i,a){const s=e.getDynamicConfig(o.config_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);case"experiment":return function(e,o,i,a){const s=e.getExperiment(o.experiment_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);case"layer":return function(e,o,i,a){const s=e.getLayer(o.layer_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);default:return l}}},HR}var BR,JR,zR,YR={};function XR(){if(BR)return YR;BR=1;var e=YR.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(YR,"__esModule",{value:!0}),YR.StatsigEvaluationsDataAdapter=void 0;const t=RR(),n=jR();let r=class extends t.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t,r){super.attach(e,t,r),null!==r&&r instanceof n.default?this._network=r:this._network=new n.default(null!=t?t:{})}getDataAsync(e,n,r){return this._getDataAsyncImpl(e,(0,t._normalizeUser)(n,this._options),r)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){const n=(0,t._typedJsonParse)(e,"has_updates","data");n&&"user"in n?super.setData(e,n.user):t.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(t,n,r,o){return e(this,void 0,void 0,(function*(){var e;const i=yield null===(e=this._network)||void 0===e?void 0:e.fetchEvaluations(this._getSdkKey(),t,null==r?void 0:r.priority,n,o);return null!=i?i:null}))}_getCacheKey(e){var n;const r=(0,t._getStorageKey)(this._getSdkKey(),e,null===(n=this._options)||void 0===n?void 0:n.customUserCacheKeyFunc);return`${t.DataAdapterCachePrefix}.${this._cacheSuffix}.${r}`}_isCachedResultValidFor204(e,n){return null!=e.fullUserHash&&e.fullUserHash===(0,t._getFullUserHash)(n)}};return YR.StatsigEvaluationsDataAdapter=r,YR}function KR(){if(JR)return PR;JR=1;var e=PR.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(PR,"__esModule",{value:!0});const t=RR(),n=UR(),r=jR(),o=qR(),i=XR();let a=class a extends t.StatsigClientBase{static instance(e){const n=(0,t._getStatsigGlobal)().instance(e);return n instanceof a?n:(t.Log.warn((0,t._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new a(null!=e?e:"",{}))}constructor(e,o,a=null){var s,l;t.SDKType._setClientType(e,"javascript-client");const c=new r.default(a,(e=>{this.$emt(e)}));super(e,null!==(s=null==a?void 0:a.dataAdapter)&&void 0!==s?s:new i.StatsigEvaluationsDataAdapter,c,a),this._possibleFirstTouchMetadata={},this.getFeatureGate=this._memoize(t.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(t.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(t.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getConfigList=this._memoize(t.MemoPrefix._configList,this._getConfigListImpl.bind(this)),this.getLayer=this._memoize(t.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(t.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new n.default(e),this._network=c,this._user=this._configureUser(o,a),this._sdkInstanceID=(0,t.getUUID)();const u=null!==(l=null==a?void 0:a.plugins)&&void 0!==l?l:[];for(const e of u)e.bind(this)}initializeSync(e){var n;return"Uninitialized"!==this.loadingStatus?(0,t.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!==(n=this._store.getWarnings())&&void 0!==n?n:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(t){return e(this,void 0,void 0,(function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(t)),this._initializePromise}))}updateUserSync(e,t){const n=performance.now();try{return this._updateUserSyncImpl(e,t,n)}catch(e){const t=e instanceof Error?e:new Error(String(e));return this._createErrorUpdateDetails(t,n)}}_updateUserSyncImpl(e,n,r){var o;const i=[...null!==(o=this._store.getWarnings())&&void 0!==o?o:[]];this._resetForUser(e);const a=this.dataAdapter.getDataSync(this._user);null==a&&i.push("NoCachedValues"),this._store.setValues(a,this._user),this._finalizeUpdate(a);const s=null==n?void 0:n.disableBackgroundCacheRefresh;return!0===s||null==s&&"Bootstrap"===(null==a?void 0:a.source)||this._runPostUpdate(null!=a?a:null,this._user),(0,t.createUpdateDetails)(!0,this._store.getSource(),performance.now()-r,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),i)}updateUserAsync(t,n){return e(this,void 0,void 0,(function*(){const e=performance.now();try{return yield this._updateUserAsyncImpl(t,n)}catch(t){const n=t instanceof Error?t:new Error(String(t));return this._createErrorUpdateDetails(n,e)}}))}_updateUserAsyncImpl(n,r){return e(this,void 0,void 0,(function*(){this._resetForUser(n);const e=this._user;t.Diagnostics._markInitOverallStart(this._sdkKey);let o=this.dataAdapter.getDataSync(e);if(this._store.setValues(o,this._user),this._setStatus("Loading",o),o=yield this.dataAdapter.getDataAsync(o,e,r),e!==this._user)return(0,t.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let i=!1;null!=o&&(t.Diagnostics._markInitProcessStart(this._sdkKey),i=this._store.setValues(o,this._user),t.Diagnostics._markInitProcessEnd(this._sdkKey,{success:i})),this._finalizeUpdate(o),i||(this._errorBoundary.attachErrorIfNoneExists(t.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),t.Diagnostics._markInitOverallEnd(this._sdkKey,i,this._store.getCurrentSourceDetails());const a=t.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,t.createUpdateDetails)(i,this._store.getSource(),a,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())}))}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:t.StatsigSession.get(this._sdkKey),stableID:t.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,n){const r="string"==typeof e?{eventName:e,value:t,metadata:n}:e;this.$emt({name:"log_event_called",event:r}),this._logger.enqueue(Object.assign(Object.assign({},r),{user:this._user,time:Date.now()}))}updateUserWithAnalyticsOnlyMetadata(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}_primeReadyRipcord(){this.$on("error",(()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)}))}_initializeAsyncImpl(n){return e(this,void 0,void 0,(function*(){return t.Storage.isReady()||(yield t.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,n)}))}_createErrorUpdateDetails(e,n){var r;return(0,t.createUpdateDetails)(!1,this._store.getSource(),performance.now()-n,e,null,[...null!==(r=this._store.getWarnings())&&void 0!==r?r:[]])}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,n){this.dataAdapter.getDataAsync(e,n,{priority:"low"}).catch((e=>{t.Log.error("An error occurred after update.",e)}))}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,n){var r,o,i;const a=(0,t._normalizeUser)(e,n),s=null===(r=a.customIDs)||void 0===r?void 0:r.stableID;if(s){const e=null===(i=(o=this.storageProvider).isReadyResolver)||void 0===i?void 0:i.call(o);e?e.then((()=>t.StableID.setOverride(s,this._sdkKey)),(()=>t.StableID.setOverride(s,this._sdkKey))):t.StableID.setOverride(s,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(a.analyticsOnlyMetadata=Object.assign(Object.assign({},a.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),a}_getFeatureGateImpl(e,n){var r,o;const{result:i,details:a}=this._store.getGate(e),s=(0,t._makeFeatureGate)(e,a,i),l=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getGateOverride)||void 0===o?void 0:o.call(r,s,this._user,n),c=null!=l?l:s;return this._enqueueExposure(e,(0,t._createGateExposure)(this._user,c,this._store.getExposureMapping()),n),this.$emt({name:"gate_evaluation",gate:c}),c}_getDynamicConfigImpl(e,n){var r,o;const{result:i,details:a}=this._store.getConfig(e),s=(0,t._makeDynamicConfig)(e,a,i),l=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getDynamicConfigOverride)||void 0===o?void 0:o.call(r,s,this._user,n),c=null!=l?l:s;return this._enqueueExposure(e,(0,t._createConfigExposure)(this._user,c,this._store.getExposureMapping()),n),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:c}),c}_getExperimentImpl(e,n){var r,o,i,a;const{result:s,details:l}=this._store.getConfig(e),c=(0,t._makeExperiment)(e,l,s);null!=c.__evaluation&&(c.__evaluation.secondary_exposures=(0,t._mapExposures)(null!==(o=null===(r=c.__evaluation)||void 0===r?void 0:r.secondary_exposures)&&void 0!==o?o:[],this._store.getExposureMapping()));const u=null===(a=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getExperimentOverride)||void 0===a?void 0:a.call(i,c,this._user,n),d=null!=u?u:c;return this._enqueueExposure(e,(0,t._createConfigExposure)(this._user,d,this._store.getExposureMapping()),n),this.$emt({name:"experiment_evaluation",experiment:d}),d}_getConfigListImpl(){return this._store.getConfigList()}_getLayerImpl(e,n){var r,o,i;const{result:a,details:s}=this._store.getLayer(e),l=(0,t._makeLayer)(e,s,a),c=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getLayerOverride)||void 0===o?void 0:o.call(r,l,this._user,n);(null==n?void 0:n.disableExposureLog)&&this._logger.incrementNonExposureCount(e);const u=(0,t._mergeOverride)(l,c,null!==(i=null==c?void 0:c.__value)&&void 0!==i?i:l.__value,(r=>{(null==n?void 0:n.disableExposureLog)||this._enqueueExposure(e,(0,t._createLayerParameterExposure)(this._user,u,r,this._store.getExposureMapping()),n)}));return this.$emt({name:"layer_evaluation",layer:u}),u}_getParameterStoreImpl(e,t){var n,r;const{result:i,details:a}=this._store.getParamStore(e);this._logger.incrementNonExposureCount(e);const s={name:e,details:a,__configuration:i,get:(0,o._makeParamStoreGetter)(this,i,t)},l=null===(r=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getParamStoreOverride)||void 0===r?void 0:r.call(n,s,t);return null!=l&&(s.__configuration=l.config,s.details=l.details,s.get=(0,o._makeParamStoreGetter)(this,l.config,t)),s}};return PR.default=a,PR}var QR=(zR||(zR=1,function(e){var t=Tw.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Tw.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;const r=RR(),o=KR();e.StatsigClient=o.default,n(RR(),e);const i=Object.assign((0,r._getStatsigGlobal)(),{StatsigClient:o.default});e.default=i}(Tw)),Tw);function ZR(){return r(this,void 0,void 0,(function*(){const[e,t,n]=yield Promise.all([HI(),kI(),wI()]);let r;if(e)r=e;else if(t)r=t;else{if(!n)throw new Error("Unable to determine Statsig userID: organization_id, account_id, and installation_id are all unavailable");r=n}const o={};return e&&(o.organizationId=e),t&&(o.accountId=t),n&&(o.instanceId=n,o.stableID=n),{userID:r,customIDs:o}}))}let eN,tN,nN;function rN(){return r(this,void 0,void 0,(function*(){return eN||(tN||(tN=iN(),tN))}))}function oN(){return r(this,void 0,void 0,(function*(){return eN=void 0,tN=void 0,tN||(tN=iN(),tN)}))}function iN(){return r(this,void 0,void 0,(function*(){try{const{userID:e,customIDs:t}=yield ZR(),n=tT(),r="testing"===n?"staging":n,o="client-m2GV5yr4SG3NcCbgnasLgE993KOrnLGfJmqncTUSi1g",i=new QR.StatsigClient(o,{userID:e,customIDs:t},{environment:{tier:r}});return yield i.initializeAsync(),eN=i,i}catch(e){throw tN=void 0,new Error(`Failed to initialize Statsig client: ${e instanceof Error?e.message:String(e)}`)}}))}function aN(e=1e3){nN&&clearTimeout(nN),nN=setTimeout((()=>r(this,void 0,void 0,(function*(){try{yield oN()}catch(e){console.error(`Error initializing Statsig client after storage change: ${e}`)}finally{nN=void 0}}))),e)}class sN{constructor(e,t){this.experimentName=e,this.statsigExperiment=t}getName(){return this.experimentName}getCohort(){var e,t,n;return(null===(t=null===(e=this.statsigExperiment)||void 0===e?void 0:e.getGroupName)||void 0===t?void 0:t.call(e))||(null===(n=this.statsigExperiment)||void 0===n?void 0:n.groupName)||null}get(e,t){var n,r,o;return null!==(o=null===(r=null===(n=this.statsigExperiment)||void 0===n?void 0:n.get)||void 0===r?void 0:r.call(n,e,t))&&void 0!==o?o:t}}class lN{constructor(){}static getInstance(){return lN.instance||(lN.instance=new lN),lN.instance}initialize(e=1e3){aN(e)}getClient(){return r(this,void 0,void 0,(function*(){return rN()}))}checkFeatureFlag(e){return r(this,void 0,void 0,(function*(){var t;try{return null!==(t=(yield this.getClient()).checkGate(e))&&void 0!==t&&t}catch(t){return console.error(`Error checking feature flag "${e}":`,t),!1}}))}getExperiment(e){return r(this,void 0,void 0,(function*(){try{const t=(yield this.getClient()).getExperiment(e);return new sN(e,t)}catch(t){return console.error(`Error getting experiment "${e}":`,t),new sN(e,null)}}))}}function cN(){return r(this,void 0,void 0,(function*(){return lN.getInstance()}))}function uN(e){return r(this,void 0,void 0,(function*(){const t=yield mI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:eb.dlTranslateInline,targetLang:t.selectedTargetLanguage})}))}function dN(e){return r(this,void 0,void 0,(function*(){const t=yield mI(["targetLanguageUserInput"]);chrome.tabs.sendMessage(e,{action:eb.dlTranslateInput,targetLang:t.targetLanguageUserInput})}))}function pN(e){return r(this,void 0,void 0,(function*(){const t=yield mI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:tb.dlImproveInline,targetLang:t.selectedTargetLanguage})}))}function gN(e){return r(this,void 0,void 0,(function*(){const t=yield mI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:tb.dlImproveInput,targetLang:t.selectedTargetLanguage})}))}const hN=e=>r(void 0,void 0,void 0,(function*(){yield TI();const t=yield mI(["selectedTargetLanguage","installationId","languagePreferenceForReading"]),n=e.payload.nicheIntegration||yn,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:t.selectedTargetLanguage,sourceTexts:e.payload.requests.map((e=>e.text)),isWriteRequest:e.payload.isWriteRequest};let o,i,a;try{const e=yield(e=>$b(e))(r);o=e.result,i=e.processedText,a=e.glossaryTrackingInfo}catch(r){try{e.payload.isWriteRequest?jS(ar,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:n,error:r.name,trigger:e.payload.trigger}):Jy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw r}eP();const s=e.payload.trigger;try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(t.languagePreferenceForReading[e]||0===t.languagePreferenceForReading[e])&&(t.languagePreferenceForReading[e]=eA(t.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:t.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?jS(Zn,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:i.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:n,trigger:e.payload.trigger}):qy({installationId:t.installationId,trigger:s||R,websiteLanguage:o.source_lang,targetLanguage:t.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:n,glossaryTrackingInfo:a})}catch(e){console.error(e)}return i.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))})),fN=e=>r(void 0,void 0,void 0,(function*(){return yield e.payload.isWriteRequest?_w(e):(e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,requests:t,targetLang:n,websiteLanguage:r,formality:o,platformBehavior:i,skipDapReporting:a}}){yield TI();const{installationId:s,targetLanguageUserInput:l}=yield mI(["targetLanguageUserInput","installationId"]),c=n||l,u=i||yn,d=i!==yn?k:L;let p;try{p=yield ow({sourceTexts:t.map((e=>e.text))||[],selectedTargetLanguage:c,formality:o})}catch(n){throw uI((()=>Jy({errorCode:n.name,errorMessage:n.message,domainName:e,targetLang:c,websiteLanguage:r,nicheIntegration:u,trigger:d,characterCount:t.reduce(((e,t)=>e+t.text.length),0)}))),n}eP(),i===bn?EP():i===wn&&AP();const g=p.processedTranslation.map((e=>e.text)),h=p.processedTranslation[0].detected_source_language;return a||uI((()=>qy({installationId:s,trigger:d,websiteLanguage:h,targetLanguage:c,characterCount:t.reduce(((e,t)=>e+t.text.length),0),domainName:e,nicheIntegration:u,glossaryTrackingInfo:p.glossaryTrackingInfo}))),[{detected_source_language:h,text:g.flat().join(""),texts:g}]})))(e)})),_N=e=>r(void 0,void 0,void 0,(function*(){var t;yield JI(),yield TI();const n=yield mI(["installationId","languagePreferenceForWriting","zendeskActiveTermbase"]),r=[e.payload.content],o=e.payload.targetLang,i=En,a=Rb.TRANSLATE,s=e.payload.formality;let l,c;const u=[],d=[];let p=!1;try{const e=yield Pb({texts:r,mode:a});let i;if(c=e.result.lang.detected,null===(t=n.zendeskActiveTermbase)||void 0===t?void 0:t.termDictionaries)for(let e of n.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${Jv(c)}>${Jv(o)}`.toLowerCase()){i={id:n.zendeskActiveTermbase.id,dictionaryId:e.id},p=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)d.push(t),e.push(d.length-1);u.push(e)}const g=d.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<d.length-1?[d[t+1].text]:[],raw_en_context_before:t>0?[d[t-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:t+1})]})));l=yield Lb(Object.assign(Object.assign({mode:a,jobs:g,sourceLang:c,targetLang:Jv(o),textType:"richtext"},s&&{formality:s}),i&&{termbase:i}))}catch(t){try{Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:L,characterCount:r.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}const g=l.result.translations.map(((e,t)=>`${d[t].prefix}${e.beams[0].sentences[0].text}`)),h=u.map((e=>e.map((e=>g[e]))));if(eP(),ZN(),!0!==e.payload.skipDapReporting)try{qy({installationId:n.installationId,trigger:k,websiteLanguage:c,targetLanguage:o,characterCount:r.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:i,glossaryTrackingInfo:{isGlossaryEnabled:p}})}catch(e){console.error(e)}return[{detected_source_language:c,text:h[0],texts:h}]})),mN=e=>r(void 0,void 0,void 0,(function*(){yield JI();const{texts:t,mode:n}=e.payload;return yield Pb({texts:t,mode:n})})),vN=e=>r(void 0,void 0,void 0,(function*(){var t;yield JI(),yield TI();const n=yield mI(["installationId","zendeskActiveTermbase"]),r=Rb.TRANSLATE,o=En,{targetLang:i}=e.payload,a=[e.payload.text],s=a.map((e=>e.replaceAll("\n","<br>"))),l=[],c=[];let u,d,p,g=!1;try{const e=yield Pb({texts:s,mode:r,textType:"richtext"});if(p=e.result.lang.detected,null===(t=n.zendeskActiveTermbase)||void 0===t?void 0:t.termDictionaries)for(let e of n.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${Jv(p)}>${Jv(i)}`.toLowerCase()){u={id:n.zendeskActiveTermbase.id,dictionaryId:e.id},g=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)c.push(t),e.push(c.length-1);l.push(e)}const o=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:t+1})]})));d=yield Lb(Object.assign({mode:r,jobs:o,sourceLang:p,targetLang:Jv(i),textType:"richtext"},u&&{termbase:u}))}catch(t){try{Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:i,trigger:R,characterCount:a.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}eP(),ZN();const h=d.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),f=l.map((e=>e.map((e=>h[e])))),_=f[0].join("");try{qy({installationId:n.installationId,trigger:k,websiteLanguage:p,targetLanguage:i,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:o,glossaryTrackingInfo:{isGlossaryEnabled:g}})}catch(e){console.error(e)}return _}));function TN(){return r(this,void 0,void 0,(function*(){let e,t,n=[];try{e=yield WN()}catch(e){t=e.message}if(!(null==e?void 0:e.isLoggedIn)||t)return[[],t];try{n=(yield Cb()).result||[]}catch(e){t=e.message}return[n,t]}))}const yN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>iS({language:e.payload.language,domainName:e.payload.domainName})))})),SN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>Yy()))})),EN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>Xy({domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:zT(e.extensionContext)})))})),IN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>Ky({logoClickedFrom:YT(e.extensionContext)})))}));function AN(){return r(this,void 0,void 0,(function*(){yield uI((()=>tS()))}))}function bN(){return r(this,void 0,void 0,(function*(){yield uI((()=>nS()))}))}const wN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>rS({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||yn})))})),ON=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>oS({settingType:e.settingType,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})))})),RN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>aS({translationType:e.translationType,domainName:e.domainName})))})),NN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>sS({newPosition:e.newPosition})))})),PN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>lS(e)))})),LN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>gS(e)))})),CN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>_S(e)))})),xN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>hS(e)))})),kN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>mS(e)))})),DN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>fS(e)))})),UN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>yS(e)))})),MN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>vS(e)))})),GN=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>IS(e)))}));function $N(){return r(this,arguments,void 0,(function*(e=!1){const t=yield XI(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}))}function VN(){return r(this,void 0,void 0,(function*(){rb()}))}function FN(){return r(this,void 0,void 0,(function*(){rb(!0)}))}function jN(){return r(this,void 0,void 0,(function*(){ob({trigger:xn})}))}function WN(){return r(this,void 0,void 0,(function*(){const e=yield LI();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}))}const HN=e=>r(void 0,void 0,void 0,(function*(){var t,n;switch(e.type){case Y:{const e=yield chrome.storage.sync.get(["notificationsViewed"]);if(null===(t=e.notificationsViewed)||void 0===t?void 0:t.hintKeyboardShortcut)return;yield chrome.storage.sync.set({notificationsViewed:Object.assign(Object.assign({},e.notificationsViewed),{hintKeyboardShortcut:!0})});break}case X:{const t=yield chrome.storage.sync.get(["notificationsViewed"]),r=`showAdsFor${e.options.matchedWord}`;if(null===(n=t.notificationsViewed)||void 0===n?void 0:n[r])return;uI((()=>aE({matchedWord:e.options.matchedWord}))),yield chrome.storage.sync.set({notificationsViewed:Object.assign(Object.assign({},t.notificationsViewed),{[r]:!0})});break}}uI((()=>Qy({notificationType:e.type})));const r=yield chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(r[0].id,{action:nb.dlShowNotification,payload:e})}));function qN(){return r(this,void 0,void 0,(function*(){return yield chrome.commands.getAll()}))}const BN=e=>r(void 0,void 0,void 0,(function*(){const t=yield qN();try{Zy({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||yn})}catch(e){console.error(e)}})),JN=e=>r(void 0,void 0,void 0,(function*(){eS({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||yn})}));function zN(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:eb.dlTranslateSelectionRightClick})}))}function YN(){return r(this,void 0,void 0,(function*(){try{const e=yield chrome.tabs.query({active:!0,currentWindow:!0}),t=yield chrome.tabs.sendMessage(e[0].id,{action:nb.dlSelectCaptureArea}),n=yield chrome.tabs.captureVisibleTab(null,{format:"png"});chrome.runtime.sendMessage({action:eb.dlTranslateSelectedArea,imageUrl:n,selectedArea:t})}catch(e){const t=e instanceof Error?e.message:String(e)||"";yE({errorCode:yT,errorMessage:t}),ZE({action:yT,error:t})}}))}function XN(){try{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0]&&chrome.sidePanel.open({windowId:e[0].windowId}).catch((e=>{console.error(e),fE()}))})),hE()}catch(e){console.error(e),fE()}}function KN(){return r(this,void 0,void 0,(function*(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:nb.dlTranslateWebPageByRightMenuClick})})),yield uI((()=>SE({trigger:po})))}))}const QN=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>TS(e)))}));function ZN(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;yield chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}))}function eP(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","reviewPopupRemindAt"]),t=e.successfulTranslations+1;if(t<(yield function(){return r(this,arguments,void 0,(function*(e=!1){return e?2:10}))}(oT())))return void(yield chrome.storage.sync.set({successfulTranslations:t}));const n=yield chrome.tabs.query({active:!0,currentWindow:!0});let o=e.isReviewPopupShown;if(!o&&(null===e.reviewPopupRemindAt||e.reviewPopupRemindAt<Date.now())){const e=yield r(void 0,void 0,void 0,(function*(){var e;const t=yield BI();return null!==(e=null==t?void 0:t.preventFeedbackSurvey)&&void 0!==e&&e}));e||(chrome.tabs.sendMessage(n[0].id,{action:nb.dlShowAskForAReviewPopup}),o=!0)}yield chrome.storage.sync.set({isReviewPopupShown:o,successfulTranslations:t})}))}const tP=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(e=>{let t=E.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=E.find((t=>Jv(t.langCode).toUpperCase()===Jv(e).toUpperCase())),t)})(e.lang);if(No())!function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){var e;const t=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||void 0;return t&&-1!==(null==t?void 0:t.toUpperCase().indexOf("MAC"))})()&&(r.rate=.9,n.voice&&un===chrome.runtime.id&&(r.voiceName=n.voice)),chrome.tts.speak(e.text,r)}})),nP=()=>r(void 0,void 0,void 0,(function*(){let e;return e=No()?yield new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):yield chrome.tts.getVoices(),e.map((e=>Jv(e.lang).toUpperCase()))}));function rP(){return r(this,void 0,void 0,(function*(){if(!No())return chrome.tts.stop();speechSynthesis.cancel()}))}const oP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>SS(e)))})),iP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>bS(e)))})),aP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>ES(e.trigger)))})),sP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>wS(e)))})),lP=e=>r(void 0,void 0,void 0,(function*(){return yield ZI(e)})),cP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>OS(e)))})),uP=()=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>RS()))})),dP=()=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>NS()))})),pP=e=>r(void 0,[e],void 0,(function*({eventType:e,zendeskMetaData:t}){return yield uI((()=>LS(e,t)))})),gP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>PS(e)))})),hP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>DS(e)))})),fP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>US(e)))})),_P=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>GS(e)))})),mP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>$S(e)))})),vP=e=>r(void 0,[e],void 0,(function*({eventType:e,deeplWriteMetaData:t}){return yield uI((()=>jS(e,t)))})),TP=e=>r(void 0,void 0,void 0,(function*(){return yield(e=>r(void 0,[e],void 0,(function*({nicheIntegration:e,requests:t,sourceLang:n,skipDapReporting:r,correctionsOnly:o,trigger:i,fallbackOnPartialFailure:a}){const s=null!=i?i:e&&e!==yn?Fr:$r;try{yield TI();const{processedImprovements:i}=yield fw(t.map((e=>e.text)),n,o,a);r||uI((()=>jS(Zn,{lang:i[0].detected_source_language,sourceLength:t.reduce(((e,t)=>e+t.text.length),0),targetLength:i.reduce(((e,t)=>e+t.text.length),0),nicheIntegration:e||yn,trigger:s})));const l=i.some((e=>e.error));return{detected_source_language:i[0].detected_source_language,text:i.map(((e,n)=>e.error?t[n].text:e.text)).join(""),texts:i.map(((e,n)=>e.error?t[n].text:e.text)),errors:l?i.map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:null})):void 0}}catch(r){throw uI((()=>jS(ar,{lang:n,sourceLength:t.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e||yn,error:r.name,trigger:s}))),r}})))(e.payload)})),yP=e=>r(void 0,[e],void 0,(function*({eventType:e,acceptOrRevertMetadata:t}){yield uI((()=>BS(e,t)))})),SP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>JS(e)))}));function EP(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["successfulTranslationsGmail"])).successfulTranslationsGmail+1;yield chrome.storage.sync.set({successfulTranslationsGmail:e})}))}const IP=e=>r(void 0,void 0,void 0,(function*(){yield uI((()=>zS(e)))}));function AP(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["successfulTranslationsGSlides"])).successfulTranslationsGSlides+1;yield chrome.storage.sync.set({successfulTranslationsGSlides:e})}))}const bP=e=>r(void 0,[e],void 0,(function*({eventType:e,alternativesMetaData:t}){return yield uI((()=>QS(e,t)))}));function wP(){return r(this,arguments,void 0,(function*(e=!1,t=!0){let n;try{n=yield wA(e,t)}catch(e){throw e.name===rA&&ob({trigger:kn,reason:e.name,showAlert:!0}),e}return n}))}function OP(){return r(this,void 0,void 0,(function*(){let e;return e=yield ib(),e}))}function RP(){return r(this,void 0,void 0,(function*(){return yield MI()}))}const NP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>YS(e.type)))})),PP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>XS(e.type)))})),LP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>CS(e)))})),CP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>ZS(!0,e)))})),xP=e=>r(void 0,void 0,void 0,(function*(){return yield uI((()=>ZS(!1,e)))})),kP=e=>r(void 0,[e],void 0,(function*({cta:e,type:t}){return yield uI((()=>KS(t,e)))})),DP=e=>r(void 0,[e],void 0,(function*({text:e}){return yield Nb({texts:[e],targetLang:"EN",mode:Rb.WRITE})})),UP=e=>r(void 0,void 0,void 0,(function*(){return yield eE(e)}));function MP(){tE()}const GP=e=>r(void 0,void 0,void 0,(function*(){return yield nE(e)})),$P=e=>r(void 0,void 0,void 0,(function*(){yield JI(),yield TI();const t=yield mI(["activeTermbaseId","targetLanguageUserInput","session","installationId","languagePreferenceForWriting",mo.auth.isLoggedIn,"isGlossaryEnabled","hasTermbaseService"]),n=e.payload.texts,r=e.payload.mode?e.payload.mode:Rb.TRANSLATE,o=e.payload.targetLang,i=e.payload.writeLang,a=qv(o);let s;const l=[],c=[];let u,d,p=!1,g=!1,h=!1;try{const h=yield Pb({texts:n,mode:r,advancedMode:!!e.payload.style});if(s=h.result.lang.detected,uT({isLoggedIn:t.isLoggedIn,hasTermbaseService:t.hasTermbaseService})&&t.activeTermbaseId&&r!==Rb.WRITE&&t.isGlossaryEnabled)try{const[e]=yield TN(),n=Mb(t.activeTermbaseId,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${Jv(s)}>${Jv(a.langCode)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},p=!0,g=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of h.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)c.push(e),t.push(c.length-1);l.push(t)}const f=c.map(((t,n)=>Object.assign(Object.assign({kind:"default",preferred_num_beams:6,raw_en_context_after:n<c.length-1?[c[n+1].text]:[],raw_en_context_before:n>0?[c[n-1].text]:[],sentences:[Object.assign(Object.assign({},t),{id:n+1})]},e.payload.style&&{style_variant:e.payload.style,write_variant_requests:["main","variants"]}),e.payload.formality&&{formality:e.payload.formality}))),_=a.regionalVariant&&!i;u=yield Lb(Object.assign(Object.assign({mode:r,jobs:f,sourceLang:i&&r===Rb.WRITE?Jv(i):s,targetLang:Jv(i&&r===Rb.WRITE?i:o),textType:"plaintext",styleVariant:e.payload.style},d&&{termbase:d}),_&&{regionalVariant:a.regionalVariant}))}catch(t){throw r===Rb.WRITE?jS(ar,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:0,nicheIntegration:yn,error:t.name,style:e.payload.style,trigger:Vr}):Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:s,trigger:C,characterCount:n.reduce(((e,t)=>e+t.length),0)}),t}p&&(h=Gb(u.result)),eP();const f=u.result.translations,_=u.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),m=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n=[];for(let r=0;r<e.length;r++){const i=`${t[r].prefix}`;n.push(`${i}${e[r].beams[o].sentences[0].text}`)}r.push(n)}return r}(f,c),v=l.map((e=>e.map((e=>_[e])))),T=m.map((e=>l.map((t=>t.map((t=>e[t])))))),y=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n="";for(let r=0;r<e.length;r++){n=`${n}${`${t[r].prefix}`}${e[r].beams[o].sentences[0].text}`}r.push(n)}return r}(f,c),S=T.map((e=>e.map((e=>e.join("")))));try{r===Rb.WRITE?(jS(Zn,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:yn,style:e.payload.style,trigger:Vr}),jS(ir,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:yn,style:e.payload.style,trigger:Vr})):qy(Object.assign({installationId:t.installationId,trigger:C,websiteLanguage:s,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:yn},p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:h}}))}catch(e){console.error(e)}return{detected_source_language:s,processedText:v[0].join(""),textLinesComponents:l,alternatives:y,alternativeComponents:S}}));function VP(){rE()}function FP(e){oE(e)}function jP(){iE()}function WP(e){return r(this,void 0,void 0,(function*(){yield HE(e),yield PI(e)}))}function HP(e){sE(e)}function qP(e){lE(e)}function BP(e){cE(e)}function JP(){try{return No()?void browser.action.onClicked.addListener((()=>{browser.sidebarAction.toggle()})):(chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch((e=>console.error(e))),void chrome.sidePanel.setOptions({enabled:!0}).catch((e=>console.error(e))))}catch(e){nT()&&console.error(e)}}function zP(){return r(this,void 0,void 0,(function*(){const e=yield Wb();if((yield zI())&&(null==e?void 0:e.whiteLabelLogoId))try{const t=yield qb(e.whiteLabelLogoId);yield aI(t.imageBlob)}catch(e){console.error(e),yield sI()}else yield sI();XP()}))}function YP(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.isLoggedIn,mo.whiteLabelLogoId]);if((yield zI())&&e.isLoggedIn&&e.whiteLabelLogoId)try{const e=yield YE();e&&(yield aI(e.imageBlob))}catch(e){yield sI()}else yield sI()}))}function XP(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.customTranslatorName]);e.customTranslatorName?yield cI(e.customTranslatorName):yield lI()}))}function KP(){EE()}function QP(){return r(this,void 0,void 0,(function*(){try{const{enforceSsoAutologin:e}=yield YI();if(e){(yield AI())||(yield rb(!1,!1))}}catch(e){console.error(e),By({errorCode:ST,errorMessage:e.message}),ZE({action:ST,error:e.message})}}))}function ZP(e){return r(this,void 0,void 0,(function*(){return(yield cN()).checkFeatureFlag(e)}))}function eL(e){return r(this,void 0,void 0,(function*(){try{const t=yield cN(),n=yield t.getExperiment(e.experimentName),r=n.getCohort();let o;return e.parameterName&&(o=n.get(e.parameterName,e.defaultValue)),{value:o,groupName:r}}catch(t){return console.error(`Error getting parameter from experiment "${e.experimentName}":`,t),{value:e.defaultValue,groupName:null}}}))}const tL=e=>r(void 0,[e],void 0,(function*({payload:{mode:e,sentences:t,sourceLang:n,targetLang:r,domain:o,textLines:i}}){yield TI();const{installationId:a}=yield mI([mo.installationId]),s=e===Rb.WRITE;yield chrome.storage.sync.set({gdocsWriteLang:s?n:null});const l=new Date,c=qv(r),u=r=>{var s,u,d;try{const p=t&&t.length>0?t.map((e=>e.text)):i;e===Rb.TRANSLATE?qy({installationId:a,trigger:k,websiteLanguage:n,targetLanguage:c.langCode,characterCount:null!==(s=null==p?void 0:p.reduce(((e,t)=>e+t.length),0))&&void 0!==s?s:0,translationPerformance:{isFirstRequest:!1,processingTimeInMs:(new Date).getTime()-l.getTime()},domainName:o,nicheIntegration:Sn}):jS(Zn,{lang:n,sourceLength:null!==(u=null==p?void 0:p.reduce(((e,t)=>e+t.length),0))&&void 0!==u?u:0,targetLength:null!==(d=null==r?void 0:r.reduce(((e,t)=>e+t.length),0))&&void 0!==d?d:0,nicheIntegration:Sn,trigger:Fr})}catch(e){console.error(e)}},d=i||t.map((e=>e.text));if(s){const e=yield pw({sourceTexts:d});return u(e.improvements.map((e=>e.text))),e}{const e=yield Yb({sourceTexts:d,targetLangCode:c.regionalVariant?c.regionalVariant:c.langCode,sourceLang:n});return u(),e}}));function nL(e){try{const t=[];if(e){const n=e.split("_");for(let e=0;e<n.length;e++){const r=n[e].split(".");4===r.length&&t.push({id:parseInt(r[0],10)||0,name:r[1],variant:parseInt(r[2],10)||0,breakout:parseInt(r[3],10)||0})}}return t}catch(e){return console.error("Failed to parse release groups:",e),[]}}const rL=["ace","af","an","as","ay","az","ba","be","bho","bn","br","bs","ca","ceb","ckb","cy","eo","eu","fa","ga","gl","gn","gom","gu","ha","hi","hr","ht","hy","ig","is","jv","ka","kk","kmr","ky","la","lb","lmo","ln","mai","mg","mi","mk","mn","mr","ms","mt","my","ne","oc","pag","pam","prs","ps","qu","sa","scn","sq","sr","su","sw","ta","te","tg","tk","tl","tn","ts","tt","ur","uz","wo","xh","yue","zu","ml","st","om","pa","yi"];function oL(e){return r(this,void 0,void 0,(function*(){try{const t=yield XI();if(PE(t,RE))return rL.map((e=>({code:e,isNew:!1})));if(PE(t,OE)){const t=yield function(e){return r(this,void 0,void 0,(function*(){if(No()||!chrome.cookies)return!1;if(e)try{return!!nL(e).find((e=>"WDW-1602"===e.name&&2===e.variant))}catch(e){console.error("Failed to parse releaseGroups from localStorage:",e)}try{const e=(yield chrome.cookies.getAll({domain:"deepl.com"})).find((e=>"releaseGroups"===e.name));if(!e||!e.value)return!1;return!!nL(e.value).find((e=>"WDW-1602"===e.name&&2===e.variant))}catch(e){return console.error("Failed to check releaseGroups cookie:",e),!1}}))}(e);if(t)return rL.map((e=>({code:e,isNew:!1})))}return[]}catch(e){return console.error("Failed to get experimental language codes:",e),[]}}))}function iL(e){return r(this,void 0,void 0,(function*(){const t=(yield oL(e)).map((e=>({langCode:e.code.toUpperCase(),langCodeForIta:e.code,langCodeForSpeech:e.code,isNew:e.isNew}))),n=[...E.map((e=>Object.assign(Object.assign({},e),{isNew:!1}))),...t],r=yield chrome.storage.sync.get([mo.selectedTargetLanguage,mo.targetLanguageUserInput,mo.targetLanguageSidePanel]);n.some((e=>e.langCode===r.selectedTargetLanguage))||chrome.storage.sync.set({[mo.selectedTargetLanguage]:zv()}),n.some((e=>e.langCode===r.targetLanguageUserInput))||chrome.storage.sync.set({[mo.targetLanguageUserInput]:""}),n.some((e=>e.langCode===r.targetLanguageSidePanel))||chrome.storage.sync.set({[mo.targetLanguageSidePanel]:""}),yield chrome.storage.local.set({translationLanguages:n})}))}const aL="ITA_RATE_LIMITED",sL="ITA_RATE_LIMITED_RESTRICTED",lL="ITA_WRITE_GENERIC_ERROR",cL="ITA_TRANSLATE_GENERIC_ERROR",uL="ITA_TOKEN_EXPIRED",dL="ITA_GEO_BLOCKED",pL={session_ended_mutual_end:"000_session_ended_mutual_end",session_ended_idle_timeout:"400_session_ended_idle_timeout",quota_exceeded:"802_quota_exceeded",rate_limited:"800_rate_limited",rate_limited_restricted:"801_rate_limited_restricted",session_ended_transient:"1001_session_ended_transient",session_ended_internal_error:"1300_session_ended_internal_error",session_ended_manual_eviction:"1301_session_ended_manual_eviction",session_ended_authentication_token_expired:"1600_session_ended_authentication_token_expired",missing_or_invalid_authentication:"1601_missing_or_invalid_authentication"},gL={unsupported_session_mode:"300_unsupported_session_mode",obsolete_version_unavailable:"1200_obsolete_version_unavailable",missing_or_invalid_authentication:"1302_missing_or_invalid_authentication",unhandled_internal_error:"1302_unhandled_internal_error"},hL={invalid_session_token:"301_invalid_session_token",invalid_session_version:"302_invalid_session_version",unknown_session:"303_unknown_session",invalid_participant_id:"305_invalid_participant_id",service_level_mismatch:"700_service_level_mismatch",multiple_invocations_forbidden:"900_multiple_invocations_forbidden"},fL={message_validation_failed:"304_message_validation_failed",append_not_allowed:"901_append_not_allowed"};function _L(e){switch(e){case pL.quota_exceeded:case pL.rate_limited:case pL.rate_limited_restricted:case pL.session_ended_internal_error:case pL.session_ended_manual_eviction:case gL.unsupported_session_mode:case gL.obsolete_version_unavailable:case hL.invalid_session_token:case hL.invalid_session_version:case hL.unknown_session:case hL.invalid_participant_id:case hL.service_level_mismatch:case hL.multiple_invocations_forbidden:case fL.message_validation_failed:case pL.missing_or_invalid_authentication:case gL.unhandled_internal_error:return!0;default:return!1}}function mL(e,t=!1){switch(e){case pL.rate_limited:return aL;case pL.rate_limited_restricted:return sL;case pL.quota_exceeded:return aL;case pL.session_ended_authentication_token_expired:return uL;default:return t?lL:cL}}function vL(e){if(e.includes("Status: 451"))return dL}const TL={TEXT_CHANGE:"textChange",TARGET_LANGUAGE_CHANGE:"targetLanguageChange",FORMALITY_CHANGE:"formalityChange",WRITE_STYLE_CHANGE:"writeStyleChange"},yL="translatorRequestedTargetLanguageValue",SL="translatorFormalityModeValue",EL="writeStyleVariantValue",IL={},AL=(e,t)=>{IL[e]||(IL[e]={}),IL[e]=Object.assign(Object.assign({},IL[e]),t),nT()&&console.log("Updated translate port settings",IL)},bL=e=>{var t;return null!==(t=IL[e])&&void 0!==t?t:{}};function wL(e){e.name in IL&&delete IL[e.name]}const OL={},RL=(e,t)=>{OL[e]||(OL[e]={}),OL[e]=Object.assign(Object.assign({},OL[e]),t),nT()&&console.log("Updated write port settings",OL)},NL=e=>{var t;return null!==(t=OL[e])&&void 0!==t?t:{}};function PL(e){e.name in OL&&delete OL[e.name]}function LL(e){return"function"==typeof e}function CL(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xL=CL((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function kL(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var DL=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var c=i(l),u=c.next();!u.done;u=c.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else l.remove(this);var d=this.initialTeardown;if(LL(d))try{d()}catch(e){o=e instanceof xL?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=i(p),h=g.next();!h.done;h=g.next()){var f=h.value;try{GL(f)}catch(e){o=null!=o?o:[],e instanceof xL?o=s(s([],a(o)),a(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(o)throw new xL(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)GL(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&kL(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&kL(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),UL=DL.EMPTY;function ML(e){return e instanceof DL||e&&"closed"in e&&LL(e.remove)&&LL(e.add)&&LL(e.unsubscribe)}function GL(e){LL(e)?e():e.unsubscribe()}var $L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},VL={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,s([e,t],a(n)))},clearTimeout:function(e){var t=VL.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function FL(e){VL.setTimeout((function(){throw e}))}function jL(){}function WL(e){e()}var HL=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ML(t)&&t.add(n)):n.destination=zL,n}return n(t,e),t.create=function(e,t,n){return new BL(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(DL),qL=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){JL(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){JL(e)}else JL(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){JL(e)}},e}(),BL=function(e){function t(t,n,r){var o,i=e.call(this)||this;return o=LL(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,i.destination=new qL(o),i}return n(t,e),t}(HL);function JL(e){FL(e)}var zL={closed:!0,next:jL,error:function(e){throw e},complete:jL},YL="function"==typeof Symbol&&Symbol.observable||"@@observable";function XL(e){return e}var KL=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof HL||function(e){return e&&LL(e.next)&&LL(e.error)&&LL(e.complete)}(r)&&ML(r)?e:new BL(e,t,n);return WL((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=QL(t))((function(t,r){var o=new BL({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[YL]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?XL:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=QL(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function QL(e){var t;return null!==(t=null!=e?e:$L.Promise)&&void 0!==t?t:Promise}function ZL(e){return function(t){if(function(e){return LL(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function eC(e,t,n,r,o){return new tC(e,t,n,r,o)}var tC=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(HL),nC=CL((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),rC=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new oC(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new nC},t.prototype.next=function(e){var t=this;WL((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=i(t.currentObservers),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;WL((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;WL((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?UL:(this.currentObservers=null,i.push(e),new DL((function(){t.currentObservers=null,kL(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new KL;return e.source=this,e},t.create=function(e,t){return new oC(e,t)},t}(KL),oC=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return n(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:UL},t}(rC),iC=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(rC),aC={now:function(){return(aC.delegate||Date).now()},delegate:void 0};function sC(e){return e[e.length-1]}function lC(e){return(t=sC(e))&&LL(t.schedule)?e.pop():void 0;var t}var cC=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function uC(e){return LL(null==e?void 0:e.then)}function dC(e){return LL(e[YL])}function pC(e){return Symbol.asyncIterator&&LL(null==e?void 0:e[Symbol.asyncIterator])}function gC(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var hC="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function fC(e){return LL(null==e?void 0:e[hC])}function _C(e){return c(this,arguments,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,l(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,l(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,l(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function mC(e){return LL(null==e?void 0:e.getReader)}function vC(e){if(e instanceof KL)return e;if(null!=e){if(dC(e))return o=e,new KL((function(e){var t=o[YL]();if(LL(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(cC(e))return r=e,new KL((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(uC(e))return n=e,new KL((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,FL)}));if(pC(e))return TC(e);if(fC(e))return t=e,new KL((function(e){var n,r;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(e.next(s),e.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(mC(e))return TC(_C(e))}var t,n,r,o;throw gC(e)}function TC(e){return new KL((function(t){(function(e,t){var n,i,a,s;return r(this,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=u(e),o.label=1;case 1:return[4,n.next()];case 2:if((i=o.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=o.sent(),a={error:l},[3,11];case 6:return o.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function yC(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(i),!o)return i}function SC(e,t){return void 0===t&&(t=0),ZL((function(n,r){n.subscribe(eC(r,(function(n){return yC(r,e,(function(){return r.next(n)}),t)}),(function(){return yC(r,e,(function(){return r.complete()}),t)}),(function(n){return yC(r,e,(function(){return r.error(n)}),t)})))}))}function EC(e,t){return void 0===t&&(t=0),ZL((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function IC(e,t){if(!e)throw new Error("Iterable cannot be null");return new KL((function(n){yC(n,t,(function(){var r=e[Symbol.asyncIterator]();yC(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function AC(e,t){if(null!=e){if(dC(e))return function(e,t){return vC(e).pipe(EC(t),SC(t))}(e,t);if(cC(e))return function(e,t){return new KL((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(uC(e))return function(e,t){return vC(e).pipe(EC(t),SC(t))}(e,t);if(pC(e))return IC(e,t);if(fC(e))return function(e,t){return new KL((function(n){var r;return yC(n,t,(function(){r=e[hC](),yC(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return LL(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(mC(e))return function(e,t){return IC(_C(e),t)}(e,t)}throw gC(e)}function bC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e,t){return t?AC(e,t):vC(e)}(e,lC(e))}function wC(e,t){return ZL((function(n,r){var o=0;n.subscribe(eC(r,(function(n){r.next(e.call(t,n,o++))})))}))}function OC(e,t){return ZL((function(n,r){var o=0;n.subscribe(eC(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}function RC(e,t){return ZL(function(e,t,n){return function(r,o){var i=n,a=t,s=0;r.subscribe(eC(o,(function(t){var n=s++;a=i?e(a,t,n):(i=!0,t)}),(function(){i&&o.next(a),o.complete()})))}}(e,t,arguments.length>=2))}function NC(e,t){return void 0===t&&(t=XL),e=null!=e?e:PC,ZL((function(n,r){var o,i=!0;n.subscribe(eC(r,(function(n){var a=t(n);!i&&e(o,a)||(i=!1,o=a,r.next(n))})))}))}function PC(e,t){return e===t}function LC(){return ZL((function(e,t){var n,r=!1;e.subscribe(eC(t,(function(e){var o=n;n=e,r&&t.next([o,e]),r=!0})))}))}function CC(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new rC}:t,r=e.resetOnError,o=void 0===r||r,i=e.resetOnComplete,a=void 0===i||i,s=e.resetOnRefCountZero,l=void 0===s||s;return function(e){var t,r,i,s=0,c=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=void 0},p=function(){d(),t=i=void 0,c=u=!1},g=function(){var e=t;p(),null==e||e.unsubscribe()};return ZL((function(e,h){s++,u||c||d();var f=i=null!=i?i:n();h.add((function(){0!==--s||u||c||(r=xC(g,l))})),f.subscribe(h),!t&&s>0&&(t=new BL({next:function(e){return f.next(e)},error:function(e){u=!0,d(),r=xC(p,o,e),f.error(e)},complete:function(){c=!0,d(),r=xC(p,a),f.complete()}}),vC(e).subscribe(t))}))(e)}}function xC(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new BL({next:function(){o.unsubscribe(),e()}});return vC(t.apply(void 0,s([],a(n)))).subscribe(o)}}else e()}function kC(e,t){return ZL((function(n,r){var o=null,i=0,a=!1,s=function(){return a&&!o&&r.complete()};n.subscribe(eC(r,(function(n){null==o||o.unsubscribe();var a=0,l=i++;vC(e(n,l)).subscribe(o=eC(r,(function(e){return r.next(t?t(n,e,l,a++):e)}),(function(){o=null,s()})))}),(function(){a=!0,s()})))}))}function DC(e){return ZL((function(t,n){vC(e).subscribe(eC(n,(function(){return n.complete()}),jL)),!n.closed&&t.subscribe(n)}))}function UC(e){return void 0===e&&(e=aC),wC((function(t){return{value:t,timestamp:e.now()}}))}function MC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=LL(sC(n=e))?n.pop():void 0;return ZL((function(t,n){for(var o=e.length,i=new Array(o),l=e.map((function(){return!1})),c=!1,u=function(t){vC(e[t]).subscribe(eC(n,(function(e){i[t]=e,c||l[t]||(l[t]=!0,(c=l.every(XL))&&(l=null))}),jL))},d=0;d<o;d++)u(d);t.subscribe(eC(n,(function(e){if(c){var t=s([e],a(i));n.next(r?r.apply(void 0,s([],a(t))):t)}})))}))}
/**
     * @license
     * MIT License
     * 
     * Copyright (c) 2014-present, Lee Byron and other contributors.
     * 
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     * 
     * The above copyright notice and this permission notice shall be included in all
     * copies or substantial portions of the Software.
     * 
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
     * SOFTWARE.
     */var GC="delete",$C=32,VC=31,FC={};function jC(e){e&&(e.value=!0)}function WC(){}function HC(e){return void 0===e.size&&(e.size=e.__iterate(BC)),e.size}function qC(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?HC(e)+t:t}function BC(){return!0}function JC(e,t,n){return(0===e&&!KC(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function zC(e,t){return XC(e,t,0)}function YC(e,t){return XC(e,t,t)}function XC(e,t,n){return void 0===e?n:KC(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function KC(e){return e<0||0===e&&1/e==-1/0}var QC="@@__IMMUTABLE_ITERABLE__@@";function ZC(e){return Boolean(e&&e[QC])}var ex="@@__IMMUTABLE_KEYED__@@";function tx(e){return Boolean(e&&e[ex])}var nx="@@__IMMUTABLE_INDEXED__@@";function rx(e){return Boolean(e&&e[nx])}function ox(e){return tx(e)||rx(e)}var ix=function(e){return ZC(e)?e:Rx(e)},ax=function(e){function t(e){return tx(e)?e:Nx(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ix),sx=function(e){function t(e){return rx(e)?e:Px(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ix),lx=function(e){function t(e){return ZC(e)&&!ox(e)?e:Lx(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ix);ix.Keyed=ax,ix.Indexed=sx,ix.Set=lx;var cx="@@__IMMUTABLE_SEQ__@@";function ux(e){return Boolean(e&&e[cx])}var dx="@@__IMMUTABLE_RECORD__@@";function px(e){return Boolean(e&&e[dx])}function gx(e){return ZC(e)||px(e)}var hx="@@__IMMUTABLE_ORDERED__@@";function fx(e){return Boolean(e&&e[hx])}var _x="function"==typeof Symbol&&Symbol.iterator,mx="@@iterator",vx=_x||mx,Tx=function(e){this.next=e};function yx(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function Sx(){return{value:void 0,done:!0}}function Ex(e){return!!Array.isArray(e)||!!bx(e)}function Ix(e){return e&&"function"==typeof e.next}function Ax(e){var t=bx(e);return t&&t.call(e)}function bx(e){var t=e&&(_x&&e[_x]||e[mx]);if("function"==typeof t)return t}Tx.prototype.toString=function(){return"[Iterator]"},Tx.KEYS=0,Tx.VALUES=1,Tx.ENTRIES=2,Tx.prototype.inspect=Tx.prototype.toSource=function(){return this.toString()},Tx.prototype[vx]=function(){return this};var wx=Object.prototype.hasOwnProperty;function Ox(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Rx=function(e){function t(e){return null==e?Ux():gx(e)?e.toSeq():function(e){var t=$x(e);if(t)return(r=bx(n=e))&&r===n.entries?t.fromEntrySeq():function(e){var t=bx(e);return t&&t===e.keys}(e)?t.toSetSeq():t;var n,r;if("object"==typeof e)return new xx(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[t?r-++o:o++];if(!1===e(i[1],i[0],this))break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,o=0;return new Tx((function(){if(o===r)return{value:void 0,done:!0};var i=n[t?r-++o:o++];return yx(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(ix),Nx=function(e){function t(e){return null==e?Ux().toKeyedSeq():ZC(e)?tx(e)?e.toSeq():e.fromEntrySeq():px(e)?e.toSeq():Mx(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Rx),Px=function(e){function t(e){return null==e?Ux():ZC(e)?tx(e)?e.entrySeq():e.toIndexedSeq():px(e)?e.toSeq().entrySeq():Gx(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Rx),Lx=function(e){function t(e){return(ZC(e)&&!ox(e)?e:Px(e)).toSetSeq()}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Rx);Rx.isSeq=ux,Rx.Keyed=Nx,Rx.Set=Lx,Rx.Indexed=Px,Rx.prototype[cx]=!0;var Cx=function(e){function t(e){this._array=e,this.size=e.length}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[qC(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,o=0;o!==r;){var i=t?r-++o:o++;if(!1===e(n[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,o=0;return new Tx((function(){if(o===r)return{value:void 0,done:!0};var i=t?r-++o:o++;return yx(e,i,n[i])}))},t}(Px),xx=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return wx.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var a=r[t?o-++i:i++];if(!1===e(n[a],a,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length,i=0;return new Tx((function(){if(i===o)return{value:void 0,done:!0};var a=r[t?o-++i:i++];return yx(e,a,n[a])}))},t}(Nx);xx.prototype[hx]=!0;var kx,Dx=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=Ax(this._collection),r=0;if(Ix(n))for(var o;!(o=n.next()).done&&!1!==e(o.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=Ax(this._collection);if(!Ix(n))return new Tx(Sx);var r=0;return new Tx((function(){var t=n.next();return t.done?t:yx(e,r++,t.value)}))},t}(Px);function Ux(){return kx||(kx=new Cx([]))}function Mx(e){var t=$x(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new xx(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function Gx(e){var t=$x(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function $x(e){return Ox(e)?new Cx(e):Ex(e)?new Dx(e):void 0}var Vx="@@__IMMUTABLE_MAP__@@";function Fx(e){return Boolean(e&&e[Vx])}function jx(e){return Fx(e)&&fx(e)}function Wx(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function Hx(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(Wx(e)&&Wx(t)&&e.equals(t))}var qx="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Bx(e){return e>>>1&1073741824|3221225471&e}var Jx=Object.prototype.valueOf;function zx(e){if(null==e)return Yx(e);if("function"==typeof e.hashCode)return Bx(e.hashCode(e));var t,n=(t=e).valueOf!==Jx&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==n)return Yx(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return Bx(t)}(n);case"string":return n.length>ik?function(e){var t=lk[e];void 0===t&&(t=Xx(e),sk===ak&&(sk=0,lk={}),sk++,lk[e]=t);return t}(n):Xx(n);case"object":case"function":return function(e){var t;if(tk&&void 0!==(t=ek.get(e)))return t;if(t=e[ok],void 0!==t)return t;if(!Qx){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[ok]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=Zx(),tk)ek.set(e,t);else{if(void 0!==Kx&&!1===Kx(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Qx)Object.defineProperty(e,ok,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[ok]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[ok]=t}}return t}(n);case"symbol":return function(e){var t=nk[e];if(void 0!==t)return t;return t=Zx(),nk[e]=t,t}(n);default:if("function"==typeof n.toString)return Xx(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function Yx(e){return null===e?1108378658:1108378659}function Xx(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Bx(t)}var Kx=Object.isExtensible,Qx=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Zx(){var e=++rk;return 1073741824&rk&&(rk=0),e}var ek,tk="function"==typeof WeakMap;tk&&(ek=new WeakMap);var nk=Object.create(null),rk=0,ok="__immutablehash__";"function"==typeof Symbol&&(ok=Symbol(ok));var ik=16,ak=255,sk=0,lk={},ck=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=fk(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=hk(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Nx);ck.prototype[hx]=!0;var uk=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&HC(this),this._iter.__iterate((function(o){return e(o,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(1,t),o=0;return t&&HC(this),new Tx((function(){var i=r.next();return i.done?i:yx(e,t?n.size-++o:o++,i.value,i)}))},t}(Px),dk=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new Tx((function(){var t=n.next();return t.done?t:yx(e,t.value,t.value,t)}))},t}(Lx),pk=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){wk(t);var r=ZC(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new Tx((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){wk(r);var o=ZC(r);return yx(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}}))},t}(Nx);function gk(e){var t=Rk(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Nk,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new Tx((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function hk(e,t,n){var r=Rk(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var i=e.get(r,FC);return i===FC?o:t.call(n,i,r,e)},r.__iterateUncached=function(r,o){var i=this;return e.__iterate((function(e,o,a){return!1!==r(t.call(n,e,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=e.__iterator(2,o);return new Tx((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return yx(r,s,t.call(n,a[1],s,e),o)}))},r}function fk(e,t){var n=this,r=Rk(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=gk(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=Nk,r.__iterate=function(n,r){var o=this,i=0;return r&&HC(e),e.__iterate((function(e,a){return n(e,t?a:r?o.size-++i:i++,o)}),!r)},r.__iterator=function(r,o){var i=0;o&&HC(e);var a=e.__iterator(2,!o);return new Tx((function(){var e=a.next();if(e.done)return e;var s=e.value;return yx(r,t?s[0]:o?n.size-++i:i++,s[1],e)}))},r}function _k(e,t,n,r){var o=Rk(e);return r&&(o.has=function(r){var o=e.get(r,FC);return o!==FC&&!!t.call(n,o,r,e)},o.get=function(r,o){var i=e.get(r,FC);return i!==FC&&t.call(n,i,r,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate((function(e,i,l){if(t.call(n,e,i,l))return s++,o(e,r?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(2,i),s=0;return new Tx((function(){for(;;){var i=a.next();if(i.done)return i;var l=i.value,c=l[0],u=l[1];if(t.call(n,u,c,e))return yx(o,r?c:s++,u,i)}}))},o}function mk(e,t,n,r){var o=e.size;if(JC(t,n,o))return e;if(void 0===o&&(t<0||n<0))return mk(e.toSeq().cacheResult(),t,n,r);var i,a=zC(t,o),s=YC(n,o)-a;s==s&&(i=s<0?0:s);var l=Rk(e);return l.size=0===i?i:e.size&&i||void 0,!r&&ux(e)&&i>=0&&(l.get=function(t,n){return(t=qC(this,t))>=0&&t<i?e.get(t+a,n):n}),l.__iterateUncached=function(t,n){var o=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,l=!0,c=0;return e.__iterate((function(e,n){if(!l||!(l=s++<a))return c++,!1!==t(e,r?n:c-1,o)&&c!==i})),c},l.__iteratorUncached=function(t,n){if(0!==i&&n)return this.cacheResult().__iterator(t,n);if(0===i)return new Tx(Sx);var o=e.__iterator(t,n),s=0,l=0;return new Tx((function(){for(;s++<a;)o.next();if(++l>i)return{value:void 0,done:!0};var e=o.next();return r||1===t||e.done?e:yx(t,l-1,0===t?void 0:e.value[1],e)}))},l}function vk(e,t,n,r){var o=Rk(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,l=0;return e.__iterate((function(e,i,c){if(!s||!(s=t.call(n,e,i,c)))return l++,o(e,r?i:l-1,a)})),l},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(2,i),l=!0,c=0;return new Tx((function(){var e,i,u;do{if((e=s.next()).done)return r||1===o?e:yx(o,c++,0===o?void 0:e.value[1],e);var d=e.value;i=d[0],u=d[1],l&&(l=t.call(n,u,i,a))}while(l);return 2===o?e:yx(o,i,u,e)}))},o}uk.prototype.cacheResult=ck.prototype.cacheResult=dk.prototype.cacheResult=pk.prototype.cacheResult=Nk;var Tk=function(e){function t(e){this._wrappedIterables=e.flatMap((function(e){return e._wrappedIterables?e._wrappedIterables:[e]})),this.size=this._wrappedIterables.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),this[ex]=this._wrappedIterables[0][ex],this[nx]=this._wrappedIterables[0][nx],this[hx]=this._wrappedIterables[0][hx]}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(0!==this._wrappedIterables.length){if(t)return this.cacheResult().__iterate(e,t);for(var n=0,r=tx(this),o=r?2:1,i=this._wrappedIterables[n].__iterator(o,t),a=!0,s=0;a;){for(var l=i.next();l.done;){if(++n===this._wrappedIterables.length)return s;l=(i=this._wrappedIterables[n].__iterator(o,t)).next()}a=!1!==(r?e(l.value[1],l.value[0],this):e(l.value,s,this)),s++}return s}},t.prototype.__iteratorUncached=function(e,t){var n=this;if(0===this._wrappedIterables.length)return new Tx(Sx);if(t)return this.cacheResult().__iterator(e,t);var r=0,o=this._wrappedIterables[r].__iterator(e,t);return new Tx((function(){for(var i=o.next();i.done;){if(++r===n._wrappedIterables.length)return i;i=(o=n._wrappedIterables[r].__iterator(e,t)).next()}return i}))},t}(Rx);function yk(e,t,n){var r=Rk(e);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,s=!1;return function e(l,c){l.__iterate((function(i,l){return(!t||c<t)&&ZC(i)?e(i,c+1):(a++,!1===o(i,n?l:a-1,r)&&(s=!0)),!s}),i)}(e,0),a},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(r,o),a=[],s=0;return new Tx((function(){for(;i;){var e=i.next();if(!1===e.done){var l=e.value;if(2===r&&(l=l[1]),t&&!(a.length<t)||!ZC(l))return n?e:yx(r,s++,l,e);a.push(i),i=l.__iterator(r,o)}else i=a.pop()}return{value:void 0,done:!0}}))},r}function Sk(e,t,n){t||(t=Pk);var r=tx(e),o=0,i=e.toSeq().map((function(t,r){return[r,t,o++,n?n(t,r,e):t]})).valueSeq().toArray();return i.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?Nx(i):rx(e)?Px(i):Lx(i)}function Ek(e,t,n){if(t||(t=Pk),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return Ik(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return Ik(t,e,n)?n:e}))}function Ik(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function Ak(e,t,n,r){var o=Rk(e),i=new Cx(n).map((function(e){return e.size}));return o.size=r?i.max():i.min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=ix(e),Ax(o?e.reverse():e)})),a=0,s=!1;return new Tx((function(){var n;return s||(n=i.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:yx(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},o}function bk(e,t){return e===t?e:ux(e)?t:e.constructor(t)}function wk(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Ok(e){return tx(e)?ax:rx(e)?sx:lx}function Rk(e){return Object.create((tx(e)?Nx:rx(e)?Px:Lx).prototype)}function Nk(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Rx.prototype.cacheResult.call(this)}function Pk(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Lk(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function Ck(e,t){if(!e)throw new Error(t)}function xk(e){Ck(e!==1/0,"Cannot perform this action with an infinite size.")}function kk(e){if(Ox(e)&&"string"!=typeof e)return e;if(fx(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}var Dk=Object.prototype.toString;function Uk(e){return"object"==typeof e&&(gx(e)||Array.isArray(e)||function(e){if(!e||"object"!=typeof e||"[object Object]"!==Dk.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}(e))}function Mk(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function Gk(e,t,n){return gx(e)?e.get(t,n):function(e,t){return gx(e)?e.has(t):Uk(e)&&wx.call(e,t)}(e,t)?"function"==typeof e.get?e.get(t):e[t]:n}function $k(e){if(Array.isArray(e))return Lk(e);var t={};for(var n in e)wx.call(e,n)&&(t[n]=e[n]);return t}function Vk(e,t,n,r){r||(r=n,n=void 0);var o=Fk(gx(e),e,kk(t),0,n,r);return o===FC?n:o}function Fk(e,t,n,r,o,i){var a=t===FC;if(r===n.length){var s=a?o:t,l=i(s);return l===s?t:l}if(!a&&!Uk(t))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(n).slice(0,r).map(Mk)+"]: "+t);var c=n[r],u=a?FC:Gk(t,c,FC),d=Fk(u===FC?e:gx(u),u,n,r+1,o,i);return d===u?t:d===FC?function(e,t){if(!Uk(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(gx(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!wx.call(e,t))return e;var n=$k(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}(t,c):function(e,t,n){if(!Uk(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(gx(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(wx.call(e,t)&&n===e[t])return e;var r=$k(e);return r[t]=n,r}(a?e?vD():{}:t,c,d)}function jk(e,t){return function(e,t,n){return Vk(e,t,FC,(function(){return n}))}(this,e,t)}function Wk(e){return function(e,t){return Vk(e,t,(function(){return FC}))}(this,e)}function Hk(e,t,n,r){return Vk(e,[t],n,r)}function qk(e,t,n){return 1===arguments.length?e(this):Hk(this,e,t,n)}function Bk(e,t,n){return Vk(this,e,t,n)}function Jk(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Yk(this,e)}function zk(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return Yk(this,t,e)}function Yk(e,t,n){for(var r=[],o=0;o<t.length;o++){var i=ax(t[o]);0!==i.size&&r.push(i)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){Hk(e,r,FC,(function(e){return e===FC?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},o=0;o<r.length;o++)r[o].forEach(t)})):px(e)?e:e.constructor(r[0])}function Xk(e,t,n){return Kk(e,t,function(e){function t(n,r,o){return Uk(n)&&Uk(r)&&(i=r,a=Rx(n),s=Rx(i),rx(a)===rx(s)&&tx(a)===tx(s))?Kk(n,[r],t):e?e(n,r,o):r;var i,a,s}return t}(n))}function Kk(e,t,n){if(!Uk(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(gx(e))return"function"==typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),o=e,i=r?sx:ax,a=r?function(t){o===e&&(o=$k(o)),o.push(t)}:function(t,r){var i=wx.call(o,r),a=i&&n?n(o[r],t,r):t;i&&a===o[r]||(o===e&&(o=$k(o)),o[r]=a)},s=0;s<t.length;s++)i(t[s]).forEach(a);return o}function Qk(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Xk(this,e)}function Zk(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Xk(this,t,e)}function eD(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Vk(this,e,vD(),(function(e){return Kk(e,t)}))}function tD(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Vk(this,e,vD(),(function(e){return Xk(e,t)}))}function nD(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function rD(){return this.__ownerID?this:this.__ensureOwner(new WC)}function oD(){return this.__ensureOwner()}function iD(){return this.__altered}var aD=function(e){function t(t){return null==t?vD():Fx(t)&&!fx(t)?t:vD().withMutations((function(n){var r=e(t);xk(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return TD(this,e,t)},t.prototype.remove=function(e){return TD(this,e,FC)},t.prototype.deleteAll=function(e){var t=ix(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):vD()},t.prototype.sort=function(e){return WD(Sk(this,e))},t.prototype.sortBy=function(e,t){return WD(Sk(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(o,i){r.set(i,e.call(t,o,i,n))}))}))},t.prototype.__iterator=function(e,t){return new hD(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?mD(this.size,this._root,e,this.__hash):0===this.size?vD():(this.__ownerID=e,this.__altered=!1,this)},t}(ax);aD.isMap=Fx;var sD=aD.prototype;sD[Vx]=!0,sD[GC]=sD.remove,sD.removeAll=sD.deleteAll,sD.setIn=jk,sD.removeIn=sD.deleteIn=Wk,sD.update=qk,sD.updateIn=Bk,sD.merge=sD.concat=Jk,sD.mergeWith=zk,sD.mergeDeep=Qk,sD.mergeDeepWith=Zk,sD.mergeIn=eD,sD.mergeDeepIn=tD,sD.withMutations=nD,sD.wasAltered=iD,sD.asImmutable=oD,sD["@@transducer/init"]=sD.asMutable=rD,sD["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},sD["@@transducer/result"]=function(e){return e.asImmutable()};var lD=function(e,t){this.ownerID=e,this.entries=t};lD.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Hx(n,o[i][0]))return o[i][1];return r},lD.prototype.update=function(e,t,n,r,o,i,a){for(var s=o===FC,l=this.entries,c=0,u=l.length;c<u&&!Hx(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(jC(a),(s||!d)&&jC(i),!s||1!==l.length){if(!d&&!s&&l.length>=bD)return function(e,t,n,r){e||(e=new WC);for(var o=new pD(e,zx(n),[n,r]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,l,r,o);var p=e&&e===this.ownerID,g=p?l:Lk(l);return d?s?c===u-1?g.pop():g[c]=g.pop():g[c]=[r,o]:g.push([r,o]),p?(this.entries=g,this):new lD(e,g)}};var cD=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};cD.prototype.get=function(e,t,n,r){void 0===t&&(t=zx(n));var o=1<<((0===e?t:t>>>e)&VC),i=this.bitmap;return i&o?this.nodes[ID(i&o-1)].get(e+5,t,n,r):r},cD.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=zx(r));var s=(0===t?n:n>>>t)&VC,l=1<<s,c=this.bitmap,u=!!(c&l);if(!u&&o===FC)return this;var d=ID(c&l-1),p=this.nodes,g=u?p[d]:void 0,h=yD(g,e,t+5,n,r,o,i,a);if(h===g)return this;if(!u&&h&&p.length>=wD)return function(e,t,n,r,o){for(var i=0,a=new Array($C),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[i++]:void 0;return a[r]=o,new uD(e,i+1,a)}(e,p,c,s,h);if(u&&!h&&2===p.length&&SD(p[1^d]))return p[1^d];if(u&&h&&1===p.length&&SD(h))return h;var f=e&&e===this.ownerID,_=u?h?c:c^l:c|l,m=u?h?AD(p,d,h,f):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),i=0,a=0;a<r;a++)a===t&&(i=1),o[a]=e[a+i];return o}(p,d,f):function(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=n,a=-1):i[s]=e[s+a];return i}(p,d,h,f);return f?(this.bitmap=_,this.nodes=m,this):new cD(e,_,m)};var uD=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};uD.prototype.get=function(e,t,n,r){void 0===t&&(t=zx(n));var o=(0===e?t:t>>>e)&VC,i=this.nodes[o];return i?i.get(e+5,t,n,r):r},uD.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=zx(r));var s=(0===t?n:n>>>t)&VC,l=o===FC,c=this.nodes,u=c[s];if(l&&!u)return this;var d=yD(u,e,t+5,n,r,o,i,a);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<OD)return function(e,t,n,r){for(var o=0,i=0,a=new Array(n),s=0,l=1,c=t.length;s<c;s++,l<<=1){var u=t[s];void 0!==u&&s!==r&&(o|=l,a[i++]=u)}return new cD(e,o,a)}(e,c,p,s)}else p++;var g=e&&e===this.ownerID,h=AD(c,s,d,g);return g?(this.count=p,this.nodes=h,this):new uD(e,p,h)};var dD=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};dD.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Hx(n,o[i][0]))return o[i][1];return r},dD.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=zx(r));var s=o===FC;if(n!==this.keyHash)return s?this:(jC(a),jC(i),ED(this,e,t,n,[r,o]));for(var l=this.entries,c=0,u=l.length;c<u&&!Hx(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(jC(a),(s||!d)&&jC(i),s&&2===u)return new pD(e,this.keyHash,l[1^c]);var p=e&&e===this.ownerID,g=p?l:Lk(l);return d?s?c===u-1?g.pop():g[c]=g.pop():g[c]=[r,o]:g.push([r,o]),p?(this.entries=g,this):new dD(e,this.keyHash,g)};var pD=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};pD.prototype.get=function(e,t,n,r){return Hx(n,this.entry[0])?this.entry[1]:r},pD.prototype.update=function(e,t,n,r,o,i,a){var s=o===FC,l=Hx(r,this.entry[0]);return(l?o===this.entry[1]:s)?this:(jC(a),s?void jC(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new pD(e,this.keyHash,[r,o]):(jC(i),ED(this,e,t,zx(r),[r,o])))},lD.prototype.iterate=dD.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},cD.prototype.iterate=uD.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[t?o-r:r];if(i&&!1===i.iterate(e,t))return!1}},pD.prototype.iterate=function(e,t){return e(this.entry)};var gD,hD=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&_D(e._root)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,o=void 0;if(n.entry){if(0===r)return fD(e,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return fD(e,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return fD(e,i.entry);t=this._stack=_D(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(Tx);function fD(e,t){return yx(e,t[0],t[1])}function _D(e,t){return{node:e,index:0,__prev:t}}function mD(e,t,n,r){var o=Object.create(sD);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function vD(){return gD||(gD=mD(0))}function TD(e,t,n){var r,o;if(e._root){var i={value:!1},a={value:!1};if(r=yD(e._root,e.__ownerID,0,void 0,t,n,i,a),!a.value)return e;o=e.size+(i.value?n===FC?-1:1:0)}else{if(n===FC)return e;o=1,r=new lD(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?mD(o,r):vD()}function yD(e,t,n,r,o,i,a,s){return e?e.update(t,n,r,o,i,a,s):i===FC?e:(jC(s),jC(a),new pD(t,r,[o,i]))}function SD(e){return e.constructor===pD||e.constructor===dD}function ED(e,t,n,r,o){if(e.keyHash===r)return new dD(t,r,[e.entry,o]);var i,a=(0===n?e.keyHash:e.keyHash>>>n)&VC,s=(0===n?r:r>>>n)&VC,l=a===s?[ED(e,t,n+5,r,o)]:(i=new pD(t,r,o),a<s?[e,i]:[i,e]);return new cD(t,1<<a|1<<s,l)}function ID(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function AD(e,t,n,r){var o=r?e:Lk(e);return o[t]=n,o}var bD=8,wD=16,OD=8,RD="@@__IMMUTABLE_LIST__@@";function ND(e){return Boolean(e&&e[RD])}var PD=function(e){function t(t){var n=UD();if(null==t)return n;if(ND(t))return t;var r=e(t),o=r.size;return 0===o?n:(xk(o),o>0&&o<$C?DD(0,o,5,null,new CD(r.toArray())):n.withMutations((function(e){e.setSize(o),r.forEach((function(t,n){return e.set(n,t)}))})))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=qC(this,e))>=0&&e<this.size){var n=$D(this,e+=this._origin);return n&&n.array[e&VC]}return t},t.prototype.set=function(e,t){return function(e,t,n){if(t=qC(e,t),t!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?VD(e,t).set(0,n):VD(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,o=e._root,i={value:!1};t>=FD(e._capacity)?r=MD(r,e.__ownerID,0,t,n,i):o=MD(o,e.__ownerID,e._level,t,n,i);if(!i.value)return e;if(e.__ownerID)return e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return DD(e._origin,e._capacity,e._level,o,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):UD()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){VD(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return VD(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){VD(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return VD(this,1)},t.prototype.shuffle=function(e){return void 0===e&&(e=Math.random),this.withMutations((function(t){for(var n,r,o=t.size;o;)n=Math.floor(e()*o--),r=t.get(n),t.set(n,t.get(o)),t.set(o,r)}))},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var o=t[r],i=e("string"!=typeof o&&Ex(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return VD(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var o=0;o<n.size;o++)r.set(o,e.call(t,r.get(o),o,n))}))},t.prototype.slice=function(e,t){var n=this.size;return JC(e,t,n)?this:VD(this,zC(e,n),YC(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=kD(this,t);return new Tx((function(){var o=r();return o===xD?{value:void 0,done:!0}:yx(e,t?--n:n++,o)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,o=kD(this,t);(n=o())!==xD&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?DD(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?UD():(this.__ownerID=e,this.__altered=!1,this)},t}(sx);PD.isList=ND;var LD=PD.prototype;LD[RD]=!0,LD[GC]=LD.remove,LD.merge=LD.concat,LD.setIn=jk,LD.deleteIn=LD.removeIn=Wk,LD.update=qk,LD.updateIn=Bk,LD.mergeIn=eD,LD.mergeDeepIn=tD,LD.withMutations=nD,LD.wasAltered=iD,LD.asImmutable=oD,LD["@@transducer/init"]=LD.asMutable=rD,LD["@@transducer/step"]=function(e,t){return e.push(t)},LD["@@transducer/result"]=function(e){return e.asImmutable()};var CD=function(e,t){this.array=e,this.ownerID=t};CD.prototype.removeBefore=function(e,t,n){if(!(n&(1<<t+5)-1)||0===this.array.length)return this;var r=n>>>t&VC;if(r>=this.array.length)return new CD([],e);var o,i=0===r;if(t>0){var a=this.array[r];if((o=a&&a.removeBefore(e,t-5,n))===a&&i)return this}if(i&&!o)return this;var s=GD(this,e);if(!i)for(var l=0;l<r;l++)s.array[l]=void 0;return o&&(s.array[r]=o),s},CD.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t+5:$C)||0===this.array.length)return this;var r,o=n-1>>>t&VC;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((r=i&&i.removeAfter(e,t-5,n))===i&&o===this.array.length-1)return this}var a=GD(this,e);return a.array.splice(o+1),r&&(a.array[o]=r),a};var xD={};function kD(e,t){var n=e._origin,r=e._capacity,o=FD(r),i=e._tail;return a(e._root,e._level,0);function a(e,s,l){return 0===s?function(e,a){var s=a===o?i&&i.array:e&&e.array,l=a>n?0:n-a,c=r-a;c>$C&&(c=$C);return function(){if(l===c)return xD;var e=t?--c:l++;return s&&s[e]}}(e,l):function(e,o,i){var s,l=e&&e.array,c=i>n?0:n-i>>o,u=1+(r-i>>o);u>$C&&(u=$C);return function(){for(;;){if(s){var e=s();if(e!==xD)return e;s=null}if(c===u)return xD;var n=t?--u:c++;s=a(l&&l[n],o-5,i+(n<<o))}}}(e,s,l)}}function DD(e,t,n,r,o,i,a){var s=Object.create(LD);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function UD(){return DD(0,0,5)}function MD(e,t,n,r,o,i){var a,s=r>>>n&VC,l=e&&s<e.array.length;if(!l&&void 0===o)return e;if(n>0){var c=e&&e.array[s],u=MD(c,t,n-5,r,o,i);return u===c?e:((a=GD(e,t)).array[s]=u,a)}return l&&e.array[s]===o?e:(i&&jC(i),a=GD(e,t),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function GD(e,t){return t&&e&&t===e.ownerID?e:new CD(e?e.array.slice():[],t)}function $D(e,t){if(t>=FD(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&VC],r-=5;return n}}function VD(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new WC,o=e._origin,i=e._capacity,a=o+t,s=void 0===n?i:n<0?i+n:o+n;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var l=e._level,c=e._root,u=0;a+u<0;)c=new CD(c&&c.array.length?[void 0,c]:[],r),u+=1<<(l+=5);u&&(a+=u,o+=u,s+=u,i+=u);for(var d=FD(i),p=FD(s);p>=1<<l+5;)c=new CD(c&&c.array.length?[c]:[],r),l+=5;var g=e._tail,h=p<d?$D(e,s-1):p>d?new CD([],r):g;if(g&&p>d&&a<i&&g.array.length){for(var f=c=GD(c,r),_=l;_>5;_-=5){var m=d>>>_&VC;f=f.array[m]=GD(f.array[m],r)}f.array[d>>>5&VC]=g}if(s<i&&(h=h&&h.removeAfter(r,0,s)),a>=p)a-=p,s-=p,l=5,c=null,h=h&&h.removeBefore(r,0,a);else if(a>o||p<d){for(u=0;c;){var v=a>>>l&VC;if(v!==p>>>l&VC)break;v&&(u+=(1<<l)*v),l-=5,c=c.array[v]}c&&a>o&&(c=c.removeBefore(r,l,a-u)),c&&p<d&&(c=c.removeAfter(r,l,p-u)),u&&(a-=u,s-=u)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=l,e._root=c,e._tail=h,e.__hash=void 0,e.__altered=!0,e):DD(a,s,l,c,h)}function FD(e){return e<$C?0:e-1>>>5<<5}var jD,WD=function(e){function t(e){return null==e?qD():jx(e)?e:qD().withMutations((function(t){var n=ax(e);xk(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):qD()},t.prototype.set=function(e,t){return BD(this,e,t)},t.prototype.remove=function(e){return BD(this,e,FC)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?HD(t,n,e,this.__hash):0===this.size?qD():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(aD);function HD(e,t,n,r){var o=Object.create(WD.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function qD(){return jD||(jD=HD(vD(),UD()))}function BD(e,t,n){var r,o,i=e._map,a=e._list,s=i.get(t),l=void 0!==s;if(n===FC){if(!l)return e;a.size>=$C&&a.size>=2*i.size?(r=(o=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(l){if(n===a.get(s)[1])return e;r=i,o=a.set(s,[t,n])}else r=i.set(t,a.size),o=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e.__altered=!0,e):HD(r,o)}WD.isOrderedMap=jx,WD.prototype[hx]=!0,WD.prototype[GC]=WD.prototype.remove;var JD="@@__IMMUTABLE_STACK__@@";function zD(e){return Boolean(e&&e[JD])}var YD=function(e){function t(e){return null==e?ZD():zD(e)?e:ZD().pushAll(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=qC(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):QD(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&zD(t))return t;xk(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):QD(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):ZD()},t.prototype.slice=function(t,n){if(JC(t,n,this.size))return this;var r=zC(t,this.size);if(YC(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):QD(o,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?QD(this.size,this._head,e,this.__hash):0===this.size?ZD():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new Cx(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,o=this._head;o&&!1!==e(o.value,r++,this);)o=o.next;return r},t.prototype.__iterator=function(e,t){if(t)return new Cx(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new Tx((function(){if(r){var t=r.value;return r=r.next,yx(e,n++,t)}return{value:void 0,done:!0}}))},t}(sx);YD.isStack=zD;var XD,KD=YD.prototype;function QD(e,t,n,r){var o=Object.create(KD);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function ZD(){return XD||(XD=QD(0))}KD[JD]=!0,KD.shift=KD.pop,KD.unshift=KD.push,KD.unshiftAll=KD.pushAll,KD.withMutations=nD,KD.wasAltered=iD,KD.asImmutable=oD,KD["@@transducer/init"]=KD.asMutable=rD,KD["@@transducer/step"]=function(e,t){return e.unshift(t)},KD["@@transducer/result"]=function(e){return e.asImmutable()};var eU="@@__IMMUTABLE_SET__@@";function tU(e){return Boolean(e&&e[eU])}function nU(e){return tU(e)&&fx(e)}function rU(e,t){if(e===t)return!0;if(!ZC(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||tx(e)!==tx(t)||rx(e)!==rx(t)||fx(e)!==fx(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!ox(e);if(fx(e)){var r=e.entries();return t.every((function(e,t){var o=r.next().value;return o&&Hx(o[1],e)&&(n||Hx(o[0],t))}))&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var a=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):o?!Hx(t,e.get(r,FC)):!Hx(e.get(r,FC),t))return a=!1,!1}));return a&&e.size===s}function oU(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function iU(e){if(!e||"object"!=typeof e)return e;if(!ZC(e)){if(!Uk(e))return e;e=Rx(e)}if(tx(e)){var t={};return e.__iterate((function(e,n){t[n]=iU(e)})),t}var n=[];return e.__iterate((function(e){n.push(iU(e))})),n}var aU=function(e){function t(t){return null==t?dU():tU(t)&&!fx(t)?t:dU().withMutations((function(n){var r=e(t);xk(r.size),r.forEach((function(e){return n.add(e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(ax(e).keySeq())},t.intersect=function(e){return(e=ix(e).toArray()).length?lU.intersect.apply(t(e.pop()),e):dU()},t.union=function(e){return(e=ix(e).toArray()).length?lU.union.apply(t(e.pop()),e):dU()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return cU(this,this._map.set(e,e))},t.prototype.remove=function(e){return cU(this,this._map.remove(e))},t.prototype.clear=function(){return cU(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,o=cU(this,this._map.mapEntries((function(o){var i=o[1],a=e.call(t,i,i,n);return a!==i&&(r=!0),[a,a]}),t));return r?o:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)"string"==typeof t[r]?n.add(t[r]):e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return NU(Sk(this,e))},t.prototype.sortBy=function(e,t){return NU(Sk(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(lx);aU.isSet=tU;var sU,lU=aU.prototype;function cU(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function uU(e,t){var n=Object.create(lU);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function dU(){return sU||(sU=uU(vD()))}lU[eU]=!0,lU[GC]=lU.remove,lU.merge=lU.concat=lU.union,lU.withMutations=nD,lU.asImmutable=oD,lU["@@transducer/init"]=lU.asMutable=rD,lU["@@transducer/step"]=function(e,t){return e.add(t)},lU["@@transducer/result"]=function(e){return e.asImmutable()},lU.__empty=dU,lU.__make=uU;var pU,gU=function(e){function t(e,n,r){if(void 0===r&&(r=1),!(this instanceof t))return new t(e,n,r);if(Ck(0!==r,"Cannot step a Range by 0"),Ck(void 0!==e,"You must define a start value when using Range"),Ck(void 0!==n,"You must define an end value when using Range"),r=Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(pU)return pU;pU=this}}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+qC(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return JC(e,n,this.size)?this:(e=zC(e,this.size),(n=YC(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==e(o,t?n-++i:i++,this);)o+=t?-r:r;return i},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;return new Tx((function(){if(i===n)return{value:void 0,done:!0};var a=o;return o+=t?-r:r,yx(e,t?n-++i:i++,a)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:rU(this,e)},t}(Px);function hU(e,t,n){for(var r=kk(t),o=0;o!==r.length;)if((e=Gk(e,r[o++],FC))===FC)return n;return e}function fU(e,t){return hU(this,e,t)}function _U(){xk(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}ix.Iterator=Tx,oU(ix,{toArray:function(){xk(this.size);var e=new Array(this.size||0),t=tx(this),n=0;return this.__iterate((function(r,o){e[n++]=t?[o,r]:r})),e},toIndexedSeq:function(){return new uk(this)},toJS:function(){return iU(this)},toKeyedSeq:function(){return new ck(this,!0)},toMap:function(){return aD(this.toKeyedSeq())},toObject:_U,toOrderedMap:function(){return WD(this.toKeyedSeq())},toOrderedSet:function(){return NU(tx(this)?this.valueSeq():this)},toSet:function(){return aU(tx(this)?this.valueSeq():this)},toSetSeq:function(){return new dk(this)},toSeq:function(){return rx(this)?this.toIndexedSeq():tx(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return YD(tx(this)?this.valueSeq():this)},toList:function(){return PD(tx(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return bk(this,function(e,t){var n=tx(e),r=[e].concat(t).map((function(e){return ZC(e)?n&&(e=ax(e)):e=n?Mx(e):Gx(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var o=r[0];if(o===e||n&&tx(o)||rx(e)&&rx(o))return o}return new Tk(r)}(this,e))},includes:function(e){return this.some((function(t){return Hx(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){xk(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!e.call(t,r,o,i))return n=!1,!1})),n},filter:function(e,t){return bk(this,_k(this,e,t,!0))},partition:function(e,t){return function(e,t,n){var r=tx(e),o=[[],[]];e.__iterate((function(i,a){o[t.call(n,i,a,e)?1:0].push(r?[a,i]:i)}));var i=Ok(e);return o.map((function(t){return bk(e,i(t))}))}(this,e,t)},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return xk(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){xk(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return bk(this,hk(this,e,t))},reduce:function(e,t,n){return SU(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return SU(this,e,t,n,arguments.length<2,!0)},reverse:function(){return bk(this,fk(this,!0))},slice:function(e,t){return bk(this,mk(this,e,t,!0))},some:function(e,t){xk(this.size);var n=!1;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=!0,!1})),n},sort:function(e){return bk(this,Sk(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return HC(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=aD().asMutable();return e.__iterate((function(o,i){r.update(t.call(n,o,i,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return rU(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Cx(e._cache);var t=e.toSeq().map(IU).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(AU(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(BC,null,e)},flatMap:function(e,t){return bk(this,function(e,t,n){var r=Ok(e);return e.toSeq().map((function(o,i){return r(t.call(n,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return bk(this,yk(this,e,!0))},fromEntrySeq:function(){return new pk(this)},get:function(e,t){return this.find((function(t,n){return Hx(n,e)}),void 0,t)},getIn:fU,groupBy:function(e,t){return function(e,t,n){var r=tx(e),o=(fx(e)?WD():aD()).asMutable();e.__iterate((function(i,a){o.update(t.call(n,i,a,e),(function(e){return(e=e||[]).push(r?[a,i]:i),e}))}));var i=Ok(e);return o.map((function(t){return bk(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,FC)!==FC},hasIn:function(e){return hU(this,e,FC)!==FC},isSubset:function(e){return e="function"==typeof e.includes?e:ix(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:ix(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return Hx(t,e)}))},keySeq:function(){return this.toSeq().map(EU).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Ek(this,e)},maxBy:function(e,t){return Ek(this,t,e)},min:function(e){return Ek(this,e?bU(e):OU)},minBy:function(e,t){return Ek(this,t?bU(t):OU,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return bk(this,vk(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(AU(e),t)},sortBy:function(e,t){return bk(this,Sk(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return bk(this,function(e,t,n){var r=Rk(e);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return e.__iterate((function(e,o,s){return t.call(n,e,o,s)&&++a&&r(e,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(2,o),s=!0;return new Tx((function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,l=o[0],c=o[1];return t.call(n,c,l,i)?2===r?e:yx(r,l,c,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(AU(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=fx(e),n=tx(e),r=t?1:0;return e.__iterate(n?t?function(e,t){r=31*r+RU(zx(e),zx(t))|0}:function(e,t){r=r+RU(zx(e),zx(t))|0}:t?function(e){r=31*r+zx(e)|0}:function(e){r=r+zx(e)|0}),function(e,t){return t=qx(t,3432918353),t=qx(t<<15|t>>>-15,461845907),t=qx(t<<13|t>>>-13,5),t=qx((t=t+3864292196^e)^t>>>16,2246822507),t=Bx((t=qx(t^t>>>13,3266489909))^t>>>16)}(e.size,r)}(this))}});var mU=ix.prototype;mU[QC]=!0,mU[vx]=mU.values,mU.toJSON=mU.toArray,mU.__toStringMapper=Mk,mU.inspect=mU.toSource=function(){return this.toString()},mU.chain=mU.flatMap,mU.contains=mU.includes,oU(ax,{flip:function(){return bk(this,gk(this))},mapEntries:function(e,t){var n=this,r=0;return bk(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return bk(this,this.toSeq().flip().map((function(r,o){return e.call(t,r,o,n)})).flip())}});var vU=ax.prototype;vU[ex]=!0,vU[vx]=mU.entries,vU.toJSON=_U,vU.__toStringMapper=function(e,t){return Mk(t)+": "+Mk(e)},oU(sx,{toKeyedSeq:function(){return new ck(this,!1)},filter:function(e,t){return bk(this,_k(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return bk(this,fk(this,!1))},slice:function(e,t){return bk(this,mk(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=zC(e,e<0?this.count():this.size);var r=this.slice(0,e);return bk(this,1===n?r:r.concat(Lk(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return bk(this,yk(this,e,!1))},get:function(e,t){return(e=qC(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=qC(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return bk(this,function(e,t){var n=Rk(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return e.__iterate((function(e){return(!i||!1!==n(t,i++,o))&&!1!==n(e,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=e.__iterator(1,r),a=0;return new Tx((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?yx(n,a++,t):yx(n,a++,o.value,o)}))},n}(this,e))},interleave:function(){var e=[this].concat(Lk(arguments)),t=Ak(this.toSeq(),Px.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),bk(this,n)},keySeq:function(){return gU(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return bk(this,vk(this,e,t,!1))},zip:function(){return bk(this,Ak(this,wU,[this].concat(Lk(arguments))))},zipAll:function(){return bk(this,Ak(this,wU,[this].concat(Lk(arguments)),!0))},zipWith:function(e){var t=Lk(arguments);return t[0]=this,bk(this,Ak(this,e,t))}});var TU=sx.prototype;TU[nx]=!0,TU[hx]=!0,oU(lx,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var yU=lx.prototype;function SU(e,t,n,r,o,i){return xk(e.size),e.__iterate((function(e,i,a){o?(o=!1,n=e):n=t.call(r,n,e,i,a)}),i),n}function EU(e,t){return t}function IU(e,t){return[t,e]}function AU(e){return function(){return!e.apply(this,arguments)}}function bU(e){return function(){return-e.apply(this,arguments)}}function wU(){return Lk(arguments)}function OU(e,t){return e<t?1:e>t?-1:0}function RU(e,t){return e^t+2654435769+(e<<6)+(e>>2)}yU.has=mU.includes,yU.contains=yU.includes,yU.keys=yU.values,oU(Nx,vU),oU(Px,TU),oU(Lx,yU);var NU=function(e){function t(e){return null==e?xU():nU(e)?e:xU().withMutations((function(t){var n=lx(e);xk(n.size),n.forEach((function(e){return t.add(e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(ax(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(aU);NU.isOrderedSet=nU;var PU,LU=NU.prototype;function CU(e,t){var n=Object.create(LU);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function xU(){return PU||(PU=CU(qD()))}LU[hx]=!0,LU.zip=TU.zip,LU.zipWith=TU.zipWith,LU.zipAll=TU.zipAll,LU.__empty=xU,LU.__make=CU;var kU=function(e,t){var n;!function(e){if(px(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(gx(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(i){var a=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var s=Object.keys(e),l=o._indices={};o._name=t,o._keys=s,o._defaultValues=e;for(var c=0;c<s.length;c++){var u=s[c];l[u]=c,o[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+MU(this)+' with property "'+u+'" since that property name is part of the Record API.'):$U(o,u)}}return this.__ownerID=void 0,this._values=PD().withMutations((function(e){e.setSize(a._keys.length),ax(i).forEach((function(t,n){e.set(a._indices[n],t===a._defaultValues[n]?void 0:t)}))})),this},o=r.prototype=Object.create(DU);return o.constructor=r,t&&(r.displayName=t),r};kU.prototype.toString=function(){for(var e,t=MU(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)t+=(r?", ":"")+(e=n[r])+": "+Mk(this.get(e));return t+" }"},kU.prototype.equals=function(e){return this===e||px(e)&&GU(this).equals(GU(e))},kU.prototype.hashCode=function(){return GU(this).hashCode()},kU.prototype.has=function(e){return this._indices.hasOwnProperty(e)},kU.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},kU.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return UU(this,n)}return this},kU.prototype.remove=function(e){return this.set(e)},kU.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:UU(this,e)},kU.prototype.wasAltered=function(){return this._values.wasAltered()},kU.prototype.toSeq=function(){return GU(this)},kU.prototype.toJS=function(){return iU(this)},kU.prototype.entries=function(){return this.__iterator(2)},kU.prototype.__iterator=function(e,t){return GU(this).__iterator(e,t)},kU.prototype.__iterate=function(e,t){return GU(this).__iterate(e,t)},kU.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?UU(this,t,e):(this.__ownerID=e,this._values=t,this)},kU.isRecord=px,kU.getDescriptiveName=MU;var DU=kU.prototype;function UU(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function MU(e){return e.constructor.displayName||e.constructor.name||"Record"}function GU(e){return Mx(e._keys.map((function(t){return[t,e.get(t)]})))}function $U(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Ck(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}function VU(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function FU(e,t,n){for(let r=0;r<28;r+=7){const o=e>>>r,i=!(o>>>7==0&&0==t),a=255&(i?128|o:o);if(n.push(a),!i)return}const r=e>>>28&15|(7&t)<<4,o=!!(t>>3);if(n.push(255&(o?128|r:r)),o){for(let e=3;e<31;e+=7){const r=t>>>e,o=!(r>>>7==0),i=255&(o?128|r:r);if(n.push(i),!o)return}n.push(t>>>31&1)}}DU[dx]=!0,DU[GC]=DU.remove,DU.deleteIn=DU.removeIn=Wk,DU.getIn=fU,DU.hasIn=mU.hasIn,DU.merge=Jk,DU.mergeWith=zk,DU.mergeIn=eD,DU.mergeDeep=Qk,DU.mergeDeepWith=Zk,DU.mergeDeepIn=tD,DU.setIn=jk,DU.update=qk,DU.updateIn=Bk,DU.withMutations=nD,DU.asMutable=rD,DU.asImmutable=oD,DU[vx]=DU.entries,DU.toJSON=DU.toObject=mU.toObject,DU.inspect=DU.toSource=function(){return this.toString()};const jU=4294967296;function WU(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,o=0;function i(t,i){const a=Number(e.slice(t,i));o*=n,r=r*n+a,r>=jU&&(o+=r/jU|0,r%=jU)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?BU(r,o):qU(r,o)}function HU(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(jU*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let o=(16777215&e)+6777216*n+6710656*r,i=n+8147497*r,a=2*r;const s=1e7;return o>=s&&(i+=Math.floor(o/s),o%=s),i>=s&&(a+=Math.floor(i/s),i%=s),a.toString()+JU(i)+JU(o)}function qU(e,t){return{lo:0|e,hi:0|t}}function BU(e,t){return t=~t,e?e=1+~e:t+=1,qU(e,t)}const JU=e=>{const t=String(e);return"0000000".slice(t.length)+t};function zU(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function YU(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}const XU=KU();function KU(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`invalid int64: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<r)throw new Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),QU(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),ZU(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),QU(e),WU(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),ZU(e),WU(e)),dec:(e,t)=>function(e,t){let n=qU(e,t);const r=2147483648&n.hi;r&&(n=BU(n.lo,n.hi));const o=HU(n.lo,n.hi);return r?"-"+o:o}(e,t),uDec:(e,t)=>HU(e,t)}}function QU(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function ZU(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}const eM=Symbol.for("@bufbuild/protobuf/text-encoding");function tM(){if(null==globalThis[eM]){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[eM]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[eM]}var nM;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(nM||(nM={}));const rM=34028234663852886e22,oM=-34028234663852886e22;class iM{constructor(e=tM().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(lM(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return sM(e),zU(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){!function(e){if("string"==typeof e){const t=e;if(e=Number(e),isNaN(e)&&"NaN"!==t)throw new Error("invalid float32: "+t)}else if("number"!=typeof e)throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>rM||e<oM))throw new Error("invalid float32: "+e)}(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){lM(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){sM(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return sM(e),zU(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=XU.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=XU.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=XU.enc(e);return FU(t.lo,t.hi,this.buf),this}sint64(e){let t=XU.enc(e),n=t.hi>>31;return FU(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=XU.uEnc(e);return FU(t.lo,t.hi,this.buf),this}}class aM{constructor(e,t=tM().decodeUtf8){this.decodeUtf8=t,this.varint64=VU,this.uint32=YU,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case nM.Varint:for(;128&this.buf[this.pos++];);break;case nM.Bit64:this.pos+=4;case nM.Bit32:this.pos+=4;break;case nM.LengthDelimited:let n=this.uint32();this.pos+=n;break;case nM.StartGroup:for(;;){const[e,n]=this.tag();if(n===nM.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return XU.dec(...this.varint64())}uint64(){return XU.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,XU.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return XU.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return XU.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function sM(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int32: "+e)}function lM(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint32: "+e)}const cM={$type:"google.protobuf.Duration",encode:(e,t=new iM)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Duration",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=uM(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cM.$type,seconds:dM(e.seconds)?globalThis.Number(e.seconds):0,nanos:dM(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>cM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Duration",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function uM(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function dM(e){return null!=e}const pM={$type:"google.protobuf.Timestamp",encode:(e,t=new iM)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=gM(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pM.$type,seconds:hM(e.seconds)?globalThis.Number(e.seconds):0,nanos:hM(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>pM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function gM(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function hM(e){return null!=e}const fM={$type:"google.protobuf.Int32Value",encode:(e,t=new iM)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Int32Value",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:fM.$type,value:(t=e.value,null!=t?globalThis.Number(e.value):0)};var t},toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>fM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"google.protobuf.Int32Value",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const _M={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:_M.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>_M.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const mM={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&_M.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=_M.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:mM.$type,flowId:(t=e.flowId,null!=t?_M.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=_M.toJSON(e.flowId)),t},create:e=>mM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?_M.fromPartial(e.flowId):void 0,t}};const vM={$type:"deepl.pb.interactive_text_api.AnnotationId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:vM.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>vM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const TM={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",encode(e,t=new iM){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.targetHighlights)vM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:"",targetHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.targetHighlights.push(vM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:TM.$type,text:(t=e.text,null!=t?globalThis.String(e.text):""),targetHighlights:globalThis.Array.isArray(null==e?void 0:e.targetHighlights)?e.targetHighlights.map((e=>vM.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return""!==e.text&&(n.text=e.text),(null===(t=e.targetHighlights)||void 0===t?void 0:t.length)&&(n.targetHighlights=e.targetHighlights.map((e=>vM.toJSON(e)))),n},create:e=>TM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:"",targetHighlights:[]};return r.text=null!==(t=e.text)&&void 0!==t?t:"",r.targetHighlights=(null===(n=e.targetHighlights)||void 0===n?void 0:n.map((e=>vM.fromPartial(e))))||[],r}};const yM={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&_M.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)TM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=_M.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(TM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:yM.$type,flowId:(t=e.flowId,null!=t?_M.fromJSON(e.flowId):void 0),alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>TM.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=_M.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>TM.toJSON(e)))),n},create:e=>yM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?_M.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>TM.fromPartial(e))))||[],n}};const SM={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:SM.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>SM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const EM={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&SM.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:EM.$type,flowId:(t=e.flowId,null!=t?SM.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=SM.toJSON(e.flowId)),t},create:e=>EM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?SM.fromPartial(e.flowId):void 0,t}};const IM={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&_M.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=_M.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:IM.$type,flowId:(t=e.flowId,null!=t?_M.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=_M.toJSON(e.flowId)),t},create:e=>IM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?_M.fromPartial(e.flowId):void 0,t}};const AM={$type:"deepl.pb.interactive_text_api.TextRange",encode:(e,t=new iM)=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.start=n.int32();continue;case 2:if(16!==e)break;o.end=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AM.$type,start:bM(e.start)?globalThis.Number(e.start):0,end:bM(e.end)?globalThis.Number(e.end):0}),toJSON(e){const t={};return 0!==e.start&&(t.start=Math.round(e.start)),0!==e.end&&(t.end=Math.round(e.end)),t},create:e=>AM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};return r.start=null!==(t=e.start)&&void 0!==t?t:0,r.end=null!==(n=e.end)&&void 0!==n?n:0,r}};function bM(e){return null!=e}const wM={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",encode:(e,t=new iM)=>(void 0!==e.sourceRange&&AM.encode(e.sourceRange,t.uint32(10).fork()).join(),void 0!==e.alternativeRange&&AM.encode(e.alternativeRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceRange=AM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternativeRange=AM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wM.$type,sourceRange:OM(e.sourceRange)?AM.fromJSON(e.sourceRange):void 0,alternativeRange:OM(e.alternativeRange)?AM.fromJSON(e.alternativeRange):void 0}),toJSON(e){const t={};return void 0!==e.sourceRange&&(t.sourceRange=AM.toJSON(e.sourceRange)),void 0!==e.alternativeRange&&(t.alternativeRange=AM.toJSON(e.alternativeRange)),t},create:e=>wM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};return t.sourceRange=void 0!==e.sourceRange&&null!==e.sourceRange?AM.fromPartial(e.sourceRange):void 0,t.alternativeRange=void 0!==e.alternativeRange&&null!==e.alternativeRange?AM.fromPartial(e.alternativeRange):void 0,t}};function OM(e){return null!=e}const RM={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",encode(e,t=new iM){for(const n of e.prompts)t.uint32(10).string(n);return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",prompts:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.prompts.push(n.string());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RM.$type,prompts:globalThis.Array.isArray(null==e?void 0:e.prompts)?e.prompts.map((e=>globalThis.String(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.prompts)||void 0===t?void 0:t.length)&&(n.prompts=e.prompts),n},create:e=>RM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",prompts:[]};return n.prompts=(null===(t=e.prompts)||void 0===t?void 0:t.map((e=>e)))||[],n}};const NM={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",encode:(e,t=new iM)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:NM.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>NM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};var PM,LM;function CM(e){switch(e){case 0:case"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED":return PM.UNSPECIFIED;case 1:case"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE":return PM.REQUESTED_LANGUAGE;case 2:case"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION":return PM.LANGUAGE_DETECTION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function xM(e){switch(e){case PM.UNSPECIFIED:return"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED";case PM.REQUESTED_LANGUAGE:return"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE";case PM.LANGUAGE_DETECTION:return"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function kM(e){switch(e){case 0:case"CUSTOM_RULE_HIGHLIGHT_KIND_UNSPECIFIED":return LM.UNSPECIFIED;case 1:case"CUSTOM_RULE_HIGHLIGHT_KIND_COMPLIANCE":return LM.COMPLIANCE;case 2:case"CUSTOM_RULE_HIGHLIGHT_KIND_VIOLATION":return LM.VIOLATION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CustomRuleHighlightKind")}}function DM(e){switch(e){case LM.UNSPECIFIED:return"CUSTOM_RULE_HIGHLIGHT_KIND_UNSPECIFIED";case LM.COMPLIANCE:return"CUSTOM_RULE_HIGHLIGHT_KIND_COMPLIANCE";case LM.VIOLATION:return"CUSTOM_RULE_HIGHLIGHT_KIND_VIOLATION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CustomRuleHighlightKind")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REQUESTED_LANGUAGE=1]="REQUESTED_LANGUAGE",e[e.LANGUAGE_DETECTION=2]="LANGUAGE_DETECTION"}(PM||(PM={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.COMPLIANCE=1]="COMPLIANCE",e[e.VIOLATION=2]="VIOLATION"}(LM||(LM={}));const UM={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",encode(e,t=new iM){""!==e.id&&t.uint32(10).string(e.id),!1!==e.isFreeTextRule&&t.uint32(16).bool(e.isFreeTextRule),0!==e.kind&&t.uint32(24).int32(e.kind);for(const n of e.ranges)AM.encode(n,t.uint32(34).fork()).join();for(const n of e.originalRanges)AM.encode(n,t.uint32(42).fork()).join();return""!==e.description&&t.uint32(50).string(e.description),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",id:"",isFreeTextRule:!1,kind:0,ranges:[],originalRanges:[],description:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue;case 2:if(16!==e)break;o.isFreeTextRule=n.bool();continue;case 3:if(24!==e)break;o.kind=n.int32();continue;case 4:if(34!==e)break;o.ranges.push(AM.decode(n,n.uint32()));continue;case 5:if(42!==e)break;o.originalRanges.push(AM.decode(n,n.uint32()));continue;case 6:if(50!==e)break;o.description=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UM.$type,id:GM(e.id)?globalThis.String(e.id):"",isFreeTextRule:!!GM(e.isFreeTextRule)&&globalThis.Boolean(e.isFreeTextRule),kind:GM(e.kind)?kM(e.kind):0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>AM.fromJSON(e))):[],originalRanges:globalThis.Array.isArray(null==e?void 0:e.originalRanges)?e.originalRanges.map((e=>AM.fromJSON(e))):[],description:GM(e.description)?globalThis.String(e.description):""}),toJSON(e){var t,n;const r={};return""!==e.id&&(r.id=e.id),!1!==e.isFreeTextRule&&(r.isFreeTextRule=e.isFreeTextRule),0!==e.kind&&(r.kind=DM(e.kind)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(r.ranges=e.ranges.map((e=>AM.toJSON(e)))),(null===(n=e.originalRanges)||void 0===n?void 0:n.length)&&(r.originalRanges=e.originalRanges.map((e=>AM.toJSON(e)))),""!==e.description&&(r.description=e.description),r},create:e=>UM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i,a;const s={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",id:"",isFreeTextRule:!1,kind:0,ranges:[],originalRanges:[],description:""};return s.id=null!==(t=e.id)&&void 0!==t?t:"",s.isFreeTextRule=null!==(n=e.isFreeTextRule)&&void 0!==n&&n,s.kind=null!==(r=e.kind)&&void 0!==r?r:0,s.ranges=(null===(o=e.ranges)||void 0===o?void 0:o.map((e=>AM.fromPartial(e))))||[],s.originalRanges=(null===(i=e.originalRanges)||void 0===i?void 0:i.map((e=>AM.fromPartial(e))))||[],s.description=null!==(a=e.description)&&void 0!==a?a:"",s}};const MM={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",encode:(e,t=new iM)=>(""!==e.id&&t.uint32(10).string(e.id),!1!==e.isFreeTextRule&&t.uint32(16).bool(e.isFreeTextRule),0!==e.kind&&t.uint32(24).int32(e.kind),""!==e.description&&t.uint32(50).string(e.description),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",id:"",isFreeTextRule:!1,kind:0,description:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue;case 2:if(16!==e)break;o.isFreeTextRule=n.bool();continue;case 3:if(24!==e)break;o.kind=n.int32();continue;case 6:if(50!==e)break;o.description=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MM.$type,id:GM(e.id)?globalThis.String(e.id):"",isFreeTextRule:!!GM(e.isFreeTextRule)&&globalThis.Boolean(e.isFreeTextRule),kind:GM(e.kind)?kM(e.kind):0,description:GM(e.description)?globalThis.String(e.description):""}),toJSON(e){const t={};return""!==e.id&&(t.id=e.id),!1!==e.isFreeTextRule&&(t.isFreeTextRule=e.isFreeTextRule),0!==e.kind&&(t.kind=DM(e.kind)),""!==e.description&&(t.description=e.description),t},create:e=>MM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",id:"",isFreeTextRule:!1,kind:0,description:""};return i.id=null!==(t=e.id)&&void 0!==t?t:"",i.isFreeTextRule=null!==(n=e.isFreeTextRule)&&void 0!==n&&n,i.kind=null!==(r=e.kind)&&void 0!==r?r:0,i.description=null!==(o=e.description)&&void 0!==o?o:"",i}};function GM(e){return null!=e}const $M={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",encode:(e,t=new iM)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:$M.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>$M.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};const VM={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:VM.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>VM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const FM={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPrompt",encode:(e,t=new iM)=>(""!==e.clientPromptId&&t.uint32(10).string(e.clientPromptId),""!==e.prompt&&t.uint32(18).string(e.prompt),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPrompt",clientPromptId:"",prompt:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.clientPromptId=n.string();continue;case 2:if(18!==e)break;o.prompt=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FM.$type,clientPromptId:jM(e.clientPromptId)?globalThis.String(e.clientPromptId):"",prompt:jM(e.prompt)?globalThis.String(e.prompt):""}),toJSON(e){const t={};return""!==e.clientPromptId&&(t.clientPromptId=e.clientPromptId),""!==e.prompt&&(t.prompt=e.prompt),t},create:e=>FM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPrompt",clientPromptId:"",prompt:""};return r.clientPromptId=null!==(t=e.clientPromptId)&&void 0!==t?t:"",r.prompt=null!==(n=e.prompt)&&void 0!==n?n:"",r}};function jM(e){return null!=e}const WM={$type:"deepl.pb.interactive_text_api.write.Customizations",encode(e,t=new iM){for(const n of e.freeTextPrompts)FM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.Customizations",freeTextPrompts:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.freeTextPrompts.push(FM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WM.$type,freeTextPrompts:globalThis.Array.isArray(null==e?void 0:e.freeTextPrompts)?e.freeTextPrompts.map((e=>FM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.freeTextPrompts)||void 0===t?void 0:t.length)&&(n.freeTextPrompts=e.freeTextPrompts.map((e=>FM.toJSON(e)))),n},create:e=>WM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.Customizations",freeTextPrompts:[]};return n.freeTextPrompts=(null===(t=e.freeTextPrompts)||void 0===t?void 0:t.map((e=>FM.fromPartial(e))))||[],n}};var HM,qM;function BM(e){switch(e){case 0:case"INLINE_SUGGESTION_USER_CHOICE_UNSPECIFIED":return qM.UNSPECIFIED;case 1:case"INLINE_SUGGESTION_USER_CHOICE_PENDING":return qM.PENDING;case 2:case"INLINE_SUGGESTION_USER_CHOICE_CORRECT":return qM.CORRECT;case 3:case"INLINE_SUGGESTION_USER_CHOICE_RETAIN":return qM.RETAIN;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionUserChoice")}}function JM(e){switch(e){case qM.UNSPECIFIED:return"INLINE_SUGGESTION_USER_CHOICE_UNSPECIFIED";case qM.PENDING:return"INLINE_SUGGESTION_USER_CHOICE_PENDING";case qM.CORRECT:return"INLINE_SUGGESTION_USER_CHOICE_CORRECT";case qM.RETAIN:return"INLINE_SUGGESTION_USER_CHOICE_RETAIN";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionUserChoice")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SPELLING=1]="SPELLING",e[e.GRAMMAR=2]="GRAMMAR",e[e.PUNCTUATION=3]="PUNCTUATION",e[e.READABILITY=4]="READABILITY",e[e.FORMATTING=5]="FORMATTING",e[e.OTHER=6]="OTHER"}(HM||(HM={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PENDING=1]="PENDING",e[e.CORRECT=2]="CORRECT",e[e.RETAIN=3]="RETAIN"}(qM||(qM={}));const zM={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.diffUnitId&&dG.encode(e.diffUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.diffUnitId=dG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zM.$type,diffUnitId:FG(e.diffUnitId)?dG.fromJSON(e.diffUnitId):void 0}),toJSON(e){const t={};return void 0!==e.diffUnitId&&(t.diffUnitId=dG.toJSON(e.diffUnitId)),t},create:e=>zM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};return t.diffUnitId=void 0!==e.diffUnitId&&null!==e.diffUnitId?dG.fromPartial(e.diffUnitId):void 0,t}};const YM={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&SM.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)yG.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(yG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YM.$type,flowId:FG(e.flowId)?SM.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>yG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=SM.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>yG.toJSON(e)))),n},create:e=>YM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?SM.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>yG.fromPartial(e))))||[],n}};const XM={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new iM){for(const n of e.alternatives)yG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(yG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XM.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>yG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>yG.toJSON(e)))),n},create:e=>XM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>yG.fromPartial(e))))||[],n}};const KM={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",encode(e,t=new iM){for(const n of e.languages)TG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(TG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KM.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>TG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>TG.toJSON(e)))),n},create:e=>KM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>TG.fromPartial(e))))||[],n}};const QM={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",encode(e,t=new iM){for(const n of e.languages)TG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(TG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QM.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>TG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>TG.toJSON(e)))),n},create:e=>QM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>TG.fromPartial(e))))||[],n}};const ZM={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.language&&TG.encode(e.language,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=TG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZM.$type,language:FG(e.language)?TG.fromJSON(e.language):void 0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=TG.toJSON(e.language)),t},create:e=>ZM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};return t.language=void 0!==e.language&&null!==e.language?TG.fromPartial(e.language):void 0,t}};const eG={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.language&&TG.encode(e.language,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),!1!==e.isLanguageDetectionConfident&&t.uint32(24).bool(e.isLanguageDetectionConfident),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0,isLanguageDetectionConfident:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=TG.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue;case 3:if(24!==e)break;o.isLanguageDetectionConfident=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eG.$type,language:FG(e.language)?TG.fromJSON(e.language):void 0,origin:FG(e.origin)?CM(e.origin):0,isLanguageDetectionConfident:!!FG(e.isLanguageDetectionConfident)&&globalThis.Boolean(e.isLanguageDetectionConfident)}),toJSON(e){const t={};return void 0!==e.language&&(t.language=TG.toJSON(e.language)),0!==e.origin&&(t.origin=xM(e.origin)),!1!==e.isLanguageDetectionConfident&&(t.isLanguageDetectionConfident=e.isLanguageDetectionConfident),t},create:e=>eG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0,isLanguageDetectionConfident:!1};return r.language=void 0!==e.language&&null!==e.language?TG.fromPartial(e.language):void 0,r.origin=null!==(t=e.origin)&&void 0!==t?t:0,r.isLanguageDetectionConfident=null!==(n=e.isLanguageDetectionConfident)&&void 0!==n&&n,r}};const tG={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",encode:(e,t=new iM)=>(void 0!==e.glossaryId&&NM.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=NM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tG.$type,glossaryId:FG(e.glossaryId)?NM.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=NM.toJSON(e.glossaryId)),t},create:e=>tG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?NM.fromPartial(e.glossaryId):void 0,t}};const nG={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",encode:(e,t=new iM)=>(void 0!==e.styleGuideId&&$M.encode(e.styleGuideId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",styleGuideId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleGuideId=$M.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nG.$type,styleGuideId:FG(e.styleGuideId)?$M.fromJSON(e.styleGuideId):void 0}),toJSON(e){const t={};return void 0!==e.styleGuideId&&(t.styleGuideId=$M.toJSON(e.styleGuideId)),t},create:e=>nG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",styleGuideId:void 0};return t.styleGuideId=void 0!==e.styleGuideId&&null!==e.styleGuideId?$M.fromPartial(e.styleGuideId):void 0,t}};const rG={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",encode:(e,t=new iM)=>(!1!==e.correctionsOnly&&t.uint32(8).bool(e.correctionsOnly),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",correctionsOnly:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.correctionsOnly=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rG.$type,correctionsOnly:!!FG(e.correctionsOnly)&&globalThis.Boolean(e.correctionsOnly)}),toJSON(e){const t={};return!1!==e.correctionsOnly&&(t.correctionsOnly=e.correctionsOnly),t},create:e=>rG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",correctionsOnly:!1};return n.correctionsOnly=null!==(t=e.correctionsOnly)&&void 0!==t&&t,n}};const oG={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",encode:(e,t=new iM)=>(void 0!==e.freeTextPromptList&&RM.encode(e.freeTextPromptList,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.freeTextPromptList=RM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oG.$type,freeTextPromptList:FG(e.freeTextPromptList)?RM.fromJSON(e.freeTextPromptList):void 0}),toJSON(e){const t={};return void 0!==e.freeTextPromptList&&(t.freeTextPromptList=RM.toJSON(e.freeTextPromptList)),t},create:e=>oG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};return t.freeTextPromptList=void 0!==e.freeTextPromptList&&null!==e.freeTextPromptList?RM.fromPartial(e.freeTextPromptList):void 0,t}};const iG={$type:"deepl.pb.interactive_text_api.write.CustomizationsPropertyValue",encode:(e,t=new iM)=>(void 0!==e.customizations&&WM.encode(e.customizations,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CustomizationsPropertyValue",customizations:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.customizations=WM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iG.$type,customizations:FG(e.customizations)?WM.fromJSON(e.customizations):void 0}),toJSON(e){const t={};return void 0!==e.customizations&&(t.customizations=WM.toJSON(e.customizations)),t},create:e=>iG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.CustomizationsPropertyValue",customizations:void 0};return t.customizations=void 0!==e.customizations&&null!==e.customizations?WM.fromPartial(e.customizations):void 0,t}};const aG={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",encode:(e,t=new iM)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aG.$type,max:FG(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>aG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const sG={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",encode(e,t=new iM){for(const n of e.styleVariants)EG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(EG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sG.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>EG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>EG.toJSON(e)))),n},create:e=>sG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>EG.fromPartial(e))))||[],n}};const lG={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",encode:(e,t=new iM)=>(void 0!==e.styleVariant&&EG.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=EG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lG.$type,styleVariant:FG(e.styleVariant)?EG.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=EG.toJSON(e.styleVariant)),t},create:e=>lG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?EG.fromPartial(e.styleVariant):void 0,t}};const cG={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cG.$type}),toJSON:e=>({}),create:e=>cG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"})};const uG={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uG.$type}),toJSON:e=>({}),create:e=>uG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue"})};const dG={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>dG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const pG={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",encode:(e,t=new iM)=>(""!==e.term&&t.uint32(10).string(e.term),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.term=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pG.$type,term:FG(e.term)?globalThis.String(e.term):""}),toJSON(e){const t={};return""!==e.term&&(t.term=e.term),t},create:e=>pG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};return n.term=null!==(t=e.term)&&void 0!==t?t:"",n}};const gG={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",encode(e,t=new iM){for(const n of e.glossaryEntries)pG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(pG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gG.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>pG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>pG.toJSON(e)))),n},create:e=>gG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>pG.fromPartial(e))))||[],n}};const hG={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hG.$type}),toJSON:e=>({}),create:e=>hG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"})};const fG={$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fG.$type}),toJSON:e=>({}),create:e=>fG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue"})};const _G={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_G.$type}),toJSON:e=>({}),create:e=>_G.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue"})};const mG={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mG.$type}),toJSON:e=>({}),create:e=>mG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue"})};const vG={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",encode(e,t=new iM){void 0!==e.entry&&pG.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)AM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=pG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(AM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vG.$type,entry:FG(e.entry)?pG.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>AM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=pG.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>AM.toJSON(e)))),n},create:e=>vG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?pG.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>AM.fromPartial(e))))||[],n}};const TG={$type:"deepl.pb.interactive_text_api.write.Language",encode:(e,t=new iM)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.Language",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TG.$type,code:FG(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>TG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.Language",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const yG={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",encode(e,t=new iM){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)vG.encode(n,t.uint32(18).fork()).join();for(const n of e.diffs)wM.encode(n,t.uint32(26).fork()).join();void 0!==e.rephraseVariant&&SG.encode(e.rephraseVariant,t.uint32(34).fork()).join();for(const n of e.customRuleHighlights)UM.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[],rephraseVariant:void 0,customRuleHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(vG.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.diffs.push(wM.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.rephraseVariant=SG.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.customRuleHighlights.push(UM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yG.$type,text:FG(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>vG.fromJSON(e))):[],diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>wM.fromJSON(e))):[],rephraseVariant:FG(e.rephraseVariant)?SG.fromJSON(e.rephraseVariant):void 0,customRuleHighlights:globalThis.Array.isArray(null==e?void 0:e.customRuleHighlights)?e.customRuleHighlights.map((e=>UM.fromJSON(e))):[]}),toJSON(e){var t,n,r;const o={};return""!==e.text&&(o.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(o.glossaryHighlights=e.glossaryHighlights.map((e=>vG.toJSON(e)))),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(o.diffs=e.diffs.map((e=>wM.toJSON(e)))),void 0!==e.rephraseVariant&&(o.rephraseVariant=SG.toJSON(e.rephraseVariant)),(null===(r=e.customRuleHighlights)||void 0===r?void 0:r.length)&&(o.customRuleHighlights=e.customRuleHighlights.map((e=>UM.toJSON(e)))),o},create:e=>yG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[],rephraseVariant:void 0,customRuleHighlights:[]};return i.text=null!==(t=e.text)&&void 0!==t?t:"",i.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>vG.fromPartial(e))))||[],i.diffs=(null===(r=e.diffs)||void 0===r?void 0:r.map((e=>wM.fromPartial(e))))||[],i.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?SG.fromPartial(e.rephraseVariant):void 0,i.customRuleHighlights=(null===(o=e.customRuleHighlights)||void 0===o?void 0:o.map((e=>UM.fromPartial(e))))||[],i}};const SG={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",encode:(e,t=new iM)=>(""!==e.name&&t.uint32(10).string(e.name),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",name:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.name=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SG.$type,name:FG(e.name)?globalThis.String(e.name):""}),toJSON(e){const t={};return""!==e.name&&(t.name=e.name),t},create:e=>SG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",name:""};return n.name=null!==(t=e.name)&&void 0!==t?t:"",n}};const EG={$type:"deepl.pb.interactive_text_api.write.StyleVariant",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>EG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const IG={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>IG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const AG={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&IG.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.styleVariant&&EG.encode(e.styleVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=IG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.styleVariant=EG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AG.$type,flowId:FG(e.flowId)?IG.fromJSON(e.flowId):void 0,styleVariant:FG(e.styleVariant)?EG.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=IG.toJSON(e.flowId)),void 0!==e.styleVariant&&(t.styleVariant=EG.toJSON(e.styleVariant)),t},create:e=>AG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?IG.fromPartial(e.flowId):void 0,t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?EG.fromPartial(e.styleVariant):void 0,t}};const bG={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",encode:(e,t=new iM)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bG.$type,text:FG(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>bG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const wG={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&IG.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)bG.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=IG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(bG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wG.$type,flowId:FG(e.flowId)?IG.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>bG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=IG.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>bG.toJSON(e)))),n},create:e=>wG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?IG.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>bG.fromPartial(e))))||[],n}};const OG={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&IG.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=IG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OG.$type,flowId:FG(e.flowId)?IG.fromJSON(e.flowId):void 0,selection:FG(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=IG.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>OG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?IG.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const RG={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>RG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const NG={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",encode(e,t=new iM){for(const n of e.templateIds)RG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",templateIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.templateIds.push(RG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NG.$type,templateIds:globalThis.Array.isArray(null==e?void 0:e.templateIds)?e.templateIds.map((e=>RG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.templateIds)||void 0===t?void 0:t.length)&&(n.templateIds=e.templateIds.map((e=>RG.toJSON(e)))),n},create:e=>NG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",templateIds:[]};return n.templateIds=(null===(t=e.templateIds)||void 0===t?void 0:t.map((e=>RG.fromPartial(e))))||[],n}};const PG={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>PG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const LG={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&PG.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.input&&t.uint32(18).string(e.input);for(const n of e.templateIds)RG.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",flowId:void 0,input:"",templateIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=PG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.input=n.string();continue;case 3:if(26!==e)break;o.templateIds.push(RG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LG.$type,flowId:FG(e.flowId)?PG.fromJSON(e.flowId):void 0,input:FG(e.input)?globalThis.String(e.input):"",templateIds:globalThis.Array.isArray(null==e?void 0:e.templateIds)?e.templateIds.map((e=>RG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=PG.toJSON(e.flowId)),""!==e.input&&(n.input=e.input),(null===(t=e.templateIds)||void 0===t?void 0:t.length)&&(n.templateIds=e.templateIds.map((e=>RG.toJSON(e)))),n},create:e=>LG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",flowId:void 0,input:"",templateIds:[]};return r.flowId=void 0!==e.flowId&&null!==e.flowId?PG.fromPartial(e.flowId):void 0,r.input=null!==(t=e.input)&&void 0!==t?t:"",r.templateIds=(null===(n=e.templateIds)||void 0===n?void 0:n.map((e=>RG.fromPartial(e))))||[],r}};const CG={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",encode:(e,t=new iM)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CG.$type,text:FG(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>CG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const xG={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&PG.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.adaptedText&&CG.encode(e.adaptedText,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",flowId:void 0,adaptedText:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=PG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.adaptedText=CG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xG.$type,flowId:FG(e.flowId)?PG.fromJSON(e.flowId):void 0,adaptedText:FG(e.adaptedText)?CG.fromJSON(e.adaptedText):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=PG.toJSON(e.flowId)),void 0!==e.adaptedText&&(t.adaptedText=CG.toJSON(e.adaptedText)),t},create:e=>xG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",flowId:void 0,adaptedText:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?PG.fromPartial(e.flowId):void 0,t.adaptedText=void 0!==e.adaptedText&&null!==e.adaptedText?CG.fromPartial(e.adaptedText):void 0,t}};const kG={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kG.$type,value:FG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>kG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const DG={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",encode(e,t=new iM){void 0!==e.id&&kG.encode(e.id,t.uint32(10).fork()).join(),t.uint32(18).fork();for(const n of e.categories)t.int32(n);t.join(),""!==e.description&&t.uint32(26).string(e.description),0!==e.userChoice&&t.uint32(32).int32(e.userChoice);for(const n of e.originalSpans)AM.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",id:void 0,categories:[],description:"",userChoice:0,originalSpans:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=kG.decode(n,n.uint32());continue;case 2:if(16===e){o.categories.push(n.int32());continue}if(18===e){const e=n.uint32()+n.pos;for(;n.pos<e;)o.categories.push(n.int32());continue}break;case 3:if(26!==e)break;o.description=n.string();continue;case 4:if(32!==e)break;o.userChoice=n.int32();continue;case 5:if(42!==e)break;o.originalSpans.push(AM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DG.$type,id:FG(e.id)?kG.fromJSON(e.id):void 0,categories:globalThis.Array.isArray(null==e?void 0:e.categories)?e.categories.map((e=>function(e){switch(e){case 0:case"INLINE_SUGGESTION_CATEGORY_UNSPECIFIED":return HM.UNSPECIFIED;case 1:case"INLINE_SUGGESTION_CATEGORY_SPELLING":return HM.SPELLING;case 2:case"INLINE_SUGGESTION_CATEGORY_GRAMMAR":return HM.GRAMMAR;case 3:case"INLINE_SUGGESTION_CATEGORY_PUNCTUATION":return HM.PUNCTUATION;case 4:case"INLINE_SUGGESTION_CATEGORY_READABILITY":return HM.READABILITY;case 5:case"INLINE_SUGGESTION_CATEGORY_FORMATTING":return HM.FORMATTING;case 6:case"INLINE_SUGGESTION_CATEGORY_OTHER":return HM.OTHER;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionCategory")}}(e))):[],description:FG(e.description)?globalThis.String(e.description):"",userChoice:FG(e.userChoice)?BM(e.userChoice):0,originalSpans:globalThis.Array.isArray(null==e?void 0:e.originalSpans)?e.originalSpans.map((e=>AM.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return void 0!==e.id&&(r.id=kG.toJSON(e.id)),(null===(t=e.categories)||void 0===t?void 0:t.length)&&(r.categories=e.categories.map((e=>function(e){switch(e){case HM.UNSPECIFIED:return"INLINE_SUGGESTION_CATEGORY_UNSPECIFIED";case HM.SPELLING:return"INLINE_SUGGESTION_CATEGORY_SPELLING";case HM.GRAMMAR:return"INLINE_SUGGESTION_CATEGORY_GRAMMAR";case HM.PUNCTUATION:return"INLINE_SUGGESTION_CATEGORY_PUNCTUATION";case HM.READABILITY:return"INLINE_SUGGESTION_CATEGORY_READABILITY";case HM.FORMATTING:return"INLINE_SUGGESTION_CATEGORY_FORMATTING";case HM.OTHER:return"INLINE_SUGGESTION_CATEGORY_OTHER";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionCategory")}}(e)))),""!==e.description&&(r.description=e.description),0!==e.userChoice&&(r.userChoice=JM(e.userChoice)),(null===(n=e.originalSpans)||void 0===n?void 0:n.length)&&(r.originalSpans=e.originalSpans.map((e=>AM.toJSON(e)))),r},create:e=>DG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",id:void 0,categories:[],description:"",userChoice:0,originalSpans:[]};return i.id=void 0!==e.id&&null!==e.id?kG.fromPartial(e.id):void 0,i.categories=(null===(t=e.categories)||void 0===t?void 0:t.map((e=>e)))||[],i.description=null!==(n=e.description)&&void 0!==n?n:"",i.userChoice=null!==(r=e.userChoice)&&void 0!==r?r:0,i.originalSpans=(null===(o=e.originalSpans)||void 0===o?void 0:o.map((e=>AM.fromPartial(e))))||[],i}};const UG={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.id&&kG.encode(e.id,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",id:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=kG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UG.$type,id:FG(e.id)?kG.fromJSON(e.id):void 0}),toJSON(e){const t={};return void 0!==e.id&&(t.id=kG.toJSON(e.id)),t},create:e=>UG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",id:void 0};return t.id=void 0!==e.id&&null!==e.id?kG.fromPartial(e.id):void 0,t}};const MG={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.inlineSuggestionId&&kG.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),0!==e.userChoice&&t.uint32(16).int32(e.userChoice),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",inlineSuggestionId:void 0,userChoice:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=kG.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.userChoice=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MG.$type,inlineSuggestionId:FG(e.inlineSuggestionId)?kG.fromJSON(e.inlineSuggestionId):void 0,userChoice:FG(e.userChoice)?BM(e.userChoice):0}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=kG.toJSON(e.inlineSuggestionId)),0!==e.userChoice&&(t.userChoice=JM(e.userChoice)),t},create:e=>MG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",inlineSuggestionId:void 0,userChoice:0};return n.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?kG.fromPartial(e.inlineSuggestionId):void 0,n.userChoice=null!==(t=e.userChoice)&&void 0!==t?t:0,n}};const GG={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",encode(e,t=new iM){void 0!==e.textUnitId&&VM.encode(e.textUnitId,t.uint32(10).fork()).join();for(const n of e.inlineSuggestionIds)kG.encode(n,t.uint32(18).fork()).join();return""!==e.originalText&&t.uint32(26).string(e.originalText),""!==e.improvedText&&t.uint32(34).string(e.improvedText),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",textUnitId:void 0,inlineSuggestionIds:[],originalText:"",improvedText:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=VM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.inlineSuggestionIds.push(kG.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.originalText=n.string();continue;case 4:if(34!==e)break;o.improvedText=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GG.$type,textUnitId:FG(e.textUnitId)?VM.fromJSON(e.textUnitId):void 0,inlineSuggestionIds:globalThis.Array.isArray(null==e?void 0:e.inlineSuggestionIds)?e.inlineSuggestionIds.map((e=>kG.fromJSON(e))):[],originalText:FG(e.originalText)?globalThis.String(e.originalText):"",improvedText:FG(e.improvedText)?globalThis.String(e.improvedText):""}),toJSON(e){var t;const n={};return void 0!==e.textUnitId&&(n.textUnitId=VM.toJSON(e.textUnitId)),(null===(t=e.inlineSuggestionIds)||void 0===t?void 0:t.length)&&(n.inlineSuggestionIds=e.inlineSuggestionIds.map((e=>kG.toJSON(e)))),""!==e.originalText&&(n.originalText=e.originalText),""!==e.improvedText&&(n.improvedText=e.improvedText),n},create:e=>GG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",textUnitId:void 0,inlineSuggestionIds:[],originalText:"",improvedText:""};return o.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?VM.fromPartial(e.textUnitId):void 0,o.inlineSuggestionIds=(null===(t=e.inlineSuggestionIds)||void 0===t?void 0:t.map((e=>kG.fromPartial(e))))||[],o.originalText=null!==(n=e.originalText)&&void 0!==n?n:"",o.improvedText=null!==(r=e.improvedText)&&void 0!==r?r:"",o}};const $G={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.inlineSuggestionId&&kG.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=kG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$G.$type,inlineSuggestionId:FG(e.inlineSuggestionId)?kG.fromJSON(e.inlineSuggestionId):void 0}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=kG.toJSON(e.inlineSuggestionId)),t},create:e=>$G.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0};return t.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?kG.fromPartial(e.inlineSuggestionId):void 0,t}};const VG={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.inlineSuggestionId&&kG.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),""!==e.improvedText&&t.uint32(18).string(e.improvedText),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0,improvedText:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=kG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.improvedText=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VG.$type,inlineSuggestionId:FG(e.inlineSuggestionId)?kG.fromJSON(e.inlineSuggestionId):void 0,improvedText:FG(e.improvedText)?globalThis.String(e.improvedText):""}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=kG.toJSON(e.inlineSuggestionId)),""!==e.improvedText&&(t.improvedText=e.improvedText),t},create:e=>VG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0,improvedText:""};return n.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?kG.fromPartial(e.inlineSuggestionId):void 0,n.improvedText=null!==(t=e.improvedText)&&void 0!==t?t:"",n}};function FG(e){return null!=e}const jG={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",encode:(e,t=new iM)=>(""!==e.selection&&t.uint32(10).string(e.selection),void 0!==e.rephraseVariant&&SG.encode(e.rephraseVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:"",rephraseVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.selection=n.string();continue;case 2:if(18!==e)break;o.rephraseVariant=SG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jG.$type,selection:WG(e.selection)?globalThis.String(e.selection):"",rephraseVariant:WG(e.rephraseVariant)?SG.fromJSON(e.rephraseVariant):void 0}),toJSON(e){const t={};return""!==e.selection&&(t.selection=e.selection),void 0!==e.rephraseVariant&&(t.rephraseVariant=SG.toJSON(e.rephraseVariant)),t},create:e=>jG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:"",rephraseVariant:void 0};return n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?SG.fromPartial(e.rephraseVariant):void 0,n}};function WG(e){return null!=e}const HG={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&SM.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),void 0!==e.rephraseVariant&&SG.encode(e.rephraseVariant,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:"",rephraseVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue;case 3:if(26!==e)break;o.rephraseVariant=SG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HG.$type,flowId:qG(e.flowId)?SM.fromJSON(e.flowId):void 0,selection:qG(e.selection)?globalThis.String(e.selection):"",rephraseVariant:qG(e.rephraseVariant)?SG.fromJSON(e.rephraseVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=SM.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),void 0!==e.rephraseVariant&&(t.rephraseVariant=SG.toJSON(e.rephraseVariant)),t},create:e=>HG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:"",rephraseVariant:void 0};return n.flowId=void 0!==e.flowId&&null!==e.flowId?SM.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?SG.fromPartial(e.rephraseVariant):void 0,n}};function qG(e){return null!=e}const BG={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&_M.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=_M.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BG.$type,flowId:JG(e.flowId)?_M.fromJSON(e.flowId):void 0,selection:JG(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=_M.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>BG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?_M.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function JG(e){return null!=e}const zG={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:zG.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>zG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const YG={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",encode(e,t=new iM){void 0!==e.textFormattingId&&zG.encode(e.textFormattingId,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name);for(const n of e.children)zG.encode(n,t.uint32(26).fork()).join();return Object.entries(e.attributes).forEach((([e,n])=>{XG.encode({$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:e,value:n},t.uint32(34).fork()).join()})),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[],attributes:{}};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textFormattingId=zG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue;case 3:if(26!==e)break;o.children.push(zG.decode(n,n.uint32()));continue;case 4:if(34!==e)break;const t=XG.decode(n,n.uint32());void 0!==t.value&&(o.attributes[t.key]=t.value);continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:YG.$type,textFormattingId:KG(e.textFormattingId)?zG.fromJSON(e.textFormattingId):void 0,name:KG(e.name)?globalThis.String(e.name):"",children:globalThis.Array.isArray(null==e?void 0:e.children)?e.children.map((e=>zG.fromJSON(e))):[],attributes:(t=e.attributes,"object"==typeof t&&null!==t?Object.entries(e.attributes).reduce(((e,[t,n])=>(e[t]=String(n),e)),{}):{})};var t},toJSON(e){var t;const n={};if(void 0!==e.textFormattingId&&(n.textFormattingId=zG.toJSON(e.textFormattingId)),""!==e.name&&(n.name=e.name),(null===(t=e.children)||void 0===t?void 0:t.length)&&(n.children=e.children.map((e=>zG.toJSON(e)))),e.attributes){const t=Object.entries(e.attributes);t.length>0&&(n.attributes={},t.forEach((([e,t])=>{n.attributes[e]=t})))}return n},create:e=>YG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[],attributes:{}};return o.textFormattingId=void 0!==e.textFormattingId&&null!==e.textFormattingId?zG.fromPartial(e.textFormattingId):void 0,o.name=null!==(t=e.name)&&void 0!==t?t:"",o.children=(null===(n=e.children)||void 0===n?void 0:n.map((e=>zG.fromPartial(e))))||[],o.attributes=Object.entries(null!==(r=e.attributes)&&void 0!==r?r:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=globalThis.String(n)),e)),{}),o}};const XG={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",encode:(e,t=new iM)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:"",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.key=n.string();continue;case 2:if(18!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XG.$type,key:KG(e.key)?globalThis.String(e.key):"",value:KG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>XG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:"",value:""};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:"",r}};function KG(e){return null!=e}const QG={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.textUnitId&&VM.encode(e.textUnitId,t.uint32(10).fork()).join(),!1!==e.isUserEdited&&t.uint32(16).bool(e.isUserEdited),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0,isUserEdited:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=VM.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.isUserEdited=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QG.$type,textUnitId:ZG(e.textUnitId)?VM.fromJSON(e.textUnitId):void 0,isUserEdited:!!ZG(e.isUserEdited)&&globalThis.Boolean(e.isUserEdited)}),toJSON(e){const t={};return void 0!==e.textUnitId&&(t.textUnitId=VM.toJSON(e.textUnitId)),!1!==e.isUserEdited&&(t.isUserEdited=e.isUserEdited),t},create:e=>QG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0,isUserEdited:!1};return n.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?VM.fromPartial(e.textUnitId):void 0,n.isUserEdited=null!==(t=e.isUserEdited)&&void 0!==t&&t,n}};function ZG(e){return null!=e}const e$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryDiff",encode:(e,t=new iM)=>(void 0!==e.sourceRange&&AM.encode(e.sourceRange,t.uint32(10).fork()).join(),void 0!==e.matchedRange&&AM.encode(e.matchedRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryDiff",sourceRange:void 0,matchedRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceRange=AM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.matchedRange=AM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:e$.$type,sourceRange:t$(e.sourceRange)?AM.fromJSON(e.sourceRange):void 0,matchedRange:t$(e.matchedRange)?AM.fromJSON(e.matchedRange):void 0}),toJSON(e){const t={};return void 0!==e.sourceRange&&(t.sourceRange=AM.toJSON(e.sourceRange)),void 0!==e.matchedRange&&(t.matchedRange=AM.toJSON(e.matchedRange)),t},create:e=>e$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryDiff",sourceRange:void 0,matchedRange:void 0};return t.sourceRange=void 0!==e.sourceRange&&null!==e.sourceRange?AM.fromPartial(e.sourceRange):void 0,t.matchedRange=void 0!==e.matchedRange&&null!==e.matchedRange?AM.fromPartial(e.matchedRange):void 0,t}};function t$(e){return null!=e}const n$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryAnnotationPayload",encode(e,t=new iM){""!==e.id&&t.uint32(10).string(e.id),""!==e.sourceText&&t.uint32(18).string(e.sourceText);for(const n of e.matches)r$.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryAnnotationPayload",id:"",sourceText:"",matches:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue;case 2:if(18!==e)break;o.sourceText=n.string();continue;case 3:if(26!==e)break;o.matches.push(r$.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:n$.$type,id:o$(e.id)?globalThis.String(e.id):"",sourceText:o$(e.sourceText)?globalThis.String(e.sourceText):"",matches:globalThis.Array.isArray(null==e?void 0:e.matches)?e.matches.map((e=>r$.fromJSON(e))):[]}),toJSON(e){var t;const n={};return""!==e.id&&(n.id=e.id),""!==e.sourceText&&(n.sourceText=e.sourceText),(null===(t=e.matches)||void 0===t?void 0:t.length)&&(n.matches=e.matches.map((e=>r$.toJSON(e)))),n},create:e=>n$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryAnnotationPayload",id:"",sourceText:"",matches:[]};return o.id=null!==(t=e.id)&&void 0!==t?t:"",o.sourceText=null!==(n=e.sourceText)&&void 0!==n?n:"",o.matches=(null===(r=e.matches)||void 0===r?void 0:r.map((e=>r$.fromPartial(e))))||[],o}};const r$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryMatch",encode(e,t=new iM){""!==e.matchedText&&t.uint32(10).string(e.matchedText),""!==e.translation&&t.uint32(18).string(e.translation),0!==e.score&&t.uint32(29).float(e.score);for(const n of e.diffs)e$.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryMatch",matchedText:"",translation:"",score:0,diffs:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.matchedText=n.string();continue;case 2:if(18!==e)break;o.translation=n.string();continue;case 3:if(29!==e)break;o.score=n.float();continue;case 4:if(34!==e)break;o.diffs.push(e$.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:r$.$type,matchedText:o$(e.matchedText)?globalThis.String(e.matchedText):"",translation:o$(e.translation)?globalThis.String(e.translation):"",score:o$(e.score)?globalThis.Number(e.score):0,diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>e$.fromJSON(e))):[]}),toJSON(e){var t;const n={};return""!==e.matchedText&&(n.matchedText=e.matchedText),""!==e.translation&&(n.translation=e.translation),0!==e.score&&(n.score=e.score),(null===(t=e.diffs)||void 0===t?void 0:t.length)&&(n.diffs=e.diffs.map((e=>e$.toJSON(e)))),n},create:e=>r$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryMatch",matchedText:"",translation:"",score:0,diffs:[]};return i.matchedText=null!==(t=e.matchedText)&&void 0!==t?t:"",i.translation=null!==(n=e.translation)&&void 0!==n?n:"",i.score=null!==(r=e.score)&&void 0!==r?r:0,i.diffs=(null===(o=e.diffs)||void 0===o?void 0:o.map((e=>e$.fromPartial(e))))||[],i}};function o$(e){return null!=e}const i$={$type:"deepl.pb.interactive_text_api.common.translation_memories.MatchId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.MatchId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:i$.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>i$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.MatchId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const a$={$type:"deepl.pb.interactive_text_api.common.translation_memories.SegmentId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.SegmentId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:a$.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>a$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.SegmentId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const s$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:s$.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>s$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const l$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.id&&s$.encode(e.id,t.uint32(10).fork()).join(),void 0!==e.matchId&&i$.encode(e.matchId,t.uint32(18).fork()).join(),!1!==e.isEdited&&t.uint32(24).bool(e.isEdited),void 0!==e.segmentId&&a$.encode(e.segmentId,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentAnnotationPayload",id:void 0,matchId:void 0,isEdited:!1,segmentId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=s$.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.matchId=i$.decode(n,n.uint32());continue;case 3:if(24!==e)break;o.isEdited=n.bool();continue;case 4:if(34!==e)break;o.segmentId=a$.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:l$.$type,id:c$(e.id)?s$.fromJSON(e.id):void 0,matchId:c$(e.matchId)?i$.fromJSON(e.matchId):void 0,isEdited:!!c$(e.isEdited)&&globalThis.Boolean(e.isEdited),segmentId:c$(e.segmentId)?a$.fromJSON(e.segmentId):void 0}),toJSON(e){const t={};return void 0!==e.id&&(t.id=s$.toJSON(e.id)),void 0!==e.matchId&&(t.matchId=i$.toJSON(e.matchId)),!1!==e.isEdited&&(t.isEdited=e.isEdited),void 0!==e.segmentId&&(t.segmentId=a$.toJSON(e.segmentId)),t},create:e=>l$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemorySegmentAnnotationPayload",id:void 0,matchId:void 0,isEdited:!1,segmentId:void 0};return n.id=void 0!==e.id&&null!==e.id?s$.fromPartial(e.id):void 0,n.matchId=void 0!==e.matchId&&null!==e.matchId?i$.fromPartial(e.matchId):void 0,n.isEdited=null!==(t=e.isEdited)&&void 0!==t&&t,n.segmentId=void 0!==e.segmentId&&null!==e.segmentId?a$.fromPartial(e.segmentId):void 0,n}};function c$(e){return null!=e}const u$={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:u$.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>u$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const d$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:d$.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>d$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const p$={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",encode:(e,t=new iM)=>(void 0!==e.id&&d$.encode(e.id,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name),!1!==e.isRecommendedByStyleProfile&&t.uint32(24).bool(e.isRecommendedByStyleProfile),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",id:void 0,name:"",isRecommendedByStyleProfile:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=d$.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue;case 3:if(24!==e)break;o.isRecommendedByStyleProfile=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:p$.$type,id:g$(e.id)?d$.fromJSON(e.id):void 0,name:g$(e.name)?globalThis.String(e.name):"",isRecommendedByStyleProfile:!!g$(e.isRecommendedByStyleProfile)&&globalThis.Boolean(e.isRecommendedByStyleProfile)}),toJSON(e){const t={};return void 0!==e.id&&(t.id=d$.toJSON(e.id)),""!==e.name&&(t.name=e.name),!1!==e.isRecommendedByStyleProfile&&(t.isRecommendedByStyleProfile=e.isRecommendedByStyleProfile),t},create:e=>p$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",id:void 0,name:"",isRecommendedByStyleProfile:!1};return r.id=void 0!==e.id&&null!==e.id?d$.fromPartial(e.id):void 0,r.name=null!==(t=e.name)&&void 0!==t?t:"",r.isRecommendedByStyleProfile=null!==(n=e.isRecommendedByStyleProfile)&&void 0!==n&&n,r}};function g$(e){return null!=e}const h$={$type:"deepl.pb.interactive_text_api.translator.Customizations",encode(e,t=new iM){for(const n of e.glossaryIds)NM.encode(n,t.uint32(10).fork()).join();for(const n of e.freeTextPrompts)FM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.Customizations",glossaryIds:[],freeTextPrompts:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryIds.push(NM.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.freeTextPrompts.push(FM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:h$.$type,glossaryIds:globalThis.Array.isArray(null==e?void 0:e.glossaryIds)?e.glossaryIds.map((e=>NM.fromJSON(e))):[],freeTextPrompts:globalThis.Array.isArray(null==e?void 0:e.freeTextPrompts)?e.freeTextPrompts.map((e=>FM.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return(null===(t=e.glossaryIds)||void 0===t?void 0:t.length)&&(r.glossaryIds=e.glossaryIds.map((e=>NM.toJSON(e)))),(null===(n=e.freeTextPrompts)||void 0===n?void 0:n.length)&&(r.freeTextPrompts=e.freeTextPrompts.map((e=>FM.toJSON(e)))),r},create:e=>h$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.Customizations",glossaryIds:[],freeTextPrompts:[]};return r.glossaryIds=(null===(t=e.glossaryIds)||void 0===t?void 0:t.map((e=>NM.fromPartial(e))))||[],r.freeTextPrompts=(null===(n=e.freeTextPrompts)||void 0===n?void 0:n.map((e=>FM.fromPartial(e))))||[],r}};var f$,_$,m$,v$;function T$(e){switch(e){case 0:case"TEXT_DIRECTION_UNSPECIFIED":return f$.UNSPECIFIED;case 1:case"TEXT_DIRECTION_LEFT_TO_RIGHT":return f$.LEFT_TO_RIGHT;case 2:case"TEXT_DIRECTION_RIGHT_TO_LEFT":return f$.RIGHT_TO_LEFT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}function y$(e){switch(e){case 0:case"CLARIFY_STATUS_UNSPECIFIED":return _$.UNSPECIFIED;case 1:case"CLARIFY_STATUS_SUCCESS":return _$.SUCCESS;case 2:case"CLARIFY_STATUS_ERROR":return _$.ERROR;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum ClarifyStatus")}}function S$(e){switch(e){case 0:case"USAGE_TYPE_UNSPECIFIED":return m$.UNSPECIFIED;case 1:case"USAGE_TYPE_TRANSLATE":return m$.TRANSLATE;case 2:case"USAGE_TYPE_FULL_PAGE_TRANSLATION":return m$.FULL_PAGE_TRANSLATION;case 4:case"USAGE_TYPE_OCR":return m$.OCR;case 5:case"USAGE_TYPE_VOICE_FOR_CONVERSATIONS":return m$.VOICE_FOR_CONVERSATIONS;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum UsageType")}}function E$(e){switch(e){case 0:case"REPHRASE_TARGET_TEXT_STATUS_UNSPECIFIED":return v$.UNSPECIFIED;case 1:case"REPHRASE_TARGET_TEXT_STATUS_AVAILABLE":return v$.AVAILABLE;case 2:case"REPHRASE_TARGET_TEXT_STATUS_IN_PROGRESS":return v$.IN_PROGRESS;case 3:case"REPHRASE_TARGET_TEXT_STATUS_NO_EDIT":return v$.NO_EDIT;case 4:case"REPHRASE_TARGET_TEXT_STATUS_LANGUAGE_NOT_SUPPORTED":return v$.LANGUAGE_NOT_SUPPORTED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum RephraseTargetTextStatus")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT"}(f$||(f$={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR"}(_$||(_$={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATE=1]="TRANSLATE",e[e.FULL_PAGE_TRANSLATION=2]="FULL_PAGE_TRANSLATION",e[e.OCR=4]="OCR",e[e.VOICE_FOR_CONVERSATIONS=5]="VOICE_FOR_CONVERSATIONS"}(m$||(m$={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AVAILABLE=1]="AVAILABLE",e[e.IN_PROGRESS=2]="IN_PROGRESS",e[e.NO_EDIT=3]="NO_EDIT",e[e.LANGUAGE_NOT_SUPPORTED=4]="LANGUAGE_NOT_SUPPORTED"}(v$||(v$={}));const I$={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&u$.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=u$.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:I$.$type,flowId:GV(e.flowId)?u$.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=u$.toJSON(e.flowId)),t},create:e=>I$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?u$.fromPartial(e.flowId):void 0,t}};const A$={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&u$.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.autocompletions)OV.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=u$.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.autocompletions.push(OV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:A$.$type,flowId:GV(e.flowId)?u$.fromJSON(e.flowId):void 0,autocompletions:globalThis.Array.isArray(null==e?void 0:e.autocompletions)?e.autocompletions.map((e=>OV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=u$.toJSON(e.flowId)),(null===(t=e.autocompletions)||void 0===t?void 0:t.length)&&(n.autocompletions=e.autocompletions.map((e=>OV.toJSON(e)))),n},create:e=>A$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?u$.fromPartial(e.flowId):void 0,n.autocompletions=(null===(t=e.autocompletions)||void 0===t?void 0:t.map((e=>OV.fromPartial(e))))||[],n}};const b$={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&u$.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=u$.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:b$.$type,flowId:GV(e.flowId)?u$.fromJSON(e.flowId):void 0,selection:GV(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=u$.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>b$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?u$.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const w$={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.replacement&&EV.encode(e.replacement,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.replacement=EV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:w$.$type,replacement:GV(e.replacement)?EV.fromJSON(e.replacement):void 0}),toJSON(e){const t={};return void 0!==e.replacement&&(t.replacement=EV.toJSON(e.replacement)),t},create:e=>w$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};return t.replacement=void 0!==e.replacement&&null!==e.replacement?EV.fromPartial(e.replacement):void 0,t}};const O$={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new iM){void 0!==e.flowId&&SM.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)OV.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(OV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:O$.$type,flowId:GV(e.flowId)?SM.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>OV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=SM.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>OV.toJSON(e)))),n},create:e=>O$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?SM.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>OV.fromPartial(e))))||[],n}};const R$={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new iM){for(const n of e.alternatives)OV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(OV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:R$.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>OV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>OV.toJSON(e)))),n},create:e=>R$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>OV.fromPartial(e))))||[],n}};const N$={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&xV.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=xV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:N$.$type,flowId:GV(e.flowId)?xV.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=xV.toJSON(e.flowId)),t},create:e=>N$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?xV.fromPartial(e.flowId):void 0,t}};const P$={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&xV.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.referenceId&&vM.encode(e.referenceId,t.uint32(18).fork()).join(),0!==e.status&&t.uint32(24).int32(e.status),void 0!==e.errorInfo&&UV.encode(e.errorInfo,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",flowId:void 0,referenceId:void 0,status:0,errorInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=xV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.referenceId=vM.decode(n,n.uint32());continue;case 3:if(24!==e)break;o.status=n.int32();continue;case 4:if(34!==e)break;o.errorInfo=UV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:P$.$type,flowId:GV(e.flowId)?xV.fromJSON(e.flowId):void 0,referenceId:GV(e.referenceId)?vM.fromJSON(e.referenceId):void 0,status:GV(e.status)?y$(e.status):0,errorInfo:GV(e.errorInfo)?UV.fromJSON(e.errorInfo):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=xV.toJSON(e.flowId)),void 0!==e.referenceId&&(t.referenceId=vM.toJSON(e.referenceId)),0!==e.status&&(t.status=function(e){switch(e){case _$.UNSPECIFIED:return"CLARIFY_STATUS_UNSPECIFIED";case _$.SUCCESS:return"CLARIFY_STATUS_SUCCESS";case _$.ERROR:return"CLARIFY_STATUS_ERROR";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum ClarifyStatus")}}(e.status)),void 0!==e.errorInfo&&(t.errorInfo=UV.toJSON(e.errorInfo)),t},create:e=>P$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",flowId:void 0,referenceId:void 0,status:0,errorInfo:void 0};return n.flowId=void 0!==e.flowId&&null!==e.flowId?xV.fromPartial(e.flowId):void 0,n.referenceId=void 0!==e.referenceId&&null!==e.referenceId?vM.fromPartial(e.referenceId):void 0,n.status=null!==(t=e.status)&&void 0!==t?t:0,n.errorInfo=void 0!==e.errorInfo&&null!==e.errorInfo?UV.fromPartial(e.errorInfo):void 0,n}};const L$={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&xV.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&DV.encode(e.questionId,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=xV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=DV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:L$.$type,flowId:GV(e.flowId)?xV.fromJSON(e.flowId):void 0,questionId:GV(e.questionId)?DV.fromJSON(e.questionId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=xV.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=DV.toJSON(e.questionId)),t},create:e=>L$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?xV.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?DV.fromPartial(e.questionId):void 0,t}};const C$={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&xV.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionWithAnswers&&LV.encode(e.questionWithAnswers,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=xV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionWithAnswers=LV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:C$.$type,flowId:GV(e.flowId)?xV.fromJSON(e.flowId):void 0,questionWithAnswers:GV(e.questionWithAnswers)?LV.fromJSON(e.questionWithAnswers):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=xV.toJSON(e.flowId)),void 0!==e.questionWithAnswers&&(t.questionWithAnswers=LV.toJSON(e.questionWithAnswers)),t},create:e=>C$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?xV.fromPartial(e.flowId):void 0,t.questionWithAnswers=void 0!==e.questionWithAnswers&&null!==e.questionWithAnswers?LV.fromPartial(e.questionWithAnswers):void 0,t}};const x$={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&xV.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&DV.encode(e.questionId,t.uint32(18).fork()).join(),void 0!==e.answer&&CV.encode(e.answer,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=xV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=DV.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.answer=CV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:x$.$type,flowId:GV(e.flowId)?xV.fromJSON(e.flowId):void 0,questionId:GV(e.questionId)?DV.fromJSON(e.questionId):void 0,answer:GV(e.answer)?CV.fromJSON(e.answer):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=xV.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=DV.toJSON(e.questionId)),void 0!==e.answer&&(t.answer=CV.toJSON(e.answer)),t},create:e=>x$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?xV.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?DV.fromPartial(e.questionId):void 0,t.answer=void 0!==e.answer&&null!==e.answer?CV.fromPartial(e.answer):void 0,t}};const k$={$type:"deepl.pb.interactive_text_api.translator.RequestRephraseTargetTextAnnotationPayload",encode:(e,t=new iM)=>(""!==e.flowId&&t.uint32(10).string(e.flowId),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestRephraseTargetTextAnnotationPayload",flowId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:k$.$type,flowId:GV(e.flowId)?globalThis.String(e.flowId):""}),toJSON(e){const t={};return""!==e.flowId&&(t.flowId=e.flowId),t},create:e=>k$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.RequestRephraseTargetTextAnnotationPayload",flowId:""};return n.flowId=null!==(t=e.flowId)&&void 0!==t?t:"",n}};const D$={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonDiff",encode:(e,t=new iM)=>(void 0!==e.originalRange&&AM.encode(e.originalRange,t.uint32(10).fork()).join(),void 0!==e.alternativeRange&&AM.encode(e.alternativeRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonDiff",originalRange:void 0,alternativeRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.originalRange=AM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternativeRange=AM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:D$.$type,originalRange:GV(e.originalRange)?AM.fromJSON(e.originalRange):void 0,alternativeRange:GV(e.alternativeRange)?AM.fromJSON(e.alternativeRange):void 0}),toJSON(e){const t={};return void 0!==e.originalRange&&(t.originalRange=AM.toJSON(e.originalRange)),void 0!==e.alternativeRange&&(t.alternativeRange=AM.toJSON(e.alternativeRange)),t},create:e=>D$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonDiff",originalRange:void 0,alternativeRange:void 0};return t.originalRange=void 0!==e.originalRange&&null!==e.originalRange?AM.fromPartial(e.originalRange):void 0,t.alternativeRange=void 0!==e.alternativeRange&&null!==e.alternativeRange?AM.fromPartial(e.alternativeRange):void 0,t}};const U$={$type:"deepl.pb.interactive_text_api.translator.ProvidedHypothesesComparisonStateAnnotationPayload",encode(e,t=new iM){""!==e.flowId&&t.uint32(10).string(e.flowId),""!==e.alternativeTranslation&&t.uint32(18).string(e.alternativeTranslation),""!==e.originalTranslationHash&&t.uint32(26).string(e.originalTranslationHash),""!==e.testName&&t.uint32(34).string(e.testName);for(const n of e.diffs)D$.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedHypothesesComparisonStateAnnotationPayload",flowId:"",alternativeTranslation:"",originalTranslationHash:"",testName:"",diffs:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=n.string();continue;case 2:if(18!==e)break;o.alternativeTranslation=n.string();continue;case 3:if(26!==e)break;o.originalTranslationHash=n.string();continue;case 4:if(34!==e)break;o.testName=n.string();continue;case 5:if(42!==e)break;o.diffs.push(D$.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:U$.$type,flowId:GV(e.flowId)?globalThis.String(e.flowId):"",alternativeTranslation:GV(e.alternativeTranslation)?globalThis.String(e.alternativeTranslation):"",originalTranslationHash:GV(e.originalTranslationHash)?globalThis.String(e.originalTranslationHash):"",testName:GV(e.testName)?globalThis.String(e.testName):"",diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>D$.fromJSON(e))):[]}),toJSON(e){var t;const n={};return""!==e.flowId&&(n.flowId=e.flowId),""!==e.alternativeTranslation&&(n.alternativeTranslation=e.alternativeTranslation),""!==e.originalTranslationHash&&(n.originalTranslationHash=e.originalTranslationHash),""!==e.testName&&(n.testName=e.testName),(null===(t=e.diffs)||void 0===t?void 0:t.length)&&(n.diffs=e.diffs.map((e=>D$.toJSON(e)))),n},create:e=>U$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i;const a={$type:"deepl.pb.interactive_text_api.translator.ProvidedHypothesesComparisonStateAnnotationPayload",flowId:"",alternativeTranslation:"",originalTranslationHash:"",testName:"",diffs:[]};return a.flowId=null!==(t=e.flowId)&&void 0!==t?t:"",a.alternativeTranslation=null!==(n=e.alternativeTranslation)&&void 0!==n?n:"",a.originalTranslationHash=null!==(r=e.originalTranslationHash)&&void 0!==r?r:"",a.testName=null!==(o=e.testName)&&void 0!==o?o:"",a.diffs=(null===(i=e.diffs)||void 0===i?void 0:i.map((e=>D$.fromPartial(e))))||[],a}};const M$={$type:"deepl.pb.interactive_text_api.translator.SelectHypothesesComparisonVariantAnnotationPayload",encode:(e,t=new iM)=>(""!==e.flowId&&t.uint32(10).string(e.flowId),0!==e.selection&&t.uint32(16).int32(e.selection),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectHypothesesComparisonVariantAnnotationPayload",flowId:"",selection:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=n.string();continue;case 2:if(16!==e)break;o.selection=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:M$.$type,flowId:GV(e.flowId)?globalThis.String(e.flowId):"",selection:GV(e.selection)?globalThis.Number(e.selection):0}),toJSON(e){const t={};return""!==e.flowId&&(t.flowId=e.flowId),0!==e.selection&&(t.selection=Math.round(e.selection)),t},create:e=>M$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.SelectHypothesesComparisonVariantAnnotationPayload",flowId:"",selection:0};return r.flowId=null!==(t=e.flowId)&&void 0!==t?t:"",r.selection=null!==(n=e.selection)&&void 0!==n?n:0,r}};const G$={$type:"deepl.pb.interactive_text_api.translator.SkipHypothesesComparisonAnnotationPayload",encode:(e,t=new iM)=>(""!==e.flowId&&t.uint32(10).string(e.flowId),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SkipHypothesesComparisonAnnotationPayload",flowId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:G$.$type,flowId:GV(e.flowId)?globalThis.String(e.flowId):""}),toJSON(e){const t={};return""!==e.flowId&&(t.flowId=e.flowId),t},create:e=>G$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SkipHypothesesComparisonAnnotationPayload",flowId:""};return n.flowId=null!==(t=e.flowId)&&void 0!==t?t:"",n}};const $$={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&kV.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=kV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$$.$type,flowId:GV(e.flowId)?kV.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=kV.toJSON(e.flowId)),t},create:e=>$$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?kV.fromPartial(e.flowId):void 0,t}};const V$={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsResultAnnotationPayload",encode:(e,t=new iM)=>(void 0!==e.flowId&&kV.encode(e.flowId,t.uint32(10).fork()).join(),0!==e.updatedSegments&&t.uint32(16).int32(e.updatedSegments),0!==e.createdSegments&&t.uint32(24).int32(e.createdSegments),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsResultAnnotationPayload",flowId:void 0,updatedSegments:0,createdSegments:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=kV.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.updatedSegments=n.int32();continue;case 3:if(24!==e)break;o.createdSegments=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:V$.$type,flowId:GV(e.flowId)?kV.fromJSON(e.flowId):void 0,updatedSegments:GV(e.updatedSegments)?globalThis.Number(e.updatedSegments):0,createdSegments:GV(e.createdSegments)?globalThis.Number(e.createdSegments):0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=kV.toJSON(e.flowId)),0!==e.updatedSegments&&(t.updatedSegments=Math.round(e.updatedSegments)),0!==e.createdSegments&&(t.createdSegments=Math.round(e.createdSegments)),t},create:e=>V$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemorySegmentsResultAnnotationPayload",flowId:void 0,updatedSegments:0,createdSegments:0};return r.flowId=void 0!==e.flowId&&null!==e.flowId?kV.fromPartial(e.flowId):void 0,r.updatedSegments=null!==(t=e.updatedSegments)&&void 0!==t?t:0,r.createdSegments=null!==(n=e.createdSegments)&&void 0!==n?n:0,r}};const F$={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",encode(e,t=new iM){for(const n of e.sourceLanguages)bV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguages.push(bV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:F$.$type,sourceLanguages:globalThis.Array.isArray(null==e?void 0:e.sourceLanguages)?e.sourceLanguages.map((e=>bV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.sourceLanguages)||void 0===t?void 0:t.length)&&(n.sourceLanguages=e.sourceLanguages.map((e=>bV.toJSON(e)))),n},create:e=>F$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};return n.sourceLanguages=(null===(t=e.sourceLanguages)||void 0===t?void 0:t.map((e=>bV.fromPartial(e))))||[],n}};const j$={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",encode(e,t=new iM){for(const n of e.targetLanguages)wV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguages.push(wV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:j$.$type,targetLanguages:globalThis.Array.isArray(null==e?void 0:e.targetLanguages)?e.targetLanguages.map((e=>wV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.targetLanguages)||void 0===t?void 0:t.length)&&(n.targetLanguages=e.targetLanguages.map((e=>wV.toJSON(e)))),n},create:e=>j$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};return n.targetLanguages=(null===(t=e.targetLanguages)||void 0===t?void 0:t.map((e=>wV.fromPartial(e))))||[],n}};const W$={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.sourceLanguage&&bV.encode(e.sourceLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=bV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:W$.$type,sourceLanguage:GV(e.sourceLanguage)?bV.fromJSON(e.sourceLanguage):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=bV.toJSON(e.sourceLanguage)),t},create:e=>W$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?bV.fromPartial(e.sourceLanguage):void 0,t}};const H$={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.sourceLanguage&&bV.encode(e.sourceLanguage,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),!1!==e.isLanguageDetectionConfident&&t.uint32(24).bool(e.isLanguageDetectionConfident),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0,isLanguageDetectionConfident:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=bV.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue;case 3:if(24!==e)break;o.isLanguageDetectionConfident=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:H$.$type,sourceLanguage:GV(e.sourceLanguage)?bV.fromJSON(e.sourceLanguage):void 0,origin:GV(e.origin)?CM(e.origin):0,isLanguageDetectionConfident:!!GV(e.isLanguageDetectionConfident)&&globalThis.Boolean(e.isLanguageDetectionConfident)}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=bV.toJSON(e.sourceLanguage)),0!==e.origin&&(t.origin=xM(e.origin)),!1!==e.isLanguageDetectionConfident&&(t.isLanguageDetectionConfident=e.isLanguageDetectionConfident),t},create:e=>H$.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0,isLanguageDetectionConfident:!1};return r.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?bV.fromPartial(e.sourceLanguage):void 0,r.origin=null!==(t=e.origin)&&void 0!==t?t:0,r.isLanguageDetectionConfident=null!==(n=e.isLanguageDetectionConfident)&&void 0!==n&&n,r}};const q$={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.targetLanguage&&wV.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=wV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:q$.$type,targetLanguage:GV(e.targetLanguage)?wV.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=wV.toJSON(e.targetLanguage)),t},create:e=>q$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?wV.fromPartial(e.targetLanguage):void 0,t}};const B$={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",encode:(e,t=new iM)=>(void 0!==e.targetLanguage&&wV.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=wV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:B$.$type,targetLanguage:GV(e.targetLanguage)?wV.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=wV.toJSON(e.targetLanguage)),t},create:e=>B$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?wV.fromPartial(e.targetLanguage):void 0,t}};const J$={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",encode:(e,t=new iM)=>(void 0!==e.glossaryId&&NM.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=NM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:J$.$type,glossaryId:GV(e.glossaryId)?NM.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=NM.toJSON(e.glossaryId)),t},create:e=>J$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?NM.fromPartial(e.glossaryId):void 0,t}};const z$={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",encode:(e,t=new iM)=>(void 0!==e.styleGuideId&&$M.encode(e.styleGuideId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",styleGuideId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleGuideId=$M.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:z$.$type,styleGuideId:GV(e.styleGuideId)?$M.fromJSON(e.styleGuideId):void 0}),toJSON(e){const t={};return void 0!==e.styleGuideId&&(t.styleGuideId=$M.toJSON(e.styleGuideId)),t},create:e=>z$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",styleGuideId:void 0};return t.styleGuideId=void 0!==e.styleGuideId&&null!==e.styleGuideId?$M.fromPartial(e.styleGuideId):void 0,t}};const Y$={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",encode:(e,t=new iM)=>(""!==e.interfaceLanguage&&t.uint32(10).string(e.interfaceLanguage),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",interfaceLanguage:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.interfaceLanguage=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Y$.$type,interfaceLanguage:GV(e.interfaceLanguage)?globalThis.String(e.interfaceLanguage):""}),toJSON(e){const t={};return""!==e.interfaceLanguage&&(t.interfaceLanguage=e.interfaceLanguage),t},create:e=>Y$.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",interfaceLanguage:""};return n.interfaceLanguage=null!==(t=e.interfaceLanguage)&&void 0!==t?t:"",n}};const X$={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",encode:(e,t=new iM)=>(void 0!==e.freeTextPromptList&&RM.encode(e.freeTextPromptList,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.freeTextPromptList=RM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:X$.$type,freeTextPromptList:GV(e.freeTextPromptList)?RM.fromJSON(e.freeTextPromptList):void 0}),toJSON(e){const t={};return void 0!==e.freeTextPromptList&&(t.freeTextPromptList=RM.toJSON(e.freeTextPromptList)),t},create:e=>X$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};return t.freeTextPromptList=void 0!==e.freeTextPromptList&&null!==e.freeTextPromptList?RM.fromPartial(e.freeTextPromptList):void 0,t}};const K$={$type:"deepl.pb.interactive_text_api.translator.CustomizationsPropertyValue",encode:(e,t=new iM)=>(void 0!==e.customizations&&h$.encode(e.customizations,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CustomizationsPropertyValue",customizations:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.customizations=h$.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:K$.$type,customizations:GV(e.customizations)?h$.fromJSON(e.customizations):void 0}),toJSON(e){const t={};return void 0!==e.customizations&&(t.customizations=h$.toJSON(e.customizations)),t},create:e=>K$.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.CustomizationsPropertyValue",customizations:void 0};return t.customizations=void 0!==e.customizations&&null!==e.customizations?h$.fromPartial(e.customizations):void 0,t}};const Q$={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Q$.$type}),toJSON:e=>({}),create:e=>Q$.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"})};const Z$={$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Z$.$type}),toJSON:e=>({}),create:e=>Z$.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue"})};const eV={$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eV.$type}),toJSON:e=>({}),create:e=>eV.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue"})};const tV={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",encode:(e,t=new iM)=>(0!==e.progressInPercent&&t.uint32(8).int32(e.progressInPercent),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.progressInPercent=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tV.$type,progressInPercent:GV(e.progressInPercent)?globalThis.Number(e.progressInPercent):0}),toJSON(e){const t={};return 0!==e.progressInPercent&&(t.progressInPercent=Math.round(e.progressInPercent)),t},create:e=>tV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};return n.progressInPercent=null!==(t=e.progressInPercent)&&void 0!==t?t:0,n}};const nV={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",encode(e,t=new iM){for(const n of e.formalityModes)vV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityModes.push(vV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nV.$type,formalityModes:globalThis.Array.isArray(null==e?void 0:e.formalityModes)?e.formalityModes.map((e=>vV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.formalityModes)||void 0===t?void 0:t.length)&&(n.formalityModes=e.formalityModes.map((e=>vV.toJSON(e)))),n},create:e=>nV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};return n.formalityModes=(null===(t=e.formalityModes)||void 0===t?void 0:t.map((e=>vV.fromPartial(e))))||[],n}};const rV={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",encode:(e,t=new iM)=>(void 0!==e.formalityMode&&vV.encode(e.formalityMode,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityMode=vV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rV.$type,formalityMode:GV(e.formalityMode)?vV.fromJSON(e.formalityMode):void 0}),toJSON(e){const t={};return void 0!==e.formalityMode&&(t.formalityMode=vV.toJSON(e.formalityMode)),t},create:e=>rV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};return t.formalityMode=void 0!==e.formalityMode&&null!==e.formalityMode?vV.fromPartial(e.formalityMode):void 0,t}};const oV={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",encode(e,t=new iM){for(const n of e.languageModels)TV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModels.push(TV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oV.$type,languageModels:globalThis.Array.isArray(null==e?void 0:e.languageModels)?e.languageModels.map((e=>TV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languageModels)||void 0===t?void 0:t.length)&&(n.languageModels=e.languageModels.map((e=>TV.toJSON(e)))),n},create:e=>oV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};return n.languageModels=(null===(t=e.languageModels)||void 0===t?void 0:t.map((e=>TV.fromPartial(e))))||[],n}};const iV={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",encode:(e,t=new iM)=>(void 0!==e.languageModel&&TV.encode(e.languageModel,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModel=TV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iV.$type,languageModel:GV(e.languageModel)?TV.fromJSON(e.languageModel):void 0}),toJSON(e){const t={};return void 0!==e.languageModel&&(t.languageModel=TV.toJSON(e.languageModel)),t},create:e=>iV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};return t.languageModel=void 0!==e.languageModel&&null!==e.languageModel?TV.fromPartial(e.languageModel):void 0,t}};const aV={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",encode:(e,t=new iM)=>(0!==e.textDirection&&t.uint32(8).int32(e.textDirection),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.textDirection=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aV.$type,textDirection:GV(e.textDirection)?T$(e.textDirection):0}),toJSON(e){const t={};return 0!==e.textDirection&&(t.textDirection=function(e){switch(e){case f$.UNSPECIFIED:return"TEXT_DIRECTION_UNSPECIFIED";case f$.LEFT_TO_RIGHT:return"TEXT_DIRECTION_LEFT_TO_RIGHT";case f$.RIGHT_TO_LEFT:return"TEXT_DIRECTION_RIGHT_TO_LEFT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}(e.textDirection)),t},create:e=>aV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};return n.textDirection=null!==(t=e.textDirection)&&void 0!==t?t:0,n}};const sV={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",encode:(e,t=new iM)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sV.$type,max:GV(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>sV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const lV={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lV.$type}),toJSON:e=>({}),create:e=>lV.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"})};const cV={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",encode(e,t=new iM){for(const n of e.weights)RV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.weights.push(RV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cV.$type,weights:globalThis.Array.isArray(null==e?void 0:e.weights)?e.weights.map((e=>RV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.weights)||void 0===t?void 0:t.length)&&(n.weights=e.weights.map((e=>RV.toJSON(e)))),n},create:e=>cV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};return n.weights=(null===(t=e.weights)||void 0===t?void 0:t.map((e=>RV.fromPartial(e))))||[],n}};const uV={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",encode(e,t=new iM){for(const n of e.styleVariants)MV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(MV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uV.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>MV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>MV.toJSON(e)))),n},create:e=>uV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>MV.fromPartial(e))))||[],n}};const dV={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",encode:(e,t=new iM)=>(void 0!==e.styleVariant&&MV.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=MV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dV.$type,styleVariant:GV(e.styleVariant)?MV.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=MV.toJSON(e.styleVariant)),t},create:e=>dV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?MV.fromPartial(e.styleVariant):void 0,t}};const pV={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",encode(e,t=new iM){for(const n of e.translationMemories)p$.encode(n,t.uint32(10).fork()).join();return void 0!==e.error&&gV.encode(e.error,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",translationMemories:[],error:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.translationMemories.push(p$.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.error=gV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pV.$type,translationMemories:globalThis.Array.isArray(null==e?void 0:e.translationMemories)?e.translationMemories.map((e=>p$.fromJSON(e))):[],error:GV(e.error)?gV.fromJSON(e.error):void 0}),toJSON(e){var t;const n={};return(null===(t=e.translationMemories)||void 0===t?void 0:t.length)&&(n.translationMemories=e.translationMemories.map((e=>p$.toJSON(e)))),void 0!==e.error&&(n.error=gV.toJSON(e.error)),n},create:e=>pV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",translationMemories:[],error:void 0};return n.translationMemories=(null===(t=e.translationMemories)||void 0===t?void 0:t.map((e=>p$.fromPartial(e))))||[],n.error=void 0!==e.error&&null!==e.error?gV.fromPartial(e.error):void 0,n}};const gV={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListError",encode:(e,t=new iM)=>(""!==e.message&&t.uint32(10).string(e.message),""!==e.code&&t.uint32(18).string(e.code),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListError",message:"",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.message=n.string();continue;case 2:if(18!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gV.$type,message:GV(e.message)?globalThis.String(e.message):"",code:GV(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.message&&(t.message=e.message),""!==e.code&&(t.code=e.code),t},create:e=>gV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListError",message:"",code:""};return r.message=null!==(t=e.message)&&void 0!==t?t:"",r.code=null!==(n=e.code)&&void 0!==n?n:"",r}};const hV={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",encode:(e,t=new iM)=>(void 0!==e.translationMemoryId&&d$.encode(e.translationMemoryId,t.uint32(10).fork()).join(),0!==e.threshold&&t.uint32(21).float(e.threshold),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",translationMemoryId:void 0,threshold:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.translationMemoryId=d$.decode(n,n.uint32());continue;case 2:if(21!==e)break;o.threshold=n.float();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hV.$type,translationMemoryId:GV(e.translationMemoryId)?d$.fromJSON(e.translationMemoryId):void 0,threshold:GV(e.threshold)?globalThis.Number(e.threshold):0}),toJSON(e){const t={};return void 0!==e.translationMemoryId&&(t.translationMemoryId=d$.toJSON(e.translationMemoryId)),0!==e.threshold&&(t.threshold=e.threshold),t},create:e=>hV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",translationMemoryId:void 0,threshold:0};return n.translationMemoryId=void 0!==e.translationMemoryId&&null!==e.translationMemoryId?d$.fromPartial(e.translationMemoryId):void 0,n.threshold=null!==(t=e.threshold)&&void 0!==t?t:0,n}};const fV={$type:"deepl.pb.interactive_text_api.translator.RephraseTargetTextStatusPropertyValue",encode:(e,t=new iM)=>(0!==e.rephraseTargetTextStatus&&t.uint32(8).int32(e.rephraseTargetTextStatus),void 0!==e.flowId&&t.uint32(18).string(e.flowId),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RephraseTargetTextStatusPropertyValue",rephraseTargetTextStatus:0,flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.rephraseTargetTextStatus=n.int32();continue;case 2:if(18!==e)break;o.flowId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fV.$type,rephraseTargetTextStatus:GV(e.rephraseTargetTextStatus)?E$(e.rephraseTargetTextStatus):0,flowId:GV(e.flowId)?globalThis.String(e.flowId):void 0}),toJSON(e){const t={};return 0!==e.rephraseTargetTextStatus&&(t.rephraseTargetTextStatus=function(e){switch(e){case v$.UNSPECIFIED:return"REPHRASE_TARGET_TEXT_STATUS_UNSPECIFIED";case v$.AVAILABLE:return"REPHRASE_TARGET_TEXT_STATUS_AVAILABLE";case v$.IN_PROGRESS:return"REPHRASE_TARGET_TEXT_STATUS_IN_PROGRESS";case v$.NO_EDIT:return"REPHRASE_TARGET_TEXT_STATUS_NO_EDIT";case v$.LANGUAGE_NOT_SUPPORTED:return"REPHRASE_TARGET_TEXT_STATUS_LANGUAGE_NOT_SUPPORTED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum RephraseTargetTextStatus")}}(e.rephraseTargetTextStatus)),void 0!==e.flowId&&(t.flowId=e.flowId),t},create:e=>fV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.RephraseTargetTextStatusPropertyValue",rephraseTargetTextStatus:0,flowId:void 0};return r.rephraseTargetTextStatus=null!==(t=e.rephraseTargetTextStatus)&&void 0!==t?t:0,r.flowId=null!==(n=e.flowId)&&void 0!==n?n:void 0,r}};const _V={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonEnabledPropertyValue",encode:(e,t=new iM)=>(!1!==e.enabled&&t.uint32(8).bool(e.enabled),void 0!==e.browserLanguage&&t.uint32(18).string(e.browserLanguage),void 0!==e.userCountry&&t.uint32(26).string(e.userCountry),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonEnabledPropertyValue",enabled:!1,browserLanguage:void 0,userCountry:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.enabled=n.bool();continue;case 2:if(18!==e)break;o.browserLanguage=n.string();continue;case 3:if(26!==e)break;o.userCountry=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_V.$type,enabled:!!GV(e.enabled)&&globalThis.Boolean(e.enabled),browserLanguage:GV(e.browserLanguage)?globalThis.String(e.browserLanguage):void 0,userCountry:GV(e.userCountry)?globalThis.String(e.userCountry):void 0}),toJSON(e){const t={};return!1!==e.enabled&&(t.enabled=e.enabled),void 0!==e.browserLanguage&&(t.browserLanguage=e.browserLanguage),void 0!==e.userCountry&&(t.userCountry=e.userCountry),t},create:e=>_V.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.HypothesesComparisonEnabledPropertyValue",enabled:!1,browserLanguage:void 0,userCountry:void 0};return o.enabled=null!==(t=e.enabled)&&void 0!==t&&t,o.browserLanguage=null!==(n=e.browserLanguage)&&void 0!==n?n:void 0,o.userCountry=null!==(r=e.userCountry)&&void 0!==r?r:void 0,o}};const mV={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",encode:(e,t=new iM)=>(!1!==e.enableTranscription&&t.uint32(8).bool(e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&t.uint32(16).bool(e.enableTranslatorQuoteConversion),!1!==e.disableLanguageWeights&&t.uint32(24).bool(e.disableLanguageWeights),!1!==e.doNotOverrideRequestedSourceLanguage&&t.uint32(32).bool(e.doNotOverrideRequestedSourceLanguage),!1!==e.enableInlineSuggestions&&t.uint32(40).bool(e.enableInlineSuggestions),0!==e.usageType&&t.uint32(48).int32(e.usageType),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1,usageType:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.enableTranscription=n.bool();continue;case 2:if(16!==e)break;o.enableTranslatorQuoteConversion=n.bool();continue;case 3:if(24!==e)break;o.disableLanguageWeights=n.bool();continue;case 4:if(32!==e)break;o.doNotOverrideRequestedSourceLanguage=n.bool();continue;case 5:if(40!==e)break;o.enableInlineSuggestions=n.bool();continue;case 6:if(48!==e)break;o.usageType=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mV.$type,enableTranscription:!!GV(e.enableTranscription)&&globalThis.Boolean(e.enableTranscription),enableTranslatorQuoteConversion:!!GV(e.enableTranslatorQuoteConversion)&&globalThis.Boolean(e.enableTranslatorQuoteConversion),disableLanguageWeights:!!GV(e.disableLanguageWeights)&&globalThis.Boolean(e.disableLanguageWeights),doNotOverrideRequestedSourceLanguage:!!GV(e.doNotOverrideRequestedSourceLanguage)&&globalThis.Boolean(e.doNotOverrideRequestedSourceLanguage),enableInlineSuggestions:!!GV(e.enableInlineSuggestions)&&globalThis.Boolean(e.enableInlineSuggestions),usageType:GV(e.usageType)?S$(e.usageType):0}),toJSON(e){const t={};return!1!==e.enableTranscription&&(t.enableTranscription=e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&(t.enableTranslatorQuoteConversion=e.enableTranslatorQuoteConversion),!1!==e.disableLanguageWeights&&(t.disableLanguageWeights=e.disableLanguageWeights),!1!==e.doNotOverrideRequestedSourceLanguage&&(t.doNotOverrideRequestedSourceLanguage=e.doNotOverrideRequestedSourceLanguage),!1!==e.enableInlineSuggestions&&(t.enableInlineSuggestions=e.enableInlineSuggestions),0!==e.usageType&&(t.usageType=function(e){switch(e){case m$.UNSPECIFIED:return"USAGE_TYPE_UNSPECIFIED";case m$.TRANSLATE:return"USAGE_TYPE_TRANSLATE";case m$.FULL_PAGE_TRANSLATION:return"USAGE_TYPE_FULL_PAGE_TRANSLATION";case m$.OCR:return"USAGE_TYPE_OCR";case m$.VOICE_FOR_CONVERSATIONS:return"USAGE_TYPE_VOICE_FOR_CONVERSATIONS";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum UsageType")}}(e.usageType)),t},create:e=>mV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i,a;const s={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1,usageType:0};return s.enableTranscription=null!==(t=e.enableTranscription)&&void 0!==t&&t,s.enableTranslatorQuoteConversion=null!==(n=e.enableTranslatorQuoteConversion)&&void 0!==n&&n,s.disableLanguageWeights=null!==(r=e.disableLanguageWeights)&&void 0!==r&&r,s.doNotOverrideRequestedSourceLanguage=null!==(o=e.doNotOverrideRequestedSourceLanguage)&&void 0!==o&&o,s.enableInlineSuggestions=null!==(i=e.enableInlineSuggestions)&&void 0!==i&&i,s.usageType=null!==(a=e.usageType)&&void 0!==a?a:0,s}};const vV={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>vV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const TV={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>TV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const yV={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",encode:(e,t=new iM)=>(void 0!==e.sourceLanguage&&bV.encode(e.sourceLanguage,t.uint32(10).fork()).join(),void 0!==e.targetLanguage&&wV.encode(e.targetLanguage,t.uint32(18).fork()).join(),void 0!==e.model&&TV.encode(e.model,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",sourceLanguage:void 0,targetLanguage:void 0,model:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=bV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.targetLanguage=wV.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.model=TV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yV.$type,sourceLanguage:GV(e.sourceLanguage)?bV.fromJSON(e.sourceLanguage):void 0,targetLanguage:GV(e.targetLanguage)?wV.fromJSON(e.targetLanguage):void 0,model:GV(e.model)?TV.fromJSON(e.model):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=bV.toJSON(e.sourceLanguage)),void 0!==e.targetLanguage&&(t.targetLanguage=wV.toJSON(e.targetLanguage)),void 0!==e.model&&(t.model=TV.toJSON(e.model)),t},create:e=>yV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",sourceLanguage:void 0,targetLanguage:void 0,model:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?bV.fromPartial(e.sourceLanguage):void 0,t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?wV.fromPartial(e.targetLanguage):void 0,t.model=void 0!==e.model&&null!==e.model?TV.fromPartial(e.model):void 0,t}};const SV={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",encode(e,t=new iM){for(const n of e.preferences)yV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",preferences:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.preferences.push(yV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SV.$type,preferences:globalThis.Array.isArray(null==e?void 0:e.preferences)?e.preferences.map((e=>yV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.preferences)||void 0===t?void 0:t.length)&&(n.preferences=e.preferences.map((e=>yV.toJSON(e)))),n},create:e=>SV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",preferences:[]};return n.preferences=(null===(t=e.preferences)||void 0===t?void 0:t.map((e=>yV.fromPartial(e))))||[],n}};const EV={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",encode:(e,t=new iM)=>(""!==e.source&&t.uint32(10).string(e.source),""!==e.target&&t.uint32(18).string(e.target),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.source=n.string();continue;case 2:if(18!==e)break;o.target=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EV.$type,source:GV(e.source)?globalThis.String(e.source):"",target:GV(e.target)?globalThis.String(e.target):""}),toJSON(e){const t={};return""!==e.source&&(t.source=e.source),""!==e.target&&(t.target=e.target),t},create:e=>EV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};return r.source=null!==(t=e.source)&&void 0!==t?t:"",r.target=null!==(n=e.target)&&void 0!==n?n:"",r}};const IV={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",encode(e,t=new iM){for(const n of e.glossaryEntries)EV.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(EV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IV.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>EV.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>EV.toJSON(e)))),n},create:e=>IV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>EV.fromPartial(e))))||[],n}};const AV={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",encode(e,t=new iM){void 0!==e.entry&&EV.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)AM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=EV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(AM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AV.$type,entry:GV(e.entry)?EV.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>AM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=EV.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>AM.toJSON(e)))),n},create:e=>AV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?EV.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>AM.fromPartial(e))))||[],n}};const bV={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",encode:(e,t=new iM)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bV.$type,code:GV(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>bV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const wV={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",encode:(e,t=new iM)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wV.$type,code:GV(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>wV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const OV={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",encode(e,t=new iM){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)AV.encode(n,t.uint32(18).fork()).join();""!==e.transcription&&t.uint32(26).string(e.transcription);for(const n of e.diffs)wM.encode(n,t.uint32(34).fork()).join();for(const n of e.customRuleHighlights)UM.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:"",diffs:[],customRuleHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(AV.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.transcription=n.string();continue;case 4:if(34!==e)break;o.diffs.push(wM.decode(n,n.uint32()));continue;case 5:if(42!==e)break;o.customRuleHighlights.push(UM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OV.$type,text:GV(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>AV.fromJSON(e))):[],transcription:GV(e.transcription)?globalThis.String(e.transcription):"",diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>wM.fromJSON(e))):[],customRuleHighlights:globalThis.Array.isArray(null==e?void 0:e.customRuleHighlights)?e.customRuleHighlights.map((e=>UM.fromJSON(e))):[]}),toJSON(e){var t,n,r;const o={};return""!==e.text&&(o.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(o.glossaryHighlights=e.glossaryHighlights.map((e=>AV.toJSON(e)))),""!==e.transcription&&(o.transcription=e.transcription),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(o.diffs=e.diffs.map((e=>wM.toJSON(e)))),(null===(r=e.customRuleHighlights)||void 0===r?void 0:r.length)&&(o.customRuleHighlights=e.customRuleHighlights.map((e=>UM.toJSON(e)))),o},create:e=>OV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i;const a={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:"",diffs:[],customRuleHighlights:[]};return a.text=null!==(t=e.text)&&void 0!==t?t:"",a.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>AV.fromPartial(e))))||[],a.transcription=null!==(r=e.transcription)&&void 0!==r?r:"",a.diffs=(null===(o=e.diffs)||void 0===o?void 0:o.map((e=>wM.fromPartial(e))))||[],a.customRuleHighlights=(null===(i=e.customRuleHighlights)||void 0===i?void 0:i.map((e=>UM.fromPartial(e))))||[],a}};const RV={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",encode:(e,t=new iM)=>(void 0!==e.language&&bV.encode(e.language,t.uint32(10).fork()).join(),0!==e.weight&&t.uint32(17).double(e.weight),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=bV.decode(n,n.uint32());continue;case 2:if(17!==e)break;o.weight=n.double();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RV.$type,language:GV(e.language)?bV.fromJSON(e.language):void 0,weight:GV(e.weight)?globalThis.Number(e.weight):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=bV.toJSON(e.language)),0!==e.weight&&(t.weight=e.weight),t},create:e=>RV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};return n.language=void 0!==e.language&&null!==e.language?bV.fromPartial(e.language):void 0,n.weight=null!==(t=e.weight)&&void 0!==t?t:0,n}};const NV={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",encode:(e,t=new iM)=>(void 0!==e.id&&DV.encode(e.id,t.uint32(10).fork()).join(),""!==e.title&&t.uint32(18).string(e.title),""!==e.question&&t.uint32(26).string(e.question),""!==e.category&&t.uint32(34).string(e.category),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=DV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.title=n.string();continue;case 3:if(26!==e)break;o.question=n.string();continue;case 4:if(34!==e)break;o.category=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NV.$type,id:GV(e.id)?DV.fromJSON(e.id):void 0,title:GV(e.title)?globalThis.String(e.title):"",question:GV(e.question)?globalThis.String(e.question):"",category:GV(e.category)?globalThis.String(e.category):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=DV.toJSON(e.id)),""!==e.title&&(t.title=e.title),""!==e.question&&(t.question=e.question),""!==e.category&&(t.category=e.category),t},create:e=>NV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};return o.id=void 0!==e.id&&null!==e.id?DV.fromPartial(e.id):void 0,o.title=null!==(t=e.title)&&void 0!==t?t:"",o.question=null!==(n=e.question)&&void 0!==n?n:"",o.category=null!==(r=e.category)&&void 0!==r?r:"",o}};const PV={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",encode:(e,t=new iM)=>(""!==e.answer&&t.uint32(10).string(e.answer),!1!==e.isDefault&&t.uint32(16).bool(e.isDefault),void 0!==e.hint&&t.uint32(26).string(e.hint),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1,hint:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue;case 2:if(16!==e)break;o.isDefault=n.bool();continue;case 3:if(26!==e)break;o.hint=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PV.$type,answer:GV(e.answer)?globalThis.String(e.answer):"",isDefault:!!GV(e.isDefault)&&globalThis.Boolean(e.isDefault),hint:GV(e.hint)?globalThis.String(e.hint):void 0}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),!1!==e.isDefault&&(t.isDefault=e.isDefault),void 0!==e.hint&&(t.hint=e.hint),t},create:e=>PV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1,hint:void 0};return o.answer=null!==(t=e.answer)&&void 0!==t?t:"",o.isDefault=null!==(n=e.isDefault)&&void 0!==n&&n,o.hint=null!==(r=e.hint)&&void 0!==r?r:void 0,o}};const LV={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",encode(e,t=new iM){void 0!==e.question&&NV.encode(e.question,t.uint32(10).fork()).join();for(const n of e.answers)PV.encode(n,t.uint32(18).fork()).join();return void 0!==e.language&&t.uint32(26).string(e.language),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[],language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.question=NV.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.answers.push(PV.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.language=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LV.$type,question:GV(e.question)?NV.fromJSON(e.question):void 0,answers:globalThis.Array.isArray(null==e?void 0:e.answers)?e.answers.map((e=>PV.fromJSON(e))):[],language:GV(e.language)?globalThis.String(e.language):void 0}),toJSON(e){var t;const n={};return void 0!==e.question&&(n.question=NV.toJSON(e.question)),(null===(t=e.answers)||void 0===t?void 0:t.length)&&(n.answers=e.answers.map((e=>PV.toJSON(e)))),void 0!==e.language&&(n.language=e.language),n},create:e=>LV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[],language:void 0};return r.question=void 0!==e.question&&null!==e.question?NV.fromPartial(e.question):void 0,r.answers=(null===(t=e.answers)||void 0===t?void 0:t.map((e=>PV.fromPartial(e))))||[],r.language=null!==(n=e.language)&&void 0!==n?n:void 0,r}};const CV={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",encode:(e,t=new iM)=>(""!==e.answer&&t.uint32(10).string(e.answer),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CV.$type,answer:GV(e.answer)?globalThis.String(e.answer):""}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),t},create:e=>CV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};return n.answer=null!==(t=e.answer)&&void 0!==t?t:"",n}};const xV={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>xV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const kV={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemoryFlowId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemoryFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>kV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.UpdateTranslationMemoryFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const DV={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>DV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const UV={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",encode:(e,t=new iM)=>(""!==e.errorCode&&t.uint32(10).string(e.errorCode),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",errorCode:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.errorCode=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UV.$type,errorCode:GV(e.errorCode)?globalThis.String(e.errorCode):""}),toJSON(e){const t={};return""!==e.errorCode&&(t.errorCode=e.errorCode),t},create:e=>UV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",errorCode:""};return n.errorCode=null!==(t=e.errorCode)&&void 0!==t?t:"",n}};const MV={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MV.$type,value:GV(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>MV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};function GV(e){return null!=e}var $V,VV,FV;function jV(e){switch(e){case 0:case"FIELD_NAME_UNSPECIFIED":return $V.UNSPECIFIED;case 1:case"FIELD_NAME_TRANSLATOR_SOURCE_TEXT":return $V.TRANSLATOR_SOURCE_TEXT;case 2:case"FIELD_NAME_TRANSLATOR_TARGET_TEXT":return $V.TRANSLATOR_TARGET_TEXT;case 4:case"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT":return $V.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT;case 5:case"FIELD_NAME_WRITE_SOURCE_TEXT":return $V.WRITE_SOURCE_TEXT;case 6:case"FIELD_NAME_WRITE_TARGET_TEXT":return $V.WRITE_TARGET_TEXT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function WV(e){switch(e){case $V.UNSPECIFIED:return"FIELD_NAME_UNSPECIFIED";case $V.TRANSLATOR_SOURCE_TEXT:return"FIELD_NAME_TRANSLATOR_SOURCE_TEXT";case $V.TRANSLATOR_TARGET_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TEXT";case $V.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT";case $V.WRITE_SOURCE_TEXT:return"FIELD_NAME_WRITE_SOURCE_TEXT";case $V.WRITE_TARGET_TEXT:return"FIELD_NAME_WRITE_TARGET_TEXT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function HV(e){switch(e){case 0:case"PROPERTY_NAME_UNSPECIFIED":return VV.UNSPECIFIED;case 1:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES":return VV.TRANSLATOR_SOURCE_LANGUAGES;case 2:case"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES":return VV.TRANSLATOR_TARGET_LANGUAGES;case 3:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE":return VV.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE;case 4:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE":return VV.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE;case 5:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE":return VV.TRANSLATOR_REQUESTED_TARGET_LANGUAGE;case 7:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES":return VV.TRANSLATOR_FORMALITY_MODES;case 8:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE":return VV.TRANSLATOR_FORMALITY_MODE;case 9:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT":return VV.TRANSLATOR_GLOSSARY_SUPPORT;case 10:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST":return VV.TRANSLATOR_GLOSSARY_LIST;case 12:case"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION":return VV.TRANSLATOR_TEXT_DIRECTION;case 13:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS":return VV.TRANSLATOR_GLOSSARY_SUGGESTIONS;case 14:case"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH":return VV.TRANSLATOR_MAXIMUM_TEXT_LENGTH;case 15:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS":return VV.TRANSLATOR_LANGUAGE_MODELS;case 16:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL":return VV.TRANSLATOR_LANGUAGE_MODEL;case 17:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID":return VV.TRANSLATOR_GLOSSARY_ID;case 18:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE":return VV.TRANSLATOR_CALCULATED_TARGET_LANGUAGE;case 19:case"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE":return VV.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE;case 20:case"PROPERTY_NAME_WRITE_LANGUAGES":return VV.WRITE_LANGUAGES;case 21:case"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE":return VV.WRITE_REQUESTED_LANGUAGE;case 22:case"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE":return VV.WRITE_CALCULATED_LANGUAGE;case 23:case"PROPERTY_NAME_WRITE_STYLE_VARIANTS":return VV.WRITE_STYLE_VARIANTS;case 24:case"PROPERTY_NAME_WRITE_STYLE_VARIANT":return VV.WRITE_STYLE_VARIANT;case 25:case"PROPERTY_NAME_WRITE_GLOSSARY_ID":return VV.WRITE_GLOSSARY_ID;case 26:case"PROPERTY_NAME_WRITE_GLOSSARY_LIST":return VV.WRITE_GLOSSARY_LIST;case 27:case"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT":return VV.WRITE_GLOSSARY_SUPPORT;case 28:case"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH":return VV.WRITE_MAXIMUM_TEXT_LENGTH;case 29:case"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE":return VV.WRITE_UNSUPPORTED_LANGUAGE;case 30:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS":return VV.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS;case 31:case"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES":return VV.WRITE_GLOSSARY_LANGUAGES;case 32:case"PROPERTY_NAME_WRITE_STYLE_GUIDE_SUPPORT":return VV.WRITE_STYLE_GUIDE_SUPPORT;case 33:case"PROPERTY_NAME_WRITE_STYLE_GUIDE_ID":return VV.WRITE_STYLE_GUIDE_ID;case 34:case"PROPERTY_NAME_WRITE_TEMPLATE_ADAPTATION_TEMPLATES":return VV.WRITE_TEMPLATE_ADAPTATION_TEMPLATES;case 35:case"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_SUPPORT":return VV.TRANSLATOR_STYLE_GUIDE_SUPPORT;case 36:case"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_ID":return VV.TRANSLATOR_STYLE_GUIDE_ID;case 37:case"PROPERTY_NAME_TRANSLATOR_INTERFACE_LANGUAGE":return VV.TRANSLATOR_INTERFACE_LANGUAGE;case 38:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL_PREFERENCES":return VV.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES;case 39:case"PROPERTY_NAME_TRANSLATOR_FREE_TEXT_PROMPT_LIST":return VV.TRANSLATOR_FREE_TEXT_PROMPT_LIST;case 40:case"PROPERTY_NAME_WRITE_FREE_TEXT_PROMPT_LIST":return VV.WRITE_FREE_TEXT_PROMPT_LIST;case 41:case"PROPERTY_NAME_WRITE_INLINE_SUGGESTIONS_LOADING":return VV.WRITE_INLINE_SUGGESTIONS_LOADING;case 42:case"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY_SUPPORT":return VV.WRITE_CORRECTIONS_ONLY_SUPPORT;case 43:case"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY":return VV.WRITE_CORRECTIONS_ONLY;case 44:case"PROPERTY_NAME_TRANSLATOR_RTF_SUPPORT":return VV.TRANSLATOR_RTF_SUPPORT;case 45:case"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANTS":return VV.TRANSLATOR_STYLE_VARIANTS;case 46:case"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANT":return VV.TRANSLATOR_STYLE_VARIANT;case 47:case"PROPERTY_NAME_WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT":return VV.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT;case 48:case"PROPERTY_NAME_TRANSLATOR_TRANSLATION_MEMORY_LIST":return VV.TRANSLATOR_TRANSLATION_MEMORY_LIST;case 49:case"PROPERTY_NAME_TRANSLATOR_SELECTED_TRANSLATION_MEMORY":return VV.TRANSLATOR_SELECTED_TRANSLATION_MEMORY;case 50:case"PROPERTY_NAME_TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS":return VV.TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS;case 51:case"PROPERTY_NAME_TRANSLATOR_CUSTOMIZATIONS":return VV.TRANSLATOR_CUSTOMIZATIONS;case 52:case"PROPERTY_NAME_WRITE_CUSTOMIZATIONS":return VV.WRITE_CUSTOMIZATIONS;case 53:case"PROPERTY_NAME_TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED":return VV.TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}function qV(e){switch(e){case 0:case"SESSION_MODE_UNSPECIFIED":return FV.UNSPECIFIED;case 1:case"SESSION_MODE_TRANSLATOR":return FV.TRANSLATOR;case 2:case"SESSION_MODE_WRITE":return FV.WRITE;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_TEXT=1]="TRANSLATOR_SOURCE_TEXT",e[e.TRANSLATOR_TARGET_TEXT=2]="TRANSLATOR_TARGET_TEXT",e[e.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT=4]="TRANSLATOR_TARGET_TRANSCRIPTION_TEXT",e[e.WRITE_SOURCE_TEXT=5]="WRITE_SOURCE_TEXT",e[e.WRITE_TARGET_TEXT=6]="WRITE_TARGET_TEXT"}($V||($V={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_LANGUAGES=1]="TRANSLATOR_SOURCE_LANGUAGES",e[e.TRANSLATOR_TARGET_LANGUAGES=2]="TRANSLATOR_TARGET_LANGUAGES",e[e.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE=3]="TRANSLATOR_REQUESTED_SOURCE_LANGUAGE",e[e.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE=4]="TRANSLATOR_CALCULATED_SOURCE_LANGUAGE",e[e.TRANSLATOR_REQUESTED_TARGET_LANGUAGE=5]="TRANSLATOR_REQUESTED_TARGET_LANGUAGE",e[e.TRANSLATOR_FORMALITY_MODES=7]="TRANSLATOR_FORMALITY_MODES",e[e.TRANSLATOR_FORMALITY_MODE=8]="TRANSLATOR_FORMALITY_MODE",e[e.TRANSLATOR_GLOSSARY_SUPPORT=9]="TRANSLATOR_GLOSSARY_SUPPORT",e[e.TRANSLATOR_GLOSSARY_LIST=10]="TRANSLATOR_GLOSSARY_LIST",e[e.TRANSLATOR_TEXT_DIRECTION=12]="TRANSLATOR_TEXT_DIRECTION",e[e.TRANSLATOR_GLOSSARY_SUGGESTIONS=13]="TRANSLATOR_GLOSSARY_SUGGESTIONS",e[e.TRANSLATOR_MAXIMUM_TEXT_LENGTH=14]="TRANSLATOR_MAXIMUM_TEXT_LENGTH",e[e.TRANSLATOR_LANGUAGE_MODELS=15]="TRANSLATOR_LANGUAGE_MODELS",e[e.TRANSLATOR_LANGUAGE_MODEL=16]="TRANSLATOR_LANGUAGE_MODEL",e[e.TRANSLATOR_GLOSSARY_ID=17]="TRANSLATOR_GLOSSARY_ID",e[e.TRANSLATOR_CALCULATED_TARGET_LANGUAGE=18]="TRANSLATOR_CALCULATED_TARGET_LANGUAGE",e[e.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE=19]="TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE",e[e.WRITE_LANGUAGES=20]="WRITE_LANGUAGES",e[e.WRITE_REQUESTED_LANGUAGE=21]="WRITE_REQUESTED_LANGUAGE",e[e.WRITE_CALCULATED_LANGUAGE=22]="WRITE_CALCULATED_LANGUAGE",e[e.WRITE_STYLE_VARIANTS=23]="WRITE_STYLE_VARIANTS",e[e.WRITE_STYLE_VARIANT=24]="WRITE_STYLE_VARIANT",e[e.WRITE_GLOSSARY_ID=25]="WRITE_GLOSSARY_ID",e[e.WRITE_GLOSSARY_LIST=26]="WRITE_GLOSSARY_LIST",e[e.WRITE_GLOSSARY_SUPPORT=27]="WRITE_GLOSSARY_SUPPORT",e[e.WRITE_MAXIMUM_TEXT_LENGTH=28]="WRITE_MAXIMUM_TEXT_LENGTH",e[e.WRITE_UNSUPPORTED_LANGUAGE=29]="WRITE_UNSUPPORTED_LANGUAGE",e[e.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS=30]="TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS",e[e.WRITE_GLOSSARY_LANGUAGES=31]="WRITE_GLOSSARY_LANGUAGES",e[e.WRITE_STYLE_GUIDE_SUPPORT=32]="WRITE_STYLE_GUIDE_SUPPORT",e[e.WRITE_STYLE_GUIDE_ID=33]="WRITE_STYLE_GUIDE_ID",e[e.WRITE_TEMPLATE_ADAPTATION_TEMPLATES=34]="WRITE_TEMPLATE_ADAPTATION_TEMPLATES",e[e.TRANSLATOR_STYLE_GUIDE_SUPPORT=35]="TRANSLATOR_STYLE_GUIDE_SUPPORT",e[e.TRANSLATOR_STYLE_GUIDE_ID=36]="TRANSLATOR_STYLE_GUIDE_ID",e[e.TRANSLATOR_INTERFACE_LANGUAGE=37]="TRANSLATOR_INTERFACE_LANGUAGE",e[e.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES=38]="TRANSLATOR_LANGUAGE_MODEL_PREFERENCES",e[e.TRANSLATOR_FREE_TEXT_PROMPT_LIST=39]="TRANSLATOR_FREE_TEXT_PROMPT_LIST",e[e.WRITE_FREE_TEXT_PROMPT_LIST=40]="WRITE_FREE_TEXT_PROMPT_LIST",e[e.WRITE_INLINE_SUGGESTIONS_LOADING=41]="WRITE_INLINE_SUGGESTIONS_LOADING",e[e.WRITE_CORRECTIONS_ONLY_SUPPORT=42]="WRITE_CORRECTIONS_ONLY_SUPPORT",e[e.WRITE_CORRECTIONS_ONLY=43]="WRITE_CORRECTIONS_ONLY",e[e.TRANSLATOR_RTF_SUPPORT=44]="TRANSLATOR_RTF_SUPPORT",e[e.TRANSLATOR_STYLE_VARIANTS=45]="TRANSLATOR_STYLE_VARIANTS",e[e.TRANSLATOR_STYLE_VARIANT=46]="TRANSLATOR_STYLE_VARIANT",e[e.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT=47]="WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT",e[e.TRANSLATOR_TRANSLATION_MEMORY_LIST=48]="TRANSLATOR_TRANSLATION_MEMORY_LIST",e[e.TRANSLATOR_SELECTED_TRANSLATION_MEMORY=49]="TRANSLATOR_SELECTED_TRANSLATION_MEMORY",e[e.TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS=50]="TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS",e[e.TRANSLATOR_CUSTOMIZATIONS=51]="TRANSLATOR_CUSTOMIZATIONS",e[e.WRITE_CUSTOMIZATIONS=52]="WRITE_CUSTOMIZATIONS",e[e.TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED=53]="TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED"}(VV||(VV={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR=1]="TRANSLATOR",e[e.WRITE=2]="WRITE"}(FV||(FV={}));const BV={$type:"deepl.pb.interactive_text_api.TextChangeOperation",encode:(e,t=new iM)=>(void 0!==e.range&&AM.encode(e.range,t.uint32(10).fork()).join(),""!==e.text&&t.uint32(18).string(e.text),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.range=AM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BV.$type,range:_F(e.range)?AM.fromJSON(e.range):void 0,text:_F(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return void 0!==e.range&&(t.range=AM.toJSON(e.range)),""!==e.text&&(t.text=e.text),t},create:e=>BV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};return n.range=void 0!==e.range&&null!==e.range?AM.fromPartial(e.range):void 0,n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const JV={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",encode:(e,t=new iM)=>(void 0!==e.annotationId&&vM.encode(e.annotationId,t.uint32(10).fork()).join(),void 0!==e.range&&AM.encode(e.range,t.uint32(18).fork()).join(),void 0!==e.textUnitPayload&&QG.encode(e.textUnitPayload,t.uint32(26).fork()).join(),void 0!==e.requestWordAlternativesPayload&&IM.encode(e.requestWordAlternativesPayload,t.uint32(34).fork()).join(),void 0!==e.providedWordAlternativesPayload&&yM.encode(e.providedWordAlternativesPayload,t.uint32(42).fork()).join(),void 0!==e.selectWordAlternativePayload&&BG.encode(e.selectWordAlternativePayload,t.uint32(50).fork()).join(),void 0!==e.translatorGlossaryReplacementPayload&&w$.encode(e.translatorGlossaryReplacementPayload,t.uint32(58).fork()).join(),void 0!==e.requestTextUnitAlternativesPayload&&EM.encode(e.requestTextUnitAlternativesPayload,t.uint32(66).fork()).join(),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&O$.encode(e.translatorProvidedTextUnitAlternativesPayload,t.uint32(74).fork()).join(),void 0!==e.selectTextUnitAlternativePayload&&HG.encode(e.selectTextUnitAlternativePayload,t.uint32(82).fork()).join(),void 0!==e.translatorRequestAutocompletionPayload&&I$.encode(e.translatorRequestAutocompletionPayload,t.uint32(90).fork()).join(),void 0!==e.translatorProvidedAutocompletionPayload&&A$.encode(e.translatorProvidedAutocompletionPayload,t.uint32(98).fork()).join(),void 0!==e.translatorSelectAutocompletionPayload&&b$.encode(e.translatorSelectAutocompletionPayload,t.uint32(106).fork()).join(),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&R$.encode(e.translatorProvidedAutomaticTextUnitAlternativesPayload,t.uint32(114).fork()).join(),void 0!==e.selectAutomaticTextUnitAlternativePayload&&jG.encode(e.selectAutomaticTextUnitAlternativePayload,t.uint32(122).fork()).join(),void 0!==e.writeDiffUnitPayload&&zM.encode(e.writeDiffUnitPayload,t.uint32(130).fork()).join(),void 0!==e.textFormattingPayload&&YG.encode(e.textFormattingPayload,t.uint32(138).fork()).join(),void 0!==e.writeProvidedTextUnitAlternativesPayload&&YM.encode(e.writeProvidedTextUnitAlternativesPayload,t.uint32(146).fork()).join(),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&XM.encode(e.writeProvidedAutomaticTextUnitAlternativesPayload,t.uint32(154).fork()).join(),void 0!==e.translatorRequestClarifyPayload&&N$.encode(e.translatorRequestClarifyPayload,t.uint32(162).fork()).join(),void 0!==e.translatorProvidedClarifyQuestionPayload&&C$.encode(e.translatorProvidedClarifyQuestionPayload,t.uint32(170).fork()).join(),void 0!==e.translatorProvidedClarifyHighlightPayload&&L$.encode(e.translatorProvidedClarifyHighlightPayload,t.uint32(178).fork()).join(),void 0!==e.translatorSelectClarifyAnswerPayload&&x$.encode(e.translatorSelectClarifyAnswerPayload,t.uint32(186).fork()).join(),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&AG.encode(e.writeRequestChangeStyleAlternativesAnnotationPayload,t.uint32(194).fork()).join(),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&wG.encode(e.writeProvidedChangeStyleAlternativesAnnotationPayload,t.uint32(202).fork()).join(),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&OG.encode(e.writeSelectChangeStyleAlternativeAnnotationPayload,t.uint32(210).fork()).join(),void 0!==e.translatorClarifyStatusPayload&&P$.encode(e.translatorClarifyStatusPayload,t.uint32(218).fork()).join(),void 0!==e.customRuleAnnotationPayload&&MM.encode(e.customRuleAnnotationPayload,t.uint32(226).fork()).join(),void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&LG.encode(e.writeRequestTemplateAdaptationAnnotationPayload,t.uint32(234).fork()).join(),void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&xG.encode(e.writeProvidedTemplateAdaptationAnnotationPayload,t.uint32(242).fork()).join(),void 0!==e.providedWordAlternativeHighlightPayload&&mM.encode(e.providedWordAlternativeHighlightPayload,t.uint32(250).fork()).join(),void 0!==e.writeInlineSuggestionAnnotationPayload&&DG.encode(e.writeInlineSuggestionAnnotationPayload,t.uint32(258).fork()).join(),void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&UG.encode(e.writeInlineSuggestionSpanAnnotationPayload,t.uint32(266).fork()).join(),void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&MG.encode(e.writeActOnInlineSuggestionAnnotationPayload,t.uint32(274).fork()).join(),void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&GG.encode(e.writeInlineSuggestionsTextUnitStateAnnotationPayload,t.uint32(282).fork()).join(),void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&$G.encode(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload,t.uint32(290).fork()).join(),void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&VG.encode(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload,t.uint32(298).fork()).join(),void 0!==e.translatorRequestRephraseTargetTextAnnotationPayload&&k$.encode(e.translatorRequestRephraseTargetTextAnnotationPayload,t.uint32(306).fork()).join(),void 0!==e.translationMemoryAnnotationPayload&&n$.encode(e.translationMemoryAnnotationPayload,t.uint32(314).fork()).join(),void 0!==e.translatorProvidedHypothesesComparisonStateAnnotationPayload&&U$.encode(e.translatorProvidedHypothesesComparisonStateAnnotationPayload,t.uint32(322).fork()).join(),void 0!==e.translatorSelectHypothesesComparisonVariantAnnotationPayload&&M$.encode(e.translatorSelectHypothesesComparisonVariantAnnotationPayload,t.uint32(330).fork()).join(),void 0!==e.translatorSkipHypothesesComparisonAnnotationPayload&&G$.encode(e.translatorSkipHypothesesComparisonAnnotationPayload,t.uint32(338).fork()).join(),void 0!==e.translationMemorySegmentAnnotationPayload&&l$.encode(e.translationMemorySegmentAnnotationPayload,t.uint32(346).fork()).join(),void 0!==e.translatorUpdateTranslationMemorySegmentsAnnotationPayload&&$$.encode(e.translatorUpdateTranslationMemorySegmentsAnnotationPayload,t.uint32(354).fork()).join(),void 0!==e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload&&V$.encode(e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload,t.uint32(362).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0,translatorClarifyStatusPayload:void 0,customRuleAnnotationPayload:void 0,writeRequestTemplateAdaptationAnnotationPayload:void 0,writeProvidedTemplateAdaptationAnnotationPayload:void 0,providedWordAlternativeHighlightPayload:void 0,writeInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionSpanAnnotationPayload:void 0,writeActOnInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:void 0,translatorRequestRephraseTargetTextAnnotationPayload:void 0,translationMemoryAnnotationPayload:void 0,translatorProvidedHypothesesComparisonStateAnnotationPayload:void 0,translatorSelectHypothesesComparisonVariantAnnotationPayload:void 0,translatorSkipHypothesesComparisonAnnotationPayload:void 0,translationMemorySegmentAnnotationPayload:void 0,translatorUpdateTranslationMemorySegmentsAnnotationPayload:void 0,translatorUpdateTranslationMemorySegmentsResultAnnotationPayload:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=vM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.range=AM.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.textUnitPayload=QG.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.requestWordAlternativesPayload=IM.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.providedWordAlternativesPayload=yM.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.selectWordAlternativePayload=BG.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorGlossaryReplacementPayload=w$.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.requestTextUnitAlternativesPayload=EM.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorProvidedTextUnitAlternativesPayload=O$.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.selectTextUnitAlternativePayload=HG.decode(n,n.uint32());continue;case 11:if(90!==e)break;o.translatorRequestAutocompletionPayload=I$.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorProvidedAutocompletionPayload=A$.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorSelectAutocompletionPayload=b$.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorProvidedAutomaticTextUnitAlternativesPayload=R$.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.selectAutomaticTextUnitAlternativePayload=jG.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.writeDiffUnitPayload=zM.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.textFormattingPayload=YG.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.writeProvidedTextUnitAlternativesPayload=YM.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.writeProvidedAutomaticTextUnitAlternativesPayload=XM.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.translatorRequestClarifyPayload=N$.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.translatorProvidedClarifyQuestionPayload=C$.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.translatorProvidedClarifyHighlightPayload=L$.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.translatorSelectClarifyAnswerPayload=x$.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeRequestChangeStyleAlternativesAnnotationPayload=AG.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeProvidedChangeStyleAlternativesAnnotationPayload=wG.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeSelectChangeStyleAlternativeAnnotationPayload=OG.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.translatorClarifyStatusPayload=P$.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.customRuleAnnotationPayload=MM.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeRequestTemplateAdaptationAnnotationPayload=LG.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.writeProvidedTemplateAdaptationAnnotationPayload=xG.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.providedWordAlternativeHighlightPayload=mM.decode(n,n.uint32());continue;case 32:if(258!==e)break;o.writeInlineSuggestionAnnotationPayload=DG.decode(n,n.uint32());continue;case 33:if(266!==e)break;o.writeInlineSuggestionSpanAnnotationPayload=UG.decode(n,n.uint32());continue;case 34:if(274!==e)break;o.writeActOnInlineSuggestionAnnotationPayload=MG.decode(n,n.uint32());continue;case 35:if(282!==e)break;o.writeInlineSuggestionsTextUnitStateAnnotationPayload=GG.decode(n,n.uint32());continue;case 36:if(290!==e)break;o.writeRequestInlineSuggestionImprovedTextAnnotationPayload=$G.decode(n,n.uint32());continue;case 37:if(298!==e)break;o.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=VG.decode(n,n.uint32());continue;case 38:if(306!==e)break;o.translatorRequestRephraseTargetTextAnnotationPayload=k$.decode(n,n.uint32());continue;case 39:if(314!==e)break;o.translationMemoryAnnotationPayload=n$.decode(n,n.uint32());continue;case 40:if(322!==e)break;o.translatorProvidedHypothesesComparisonStateAnnotationPayload=U$.decode(n,n.uint32());continue;case 41:if(330!==e)break;o.translatorSelectHypothesesComparisonVariantAnnotationPayload=M$.decode(n,n.uint32());continue;case 42:if(338!==e)break;o.translatorSkipHypothesesComparisonAnnotationPayload=G$.decode(n,n.uint32());continue;case 43:if(346!==e)break;o.translationMemorySegmentAnnotationPayload=l$.decode(n,n.uint32());continue;case 44:if(354!==e)break;o.translatorUpdateTranslationMemorySegmentsAnnotationPayload=$$.decode(n,n.uint32());continue;case 45:if(362!==e)break;o.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload=V$.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JV.$type,annotationId:_F(e.annotationId)?vM.fromJSON(e.annotationId):void 0,range:_F(e.range)?AM.fromJSON(e.range):void 0,textUnitPayload:_F(e.textUnitPayload)?QG.fromJSON(e.textUnitPayload):void 0,requestWordAlternativesPayload:_F(e.requestWordAlternativesPayload)?IM.fromJSON(e.requestWordAlternativesPayload):void 0,providedWordAlternativesPayload:_F(e.providedWordAlternativesPayload)?yM.fromJSON(e.providedWordAlternativesPayload):void 0,selectWordAlternativePayload:_F(e.selectWordAlternativePayload)?BG.fromJSON(e.selectWordAlternativePayload):void 0,translatorGlossaryReplacementPayload:_F(e.translatorGlossaryReplacementPayload)?w$.fromJSON(e.translatorGlossaryReplacementPayload):void 0,requestTextUnitAlternativesPayload:_F(e.requestTextUnitAlternativesPayload)?EM.fromJSON(e.requestTextUnitAlternativesPayload):void 0,translatorProvidedTextUnitAlternativesPayload:_F(e.translatorProvidedTextUnitAlternativesPayload)?O$.fromJSON(e.translatorProvidedTextUnitAlternativesPayload):void 0,selectTextUnitAlternativePayload:_F(e.selectTextUnitAlternativePayload)?HG.fromJSON(e.selectTextUnitAlternativePayload):void 0,translatorRequestAutocompletionPayload:_F(e.translatorRequestAutocompletionPayload)?I$.fromJSON(e.translatorRequestAutocompletionPayload):void 0,translatorProvidedAutocompletionPayload:_F(e.translatorProvidedAutocompletionPayload)?A$.fromJSON(e.translatorProvidedAutocompletionPayload):void 0,translatorSelectAutocompletionPayload:_F(e.translatorSelectAutocompletionPayload)?b$.fromJSON(e.translatorSelectAutocompletionPayload):void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:_F(e.translatorProvidedAutomaticTextUnitAlternativesPayload)?R$.fromJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,selectAutomaticTextUnitAlternativePayload:_F(e.selectAutomaticTextUnitAlternativePayload)?jG.fromJSON(e.selectAutomaticTextUnitAlternativePayload):void 0,writeDiffUnitPayload:_F(e.writeDiffUnitPayload)?zM.fromJSON(e.writeDiffUnitPayload):void 0,textFormattingPayload:_F(e.textFormattingPayload)?YG.fromJSON(e.textFormattingPayload):void 0,writeProvidedTextUnitAlternativesPayload:_F(e.writeProvidedTextUnitAlternativesPayload)?YM.fromJSON(e.writeProvidedTextUnitAlternativesPayload):void 0,writeProvidedAutomaticTextUnitAlternativesPayload:_F(e.writeProvidedAutomaticTextUnitAlternativesPayload)?XM.fromJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,translatorRequestClarifyPayload:_F(e.translatorRequestClarifyPayload)?N$.fromJSON(e.translatorRequestClarifyPayload):void 0,translatorProvidedClarifyQuestionPayload:_F(e.translatorProvidedClarifyQuestionPayload)?C$.fromJSON(e.translatorProvidedClarifyQuestionPayload):void 0,translatorProvidedClarifyHighlightPayload:_F(e.translatorProvidedClarifyHighlightPayload)?L$.fromJSON(e.translatorProvidedClarifyHighlightPayload):void 0,translatorSelectClarifyAnswerPayload:_F(e.translatorSelectClarifyAnswerPayload)?x$.fromJSON(e.translatorSelectClarifyAnswerPayload):void 0,writeRequestChangeStyleAlternativesAnnotationPayload:_F(e.writeRequestChangeStyleAlternativesAnnotationPayload)?AG.fromJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:_F(e.writeProvidedChangeStyleAlternativesAnnotationPayload)?wG.fromJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,writeSelectChangeStyleAlternativeAnnotationPayload:_F(e.writeSelectChangeStyleAlternativeAnnotationPayload)?OG.fromJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,translatorClarifyStatusPayload:_F(e.translatorClarifyStatusPayload)?P$.fromJSON(e.translatorClarifyStatusPayload):void 0,customRuleAnnotationPayload:_F(e.customRuleAnnotationPayload)?MM.fromJSON(e.customRuleAnnotationPayload):void 0,writeRequestTemplateAdaptationAnnotationPayload:_F(e.writeRequestTemplateAdaptationAnnotationPayload)?LG.fromJSON(e.writeRequestTemplateAdaptationAnnotationPayload):void 0,writeProvidedTemplateAdaptationAnnotationPayload:_F(e.writeProvidedTemplateAdaptationAnnotationPayload)?xG.fromJSON(e.writeProvidedTemplateAdaptationAnnotationPayload):void 0,providedWordAlternativeHighlightPayload:_F(e.providedWordAlternativeHighlightPayload)?mM.fromJSON(e.providedWordAlternativeHighlightPayload):void 0,writeInlineSuggestionAnnotationPayload:_F(e.writeInlineSuggestionAnnotationPayload)?DG.fromJSON(e.writeInlineSuggestionAnnotationPayload):void 0,writeInlineSuggestionSpanAnnotationPayload:_F(e.writeInlineSuggestionSpanAnnotationPayload)?UG.fromJSON(e.writeInlineSuggestionSpanAnnotationPayload):void 0,writeActOnInlineSuggestionAnnotationPayload:_F(e.writeActOnInlineSuggestionAnnotationPayload)?MG.fromJSON(e.writeActOnInlineSuggestionAnnotationPayload):void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:_F(e.writeInlineSuggestionsTextUnitStateAnnotationPayload)?GG.fromJSON(e.writeInlineSuggestionsTextUnitStateAnnotationPayload):void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:_F(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload)?$G.fromJSON(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload):void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:_F(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload)?VG.fromJSON(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload):void 0,translatorRequestRephraseTargetTextAnnotationPayload:_F(e.translatorRequestRephraseTargetTextAnnotationPayload)?k$.fromJSON(e.translatorRequestRephraseTargetTextAnnotationPayload):void 0,translationMemoryAnnotationPayload:_F(e.translationMemoryAnnotationPayload)?n$.fromJSON(e.translationMemoryAnnotationPayload):void 0,translatorProvidedHypothesesComparisonStateAnnotationPayload:_F(e.translatorProvidedHypothesesComparisonStateAnnotationPayload)?U$.fromJSON(e.translatorProvidedHypothesesComparisonStateAnnotationPayload):void 0,translatorSelectHypothesesComparisonVariantAnnotationPayload:_F(e.translatorSelectHypothesesComparisonVariantAnnotationPayload)?M$.fromJSON(e.translatorSelectHypothesesComparisonVariantAnnotationPayload):void 0,translatorSkipHypothesesComparisonAnnotationPayload:_F(e.translatorSkipHypothesesComparisonAnnotationPayload)?G$.fromJSON(e.translatorSkipHypothesesComparisonAnnotationPayload):void 0,translationMemorySegmentAnnotationPayload:_F(e.translationMemorySegmentAnnotationPayload)?l$.fromJSON(e.translationMemorySegmentAnnotationPayload):void 0,translatorUpdateTranslationMemorySegmentsAnnotationPayload:_F(e.translatorUpdateTranslationMemorySegmentsAnnotationPayload)?$$.fromJSON(e.translatorUpdateTranslationMemorySegmentsAnnotationPayload):void 0,translatorUpdateTranslationMemorySegmentsResultAnnotationPayload:_F(e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload)?V$.fromJSON(e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=vM.toJSON(e.annotationId)),void 0!==e.range&&(t.range=AM.toJSON(e.range)),void 0!==e.textUnitPayload&&(t.textUnitPayload=QG.toJSON(e.textUnitPayload)),void 0!==e.requestWordAlternativesPayload&&(t.requestWordAlternativesPayload=IM.toJSON(e.requestWordAlternativesPayload)),void 0!==e.providedWordAlternativesPayload&&(t.providedWordAlternativesPayload=yM.toJSON(e.providedWordAlternativesPayload)),void 0!==e.selectWordAlternativePayload&&(t.selectWordAlternativePayload=BG.toJSON(e.selectWordAlternativePayload)),void 0!==e.translatorGlossaryReplacementPayload&&(t.translatorGlossaryReplacementPayload=w$.toJSON(e.translatorGlossaryReplacementPayload)),void 0!==e.requestTextUnitAlternativesPayload&&(t.requestTextUnitAlternativesPayload=EM.toJSON(e.requestTextUnitAlternativesPayload)),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&(t.translatorProvidedTextUnitAlternativesPayload=O$.toJSON(e.translatorProvidedTextUnitAlternativesPayload)),void 0!==e.selectTextUnitAlternativePayload&&(t.selectTextUnitAlternativePayload=HG.toJSON(e.selectTextUnitAlternativePayload)),void 0!==e.translatorRequestAutocompletionPayload&&(t.translatorRequestAutocompletionPayload=I$.toJSON(e.translatorRequestAutocompletionPayload)),void 0!==e.translatorProvidedAutocompletionPayload&&(t.translatorProvidedAutocompletionPayload=A$.toJSON(e.translatorProvidedAutocompletionPayload)),void 0!==e.translatorSelectAutocompletionPayload&&(t.translatorSelectAutocompletionPayload=b$.toJSON(e.translatorSelectAutocompletionPayload)),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&(t.translatorProvidedAutomaticTextUnitAlternativesPayload=R$.toJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.selectAutomaticTextUnitAlternativePayload&&(t.selectAutomaticTextUnitAlternativePayload=jG.toJSON(e.selectAutomaticTextUnitAlternativePayload)),void 0!==e.writeDiffUnitPayload&&(t.writeDiffUnitPayload=zM.toJSON(e.writeDiffUnitPayload)),void 0!==e.textFormattingPayload&&(t.textFormattingPayload=YG.toJSON(e.textFormattingPayload)),void 0!==e.writeProvidedTextUnitAlternativesPayload&&(t.writeProvidedTextUnitAlternativesPayload=YM.toJSON(e.writeProvidedTextUnitAlternativesPayload)),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&(t.writeProvidedAutomaticTextUnitAlternativesPayload=XM.toJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.translatorRequestClarifyPayload&&(t.translatorRequestClarifyPayload=N$.toJSON(e.translatorRequestClarifyPayload)),void 0!==e.translatorProvidedClarifyQuestionPayload&&(t.translatorProvidedClarifyQuestionPayload=C$.toJSON(e.translatorProvidedClarifyQuestionPayload)),void 0!==e.translatorProvidedClarifyHighlightPayload&&(t.translatorProvidedClarifyHighlightPayload=L$.toJSON(e.translatorProvidedClarifyHighlightPayload)),void 0!==e.translatorSelectClarifyAnswerPayload&&(t.translatorSelectClarifyAnswerPayload=x$.toJSON(e.translatorSelectClarifyAnswerPayload)),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&(t.writeRequestChangeStyleAlternativesAnnotationPayload=AG.toJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&(t.writeProvidedChangeStyleAlternativesAnnotationPayload=wG.toJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&(t.writeSelectChangeStyleAlternativeAnnotationPayload=OG.toJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload)),void 0!==e.translatorClarifyStatusPayload&&(t.translatorClarifyStatusPayload=P$.toJSON(e.translatorClarifyStatusPayload)),void 0!==e.customRuleAnnotationPayload&&(t.customRuleAnnotationPayload=MM.toJSON(e.customRuleAnnotationPayload)),void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&(t.writeRequestTemplateAdaptationAnnotationPayload=LG.toJSON(e.writeRequestTemplateAdaptationAnnotationPayload)),void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&(t.writeProvidedTemplateAdaptationAnnotationPayload=xG.toJSON(e.writeProvidedTemplateAdaptationAnnotationPayload)),void 0!==e.providedWordAlternativeHighlightPayload&&(t.providedWordAlternativeHighlightPayload=mM.toJSON(e.providedWordAlternativeHighlightPayload)),void 0!==e.writeInlineSuggestionAnnotationPayload&&(t.writeInlineSuggestionAnnotationPayload=DG.toJSON(e.writeInlineSuggestionAnnotationPayload)),void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&(t.writeInlineSuggestionSpanAnnotationPayload=UG.toJSON(e.writeInlineSuggestionSpanAnnotationPayload)),void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&(t.writeActOnInlineSuggestionAnnotationPayload=MG.toJSON(e.writeActOnInlineSuggestionAnnotationPayload)),void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&(t.writeInlineSuggestionsTextUnitStateAnnotationPayload=GG.toJSON(e.writeInlineSuggestionsTextUnitStateAnnotationPayload)),void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&(t.writeRequestInlineSuggestionImprovedTextAnnotationPayload=$G.toJSON(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload)),void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&(t.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=VG.toJSON(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload)),void 0!==e.translatorRequestRephraseTargetTextAnnotationPayload&&(t.translatorRequestRephraseTargetTextAnnotationPayload=k$.toJSON(e.translatorRequestRephraseTargetTextAnnotationPayload)),void 0!==e.translationMemoryAnnotationPayload&&(t.translationMemoryAnnotationPayload=n$.toJSON(e.translationMemoryAnnotationPayload)),void 0!==e.translatorProvidedHypothesesComparisonStateAnnotationPayload&&(t.translatorProvidedHypothesesComparisonStateAnnotationPayload=U$.toJSON(e.translatorProvidedHypothesesComparisonStateAnnotationPayload)),void 0!==e.translatorSelectHypothesesComparisonVariantAnnotationPayload&&(t.translatorSelectHypothesesComparisonVariantAnnotationPayload=M$.toJSON(e.translatorSelectHypothesesComparisonVariantAnnotationPayload)),void 0!==e.translatorSkipHypothesesComparisonAnnotationPayload&&(t.translatorSkipHypothesesComparisonAnnotationPayload=G$.toJSON(e.translatorSkipHypothesesComparisonAnnotationPayload)),void 0!==e.translationMemorySegmentAnnotationPayload&&(t.translationMemorySegmentAnnotationPayload=l$.toJSON(e.translationMemorySegmentAnnotationPayload)),void 0!==e.translatorUpdateTranslationMemorySegmentsAnnotationPayload&&(t.translatorUpdateTranslationMemorySegmentsAnnotationPayload=$$.toJSON(e.translatorUpdateTranslationMemorySegmentsAnnotationPayload)),void 0!==e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload&&(t.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload=V$.toJSON(e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload)),t},create:e=>JV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0,translatorClarifyStatusPayload:void 0,customRuleAnnotationPayload:void 0,writeRequestTemplateAdaptationAnnotationPayload:void 0,writeProvidedTemplateAdaptationAnnotationPayload:void 0,providedWordAlternativeHighlightPayload:void 0,writeInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionSpanAnnotationPayload:void 0,writeActOnInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:void 0,translatorRequestRephraseTargetTextAnnotationPayload:void 0,translationMemoryAnnotationPayload:void 0,translatorProvidedHypothesesComparisonStateAnnotationPayload:void 0,translatorSelectHypothesesComparisonVariantAnnotationPayload:void 0,translatorSkipHypothesesComparisonAnnotationPayload:void 0,translationMemorySegmentAnnotationPayload:void 0,translatorUpdateTranslationMemorySegmentsAnnotationPayload:void 0,translatorUpdateTranslationMemorySegmentsResultAnnotationPayload:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?vM.fromPartial(e.annotationId):void 0,t.range=void 0!==e.range&&null!==e.range?AM.fromPartial(e.range):void 0,t.textUnitPayload=void 0!==e.textUnitPayload&&null!==e.textUnitPayload?QG.fromPartial(e.textUnitPayload):void 0,t.requestWordAlternativesPayload=void 0!==e.requestWordAlternativesPayload&&null!==e.requestWordAlternativesPayload?IM.fromPartial(e.requestWordAlternativesPayload):void 0,t.providedWordAlternativesPayload=void 0!==e.providedWordAlternativesPayload&&null!==e.providedWordAlternativesPayload?yM.fromPartial(e.providedWordAlternativesPayload):void 0,t.selectWordAlternativePayload=void 0!==e.selectWordAlternativePayload&&null!==e.selectWordAlternativePayload?BG.fromPartial(e.selectWordAlternativePayload):void 0,t.translatorGlossaryReplacementPayload=void 0!==e.translatorGlossaryReplacementPayload&&null!==e.translatorGlossaryReplacementPayload?w$.fromPartial(e.translatorGlossaryReplacementPayload):void 0,t.requestTextUnitAlternativesPayload=void 0!==e.requestTextUnitAlternativesPayload&&null!==e.requestTextUnitAlternativesPayload?EM.fromPartial(e.requestTextUnitAlternativesPayload):void 0,t.translatorProvidedTextUnitAlternativesPayload=void 0!==e.translatorProvidedTextUnitAlternativesPayload&&null!==e.translatorProvidedTextUnitAlternativesPayload?O$.fromPartial(e.translatorProvidedTextUnitAlternativesPayload):void 0,t.selectTextUnitAlternativePayload=void 0!==e.selectTextUnitAlternativePayload&&null!==e.selectTextUnitAlternativePayload?HG.fromPartial(e.selectTextUnitAlternativePayload):void 0,t.translatorRequestAutocompletionPayload=void 0!==e.translatorRequestAutocompletionPayload&&null!==e.translatorRequestAutocompletionPayload?I$.fromPartial(e.translatorRequestAutocompletionPayload):void 0,t.translatorProvidedAutocompletionPayload=void 0!==e.translatorProvidedAutocompletionPayload&&null!==e.translatorProvidedAutocompletionPayload?A$.fromPartial(e.translatorProvidedAutocompletionPayload):void 0,t.translatorSelectAutocompletionPayload=void 0!==e.translatorSelectAutocompletionPayload&&null!==e.translatorSelectAutocompletionPayload?b$.fromPartial(e.translatorSelectAutocompletionPayload):void 0,t.translatorProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&null!==e.translatorProvidedAutomaticTextUnitAlternativesPayload?R$.fromPartial(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,t.selectAutomaticTextUnitAlternativePayload=void 0!==e.selectAutomaticTextUnitAlternativePayload&&null!==e.selectAutomaticTextUnitAlternativePayload?jG.fromPartial(e.selectAutomaticTextUnitAlternativePayload):void 0,t.writeDiffUnitPayload=void 0!==e.writeDiffUnitPayload&&null!==e.writeDiffUnitPayload?zM.fromPartial(e.writeDiffUnitPayload):void 0,t.textFormattingPayload=void 0!==e.textFormattingPayload&&null!==e.textFormattingPayload?YG.fromPartial(e.textFormattingPayload):void 0,t.writeProvidedTextUnitAlternativesPayload=void 0!==e.writeProvidedTextUnitAlternativesPayload&&null!==e.writeProvidedTextUnitAlternativesPayload?YM.fromPartial(e.writeProvidedTextUnitAlternativesPayload):void 0,t.writeProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&null!==e.writeProvidedAutomaticTextUnitAlternativesPayload?XM.fromPartial(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,t.translatorRequestClarifyPayload=void 0!==e.translatorRequestClarifyPayload&&null!==e.translatorRequestClarifyPayload?N$.fromPartial(e.translatorRequestClarifyPayload):void 0,t.translatorProvidedClarifyQuestionPayload=void 0!==e.translatorProvidedClarifyQuestionPayload&&null!==e.translatorProvidedClarifyQuestionPayload?C$.fromPartial(e.translatorProvidedClarifyQuestionPayload):void 0,t.translatorProvidedClarifyHighlightPayload=void 0!==e.translatorProvidedClarifyHighlightPayload&&null!==e.translatorProvidedClarifyHighlightPayload?L$.fromPartial(e.translatorProvidedClarifyHighlightPayload):void 0,t.translatorSelectClarifyAnswerPayload=void 0!==e.translatorSelectClarifyAnswerPayload&&null!==e.translatorSelectClarifyAnswerPayload?x$.fromPartial(e.translatorSelectClarifyAnswerPayload):void 0,t.writeRequestChangeStyleAlternativesAnnotationPayload=void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&null!==e.writeRequestChangeStyleAlternativesAnnotationPayload?AG.fromPartial(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,t.writeProvidedChangeStyleAlternativesAnnotationPayload=void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&null!==e.writeProvidedChangeStyleAlternativesAnnotationPayload?wG.fromPartial(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,t.writeSelectChangeStyleAlternativeAnnotationPayload=void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&null!==e.writeSelectChangeStyleAlternativeAnnotationPayload?OG.fromPartial(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,t.translatorClarifyStatusPayload=void 0!==e.translatorClarifyStatusPayload&&null!==e.translatorClarifyStatusPayload?P$.fromPartial(e.translatorClarifyStatusPayload):void 0,t.customRuleAnnotationPayload=void 0!==e.customRuleAnnotationPayload&&null!==e.customRuleAnnotationPayload?MM.fromPartial(e.customRuleAnnotationPayload):void 0,t.writeRequestTemplateAdaptationAnnotationPayload=void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&null!==e.writeRequestTemplateAdaptationAnnotationPayload?LG.fromPartial(e.writeRequestTemplateAdaptationAnnotationPayload):void 0,t.writeProvidedTemplateAdaptationAnnotationPayload=void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&null!==e.writeProvidedTemplateAdaptationAnnotationPayload?xG.fromPartial(e.writeProvidedTemplateAdaptationAnnotationPayload):void 0,t.providedWordAlternativeHighlightPayload=void 0!==e.providedWordAlternativeHighlightPayload&&null!==e.providedWordAlternativeHighlightPayload?mM.fromPartial(e.providedWordAlternativeHighlightPayload):void 0,t.writeInlineSuggestionAnnotationPayload=void 0!==e.writeInlineSuggestionAnnotationPayload&&null!==e.writeInlineSuggestionAnnotationPayload?DG.fromPartial(e.writeInlineSuggestionAnnotationPayload):void 0,t.writeInlineSuggestionSpanAnnotationPayload=void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&null!==e.writeInlineSuggestionSpanAnnotationPayload?UG.fromPartial(e.writeInlineSuggestionSpanAnnotationPayload):void 0,t.writeActOnInlineSuggestionAnnotationPayload=void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&null!==e.writeActOnInlineSuggestionAnnotationPayload?MG.fromPartial(e.writeActOnInlineSuggestionAnnotationPayload):void 0,t.writeInlineSuggestionsTextUnitStateAnnotationPayload=void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&null!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload?GG.fromPartial(e.writeInlineSuggestionsTextUnitStateAnnotationPayload):void 0,t.writeRequestInlineSuggestionImprovedTextAnnotationPayload=void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&null!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload?$G.fromPartial(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload):void 0,t.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&null!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload?VG.fromPartial(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload):void 0,t.translatorRequestRephraseTargetTextAnnotationPayload=void 0!==e.translatorRequestRephraseTargetTextAnnotationPayload&&null!==e.translatorRequestRephraseTargetTextAnnotationPayload?k$.fromPartial(e.translatorRequestRephraseTargetTextAnnotationPayload):void 0,t.translationMemoryAnnotationPayload=void 0!==e.translationMemoryAnnotationPayload&&null!==e.translationMemoryAnnotationPayload?n$.fromPartial(e.translationMemoryAnnotationPayload):void 0,t.translatorProvidedHypothesesComparisonStateAnnotationPayload=void 0!==e.translatorProvidedHypothesesComparisonStateAnnotationPayload&&null!==e.translatorProvidedHypothesesComparisonStateAnnotationPayload?U$.fromPartial(e.translatorProvidedHypothesesComparisonStateAnnotationPayload):void 0,t.translatorSelectHypothesesComparisonVariantAnnotationPayload=void 0!==e.translatorSelectHypothesesComparisonVariantAnnotationPayload&&null!==e.translatorSelectHypothesesComparisonVariantAnnotationPayload?M$.fromPartial(e.translatorSelectHypothesesComparisonVariantAnnotationPayload):void 0,t.translatorSkipHypothesesComparisonAnnotationPayload=void 0!==e.translatorSkipHypothesesComparisonAnnotationPayload&&null!==e.translatorSkipHypothesesComparisonAnnotationPayload?G$.fromPartial(e.translatorSkipHypothesesComparisonAnnotationPayload):void 0,t.translationMemorySegmentAnnotationPayload=void 0!==e.translationMemorySegmentAnnotationPayload&&null!==e.translationMemorySegmentAnnotationPayload?l$.fromPartial(e.translationMemorySegmentAnnotationPayload):void 0,t.translatorUpdateTranslationMemorySegmentsAnnotationPayload=void 0!==e.translatorUpdateTranslationMemorySegmentsAnnotationPayload&&null!==e.translatorUpdateTranslationMemorySegmentsAnnotationPayload?$$.fromPartial(e.translatorUpdateTranslationMemorySegmentsAnnotationPayload):void 0,t.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload=void 0!==e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload&&null!==e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload?V$.fromPartial(e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload):void 0,t}};const zV={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",encode:(e,t=new iM)=>(void 0!==e.annotationId&&vM.encode(e.annotationId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=vM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zV.$type,annotationId:_F(e.annotationId)?vM.fromJSON(e.annotationId):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=vM.toJSON(e.annotationId)),t},create:e=>zV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?vM.fromPartial(e.annotationId):void 0,t}};const YV={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",encode:(e,t=new iM)=>(0!==e.propertyName&&t.uint32(8).int32(e.propertyName),void 0!==e.translatorSourceLanguagesValue&&F$.encode(e.translatorSourceLanguagesValue,t.uint32(18).fork()).join(),void 0!==e.translatorTargetLanguagesValue&&j$.encode(e.translatorTargetLanguagesValue,t.uint32(26).fork()).join(),void 0!==e.translatorRequestedSourceLanguageValue&&W$.encode(e.translatorRequestedSourceLanguageValue,t.uint32(34).fork()).join(),void 0!==e.translatorRequestedTargetLanguageValue&&q$.encode(e.translatorRequestedTargetLanguageValue,t.uint32(42).fork()).join(),void 0!==e.translatorFormalityModesValue&&nV.encode(e.translatorFormalityModesValue,t.uint32(58).fork()).join(),void 0!==e.translatorFormalityModeValue&&rV.encode(e.translatorFormalityModeValue,t.uint32(66).fork()).join(),void 0!==e.translatorGlossarySupportValue&&Q$.encode(e.translatorGlossarySupportValue,t.uint32(74).fork()).join(),void 0!==e.translatorGlossaryListValue&&IV.encode(e.translatorGlossaryListValue,t.uint32(82).fork()).join(),void 0!==e.translatorTextDirectionValue&&aV.encode(e.translatorTextDirectionValue,t.uint32(98).fork()).join(),void 0!==e.translatorCalculatedSourceLanguageValue&&H$.encode(e.translatorCalculatedSourceLanguageValue,t.uint32(106).fork()).join(),void 0!==e.translatorMaximumTextLengthValue&&sV.encode(e.translatorMaximumTextLengthValue,t.uint32(114).fork()).join(),void 0!==e.translatorLanguageModelsValue&&oV.encode(e.translatorLanguageModelsValue,t.uint32(122).fork()).join(),void 0!==e.translatorLanguageModelValue&&iV.encode(e.translatorLanguageModelValue,t.uint32(130).fork()).join(),void 0!==e.translatorGlossaryIdValue&&J$.encode(e.translatorGlossaryIdValue,t.uint32(138).fork()).join(),void 0!==e.translatorCalculatedTargetLanguageValue&&B$.encode(e.translatorCalculatedTargetLanguageValue,t.uint32(146).fork()).join(),void 0!==e.translatorUnsupportedSourceLanguageValue&&lV.encode(e.translatorUnsupportedSourceLanguageValue,t.uint32(154).fork()).join(),void 0!==e.writeLanguagesValue&&KM.encode(e.writeLanguagesValue,t.uint32(162).fork()).join(),void 0!==e.writeRequestedLanguageValue&&ZM.encode(e.writeRequestedLanguageValue,t.uint32(170).fork()).join(),void 0!==e.writeCalculatedLanguageValue&&eG.encode(e.writeCalculatedLanguageValue,t.uint32(178).fork()).join(),void 0!==e.writeStyleVariantsValue&&sG.encode(e.writeStyleVariantsValue,t.uint32(186).fork()).join(),void 0!==e.writeStyleVariantValue&&lG.encode(e.writeStyleVariantValue,t.uint32(194).fork()).join(),void 0!==e.writeGlossaryIdValue&&tG.encode(e.writeGlossaryIdValue,t.uint32(202).fork()).join(),void 0!==e.writeGlossaryListValue&&gG.encode(e.writeGlossaryListValue,t.uint32(210).fork()).join(),void 0!==e.writeGlossarySupportValue&&hG.encode(e.writeGlossarySupportValue,t.uint32(218).fork()).join(),void 0!==e.writeMaximumTextLengthValue&&aG.encode(e.writeMaximumTextLengthValue,t.uint32(226).fork()).join(),void 0!==e.writeUnsupportedLanguageValue&&cG.encode(e.writeUnsupportedLanguageValue,t.uint32(234).fork()).join(),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&cV.encode(e.translatorSourceLanguageDetectionWeightsValue,t.uint32(242).fork()).join(),void 0!==e.writeGlossaryLanguagesValue&&QM.encode(e.writeGlossaryLanguagesValue,t.uint32(250).fork()).join(),void 0!==e.writeStyleGuideSupportValue&&fG.encode(e.writeStyleGuideSupportValue,t.uint32(258).fork()).join(),void 0!==e.writeStyleGuideIdValue&&nG.encode(e.writeStyleGuideIdValue,t.uint32(266).fork()).join(),void 0!==e.writeTemplateAdaptationTemplatesValue&&NG.encode(e.writeTemplateAdaptationTemplatesValue,t.uint32(274).fork()).join(),void 0!==e.translatorStyleGuideSupportValue&&Z$.encode(e.translatorStyleGuideSupportValue,t.uint32(282).fork()).join(),void 0!==e.translatorStyleGuideIdValue&&z$.encode(e.translatorStyleGuideIdValue,t.uint32(290).fork()).join(),void 0!==e.interfaceLanguageValue&&Y$.encode(e.interfaceLanguageValue,t.uint32(298).fork()).join(),void 0!==e.translatorLanguageModelPreferencesValue&&SV.encode(e.translatorLanguageModelPreferencesValue,t.uint32(306).fork()).join(),void 0!==e.translatorFreeTextPromptListValue&&X$.encode(e.translatorFreeTextPromptListValue,t.uint32(314).fork()).join(),void 0!==e.writeFreeTextPromptListValue&&oG.encode(e.writeFreeTextPromptListValue,t.uint32(322).fork()).join(),void 0!==e.writeInlineSuggestionsLoadingValue&&uG.encode(e.writeInlineSuggestionsLoadingValue,t.uint32(330).fork()).join(),void 0!==e.writeCorrectionsOnlySupportValue&&_G.encode(e.writeCorrectionsOnlySupportValue,t.uint32(338).fork()).join(),void 0!==e.writeCorrectionsOnlyValue&&rG.encode(e.writeCorrectionsOnlyValue,t.uint32(346).fork()).join(),void 0!==e.translatorRtfSupportValue&&eV.encode(e.translatorRtfSupportValue,t.uint32(354).fork()).join(),void 0!==e.translatorStyleVariantsValue&&uV.encode(e.translatorStyleVariantsValue,t.uint32(362).fork()).join(),void 0!==e.translatorStyleVariantValue&&dV.encode(e.translatorStyleVariantValue,t.uint32(370).fork()).join(),void 0!==e.writeTextUnitAlternativesSupportValue&&mG.encode(e.writeTextUnitAlternativesSupportValue,t.uint32(378).fork()).join(),void 0!==e.translatorTranslationMemoryListValue&&pV.encode(e.translatorTranslationMemoryListValue,t.uint32(386).fork()).join(),void 0!==e.translatorSelectedTranslationMemoryValue&&hV.encode(e.translatorSelectedTranslationMemoryValue,t.uint32(394).fork()).join(),void 0!==e.translatorRephraseTargetTextStatusValue&&fV.encode(e.translatorRephraseTargetTextStatusValue,t.uint32(402).fork()).join(),void 0!==e.translatorCustomizationsValue&&K$.encode(e.translatorCustomizationsValue,t.uint32(410).fork()).join(),void 0!==e.writeCustomizationsValue&&iG.encode(e.writeCustomizationsValue,t.uint32(418).fork()).join(),void 0!==e.translatorHypothesesComparisonEnabledValue&&_V.encode(e.translatorHypothesesComparisonEnabledValue,t.uint32(426).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0,writeStyleGuideSupportValue:void 0,writeStyleGuideIdValue:void 0,writeTemplateAdaptationTemplatesValue:void 0,translatorStyleGuideSupportValue:void 0,translatorStyleGuideIdValue:void 0,interfaceLanguageValue:void 0,translatorLanguageModelPreferencesValue:void 0,translatorFreeTextPromptListValue:void 0,writeFreeTextPromptListValue:void 0,writeInlineSuggestionsLoadingValue:void 0,writeCorrectionsOnlySupportValue:void 0,writeCorrectionsOnlyValue:void 0,translatorRtfSupportValue:void 0,translatorStyleVariantsValue:void 0,translatorStyleVariantValue:void 0,writeTextUnitAlternativesSupportValue:void 0,translatorTranslationMemoryListValue:void 0,translatorSelectedTranslationMemoryValue:void 0,translatorRephraseTargetTextStatusValue:void 0,translatorCustomizationsValue:void 0,writeCustomizationsValue:void 0,translatorHypothesesComparisonEnabledValue:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.propertyName=n.int32();continue;case 2:if(18!==e)break;o.translatorSourceLanguagesValue=F$.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorTargetLanguagesValue=j$.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.translatorRequestedSourceLanguageValue=W$.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.translatorRequestedTargetLanguageValue=q$.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorFormalityModesValue=nV.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.translatorFormalityModeValue=rV.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorGlossarySupportValue=Q$.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.translatorGlossaryListValue=IV.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorTextDirectionValue=aV.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorCalculatedSourceLanguageValue=H$.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorMaximumTextLengthValue=sV.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.translatorLanguageModelsValue=oV.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.translatorLanguageModelValue=iV.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.translatorGlossaryIdValue=J$.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.translatorCalculatedTargetLanguageValue=B$.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.translatorUnsupportedSourceLanguageValue=lV.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.writeLanguagesValue=KM.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.writeRequestedLanguageValue=ZM.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.writeCalculatedLanguageValue=eG.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.writeStyleVariantsValue=sG.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeStyleVariantValue=lG.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeGlossaryIdValue=tG.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeGlossaryListValue=gG.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.writeGlossarySupportValue=hG.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.writeMaximumTextLengthValue=aG.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeUnsupportedLanguageValue=cG.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.translatorSourceLanguageDetectionWeightsValue=cV.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.writeGlossaryLanguagesValue=QM.decode(n,n.uint32());continue;case 32:if(258!==e)break;o.writeStyleGuideSupportValue=fG.decode(n,n.uint32());continue;case 33:if(266!==e)break;o.writeStyleGuideIdValue=nG.decode(n,n.uint32());continue;case 34:if(274!==e)break;o.writeTemplateAdaptationTemplatesValue=NG.decode(n,n.uint32());continue;case 35:if(282!==e)break;o.translatorStyleGuideSupportValue=Z$.decode(n,n.uint32());continue;case 36:if(290!==e)break;o.translatorStyleGuideIdValue=z$.decode(n,n.uint32());continue;case 37:if(298!==e)break;o.interfaceLanguageValue=Y$.decode(n,n.uint32());continue;case 38:if(306!==e)break;o.translatorLanguageModelPreferencesValue=SV.decode(n,n.uint32());continue;case 39:if(314!==e)break;o.translatorFreeTextPromptListValue=X$.decode(n,n.uint32());continue;case 40:if(322!==e)break;o.writeFreeTextPromptListValue=oG.decode(n,n.uint32());continue;case 41:if(330!==e)break;o.writeInlineSuggestionsLoadingValue=uG.decode(n,n.uint32());continue;case 42:if(338!==e)break;o.writeCorrectionsOnlySupportValue=_G.decode(n,n.uint32());continue;case 43:if(346!==e)break;o.writeCorrectionsOnlyValue=rG.decode(n,n.uint32());continue;case 44:if(354!==e)break;o.translatorRtfSupportValue=eV.decode(n,n.uint32());continue;case 45:if(362!==e)break;o.translatorStyleVariantsValue=uV.decode(n,n.uint32());continue;case 46:if(370!==e)break;o.translatorStyleVariantValue=dV.decode(n,n.uint32());continue;case 47:if(378!==e)break;o.writeTextUnitAlternativesSupportValue=mG.decode(n,n.uint32());continue;case 48:if(386!==e)break;o.translatorTranslationMemoryListValue=pV.decode(n,n.uint32());continue;case 49:if(394!==e)break;o.translatorSelectedTranslationMemoryValue=hV.decode(n,n.uint32());continue;case 50:if(402!==e)break;o.translatorRephraseTargetTextStatusValue=fV.decode(n,n.uint32());continue;case 51:if(410!==e)break;o.translatorCustomizationsValue=K$.decode(n,n.uint32());continue;case 52:if(418!==e)break;o.writeCustomizationsValue=iG.decode(n,n.uint32());continue;case 53:if(426!==e)break;o.translatorHypothesesComparisonEnabledValue=_V.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YV.$type,propertyName:_F(e.propertyName)?HV(e.propertyName):0,translatorSourceLanguagesValue:_F(e.translatorSourceLanguagesValue)?F$.fromJSON(e.translatorSourceLanguagesValue):void 0,translatorTargetLanguagesValue:_F(e.translatorTargetLanguagesValue)?j$.fromJSON(e.translatorTargetLanguagesValue):void 0,translatorRequestedSourceLanguageValue:_F(e.translatorRequestedSourceLanguageValue)?W$.fromJSON(e.translatorRequestedSourceLanguageValue):void 0,translatorRequestedTargetLanguageValue:_F(e.translatorRequestedTargetLanguageValue)?q$.fromJSON(e.translatorRequestedTargetLanguageValue):void 0,translatorFormalityModesValue:_F(e.translatorFormalityModesValue)?nV.fromJSON(e.translatorFormalityModesValue):void 0,translatorFormalityModeValue:_F(e.translatorFormalityModeValue)?rV.fromJSON(e.translatorFormalityModeValue):void 0,translatorGlossarySupportValue:_F(e.translatorGlossarySupportValue)?Q$.fromJSON(e.translatorGlossarySupportValue):void 0,translatorGlossaryListValue:_F(e.translatorGlossaryListValue)?IV.fromJSON(e.translatorGlossaryListValue):void 0,translatorTextDirectionValue:_F(e.translatorTextDirectionValue)?aV.fromJSON(e.translatorTextDirectionValue):void 0,translatorCalculatedSourceLanguageValue:_F(e.translatorCalculatedSourceLanguageValue)?H$.fromJSON(e.translatorCalculatedSourceLanguageValue):void 0,translatorMaximumTextLengthValue:_F(e.translatorMaximumTextLengthValue)?sV.fromJSON(e.translatorMaximumTextLengthValue):void 0,translatorLanguageModelsValue:_F(e.translatorLanguageModelsValue)?oV.fromJSON(e.translatorLanguageModelsValue):void 0,translatorLanguageModelValue:_F(e.translatorLanguageModelValue)?iV.fromJSON(e.translatorLanguageModelValue):void 0,translatorGlossaryIdValue:_F(e.translatorGlossaryIdValue)?J$.fromJSON(e.translatorGlossaryIdValue):void 0,translatorCalculatedTargetLanguageValue:_F(e.translatorCalculatedTargetLanguageValue)?B$.fromJSON(e.translatorCalculatedTargetLanguageValue):void 0,translatorUnsupportedSourceLanguageValue:_F(e.translatorUnsupportedSourceLanguageValue)?lV.fromJSON(e.translatorUnsupportedSourceLanguageValue):void 0,writeLanguagesValue:_F(e.writeLanguagesValue)?KM.fromJSON(e.writeLanguagesValue):void 0,writeRequestedLanguageValue:_F(e.writeRequestedLanguageValue)?ZM.fromJSON(e.writeRequestedLanguageValue):void 0,writeCalculatedLanguageValue:_F(e.writeCalculatedLanguageValue)?eG.fromJSON(e.writeCalculatedLanguageValue):void 0,writeStyleVariantsValue:_F(e.writeStyleVariantsValue)?sG.fromJSON(e.writeStyleVariantsValue):void 0,writeStyleVariantValue:_F(e.writeStyleVariantValue)?lG.fromJSON(e.writeStyleVariantValue):void 0,writeGlossaryIdValue:_F(e.writeGlossaryIdValue)?tG.fromJSON(e.writeGlossaryIdValue):void 0,writeGlossaryListValue:_F(e.writeGlossaryListValue)?gG.fromJSON(e.writeGlossaryListValue):void 0,writeGlossarySupportValue:_F(e.writeGlossarySupportValue)?hG.fromJSON(e.writeGlossarySupportValue):void 0,writeMaximumTextLengthValue:_F(e.writeMaximumTextLengthValue)?aG.fromJSON(e.writeMaximumTextLengthValue):void 0,writeUnsupportedLanguageValue:_F(e.writeUnsupportedLanguageValue)?cG.fromJSON(e.writeUnsupportedLanguageValue):void 0,translatorSourceLanguageDetectionWeightsValue:_F(e.translatorSourceLanguageDetectionWeightsValue)?cV.fromJSON(e.translatorSourceLanguageDetectionWeightsValue):void 0,writeGlossaryLanguagesValue:_F(e.writeGlossaryLanguagesValue)?QM.fromJSON(e.writeGlossaryLanguagesValue):void 0,writeStyleGuideSupportValue:_F(e.writeStyleGuideSupportValue)?fG.fromJSON(e.writeStyleGuideSupportValue):void 0,writeStyleGuideIdValue:_F(e.writeStyleGuideIdValue)?nG.fromJSON(e.writeStyleGuideIdValue):void 0,writeTemplateAdaptationTemplatesValue:_F(e.writeTemplateAdaptationTemplatesValue)?NG.fromJSON(e.writeTemplateAdaptationTemplatesValue):void 0,translatorStyleGuideSupportValue:_F(e.translatorStyleGuideSupportValue)?Z$.fromJSON(e.translatorStyleGuideSupportValue):void 0,translatorStyleGuideIdValue:_F(e.translatorStyleGuideIdValue)?z$.fromJSON(e.translatorStyleGuideIdValue):void 0,interfaceLanguageValue:_F(e.interfaceLanguageValue)?Y$.fromJSON(e.interfaceLanguageValue):void 0,translatorLanguageModelPreferencesValue:_F(e.translatorLanguageModelPreferencesValue)?SV.fromJSON(e.translatorLanguageModelPreferencesValue):void 0,translatorFreeTextPromptListValue:_F(e.translatorFreeTextPromptListValue)?X$.fromJSON(e.translatorFreeTextPromptListValue):void 0,writeFreeTextPromptListValue:_F(e.writeFreeTextPromptListValue)?oG.fromJSON(e.writeFreeTextPromptListValue):void 0,writeInlineSuggestionsLoadingValue:_F(e.writeInlineSuggestionsLoadingValue)?uG.fromJSON(e.writeInlineSuggestionsLoadingValue):void 0,writeCorrectionsOnlySupportValue:_F(e.writeCorrectionsOnlySupportValue)?_G.fromJSON(e.writeCorrectionsOnlySupportValue):void 0,writeCorrectionsOnlyValue:_F(e.writeCorrectionsOnlyValue)?rG.fromJSON(e.writeCorrectionsOnlyValue):void 0,translatorRtfSupportValue:_F(e.translatorRtfSupportValue)?eV.fromJSON(e.translatorRtfSupportValue):void 0,translatorStyleVariantsValue:_F(e.translatorStyleVariantsValue)?uV.fromJSON(e.translatorStyleVariantsValue):void 0,translatorStyleVariantValue:_F(e.translatorStyleVariantValue)?dV.fromJSON(e.translatorStyleVariantValue):void 0,writeTextUnitAlternativesSupportValue:_F(e.writeTextUnitAlternativesSupportValue)?mG.fromJSON(e.writeTextUnitAlternativesSupportValue):void 0,translatorTranslationMemoryListValue:_F(e.translatorTranslationMemoryListValue)?pV.fromJSON(e.translatorTranslationMemoryListValue):void 0,translatorSelectedTranslationMemoryValue:_F(e.translatorSelectedTranslationMemoryValue)?hV.fromJSON(e.translatorSelectedTranslationMemoryValue):void 0,translatorRephraseTargetTextStatusValue:_F(e.translatorRephraseTargetTextStatusValue)?fV.fromJSON(e.translatorRephraseTargetTextStatusValue):void 0,translatorCustomizationsValue:_F(e.translatorCustomizationsValue)?K$.fromJSON(e.translatorCustomizationsValue):void 0,writeCustomizationsValue:_F(e.writeCustomizationsValue)?iG.fromJSON(e.writeCustomizationsValue):void 0,translatorHypothesesComparisonEnabledValue:_F(e.translatorHypothesesComparisonEnabledValue)?_V.fromJSON(e.translatorHypothesesComparisonEnabledValue):void 0}),toJSON(e){const t={};return 0!==e.propertyName&&(t.propertyName=function(e){switch(e){case VV.UNSPECIFIED:return"PROPERTY_NAME_UNSPECIFIED";case VV.TRANSLATOR_SOURCE_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES";case VV.TRANSLATOR_TARGET_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES";case VV.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE";case VV.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE";case VV.TRANSLATOR_REQUESTED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE";case VV.TRANSLATOR_FORMALITY_MODES:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES";case VV.TRANSLATOR_FORMALITY_MODE:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE";case VV.TRANSLATOR_GLOSSARY_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT";case VV.TRANSLATOR_GLOSSARY_LIST:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST";case VV.TRANSLATOR_TEXT_DIRECTION:return"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION";case VV.TRANSLATOR_GLOSSARY_SUGGESTIONS:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS";case VV.TRANSLATOR_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH";case VV.TRANSLATOR_LANGUAGE_MODELS:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS";case VV.TRANSLATOR_LANGUAGE_MODEL:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL";case VV.TRANSLATOR_GLOSSARY_ID:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID";case VV.TRANSLATOR_CALCULATED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE";case VV.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE";case VV.WRITE_LANGUAGES:return"PROPERTY_NAME_WRITE_LANGUAGES";case VV.WRITE_REQUESTED_LANGUAGE:return"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE";case VV.WRITE_CALCULATED_LANGUAGE:return"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE";case VV.WRITE_STYLE_VARIANTS:return"PROPERTY_NAME_WRITE_STYLE_VARIANTS";case VV.WRITE_STYLE_VARIANT:return"PROPERTY_NAME_WRITE_STYLE_VARIANT";case VV.WRITE_GLOSSARY_ID:return"PROPERTY_NAME_WRITE_GLOSSARY_ID";case VV.WRITE_GLOSSARY_LIST:return"PROPERTY_NAME_WRITE_GLOSSARY_LIST";case VV.WRITE_GLOSSARY_SUPPORT:return"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT";case VV.WRITE_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH";case VV.WRITE_UNSUPPORTED_LANGUAGE:return"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE";case VV.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS";case VV.WRITE_GLOSSARY_LANGUAGES:return"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES";case VV.WRITE_STYLE_GUIDE_SUPPORT:return"PROPERTY_NAME_WRITE_STYLE_GUIDE_SUPPORT";case VV.WRITE_STYLE_GUIDE_ID:return"PROPERTY_NAME_WRITE_STYLE_GUIDE_ID";case VV.WRITE_TEMPLATE_ADAPTATION_TEMPLATES:return"PROPERTY_NAME_WRITE_TEMPLATE_ADAPTATION_TEMPLATES";case VV.TRANSLATOR_STYLE_GUIDE_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_SUPPORT";case VV.TRANSLATOR_STYLE_GUIDE_ID:return"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_ID";case VV.TRANSLATOR_INTERFACE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_INTERFACE_LANGUAGE";case VV.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL_PREFERENCES";case VV.TRANSLATOR_FREE_TEXT_PROMPT_LIST:return"PROPERTY_NAME_TRANSLATOR_FREE_TEXT_PROMPT_LIST";case VV.WRITE_FREE_TEXT_PROMPT_LIST:return"PROPERTY_NAME_WRITE_FREE_TEXT_PROMPT_LIST";case VV.WRITE_INLINE_SUGGESTIONS_LOADING:return"PROPERTY_NAME_WRITE_INLINE_SUGGESTIONS_LOADING";case VV.WRITE_CORRECTIONS_ONLY_SUPPORT:return"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY_SUPPORT";case VV.WRITE_CORRECTIONS_ONLY:return"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY";case VV.TRANSLATOR_RTF_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_RTF_SUPPORT";case VV.TRANSLATOR_STYLE_VARIANTS:return"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANTS";case VV.TRANSLATOR_STYLE_VARIANT:return"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANT";case VV.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT:return"PROPERTY_NAME_WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT";case VV.TRANSLATOR_TRANSLATION_MEMORY_LIST:return"PROPERTY_NAME_TRANSLATOR_TRANSLATION_MEMORY_LIST";case VV.TRANSLATOR_SELECTED_TRANSLATION_MEMORY:return"PROPERTY_NAME_TRANSLATOR_SELECTED_TRANSLATION_MEMORY";case VV.TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS:return"PROPERTY_NAME_TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS";case VV.TRANSLATOR_CUSTOMIZATIONS:return"PROPERTY_NAME_TRANSLATOR_CUSTOMIZATIONS";case VV.WRITE_CUSTOMIZATIONS:return"PROPERTY_NAME_WRITE_CUSTOMIZATIONS";case VV.TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED:return"PROPERTY_NAME_TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}(e.propertyName)),void 0!==e.translatorSourceLanguagesValue&&(t.translatorSourceLanguagesValue=F$.toJSON(e.translatorSourceLanguagesValue)),void 0!==e.translatorTargetLanguagesValue&&(t.translatorTargetLanguagesValue=j$.toJSON(e.translatorTargetLanguagesValue)),void 0!==e.translatorRequestedSourceLanguageValue&&(t.translatorRequestedSourceLanguageValue=W$.toJSON(e.translatorRequestedSourceLanguageValue)),void 0!==e.translatorRequestedTargetLanguageValue&&(t.translatorRequestedTargetLanguageValue=q$.toJSON(e.translatorRequestedTargetLanguageValue)),void 0!==e.translatorFormalityModesValue&&(t.translatorFormalityModesValue=nV.toJSON(e.translatorFormalityModesValue)),void 0!==e.translatorFormalityModeValue&&(t.translatorFormalityModeValue=rV.toJSON(e.translatorFormalityModeValue)),void 0!==e.translatorGlossarySupportValue&&(t.translatorGlossarySupportValue=Q$.toJSON(e.translatorGlossarySupportValue)),void 0!==e.translatorGlossaryListValue&&(t.translatorGlossaryListValue=IV.toJSON(e.translatorGlossaryListValue)),void 0!==e.translatorTextDirectionValue&&(t.translatorTextDirectionValue=aV.toJSON(e.translatorTextDirectionValue)),void 0!==e.translatorCalculatedSourceLanguageValue&&(t.translatorCalculatedSourceLanguageValue=H$.toJSON(e.translatorCalculatedSourceLanguageValue)),void 0!==e.translatorMaximumTextLengthValue&&(t.translatorMaximumTextLengthValue=sV.toJSON(e.translatorMaximumTextLengthValue)),void 0!==e.translatorLanguageModelsValue&&(t.translatorLanguageModelsValue=oV.toJSON(e.translatorLanguageModelsValue)),void 0!==e.translatorLanguageModelValue&&(t.translatorLanguageModelValue=iV.toJSON(e.translatorLanguageModelValue)),void 0!==e.translatorGlossaryIdValue&&(t.translatorGlossaryIdValue=J$.toJSON(e.translatorGlossaryIdValue)),void 0!==e.translatorCalculatedTargetLanguageValue&&(t.translatorCalculatedTargetLanguageValue=B$.toJSON(e.translatorCalculatedTargetLanguageValue)),void 0!==e.translatorUnsupportedSourceLanguageValue&&(t.translatorUnsupportedSourceLanguageValue=lV.toJSON(e.translatorUnsupportedSourceLanguageValue)),void 0!==e.writeLanguagesValue&&(t.writeLanguagesValue=KM.toJSON(e.writeLanguagesValue)),void 0!==e.writeRequestedLanguageValue&&(t.writeRequestedLanguageValue=ZM.toJSON(e.writeRequestedLanguageValue)),void 0!==e.writeCalculatedLanguageValue&&(t.writeCalculatedLanguageValue=eG.toJSON(e.writeCalculatedLanguageValue)),void 0!==e.writeStyleVariantsValue&&(t.writeStyleVariantsValue=sG.toJSON(e.writeStyleVariantsValue)),void 0!==e.writeStyleVariantValue&&(t.writeStyleVariantValue=lG.toJSON(e.writeStyleVariantValue)),void 0!==e.writeGlossaryIdValue&&(t.writeGlossaryIdValue=tG.toJSON(e.writeGlossaryIdValue)),void 0!==e.writeGlossaryListValue&&(t.writeGlossaryListValue=gG.toJSON(e.writeGlossaryListValue)),void 0!==e.writeGlossarySupportValue&&(t.writeGlossarySupportValue=hG.toJSON(e.writeGlossarySupportValue)),void 0!==e.writeMaximumTextLengthValue&&(t.writeMaximumTextLengthValue=aG.toJSON(e.writeMaximumTextLengthValue)),void 0!==e.writeUnsupportedLanguageValue&&(t.writeUnsupportedLanguageValue=cG.toJSON(e.writeUnsupportedLanguageValue)),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&(t.translatorSourceLanguageDetectionWeightsValue=cV.toJSON(e.translatorSourceLanguageDetectionWeightsValue)),void 0!==e.writeGlossaryLanguagesValue&&(t.writeGlossaryLanguagesValue=QM.toJSON(e.writeGlossaryLanguagesValue)),void 0!==e.writeStyleGuideSupportValue&&(t.writeStyleGuideSupportValue=fG.toJSON(e.writeStyleGuideSupportValue)),void 0!==e.writeStyleGuideIdValue&&(t.writeStyleGuideIdValue=nG.toJSON(e.writeStyleGuideIdValue)),void 0!==e.writeTemplateAdaptationTemplatesValue&&(t.writeTemplateAdaptationTemplatesValue=NG.toJSON(e.writeTemplateAdaptationTemplatesValue)),void 0!==e.translatorStyleGuideSupportValue&&(t.translatorStyleGuideSupportValue=Z$.toJSON(e.translatorStyleGuideSupportValue)),void 0!==e.translatorStyleGuideIdValue&&(t.translatorStyleGuideIdValue=z$.toJSON(e.translatorStyleGuideIdValue)),void 0!==e.interfaceLanguageValue&&(t.interfaceLanguageValue=Y$.toJSON(e.interfaceLanguageValue)),void 0!==e.translatorLanguageModelPreferencesValue&&(t.translatorLanguageModelPreferencesValue=SV.toJSON(e.translatorLanguageModelPreferencesValue)),void 0!==e.translatorFreeTextPromptListValue&&(t.translatorFreeTextPromptListValue=X$.toJSON(e.translatorFreeTextPromptListValue)),void 0!==e.writeFreeTextPromptListValue&&(t.writeFreeTextPromptListValue=oG.toJSON(e.writeFreeTextPromptListValue)),void 0!==e.writeInlineSuggestionsLoadingValue&&(t.writeInlineSuggestionsLoadingValue=uG.toJSON(e.writeInlineSuggestionsLoadingValue)),void 0!==e.writeCorrectionsOnlySupportValue&&(t.writeCorrectionsOnlySupportValue=_G.toJSON(e.writeCorrectionsOnlySupportValue)),void 0!==e.writeCorrectionsOnlyValue&&(t.writeCorrectionsOnlyValue=rG.toJSON(e.writeCorrectionsOnlyValue)),void 0!==e.translatorRtfSupportValue&&(t.translatorRtfSupportValue=eV.toJSON(e.translatorRtfSupportValue)),void 0!==e.translatorStyleVariantsValue&&(t.translatorStyleVariantsValue=uV.toJSON(e.translatorStyleVariantsValue)),void 0!==e.translatorStyleVariantValue&&(t.translatorStyleVariantValue=dV.toJSON(e.translatorStyleVariantValue)),void 0!==e.writeTextUnitAlternativesSupportValue&&(t.writeTextUnitAlternativesSupportValue=mG.toJSON(e.writeTextUnitAlternativesSupportValue)),void 0!==e.translatorTranslationMemoryListValue&&(t.translatorTranslationMemoryListValue=pV.toJSON(e.translatorTranslationMemoryListValue)),void 0!==e.translatorSelectedTranslationMemoryValue&&(t.translatorSelectedTranslationMemoryValue=hV.toJSON(e.translatorSelectedTranslationMemoryValue)),void 0!==e.translatorRephraseTargetTextStatusValue&&(t.translatorRephraseTargetTextStatusValue=fV.toJSON(e.translatorRephraseTargetTextStatusValue)),void 0!==e.translatorCustomizationsValue&&(t.translatorCustomizationsValue=K$.toJSON(e.translatorCustomizationsValue)),void 0!==e.writeCustomizationsValue&&(t.writeCustomizationsValue=iG.toJSON(e.writeCustomizationsValue)),void 0!==e.translatorHypothesesComparisonEnabledValue&&(t.translatorHypothesesComparisonEnabledValue=_V.toJSON(e.translatorHypothesesComparisonEnabledValue)),t},create:e=>YV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0,writeStyleGuideSupportValue:void 0,writeStyleGuideIdValue:void 0,writeTemplateAdaptationTemplatesValue:void 0,translatorStyleGuideSupportValue:void 0,translatorStyleGuideIdValue:void 0,interfaceLanguageValue:void 0,translatorLanguageModelPreferencesValue:void 0,translatorFreeTextPromptListValue:void 0,writeFreeTextPromptListValue:void 0,writeInlineSuggestionsLoadingValue:void 0,writeCorrectionsOnlySupportValue:void 0,writeCorrectionsOnlyValue:void 0,translatorRtfSupportValue:void 0,translatorStyleVariantsValue:void 0,translatorStyleVariantValue:void 0,writeTextUnitAlternativesSupportValue:void 0,translatorTranslationMemoryListValue:void 0,translatorSelectedTranslationMemoryValue:void 0,translatorRephraseTargetTextStatusValue:void 0,translatorCustomizationsValue:void 0,writeCustomizationsValue:void 0,translatorHypothesesComparisonEnabledValue:void 0};return n.propertyName=null!==(t=e.propertyName)&&void 0!==t?t:0,n.translatorSourceLanguagesValue=void 0!==e.translatorSourceLanguagesValue&&null!==e.translatorSourceLanguagesValue?F$.fromPartial(e.translatorSourceLanguagesValue):void 0,n.translatorTargetLanguagesValue=void 0!==e.translatorTargetLanguagesValue&&null!==e.translatorTargetLanguagesValue?j$.fromPartial(e.translatorTargetLanguagesValue):void 0,n.translatorRequestedSourceLanguageValue=void 0!==e.translatorRequestedSourceLanguageValue&&null!==e.translatorRequestedSourceLanguageValue?W$.fromPartial(e.translatorRequestedSourceLanguageValue):void 0,n.translatorRequestedTargetLanguageValue=void 0!==e.translatorRequestedTargetLanguageValue&&null!==e.translatorRequestedTargetLanguageValue?q$.fromPartial(e.translatorRequestedTargetLanguageValue):void 0,n.translatorFormalityModesValue=void 0!==e.translatorFormalityModesValue&&null!==e.translatorFormalityModesValue?nV.fromPartial(e.translatorFormalityModesValue):void 0,n.translatorFormalityModeValue=void 0!==e.translatorFormalityModeValue&&null!==e.translatorFormalityModeValue?rV.fromPartial(e.translatorFormalityModeValue):void 0,n.translatorGlossarySupportValue=void 0!==e.translatorGlossarySupportValue&&null!==e.translatorGlossarySupportValue?Q$.fromPartial(e.translatorGlossarySupportValue):void 0,n.translatorGlossaryListValue=void 0!==e.translatorGlossaryListValue&&null!==e.translatorGlossaryListValue?IV.fromPartial(e.translatorGlossaryListValue):void 0,n.translatorTextDirectionValue=void 0!==e.translatorTextDirectionValue&&null!==e.translatorTextDirectionValue?aV.fromPartial(e.translatorTextDirectionValue):void 0,n.translatorCalculatedSourceLanguageValue=void 0!==e.translatorCalculatedSourceLanguageValue&&null!==e.translatorCalculatedSourceLanguageValue?H$.fromPartial(e.translatorCalculatedSourceLanguageValue):void 0,n.translatorMaximumTextLengthValue=void 0!==e.translatorMaximumTextLengthValue&&null!==e.translatorMaximumTextLengthValue?sV.fromPartial(e.translatorMaximumTextLengthValue):void 0,n.translatorLanguageModelsValue=void 0!==e.translatorLanguageModelsValue&&null!==e.translatorLanguageModelsValue?oV.fromPartial(e.translatorLanguageModelsValue):void 0,n.translatorLanguageModelValue=void 0!==e.translatorLanguageModelValue&&null!==e.translatorLanguageModelValue?iV.fromPartial(e.translatorLanguageModelValue):void 0,n.translatorGlossaryIdValue=void 0!==e.translatorGlossaryIdValue&&null!==e.translatorGlossaryIdValue?J$.fromPartial(e.translatorGlossaryIdValue):void 0,n.translatorCalculatedTargetLanguageValue=void 0!==e.translatorCalculatedTargetLanguageValue&&null!==e.translatorCalculatedTargetLanguageValue?B$.fromPartial(e.translatorCalculatedTargetLanguageValue):void 0,n.translatorUnsupportedSourceLanguageValue=void 0!==e.translatorUnsupportedSourceLanguageValue&&null!==e.translatorUnsupportedSourceLanguageValue?lV.fromPartial(e.translatorUnsupportedSourceLanguageValue):void 0,n.writeLanguagesValue=void 0!==e.writeLanguagesValue&&null!==e.writeLanguagesValue?KM.fromPartial(e.writeLanguagesValue):void 0,n.writeRequestedLanguageValue=void 0!==e.writeRequestedLanguageValue&&null!==e.writeRequestedLanguageValue?ZM.fromPartial(e.writeRequestedLanguageValue):void 0,n.writeCalculatedLanguageValue=void 0!==e.writeCalculatedLanguageValue&&null!==e.writeCalculatedLanguageValue?eG.fromPartial(e.writeCalculatedLanguageValue):void 0,n.writeStyleVariantsValue=void 0!==e.writeStyleVariantsValue&&null!==e.writeStyleVariantsValue?sG.fromPartial(e.writeStyleVariantsValue):void 0,n.writeStyleVariantValue=void 0!==e.writeStyleVariantValue&&null!==e.writeStyleVariantValue?lG.fromPartial(e.writeStyleVariantValue):void 0,n.writeGlossaryIdValue=void 0!==e.writeGlossaryIdValue&&null!==e.writeGlossaryIdValue?tG.fromPartial(e.writeGlossaryIdValue):void 0,n.writeGlossaryListValue=void 0!==e.writeGlossaryListValue&&null!==e.writeGlossaryListValue?gG.fromPartial(e.writeGlossaryListValue):void 0,n.writeGlossarySupportValue=void 0!==e.writeGlossarySupportValue&&null!==e.writeGlossarySupportValue?hG.fromPartial(e.writeGlossarySupportValue):void 0,n.writeMaximumTextLengthValue=void 0!==e.writeMaximumTextLengthValue&&null!==e.writeMaximumTextLengthValue?aG.fromPartial(e.writeMaximumTextLengthValue):void 0,n.writeUnsupportedLanguageValue=void 0!==e.writeUnsupportedLanguageValue&&null!==e.writeUnsupportedLanguageValue?cG.fromPartial(e.writeUnsupportedLanguageValue):void 0,n.translatorSourceLanguageDetectionWeightsValue=void 0!==e.translatorSourceLanguageDetectionWeightsValue&&null!==e.translatorSourceLanguageDetectionWeightsValue?cV.fromPartial(e.translatorSourceLanguageDetectionWeightsValue):void 0,n.writeGlossaryLanguagesValue=void 0!==e.writeGlossaryLanguagesValue&&null!==e.writeGlossaryLanguagesValue?QM.fromPartial(e.writeGlossaryLanguagesValue):void 0,n.writeStyleGuideSupportValue=void 0!==e.writeStyleGuideSupportValue&&null!==e.writeStyleGuideSupportValue?fG.fromPartial(e.writeStyleGuideSupportValue):void 0,n.writeStyleGuideIdValue=void 0!==e.writeStyleGuideIdValue&&null!==e.writeStyleGuideIdValue?nG.fromPartial(e.writeStyleGuideIdValue):void 0,n.writeTemplateAdaptationTemplatesValue=void 0!==e.writeTemplateAdaptationTemplatesValue&&null!==e.writeTemplateAdaptationTemplatesValue?NG.fromPartial(e.writeTemplateAdaptationTemplatesValue):void 0,n.translatorStyleGuideSupportValue=void 0!==e.translatorStyleGuideSupportValue&&null!==e.translatorStyleGuideSupportValue?Z$.fromPartial(e.translatorStyleGuideSupportValue):void 0,n.translatorStyleGuideIdValue=void 0!==e.translatorStyleGuideIdValue&&null!==e.translatorStyleGuideIdValue?z$.fromPartial(e.translatorStyleGuideIdValue):void 0,n.interfaceLanguageValue=void 0!==e.interfaceLanguageValue&&null!==e.interfaceLanguageValue?Y$.fromPartial(e.interfaceLanguageValue):void 0,n.translatorLanguageModelPreferencesValue=void 0!==e.translatorLanguageModelPreferencesValue&&null!==e.translatorLanguageModelPreferencesValue?SV.fromPartial(e.translatorLanguageModelPreferencesValue):void 0,n.translatorFreeTextPromptListValue=void 0!==e.translatorFreeTextPromptListValue&&null!==e.translatorFreeTextPromptListValue?X$.fromPartial(e.translatorFreeTextPromptListValue):void 0,n.writeFreeTextPromptListValue=void 0!==e.writeFreeTextPromptListValue&&null!==e.writeFreeTextPromptListValue?oG.fromPartial(e.writeFreeTextPromptListValue):void 0,n.writeInlineSuggestionsLoadingValue=void 0!==e.writeInlineSuggestionsLoadingValue&&null!==e.writeInlineSuggestionsLoadingValue?uG.fromPartial(e.writeInlineSuggestionsLoadingValue):void 0,n.writeCorrectionsOnlySupportValue=void 0!==e.writeCorrectionsOnlySupportValue&&null!==e.writeCorrectionsOnlySupportValue?_G.fromPartial(e.writeCorrectionsOnlySupportValue):void 0,n.writeCorrectionsOnlyValue=void 0!==e.writeCorrectionsOnlyValue&&null!==e.writeCorrectionsOnlyValue?rG.fromPartial(e.writeCorrectionsOnlyValue):void 0,n.translatorRtfSupportValue=void 0!==e.translatorRtfSupportValue&&null!==e.translatorRtfSupportValue?eV.fromPartial(e.translatorRtfSupportValue):void 0,n.translatorStyleVariantsValue=void 0!==e.translatorStyleVariantsValue&&null!==e.translatorStyleVariantsValue?uV.fromPartial(e.translatorStyleVariantsValue):void 0,n.translatorStyleVariantValue=void 0!==e.translatorStyleVariantValue&&null!==e.translatorStyleVariantValue?dV.fromPartial(e.translatorStyleVariantValue):void 0,n.writeTextUnitAlternativesSupportValue=void 0!==e.writeTextUnitAlternativesSupportValue&&null!==e.writeTextUnitAlternativesSupportValue?mG.fromPartial(e.writeTextUnitAlternativesSupportValue):void 0,n.translatorTranslationMemoryListValue=void 0!==e.translatorTranslationMemoryListValue&&null!==e.translatorTranslationMemoryListValue?pV.fromPartial(e.translatorTranslationMemoryListValue):void 0,n.translatorSelectedTranslationMemoryValue=void 0!==e.translatorSelectedTranslationMemoryValue&&null!==e.translatorSelectedTranslationMemoryValue?hV.fromPartial(e.translatorSelectedTranslationMemoryValue):void 0,n.translatorRephraseTargetTextStatusValue=void 0!==e.translatorRephraseTargetTextStatusValue&&null!==e.translatorRephraseTargetTextStatusValue?fV.fromPartial(e.translatorRephraseTargetTextStatusValue):void 0,n.translatorCustomizationsValue=void 0!==e.translatorCustomizationsValue&&null!==e.translatorCustomizationsValue?K$.fromPartial(e.translatorCustomizationsValue):void 0,n.writeCustomizationsValue=void 0!==e.writeCustomizationsValue&&null!==e.writeCustomizationsValue?iG.fromPartial(e.writeCustomizationsValue):void 0,n.translatorHypothesesComparisonEnabledValue=void 0!==e.translatorHypothesesComparisonEnabledValue&&null!==e.translatorHypothesesComparisonEnabledValue?_V.fromPartial(e.translatorHypothesesComparisonEnabledValue):void 0,n}};const XV={$type:"deepl.pb.interactive_text_api.StartSessionRequest",encode:(e,t=new iM)=>(0!==e.sessionMode&&t.uint32(8).int32(e.sessionMode),void 0!==e.baseDocument&&pF.encode(e.baseDocument,t.uint32(18).fork()).join(),void 0!==e.translatorSessionOptions&&mV.encode(e.translatorSessionOptions,t.uint32(26).fork()).join(),void 0!==e.appInformation&&sF.encode(e.appInformation,t.uint32(34).fork()).join(),void 0!==e.previousSessionId&&lF.encode(e.previousSessionId,t.uint32(42).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.sessionMode=n.int32();continue;case 2:if(18!==e)break;o.baseDocument=pF.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorSessionOptions=mV.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.appInformation=sF.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.previousSessionId=lF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XV.$type,sessionMode:_F(e.sessionMode)?qV(e.sessionMode):0,baseDocument:_F(e.baseDocument)?pF.fromJSON(e.baseDocument):void 0,translatorSessionOptions:_F(e.translatorSessionOptions)?mV.fromJSON(e.translatorSessionOptions):void 0,appInformation:_F(e.appInformation)?sF.fromJSON(e.appInformation):void 0,previousSessionId:_F(e.previousSessionId)?lF.fromJSON(e.previousSessionId):void 0}),toJSON(e){const t={};return 0!==e.sessionMode&&(t.sessionMode=function(e){switch(e){case FV.UNSPECIFIED:return"SESSION_MODE_UNSPECIFIED";case FV.TRANSLATOR:return"SESSION_MODE_TRANSLATOR";case FV.WRITE:return"SESSION_MODE_WRITE";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}(e.sessionMode)),void 0!==e.baseDocument&&(t.baseDocument=pF.toJSON(e.baseDocument)),void 0!==e.translatorSessionOptions&&(t.translatorSessionOptions=mV.toJSON(e.translatorSessionOptions)),void 0!==e.appInformation&&(t.appInformation=sF.toJSON(e.appInformation)),void 0!==e.previousSessionId&&(t.previousSessionId=lF.toJSON(e.previousSessionId)),t},create:e=>XV.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};return n.sessionMode=null!==(t=e.sessionMode)&&void 0!==t?t:0,n.baseDocument=void 0!==e.baseDocument&&null!==e.baseDocument?pF.fromPartial(e.baseDocument):void 0,n.translatorSessionOptions=void 0!==e.translatorSessionOptions&&null!==e.translatorSessionOptions?mV.fromPartial(e.translatorSessionOptions):void 0,n.appInformation=void 0!==e.appInformation&&null!==e.appInformation?sF.fromPartial(e.appInformation):void 0,n.previousSessionId=void 0!==e.previousSessionId&&null!==e.previousSessionId?lF.fromPartial(e.previousSessionId):void 0,n}};const KV={$type:"deepl.pb.interactive_text_api.StartSessionResponse",encode:(e,t=new iM)=>(void 0!==e.sessionId&&lF.encode(e.sessionId,t.uint32(10).fork()).join(),void 0!==e.participantId&&dF.encode(e.participantId,t.uint32(18).fork()).join(),""!==e.sessionToken&&t.uint32(26).string(e.sessionToken),void 0!==e.versionRemovedAt&&pM.encode(function(e){const t=Math.trunc(e.getTime()/1e3),n=e.getTime()%1e3*1e6;return{$type:"google.protobuf.Timestamp",seconds:t,nanos:n}}(e.versionRemovedAt),t.uint32(34).fork()).join(),void 0!==e.signalrEndpoint&&t.uint32(42).string(e.signalrEndpoint),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0,signalrEndpoint:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sessionId=lF.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.participantId=dF.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.sessionToken=n.string();continue;case 4:if(34!==e)break;o.versionRemovedAt=hF(pM.decode(n,n.uint32()));continue;case 5:if(42!==e)break;o.signalrEndpoint=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KV.$type,sessionId:_F(e.sessionId)?lF.fromJSON(e.sessionId):void 0,participantId:_F(e.participantId)?dF.fromJSON(e.participantId):void 0,sessionToken:_F(e.sessionToken)?globalThis.String(e.sessionToken):"",versionRemovedAt:_F(e.versionRemovedAt)?fF(e.versionRemovedAt):void 0,signalrEndpoint:_F(e.signalrEndpoint)?globalThis.String(e.signalrEndpoint):void 0}),toJSON(e){const t={};return void 0!==e.sessionId&&(t.sessionId=lF.toJSON(e.sessionId)),void 0!==e.participantId&&(t.participantId=dF.toJSON(e.participantId)),""!==e.sessionToken&&(t.sessionToken=e.sessionToken),void 0!==e.versionRemovedAt&&(t.versionRemovedAt=e.versionRemovedAt.toISOString()),void 0!==e.signalrEndpoint&&(t.signalrEndpoint=e.signalrEndpoint),t},create:e=>KV.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0,signalrEndpoint:void 0};return o.sessionId=void 0!==e.sessionId&&null!==e.sessionId?lF.fromPartial(e.sessionId):void 0,o.participantId=void 0!==e.participantId&&null!==e.participantId?dF.fromPartial(e.participantId):void 0,o.sessionToken=null!==(t=e.sessionToken)&&void 0!==t?t:"",o.versionRemovedAt=null!==(n=e.versionRemovedAt)&&void 0!==n?n:void 0,o.signalrEndpoint=null!==(r=e.signalrEndpoint)&&void 0!==r?r:void 0,o}};const QV={$type:"deepl.pb.interactive_text_api.ParticipantRequest",encode:(e,t=new iM)=>(void 0!==e.appendMessage&&iF.encode(e.appendMessage,t.uint32(10).fork()).join(),void 0!==e.updateAuthenticationTokenMessage&&aF.encode(e.updateAuthenticationTokenMessage,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.appendMessage=iF.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.updateAuthenticationTokenMessage=aF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QV.$type,appendMessage:_F(e.appendMessage)?iF.fromJSON(e.appendMessage):void 0,updateAuthenticationTokenMessage:_F(e.updateAuthenticationTokenMessage)?aF.fromJSON(e.updateAuthenticationTokenMessage):void 0}),toJSON(e){const t={};return void 0!==e.appendMessage&&(t.appendMessage=iF.toJSON(e.appendMessage)),void 0!==e.updateAuthenticationTokenMessage&&(t.updateAuthenticationTokenMessage=aF.toJSON(e.updateAuthenticationTokenMessage)),t},create:e=>QV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};return t.appendMessage=void 0!==e.appendMessage&&null!==e.appendMessage?iF.fromPartial(e.appendMessage):void 0,t.updateAuthenticationTokenMessage=void 0!==e.updateAuthenticationTokenMessage&&null!==e.updateAuthenticationTokenMessage?aF.fromPartial(e.updateAuthenticationTokenMessage):void 0,t}};const ZV={$type:"deepl.pb.interactive_text_api.ParticipantResponse",encode:(e,t=new iM)=>(void 0!==e.confirmedMessage&&eF.encode(e.confirmedMessage,t.uint32(10).fork()).join(),void 0!==e.initializedMessage&&tF.encode(e.initializedMessage,t.uint32(18).fork()).join(),void 0!==e.publishedMessage&&nF.encode(e.publishedMessage,t.uint32(26).fork()).join(),void 0!==e.metaInfoMessage&&rF.encode(e.metaInfoMessage,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.confirmedMessage=eF.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.initializedMessage=tF.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.publishedMessage=nF.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.metaInfoMessage=rF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZV.$type,confirmedMessage:_F(e.confirmedMessage)?eF.fromJSON(e.confirmedMessage):void 0,initializedMessage:_F(e.initializedMessage)?tF.fromJSON(e.initializedMessage):void 0,publishedMessage:_F(e.publishedMessage)?nF.fromJSON(e.publishedMessage):void 0,metaInfoMessage:_F(e.metaInfoMessage)?rF.fromJSON(e.metaInfoMessage):void 0}),toJSON(e){const t={};return void 0!==e.confirmedMessage&&(t.confirmedMessage=eF.toJSON(e.confirmedMessage)),void 0!==e.initializedMessage&&(t.initializedMessage=tF.toJSON(e.initializedMessage)),void 0!==e.publishedMessage&&(t.publishedMessage=nF.toJSON(e.publishedMessage)),void 0!==e.metaInfoMessage&&(t.metaInfoMessage=rF.toJSON(e.metaInfoMessage)),t},create:e=>ZV.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};return t.confirmedMessage=void 0!==e.confirmedMessage&&null!==e.confirmedMessage?eF.fromPartial(e.confirmedMessage):void 0,t.initializedMessage=void 0!==e.initializedMessage&&null!==e.initializedMessage?tF.fromPartial(e.initializedMessage):void 0,t.publishedMessage=void 0!==e.publishedMessage&&null!==e.publishedMessage?nF.fromPartial(e.publishedMessage):void 0,t.metaInfoMessage=void 0!==e.metaInfoMessage&&null!==e.metaInfoMessage?rF.fromPartial(e.metaInfoMessage):void 0,t}};const eF={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",encode:(e,t=new iM)=>(void 0!==e.currentVersion&&cF.encode(e.currentVersion,t.uint32(10).fork()).join(),void 0!==e.throttlingDelay&&cM.encode(e.throttlingDelay,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0,throttlingDelay:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.currentVersion=cF.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.throttlingDelay=cM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eF.$type,currentVersion:_F(e.currentVersion)?cF.fromJSON(e.currentVersion):void 0,throttlingDelay:_F(e.throttlingDelay)?cM.fromJSON(e.throttlingDelay):void 0}),toJSON(e){const t={};return void 0!==e.currentVersion&&(t.currentVersion=cF.toJSON(e.currentVersion)),void 0!==e.throttlingDelay&&(t.throttlingDelay=cM.toJSON(e.throttlingDelay)),t},create:e=>eF.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0,throttlingDelay:void 0};return t.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?cF.fromPartial(e.currentVersion):void 0,t.throttlingDelay=void 0!==e.throttlingDelay&&null!==e.throttlingDelay?cM.fromPartial(e.throttlingDelay):void 0,t}};const tF={$type:"deepl.pb.interactive_text_api.InitializedMessage",encode:(e,t=new iM)=>t,decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.InitializedMessage"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tF.$type}),toJSON:e=>({}),create:e=>tF.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.InitializedMessage"})};const nF={$type:"deepl.pb.interactive_text_api.PublishedMessage",encode(e,t=new iM){for(const n of e.events)uF.encode(n,t.uint32(10).fork()).join();return void 0!==e.currentVersion&&cF.encode(e.currentVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(uF.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.currentVersion=cF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nF.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>uF.fromJSON(e))):[],currentVersion:_F(e.currentVersion)?cF.fromJSON(e.currentVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>uF.toJSON(e)))),void 0!==e.currentVersion&&(n.currentVersion=cF.toJSON(e.currentVersion)),n},create:e=>nF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>uF.fromPartial(e))))||[],n.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?cF.fromPartial(e.currentVersion):void 0,n}};const rF={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",encode:(e,t=new iM)=>(void 0!==e.idle&&oF.encode(e.idle,t.uint32(10).fork()).join(),void 0!==e.translatorTaskMetaInfo&&tV.encode(e.translatorTaskMetaInfo,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.idle=oF.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.translatorTaskMetaInfo=tV.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rF.$type,idle:_F(e.idle)?oF.fromJSON(e.idle):void 0,translatorTaskMetaInfo:_F(e.translatorTaskMetaInfo)?tV.fromJSON(e.translatorTaskMetaInfo):void 0}),toJSON(e){const t={};return void 0!==e.idle&&(t.idle=oF.toJSON(e.idle)),void 0!==e.translatorTaskMetaInfo&&(t.translatorTaskMetaInfo=tV.toJSON(e.translatorTaskMetaInfo)),t},create:e=>rF.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};return t.idle=void 0!==e.idle&&null!==e.idle?oF.fromPartial(e.idle):void 0,t.translatorTaskMetaInfo=void 0!==e.translatorTaskMetaInfo&&null!==e.translatorTaskMetaInfo?tV.fromPartial(e.translatorTaskMetaInfo):void 0,t}};const oF={$type:"deepl.pb.interactive_text_api.Idle",encode:(e,t=new iM)=>(void 0!==e.eventVersion&&cF.encode(e.eventVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.eventVersion=cF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oF.$type,eventVersion:_F(e.eventVersion)?cF.fromJSON(e.eventVersion):void 0}),toJSON(e){const t={};return void 0!==e.eventVersion&&(t.eventVersion=cF.toJSON(e.eventVersion)),t},create:e=>oF.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};return t.eventVersion=void 0!==e.eventVersion&&null!==e.eventVersion?cF.fromPartial(e.eventVersion):void 0,t}};const iF={$type:"deepl.pb.interactive_text_api.AppendMessage",encode(e,t=new iM){for(const n of e.events)uF.encode(n,t.uint32(10).fork()).join();return void 0!==e.baseVersion&&cF.encode(e.baseVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(uF.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.baseVersion=cF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iF.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>uF.fromJSON(e))):[],baseVersion:_F(e.baseVersion)?cF.fromJSON(e.baseVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>uF.toJSON(e)))),void 0!==e.baseVersion&&(n.baseVersion=cF.toJSON(e.baseVersion)),n},create:e=>iF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>uF.fromPartial(e))))||[],n.baseVersion=void 0!==e.baseVersion&&null!==e.baseVersion?cF.fromPartial(e.baseVersion):void 0,n}};const aF={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",encode:(e,t=new iM)=>(""!==e.token&&t.uint32(10).string(e.token),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.token=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aF.$type,token:_F(e.token)?globalThis.String(e.token):""}),toJSON(e){const t={};return""!==e.token&&(t.token=e.token),t},create:e=>aF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};return n.token=null!==(t=e.token)&&void 0!==t?t:"",n}};const sF={$type:"deepl.pb.interactive_text_api.AppInformation",encode:(e,t=new iM)=>(""!==e.os&&t.uint32(10).string(e.os),""!==e.osVersion&&t.uint32(18).string(e.osVersion),""!==e.appVersion&&t.uint32(26).string(e.appVersion),""!==e.appBuild&&t.uint32(34).string(e.appBuild),""!==e.instanceId&&t.uint32(42).string(e.instanceId),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.os=n.string();continue;case 2:if(18!==e)break;o.osVersion=n.string();continue;case 3:if(26!==e)break;o.appVersion=n.string();continue;case 4:if(34!==e)break;o.appBuild=n.string();continue;case 5:if(42!==e)break;o.instanceId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sF.$type,os:_F(e.os)?globalThis.String(e.os):"",osVersion:_F(e.osVersion)?globalThis.String(e.osVersion):"",appVersion:_F(e.appVersion)?globalThis.String(e.appVersion):"",appBuild:_F(e.appBuild)?globalThis.String(e.appBuild):"",instanceId:_F(e.instanceId)?globalThis.String(e.instanceId):""}),toJSON(e){const t={};return""!==e.os&&(t.os=e.os),""!==e.osVersion&&(t.osVersion=e.osVersion),""!==e.appVersion&&(t.appVersion=e.appVersion),""!==e.appBuild&&(t.appBuild=e.appBuild),""!==e.instanceId&&(t.instanceId=e.instanceId),t},create:e=>sF.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i;const a={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};return a.os=null!==(t=e.os)&&void 0!==t?t:"",a.osVersion=null!==(n=e.osVersion)&&void 0!==n?n:"",a.appVersion=null!==(r=e.appVersion)&&void 0!==r?r:"",a.appBuild=null!==(o=e.appBuild)&&void 0!==o?o:"",a.instanceId=null!==(i=e.instanceId)&&void 0!==i?i:"",a}};const lF={$type:"deepl.pb.interactive_text_api.SessionId",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SessionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lF.$type,value:_F(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>lF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SessionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const cF={$type:"deepl.pb.interactive_text_api.EventVersion",encode:(e,t=new iM)=>(void 0!==e.version&&fM.encode({$type:"google.protobuf.Int32Value",value:e.version},t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.version=fM.decode(n,n.uint32()).value;continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cF.$type,version:_F(e.version)?Number(e.version):void 0}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),t},create:e=>cF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};return n.version=null!==(t=e.version)&&void 0!==t?t:void 0,n}};const uF={$type:"deepl.pb.interactive_text_api.FieldEvent",encode:(e,t=new iM)=>(0!==e.fieldName&&t.uint32(8).int32(e.fieldName),void 0!==e.textChangeOperation&&BV.encode(e.textChangeOperation,t.uint32(18).fork()).join(),void 0!==e.createAnnotationOperation&&JV.encode(e.createAnnotationOperation,t.uint32(26).fork()).join(),void 0!==e.removeAnnotationOperation&&zV.encode(e.removeAnnotationOperation,t.uint32(34).fork()).join(),void 0!==e.setPropertyOperation&&YV.encode(e.setPropertyOperation,t.uint32(42).fork()).join(),void 0!==e.participantId&&dF.encode(e.participantId,t.uint32(50).fork()).join(),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.textChangeOperation=BV.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.createAnnotationOperation=JV.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.removeAnnotationOperation=zV.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.setPropertyOperation=YV.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.participantId=dF.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uF.$type,fieldName:_F(e.fieldName)?jV(e.fieldName):0,textChangeOperation:_F(e.textChangeOperation)?BV.fromJSON(e.textChangeOperation):void 0,createAnnotationOperation:_F(e.createAnnotationOperation)?JV.fromJSON(e.createAnnotationOperation):void 0,removeAnnotationOperation:_F(e.removeAnnotationOperation)?zV.fromJSON(e.removeAnnotationOperation):void 0,setPropertyOperation:_F(e.setPropertyOperation)?YV.fromJSON(e.setPropertyOperation):void 0,participantId:_F(e.participantId)?dF.fromJSON(e.participantId):void 0}),toJSON(e){const t={};return 0!==e.fieldName&&(t.fieldName=WV(e.fieldName)),void 0!==e.textChangeOperation&&(t.textChangeOperation=BV.toJSON(e.textChangeOperation)),void 0!==e.createAnnotationOperation&&(t.createAnnotationOperation=JV.toJSON(e.createAnnotationOperation)),void 0!==e.removeAnnotationOperation&&(t.removeAnnotationOperation=zV.toJSON(e.removeAnnotationOperation)),void 0!==e.setPropertyOperation&&(t.setPropertyOperation=YV.toJSON(e.setPropertyOperation)),void 0!==e.participantId&&(t.participantId=dF.toJSON(e.participantId)),t},create:e=>uF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};return n.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,n.textChangeOperation=void 0!==e.textChangeOperation&&null!==e.textChangeOperation?BV.fromPartial(e.textChangeOperation):void 0,n.createAnnotationOperation=void 0!==e.createAnnotationOperation&&null!==e.createAnnotationOperation?JV.fromPartial(e.createAnnotationOperation):void 0,n.removeAnnotationOperation=void 0!==e.removeAnnotationOperation&&null!==e.removeAnnotationOperation?zV.fromPartial(e.removeAnnotationOperation):void 0,n.setPropertyOperation=void 0!==e.setPropertyOperation&&null!==e.setPropertyOperation?YV.fromPartial(e.setPropertyOperation):void 0,n.participantId=void 0!==e.participantId&&null!==e.participantId?dF.fromPartial(e.participantId):void 0,n}};const dF={$type:"deepl.pb.interactive_text_api.ParticipantId",encode:(e,t=new iM)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dF.$type,value:_F(e.value)?globalThis.Number(e.value):0}),toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>dF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const pF={$type:"deepl.pb.interactive_text_api.BaseDocument",encode(e,t=new iM){for(const n of e.fields)gF.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.fields.push(gF.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pF.$type,fields:globalThis.Array.isArray(null==e?void 0:e.fields)?e.fields.map((e=>gF.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.fields)||void 0===t?void 0:t.length)&&(n.fields=e.fields.map((e=>gF.toJSON(e)))),n},create:e=>pF.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};return n.fields=(null===(t=e.fields)||void 0===t?void 0:t.map((e=>gF.fromPartial(e))))||[],n}};const gF={$type:"deepl.pb.interactive_text_api.Field",encode(e,t=new iM){0!==e.fieldName&&t.uint32(8).int32(e.fieldName),""!==e.text&&t.uint32(18).string(e.text);for(const n of e.annotations)JV.encode(n,t.uint32(26).fork()).join();for(const n of e.properties)YV.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.text=n.string();continue;case 3:if(26!==e)break;o.annotations.push(JV.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.properties.push(YV.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gF.$type,fieldName:_F(e.fieldName)?jV(e.fieldName):0,text:_F(e.text)?globalThis.String(e.text):"",annotations:globalThis.Array.isArray(null==e?void 0:e.annotations)?e.annotations.map((e=>JV.fromJSON(e))):[],properties:globalThis.Array.isArray(null==e?void 0:e.properties)?e.properties.map((e=>YV.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return 0!==e.fieldName&&(r.fieldName=WV(e.fieldName)),""!==e.text&&(r.text=e.text),(null===(t=e.annotations)||void 0===t?void 0:t.length)&&(r.annotations=e.annotations.map((e=>JV.toJSON(e)))),(null===(n=e.properties)||void 0===n?void 0:n.length)&&(r.properties=e.properties.map((e=>YV.toJSON(e)))),r},create:e=>gF.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};return i.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,i.text=null!==(n=e.text)&&void 0!==n?n:"",i.annotations=(null===(r=e.annotations)||void 0===r?void 0:r.map((e=>JV.fromPartial(e))))||[],i.properties=(null===(o=e.properties)||void 0===o?void 0:o.map((e=>YV.fromPartial(e))))||[],i}};function hF(e){let t=1e3*(e.seconds||0);return t+=(e.nanos||0)/1e6,new globalThis.Date(t)}function fF(e){return e instanceof globalThis.Date?e:"string"==typeof e?new globalThis.Date(e):hF(pM.fromJSON(e))}function _F(e){return null!=e}const mF=new Set([IM.$type,BG.$type,HG.$type,I$.$type,b$.$type,jG.$type,AG.$type,OG.$type,LG.$type,xG.$type,DG.$type,MG.$type,GG.$type,$G.$type,VG.$type,U$.$type,M$.$type,G$.$type,$$.$type,V$.$type]);function vF(e){return e.translatorSourceLanguagesValue?e.translatorSourceLanguagesValue:e.translatorTargetLanguagesValue?e.translatorTargetLanguagesValue:e.translatorRequestedSourceLanguageValue?e.translatorRequestedSourceLanguageValue:e.translatorCalculatedSourceLanguageValue?e.translatorCalculatedSourceLanguageValue:e.translatorRequestedTargetLanguageValue?e.translatorRequestedTargetLanguageValue:e.translatorCalculatedTargetLanguageValue?e.translatorCalculatedTargetLanguageValue:e.translatorFormalityModesValue?e.translatorFormalityModesValue:e.translatorFormalityModeValue?e.translatorFormalityModeValue:e.translatorGlossarySupportValue?e.translatorGlossarySupportValue:e.translatorGlossaryListValue?e.translatorGlossaryListValue:e.translatorGlossaryIdValue?e.translatorGlossaryIdValue:e.translatorLanguageModelsValue?e.translatorLanguageModelsValue:e.translatorLanguageModelValue?e.translatorLanguageModelValue:e.translatorTextDirectionValue?e.translatorTextDirectionValue:e.translatorMaximumTextLengthValue?e.translatorMaximumTextLengthValue:e.translatorUnsupportedSourceLanguageValue?e.translatorUnsupportedSourceLanguageValue:e.writeGlossarySupportValue?e.writeGlossarySupportValue:e.writeGlossaryListValue?e.writeGlossaryListValue:e.writeGlossaryIdValue?e.writeGlossaryIdValue:e.writeLanguagesValue?e.writeLanguagesValue:e.writeMaximumTextLengthValue?e.writeMaximumTextLengthValue:e.writeUnsupportedLanguageValue?e.writeUnsupportedLanguageValue:e.writeRequestedLanguageValue?e.writeRequestedLanguageValue:e.writeCalculatedLanguageValue?e.writeCalculatedLanguageValue:e.writeStyleVariantsValue?e.writeStyleVariantsValue:e.writeStyleVariantValue?e.writeStyleVariantValue:e.translatorSourceLanguageDetectionWeightsValue?e.translatorSourceLanguageDetectionWeightsValue:e.writeGlossaryLanguagesValue?e.writeGlossaryLanguagesValue:e.writeStyleGuideSupportValue?e.writeStyleGuideSupportValue:e.writeStyleGuideIdValue?e.writeStyleGuideIdValue:e.translatorStyleGuideSupportValue?e.translatorStyleGuideSupportValue:e.translatorStyleGuideIdValue?e.translatorStyleGuideIdValue:e.writeTemplateAdaptationTemplatesValue?e.writeTemplateAdaptationTemplatesValue:e.translatorFreeTextPromptListValue?e.translatorFreeTextPromptListValue:e.writeFreeTextPromptListValue?e.writeFreeTextPromptListValue:e.interfaceLanguageValue?e.interfaceLanguageValue:e.translatorLanguageModelPreferencesValue?e.translatorLanguageModelPreferencesValue:e.writeInlineSuggestionsLoadingValue?e.writeInlineSuggestionsLoadingValue:e.writeCorrectionsOnlySupportValue?e.writeCorrectionsOnlySupportValue:e.writeCorrectionsOnlyValue?e.writeCorrectionsOnlyValue:e.translatorRtfSupportValue?e.translatorRtfSupportValue:e.translatorStyleVariantsValue?e.translatorStyleVariantsValue:e.translatorStyleVariantValue?e.translatorStyleVariantValue:e.writeTextUnitAlternativesSupportValue?e.writeTextUnitAlternativesSupportValue:e.translatorTranslationMemoryListValue?e.translatorTranslationMemoryListValue:e.translatorSelectedTranslationMemoryValue?e.translatorSelectedTranslationMemoryValue:e.translatorRephraseTargetTextStatusValue?e.translatorRephraseTargetTextStatusValue:e.translatorCustomizationsValue?e.translatorCustomizationsValue:e.writeCustomizationsValue?e.writeCustomizationsValue:e.translatorHypothesesComparisonEnabledValue?e.translatorHypothesesComparisonEnabledValue:void 0}function TF(e,t){switch(t.$type){case F$.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguagesValue:t});case W$.$type:return Object.assign(Object.assign({},e),{translatorRequestedSourceLanguageValue:t});case H$.$type:return Object.assign(Object.assign({},e),{translatorCalculatedSourceLanguageValue:t});case j$.$type:return Object.assign(Object.assign({},e),{translatorTargetLanguagesValue:t});case q$.$type:return Object.assign(Object.assign({},e),{translatorRequestedTargetLanguageValue:t});case B$.$type:return Object.assign(Object.assign({},e),{translatorCalculatedTargetLanguageValue:t});case nV.$type:return Object.assign(Object.assign({},e),{translatorFormalityModesValue:t});case rV.$type:return Object.assign(Object.assign({},e),{translatorFormalityModeValue:t});case Q$.$type:return Object.assign(Object.assign({},e),{translatorGlossarySupportValue:t});case IV.$type:return Object.assign(Object.assign({},e),{translatorGlossaryListValue:t});case J$.$type:return Object.assign(Object.assign({},e),{translatorGlossaryIdValue:t});case oV.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelsValue:t});case iV.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelValue:t});case aV.$type:return Object.assign(Object.assign({},e),{translatorTextDirectionValue:t});case sV.$type:return Object.assign(Object.assign({},e),{translatorMaximumTextLengthValue:t});case lV.$type:return Object.assign(Object.assign({},e),{translatorUnsupportedSourceLanguageValue:t});case KM.$type:return Object.assign(Object.assign({},e),{writeLanguagesValue:t});case ZM.$type:return Object.assign(Object.assign({},e),{writeRequestedLanguageValue:t});case eG.$type:return Object.assign(Object.assign({},e),{writeCalculatedLanguageValue:t});case sG.$type:return Object.assign(Object.assign({},e),{writeStyleVariantsValue:t});case lG.$type:return Object.assign(Object.assign({},e),{writeStyleVariantValue:t});case tG.$type:return Object.assign(Object.assign({},e),{writeGlossaryIdValue:t});case hG.$type:return Object.assign(Object.assign({},e),{writeGlossarySupportValue:t});case gG.$type:return Object.assign(Object.assign({},e),{writeGlossaryListValue:t});case aG.$type:return Object.assign(Object.assign({},e),{writeMaximumTextLengthValue:t});case cG.$type:return Object.assign(Object.assign({},e),{writeUnsupportedLanguageValue:t});case cV.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguageDetectionWeightsValue:t});case QM.$type:return Object.assign(Object.assign({},e),{writeGlossaryLanguagesValue:t});case fG.$type:return Object.assign(Object.assign({},e),{writeStyleGuideSupportValue:t});case nG.$type:return Object.assign(Object.assign({},e),{writeStyleGuideIdValue:t});case NG.$type:return Object.assign(Object.assign({},e),{writeTemplateAdaptationTemplatesValue:t});case Z$.$type:return Object.assign(Object.assign({},e),{translatorStyleGuideSupportValue:t});case z$.$type:return Object.assign(Object.assign({},e),{translatorStyleGuideIdValue:t});case X$.$type:return Object.assign(Object.assign({},e),{translatorFreeTextPromptListValue:t});case oG.$type:return Object.assign(Object.assign({},e),{writeFreeTextPromptListValue:t});case Y$.$type:return Object.assign(Object.assign({},e),{interfaceLanguageValue:t});case SV.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelPreferencesValue:t});case uG.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionsLoadingValue:t});case _G.$type:return Object.assign(Object.assign({},e),{writeCorrectionsOnlySupportValue:t});case rG.$type:return Object.assign(Object.assign({},e),{writeCorrectionsOnlyValue:t});case eV.$type:return Object.assign(Object.assign({},e),{translatorRtfSupportValue:t});case uV.$type:return Object.assign(Object.assign({},e),{translatorStyleVariantsValue:t});case dV.$type:return Object.assign(Object.assign({},e),{translatorStyleVariantValue:t});case mG.$type:return Object.assign(Object.assign({},e),{writeTextUnitAlternativesSupportValue:t});case pV.$type:return Object.assign(Object.assign({},e),{translatorTranslationMemoryListValue:t});case hV.$type:return Object.assign(Object.assign({},e),{translatorSelectedTranslationMemoryValue:t});case fV.$type:return Object.assign(Object.assign({},e),{translatorRephraseTargetTextStatusValue:t});case K$.$type:return Object.assign(Object.assign({},e),{translatorCustomizationsValue:t});case iG.$type:return Object.assign(Object.assign({},e),{writeCustomizationsValue:t});case _V.$type:return Object.assign(Object.assign({},e),{translatorHypothesesComparisonEnabledValue:t})}}function yF(e,t){const n=vF(e);if(!n)return e;let r;switch(n.$type){case ZM.$type:case eG.$type:r=Object.assign(Object.assign({},n),{language:void 0!==t?TG.create({code:t}):void 0});break;case W$.$type:case H$.$type:r=Object.assign(Object.assign({},n),{sourceLanguage:void 0!==t?bV.create({code:t}):void 0});break;case q$.$type:case B$.$type:r=Object.assign(Object.assign({},n),{targetLanguage:void 0!==t?wV.create({code:t}):void 0});break;default:return e}return TF(e,r)}function SF(e){return e.$type===BV.$type}function EF(e){return e.$type===JV.$type}function IF(e){return e.$type===zV.$type}function AF(e){return e.$type===YV.$type}function bF(e){if(e.textChangeOperation)return e.textChangeOperation;if(e.createAnnotationOperation)return e.createAnnotationOperation;if(e.removeAnnotationOperation)return e.removeAnnotationOperation;if(e.setPropertyOperation)return e.setPropertyOperation;throw new Error("FieldEvent does not contain an operation")}function wF(e,t,n){const r={fieldName:t,participantId:n,$type:uF.$type};switch(e.$type){case BV.$type:return Object.assign(Object.assign({},r),{textChangeOperation:e});case JV.$type:return Object.assign(Object.assign({},r),{createAnnotationOperation:e});case zV.$type:return Object.assign(Object.assign({},r),{removeAnnotationOperation:e});case YV.$type:return Object.assign(Object.assign({},r),{setPropertyOperation:e})}}function OF(e,t,n){return{$type:BV.$type,range:{$type:AM.$type,start:e,end:t},text:n}}function RF(e,t,n,r){return function(e,t){switch(t.$type){case QG.$type:return Object.assign(Object.assign({},e),{textUnitPayload:t});case IM.$type:return Object.assign(Object.assign({},e),{requestWordAlternativesPayload:t});case yM.$type:return Object.assign(Object.assign({},e),{providedWordAlternativesPayload:t});case BG.$type:return Object.assign(Object.assign({},e),{selectWordAlternativePayload:t});case w$.$type:return Object.assign(Object.assign({},e),{translatorGlossaryReplacementPayload:t});case EM.$type:return Object.assign(Object.assign({},e),{requestTextUnitAlternativesPayload:t});case O$.$type:return Object.assign(Object.assign({},e),{translatorProvidedTextUnitAlternativesPayload:t});case HG.$type:return Object.assign(Object.assign({},e),{selectTextUnitAlternativePayload:t});case I$.$type:return Object.assign(Object.assign({},e),{translatorRequestAutocompletionPayload:t});case A$.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutocompletionPayload:t});case b$.$type:return Object.assign(Object.assign({},e),{translatorSelectAutocompletionPayload:t});case R$.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutomaticTextUnitAlternativesPayload:t});case jG.$type:return Object.assign(Object.assign({},e),{selectAutomaticTextUnitAlternativePayload:t});case YM.$type:return Object.assign(Object.assign({},e),{writeProvidedTextUnitAlternativesPayload:t});case XM.$type:return Object.assign(Object.assign({},e),{writeProvidedAutomaticTextUnitAlternativesPayload:t});case zM.$type:return Object.assign(Object.assign({},e),{writeDiffUnitPayload:t});case YG.$type:return Object.assign(Object.assign({},e),{textFormattingPayload:t});case N$.$type:return Object.assign(Object.assign({},e),{translatorRequestClarifyPayload:t});case x$.$type:return Object.assign(Object.assign({},e),{translatorSelectClarifyAnswerPayload:t});case AG.$type:return Object.assign(Object.assign({},e),{writeRequestChangeStyleAlternativesAnnotationPayload:t});case wG.$type:return Object.assign(Object.assign({},e),{writeProvidedChangeStyleAlternativesAnnotationPayload:t});case OG.$type:return Object.assign(Object.assign({},e),{writeSelectChangeStyleAlternativeAnnotationPayload:t});case LG.$type:return Object.assign(Object.assign({},e),{writeRequestTemplateAdaptationAnnotationPayload:t});case xG.$type:return Object.assign(Object.assign({},e),{writeProvidedTemplateAdaptationAnnotationPayload:t});case DG.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionAnnotationPayload:t});case UG.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionSpanAnnotationPayload:t});case MG.$type:return Object.assign(Object.assign({},e),{writeActOnInlineSuggestionAnnotationPayload:t});case GG.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionsTextUnitStateAnnotationPayload:t});case $G.$type:return Object.assign(Object.assign({},e),{writeRequestInlineSuggestionImprovedTextAnnotationPayload:t});case VG.$type:return Object.assign(Object.assign({},e),{writeProvidedInlineSuggestionImprovedTextAnnotationPayload:t});case MM.$type:return Object.assign(Object.assign({},e),{customRuleAnnotationPayload:t});case k$.$type:return Object.assign(Object.assign({},e),{translatorRequestRephraseTargetTextAnnotationPayload:t});case n$.$type:return Object.assign(Object.assign({},e),{translationMemoryAnnotationPayload:t});case U$.$type:return Object.assign(Object.assign({},e),{translatorProvidedHypothesesComparisonStateAnnotationPayload:t});case M$.$type:return Object.assign(Object.assign({},e),{translatorSelectHypothesesComparisonVariantAnnotationPayload:t});case G$.$type:return Object.assign(Object.assign({},e),{translatorSkipHypothesesComparisonAnnotationPayload:t});case l$.$type:return Object.assign(Object.assign({},e),{translationMemorySegmentAnnotationPayload:t});case $$.$type:return Object.assign(Object.assign({},e),{translatorUpdateTranslationMemorySegmentsAnnotationPayload:t});case V$.$type:return Object.assign(Object.assign({},e),{translatorUpdateTranslationMemorySegmentsResultAnnotationPayload:t});default:throw new Error("Could not match annotation payload.")}}({$type:JV.$type,annotationId:e,range:{$type:AM.$type,start:t,end:n}},r)}function NF(e,t){const n={$type:YV.$type,propertyName:e};return void 0===t?n:TF(n,t)}class PF{diff(e,t,n={}){let r;"function"==typeof n?(r=n,n={}):"callback"in n&&(r=n.callback);const o=this.castInput(e,n),i=this.castInput(t,n),a=this.removeEmpty(this.tokenize(o,n)),s=this.removeEmpty(this.tokenize(i,n));return this.diffWithOptionsObj(a,s,n,r)}diffWithOptionsObj(e,t,n,r){var o;const i=e=>(e=this.postProcess(e,n),r?void setTimeout((function(){r(e)}),0):e),a=t.length,s=e.length;let l=1,c=a+s;null!=n.maxEditLength&&(c=Math.min(c,n.maxEditLength));const u=null!==(o=n.timeout)&&void 0!==o?o:1/0,d=Date.now()+u,p=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(p[0],t,e,0,n);if(p[0].oldPos+1>=s&&g+1>=a)return i(this.buildValues(p[0].lastComponent,t,e));let h=-1/0,f=1/0;const _=()=>{for(let r=Math.max(h,-l);r<=Math.min(f,l);r+=2){let o;const l=p[r-1],c=p[r+1];l&&(p[r-1]=void 0);let u=!1;if(c){const e=c.oldPos-r;u=c&&0<=e&&e<a}const d=l&&l.oldPos+1<s;if(u||d){if(o=!d||u&&l.oldPos<c.oldPos?this.addToPath(c,!0,!1,0,n):this.addToPath(l,!1,!0,1,n),g=this.extractCommon(o,t,e,r,n),o.oldPos+1>=s&&g+1>=a)return i(this.buildValues(o.lastComponent,t,e))||!0;p[r]=o,o.oldPos+1>=s&&(f=Math.min(f,r-1)),g+1>=a&&(h=Math.max(h,r+1))}else p[r]=void 0}l++};if(r)!function e(){setTimeout((function(){if(l>c||Date.now()>d)return r(void 0);_()||e()}),0)}();else for(;l<=c&&Date.now()<=d;){const e=_();if(e)return e}}addToPath(e,t,n,r,o){const i=e.lastComponent;return i&&!o.oneChangePerToken&&i.added===t&&i.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:i.count+1,added:t,removed:n,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:i}}}extractCommon(e,t,n,r,o){const i=t.length,a=n.length;let s=e.oldPos,l=s-r,c=0;for(;l+1<i&&s+1<a&&this.equals(n[s+1],t[l+1],o);)l++,s++,c++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!o.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l}equals(e,t,n){return n.comparator?n.comparator(e,t):e===t||!!n.ignoreCase&&e.toLowerCase()===t.toLowerCase()}removeEmpty(e){const t=[];for(let n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}castInput(e,t){return e}tokenize(e,t){return Array.from(e)}join(e){return e.join("")}postProcess(e,t){return e}get useLongestToken(){return!1}buildValues(e,t,n){const r=[];let o;for(;e;)r.push(e),o=e.previousComponent,delete e.previousComponent,e=o;r.reverse();const i=r.length;let a=0,s=0,l=0;for(;a<i;a++){const e=r[a];if(e.removed)e.value=this.join(n.slice(l,l+e.count)),l+=e.count;else{if(!e.added&&this.useLongestToken){let r=t.slice(s,s+e.count);r=r.map((function(e,t){const r=n[l+t];return r.length>e.length?r:e})),e.value=this.join(r)}else e.value=this.join(t.slice(s,s+e.count));s+=e.count,e.added||(l+=e.count)}}return r}}const LF=new class extends PF{};var CF;function xF(e,t){return{$type:AM.$type,start:e,end:t}}!function(e){e[e.BaseThenNew=0]="BaseThenNew",e[e.NewThenBase=1]="NewThenBase"}(CF||(CF={}));const kF=(e,t,n=CF.BaseThenNew)=>{var r,o;if(IF(t)||IF(e)||EF(e)||SF(e)&&(null===(r=e.range)||void 0===r?void 0:r.start)===(null===(o=e.range)||void 0===o?void 0:o.end)&&0===e.text.length)return t;if(AF(e)&&AF(t))return((e,t,n)=>e.propertyName!==t.propertyName||n===CF.BaseThenNew?t:e)(e,t,n);if(AF(e)||AF(t))return t;if(SF(e)&&SF(t))return((e,t,n)=>{const r=e.range,o=t.range;if(r.start>o.end)return t;const i=e.text.length+r.start-r.end;if(r.end<o.start)return Object.assign(Object.assign({},t),{range:xF(o.start+i,o.end+i)});const a=r.start<o.start||r.start===o.start&&n===CF.BaseThenNew,s=r.end<o.end;if(a){const n=r.start+e.text.length;return s?Object.assign(Object.assign({},t),{range:xF(n,o.end+i)}):Object.assign(Object.assign({},t),{range:xF(n,n)})}return s?Object.assign(Object.assign({},t),{range:xF(o.start,o.end+i),text:t.text+e.text}):Object.assign(Object.assign({},t),{range:xF(o.start,r.start)})})(e,t,n);if(SF(e)&&EF(t))return((e,t)=>{const n=e.range,r=t.range;if(n.start>r.end)return t;const o=e.text.length+n.start-n.end;if(n.end<r.start)return Object.assign(Object.assign({},t),{range:xF(r.start+o,r.end+o)});const i=n.start<r.start,a=n.end<r.end,s=n.start+e.text.length;return i?a?Object.assign(Object.assign({},t),{range:xF(s,r.end+o)}):n.end===r.end?Object.assign(Object.assign({},t),{range:xF(s,s)}):Object.assign(Object.assign({},t),{range:xF(n.start,n.start)}):a?n.start===r.start?Object.assign(Object.assign({},t),{range:xF(s,r.end+o)}):Object.assign(Object.assign({},t),{range:xF(r.start,r.end+o)}):Object.assign(Object.assign({},t),{range:xF(r.start,s)})})(e,t);throw new Error(`Operational transform for operations of type [${null==e?void 0:e.$type}, ${null==t?void 0:t.$type}] not implemented.`)},DF=(e,t)=>[kF(t,e,CF.NewThenBase),kF(e,t,CF.BaseThenNew)],UF=(e,t)=>{let n=[...e];const r=t.map((e=>{let t=e;return n=n.map((e=>{const[n,r]=DF(t,e);return t=n,r})),t}));return[n,r]},MF=(e,t)=>{let n=[...t];return{transformedIncomingEvents:e.map((e=>{let t=bF(e);return n=n.map((n=>{if(e.fieldName!==n.fieldName)return n;const[r,o]=DF(t,bF(n));return t=r,"participantId"in n?wF(o,n.fieldName,n.participantId):wF(o,n.fieldName)})),wF(t,e.fieldName,e.participantId)})),transformedExistingEvents:n}};function GF(e){return e.$type===iF.$type?{$type:QV.$type,appendMessage:e}:{$type:QV.$type,updateAuthenticationTokenMessage:e}}function $F(e){if(!e.range)throw new Error("TextChangeOperation must have a range to calculate delta");return e.text.length-e.range.end+e.range.start}function VF(e){const t=[],n=[];let r=0,o=0;for(const i of e){const e=$F(i);e<0?(o+=e,t.push(Object.assign(Object.assign({},i),{range:Object.assign(Object.assign({},i.range),{start:i.range.start-r,end:i.range.end-r})}))):(r+=e,n.push(Object.assign(Object.assign({},i),{range:Object.assign(Object.assign({},i.range),{start:i.range.start-o,end:i.range.end-o})})))}const[i,a]=UF(t,n);return[...t,...a]}function FF(e,t){var n;if(""===e||""===t){return[BV.create({range:AM.create({start:0,end:null!==(n=e.length)&&void 0!==n?n:0}),text:t})]}const[r,o,i]=function(e,t){const n=Math.min(e.length,t.length);let r=0,o=0;for(let o=0;o<n&&e[o]===t[o];o+=1)r+=1;for(let r=1;r<=n&&e[e.length-r]===t[t.length-r];r+=1)o+=1;return r+o>n&&(o=n-r),[e.slice(r,e.length-o),t.slice(r,t.length-o),r,o]}(e,t),a=(s=r,l=o,c={ignoreCase:!1,timeout:250},LF.diff(s,l,c));var s,l,c;if(!a)return[BV.create({range:AM.create({start:0,end:e.length}),text:t})];const{compactedOperations:u}=a.reduce((({compactedOperations:e,index:t},n,r)=>{if(!n.added&&!n.removed)return{compactedOperations:e,index:t+n.value.length};const o=a[r-1];if(!o||!o.added&&!o.removed){const r=function(e,t){if(!e.added&&!e.removed)throw new Error("Cannot convert change object that represents common chunk to text change operation");return e.removed?OF(t,t+e.value.length,""):OF(t,t,e.value)}(n,t);return{compactedOperations:[...e,r],index:t+r.text.length}}const i=e[e.length-1],s=function(e,t){return t.removed?OF(e.range.start,e.range.end+t.value.length,e.text):OF(e.range.start,e.range.end,e.text+t.value)}(i,n);return{compactedOperations:[...e.slice(0,-1),s],index:t-$F(i)+$F(s)}}),{compactedOperations:[],index:i});return u}const jF=(e,t)=>e.split("-")[0]===t.split("-")[0];function WF(e,t){var n;if(!1===e){const e=new Error(null!=t?t:"assertion failure");throw null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,e,WF),e}}function HF(e){throw new Error("non-exhaustive case analysis")}const qF=e=>{const t=document.createElement("div");t.textContent=e;return t.innerHTML.replace(/'/g,"&#39;").replace(/"/g,"&quot;")};function BF(e,t){return t.includes(e)}function*JF(e,t){for(let n=0;n<e.length&&n<t.length;n+=1)yield[e[n],t[n]]}function zF(e){return new Promise((t=>{setTimeout(t,e)}))}class YF{constructor(e,t){this.document=e,this.name=t,this.stateReadonly=this.document.stateReadonly.pipe(wC((e=>ij(this.name,e)))),this.content=this.stateReadonly.pipe(wC((e=>e.content)),NC())}getCurrentContent(){return ij(this.name,this.document.stateReadonly.value).content}update(e){const t=VF(FF(this.getCurrentContent(),e));return this.document.applyOperationBatch([[this.name,t]]),t}prettyPrint(){const e=ij(this.name,this.document.stateReadonly.value);return ZF(this.name,e)}}const XF={content:"",properties:aD(),annotations:aD()};function KF(e,t){if(t.$type===BV.$type){const n=e.content;try{const r=function(e,t){var n,r;if(void 0===t.range||t.range.start>e.length||t.range.start<0||t.range.end>e.length||t.range.end<0||t.range.start>t.range.end)throw new Error(`Tried to apply out of range operation with start: ${null===(n=t.range)||void 0===n?void 0:n.start} and end: ${null===(r=t.range)||void 0===r?void 0:r.end} to string of length: ${e.length}`);return e.slice(0,t.range.start)+t.text+e.slice(t.range.end)}(n,t),o=ej(e.annotations,[t]);return Object.assign(Object.assign({},e),{content:r,annotations:o})}catch(t){return console.warn(`Error applying text change operation to document: ${t}. Skipping it.`),e}}else{if(t.$type===JV.$type)return function(e,t){const{annotationId:n}=t;WF(void 0!==n,"CreateAnnotationOperation without ID");const r=function(e){return e.textUnitPayload?e.textUnitPayload:e.requestWordAlternativesPayload?e.requestWordAlternativesPayload:e.providedWordAlternativesPayload?e.providedWordAlternativesPayload:e.providedWordAlternativeHighlightPayload?e.providedWordAlternativeHighlightPayload:e.selectWordAlternativePayload?e.selectWordAlternativePayload:e.translatorGlossaryReplacementPayload?e.translatorGlossaryReplacementPayload:e.requestTextUnitAlternativesPayload?e.requestTextUnitAlternativesPayload:e.translatorProvidedTextUnitAlternativesPayload?e.translatorProvidedTextUnitAlternativesPayload:e.selectTextUnitAlternativePayload?e.selectTextUnitAlternativePayload:e.translatorRequestAutocompletionPayload?e.translatorRequestAutocompletionPayload:e.translatorProvidedAutocompletionPayload?e.translatorProvidedAutocompletionPayload:e.translatorSelectAutocompletionPayload?e.translatorSelectAutocompletionPayload:e.translatorProvidedAutomaticTextUnitAlternativesPayload?e.translatorProvidedAutomaticTextUnitAlternativesPayload:e.selectAutomaticTextUnitAlternativePayload?e.selectAutomaticTextUnitAlternativePayload:e.writeProvidedTextUnitAlternativesPayload?e.writeProvidedTextUnitAlternativesPayload:e.writeProvidedAutomaticTextUnitAlternativesPayload?e.writeProvidedAutomaticTextUnitAlternativesPayload:e.writeDiffUnitPayload?e.writeDiffUnitPayload:e.textFormattingPayload?e.textFormattingPayload:e.translatorProvidedClarifyHighlightPayload?e.translatorProvidedClarifyHighlightPayload:e.translatorProvidedClarifyQuestionPayload?e.translatorProvidedClarifyQuestionPayload:e.translatorRequestClarifyPayload?e.translatorRequestClarifyPayload:e.translatorSelectClarifyAnswerPayload?e.translatorSelectClarifyAnswerPayload:e.writeRequestChangeStyleAlternativesAnnotationPayload?e.writeRequestChangeStyleAlternativesAnnotationPayload:e.writeProvidedChangeStyleAlternativesAnnotationPayload?e.writeProvidedChangeStyleAlternativesAnnotationPayload:e.writeSelectChangeStyleAlternativeAnnotationPayload?e.writeSelectChangeStyleAlternativeAnnotationPayload:e.translatorClarifyStatusPayload?e.translatorClarifyStatusPayload:e.customRuleAnnotationPayload?e.customRuleAnnotationPayload:e.writeRequestTemplateAdaptationAnnotationPayload?e.writeRequestTemplateAdaptationAnnotationPayload:e.writeProvidedTemplateAdaptationAnnotationPayload?e.writeProvidedTemplateAdaptationAnnotationPayload:e.writeInlineSuggestionAnnotationPayload?e.writeInlineSuggestionAnnotationPayload:e.writeInlineSuggestionSpanAnnotationPayload?e.writeInlineSuggestionSpanAnnotationPayload:e.writeActOnInlineSuggestionAnnotationPayload?e.writeActOnInlineSuggestionAnnotationPayload:e.writeInlineSuggestionsTextUnitStateAnnotationPayload?e.writeInlineSuggestionsTextUnitStateAnnotationPayload:e.writeRequestInlineSuggestionImprovedTextAnnotationPayload?e.writeRequestInlineSuggestionImprovedTextAnnotationPayload:e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload?e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload:e.translatorRequestRephraseTargetTextAnnotationPayload?e.translatorRequestRephraseTargetTextAnnotationPayload:e.translationMemoryAnnotationPayload?e.translationMemoryAnnotationPayload:e.translatorProvidedHypothesesComparisonStateAnnotationPayload?e.translatorProvidedHypothesesComparisonStateAnnotationPayload:e.translatorSelectHypothesesComparisonVariantAnnotationPayload?e.translatorSelectHypothesesComparisonVariantAnnotationPayload:e.translatorSkipHypothesesComparisonAnnotationPayload?e.translatorSkipHypothesesComparisonAnnotationPayload:e.translationMemorySegmentAnnotationPayload?e.translationMemorySegmentAnnotationPayload:e.translatorUpdateTranslationMemorySegmentsAnnotationPayload?e.translatorUpdateTranslationMemorySegmentsAnnotationPayload:e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload?e.translatorUpdateTranslationMemorySegmentsResultAnnotationPayload:null}(t);if(null===r)return e;const o={operation:t,specificPayload:r},i=e.annotations.update(r.$type,(e=>void 0===e?[o]:[...e,o]));return Object.assign(Object.assign({},e),{annotations:i})}(e,t);if(t.$type===zV.$type)return function(e,t){const{annotationId:n}=t;WF(void 0!==n,"RemoveAnnotationOperation without ID");const r=e.annotations.map((e=>e.filter((e=>{var t;return(null===(t=e.operation.annotationId)||void 0===t?void 0:t.value)!==n.value}))));return Object.assign(Object.assign({},e),{annotations:r})}(e,t);if(t.$type===YV.$type)return function(e,t){const{propertyName:n}=t,r=vF(t),o=e.properties.get(n);if(void 0===r){const t=e.properties.delete(n);return Object.assign(Object.assign({},e),{properties:t})}if(void 0===o||r.$type===o.type){const t=e.properties.set(n,{type:r.$type,value:r});return Object.assign(Object.assign({},e),{properties:t})}throw new Error(`PropertyValue has type ${r.$type}, but ${o.type} expected`)}(e,t)}HF()}function QF(e,t){var n;return[...(null!==(n=e.annotations.get(t))&&void 0!==n?n:aD()).values()]}function ZF(e,t){return{fieldName:e,text:t.content,annotations:[...t.annotations.values()].flatMap((e=>[...e.entries()].map((([e,t])=>({id:e,range:t.operation.range,annotationPayload:t.specificPayload}))))),properties:[...t.properties.entries()].map((([e,t])=>({propertyName:e,propertyValue:t.value})))}}function ej(e,t){return e.map(((e,n)=>{if(function(e){return!mF.has(e)}(n)){const[n,r]=UF(t,e.map((e=>e.operation)));return[...JF(e,r)].map((([e,t])=>({operation:t,specificPayload:e.specificPayload})))}return e}))}let tj=class{constructor(){this.initialState=aD(),this.state=new iC(this.initialState),this.stateReadonly=this.state}updateState(e){this.state.next(e(this.state.value))}updateFieldState(e,t){this.updateState((n=>{const r=ij(e,n);return n.set(e,t(r))}))}applyItaEventBatch(e){const t=e.reduce(rj,this.state.value);this.state.next(t)}applyOperationBatch(e){let t=this.state.value;for(const[n,r]of e)for(const e of r)t=oj(n,t,e);this.state.next(t)}serialize(){return nj(this.state.value)}prettyPrint(){return{fields:[...this.state.value.entries()].map((([e,t])=>ZF(e,t)))}}reset(){this.state.next(this.initialState)}};function nj(e){return pF.create({fields:[...e.entries()].map((([e,t])=>function(e,t){return{$type:gF.$type,fieldName:e,text:t.content,annotations:[...t.annotations.values()].flatMap((e=>[...e.values()].map((e=>e.operation)))),properties:[...t.properties.entries()].map((([e,t])=>NF(e,t.value)))}}(e,t)))})}function rj(e,t){const n=bF(t);return oj(t.fieldName,e,n)}function oj(e,t,n){return t.update(e,((e=XF)=>KF(e,n)))}function ij(e,t){var n;return null!==(n=t.get(e))&&void 0!==n?n:XF}class aj{constructor(e,t,n){this.name=e,this.sessionMode=t,this.document=n,this.bufferedInitialEvents=[]}addChangeHandler(e){this.onChange=e,this.onChange(this.bufferedInitialEvents),this.bufferedInitialEvents=[]}applyFieldEventBatch(e){this.document.applyItaEventBatch(e)}publishChange(e,t){const n=t.map((t=>wF(t,e)));this.publishEvents(n)}publishChanges(e){const t=e.flatMap((([e,t])=>t.map((t=>wF(t,e)))));this.publishEvents(t)}publishEvents(e){this.onChange?this.onChange(e):this.bufferedInitialEvents=[...this.bufferedInitialEvents,...e]}}function sj(e){return e.$type===QV.$type}function lj(e){return e.$type===nF.$type}function cj(e){return e.$type===rF.$type}function uj(e){if(function(e){return e.$type===ZV.$type}(e))return function(e){if(null==e?void 0:e.confirmedMessage)return e.confirmedMessage;if(null==e?void 0:e.initializedMessage)return e.initializedMessage;if(null==e?void 0:e.publishedMessage)return e.publishedMessage;if(null==e?void 0:e.metaInfoMessage)return e.metaInfoMessage;throw new Error("ParticipantResponse does not contain a message")}(e);if(sj(e))return function(e){if(null==e?void 0:e.appendMessage)return e.appendMessage;if(null==e?void 0:e.updateAuthenticationTokenMessage)return e.updateAuthenticationTokenMessage;throw new Error("ParticipantRequest does not contain a message")}(e);throw new Error("Extracting message failed, you need to pass a ParticipantRequest or ParticipantResponse")}class dj extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class pj extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class gj extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class hj extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class fj extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class _j extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class mj extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class vj extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}class Tj{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class yj{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var Sj;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(Sj||(Sj={}));class Ej{constructor(){}log(e,t){}}Ej.instance=new Ej;class Ij{static isRequired(e,t){if(null==e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class Aj{static get isBrowser(){return!Aj.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!Aj.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!Aj.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name}}function bj(e,t){let n="";return wj(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach((e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `})),n.substr(0,n.length-1)}(e)}'`)):"string"==typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function wj(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function Oj(e,t,n,r,o,i){const a={},[s,l]=Pj();a[s]=l,e.log(Sj.Trace,`(${t} transport) sending data. ${bj(o,i.logMessageContent)}.`);const c=wj(o)?"arraybuffer":"text",u=await n.post(r,{content:o,headers:{...a,...i.headers},responseType:c,timeout:i.timeout,withCredentials:i.withCredentials});e.log(Sj.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class Rj{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((e=>{}))}}class Nj{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${Sj[e]}: ${t}`;switch(e){case Sj.Critical:case Sj.Error:this.out.error(n);break;case Sj.Warning:this.out.warn(n);break;case Sj.Information:this.out.info(n);break;default:this.out.log(n)}}}}function Pj(){let e="X-SignalR-User-Agent";return Aj.isNode&&(e="User-Agent"),[e,Lj("8.0.7",Cj(),kj(),xj())]}function Lj(e,t,n,r){let o="Microsoft SignalR/";const i=e.split(".");return o+=`${i[0]}.${i[1]}`,o+=` (${e}; `,o+=t&&""!==t?`${t}; `:"Unknown OS; ",o+=`${n}`,o+=r?`; ${r}`:"; Unknown Runtime Version",o+=")",o}function Cj(){if(!Aj.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function xj(){if(Aj.isNode)return process.versions.node}function kj(){return Aj.isNode?"NodeJS":"Browser"}function Dj(e){return e.stack?e.stack:e.message?e.message:`${e}`}class Uj extends yj{constructor(e){if(super(),this._logger=e,"undefined"==typeof fetch||Aj.isNode){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._jar=new(e("tough-cookie").CookieJar),"undefined"==typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new gj;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new gj});let r,o=null;if(e.timeout){const r=e.timeout;o=setTimeout((()=>{t.abort(),this._logger.log(Sj.Warning,"Timeout from HTTP request."),n=new pj}),r)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},wj(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(e){if(n)throw n;throw this._logger.log(Sj.Warning,`Error from HTTP request. ${e}.`),e}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const e=await Mj(r,"text");throw new dj(e||r.statusText,r.status)}const i=Mj(r,e.responseType),a=await i;return new Tj(r.status,r.statusText,a)}getCookieString(e){let t="";return Aj.isNode&&this._jar&&this._jar.getCookies(e,((e,n)=>t=n.join("; "))),t}}function Mj(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class Gj extends yj{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new gj):e.method?e.url?new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(wj(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach((e=>{r.setRequestHeader(e,o[e])})),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new gj)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new Tj(r.status,r.statusText,r.response||r.responseText)):n(new dj(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(Sj.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new dj(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(Sj.Warning,"Timeout from HTTP request."),n(new pj)},r.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class $j extends yj{constructor(e){if(super(),"undefined"!=typeof fetch||Aj.isNode)this._httpClient=new Uj(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new Gj(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new gj):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Vj{static write(e){return`${e}${Vj.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Vj.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(Vj.RecordSeparator);return t.pop(),t}}Vj.RecordSeparatorCode=30,Vj.RecordSeparator=String.fromCharCode(Vj.RecordSeparatorCode);class Fj{writeHandshakeRequest(e){return Vj.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(wj(e)){const r=new Uint8Array(e),o=r.indexOf(Vj.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,i))),n=r.byteLength>i?r.slice(i).buffer:null}else{const r=e,o=r.indexOf(Vj.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=r.substring(0,i),n=r.length>i?r.substring(i):null}const r=Vj.parse(t),o=JSON.parse(r[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var jj;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"}(jj||(jj={}));class Wj{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Rj(this,e)}}class Hj{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},r=()=>{};wj(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise(((t,n)=>{e=t,r=n}))),this._messages.push(new qj(t,this._totalMessageCount,e,r))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const r=this._messages[n];if(r._id<=e.sequenceId)t=n,wj(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===jj.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:jj.Sequence,sequenceId:e}));const t=this._messages;for(const e of t)await this._connection.send(e._message);this._reconnectInProgress=!1}_dispose(e){null!=e||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case jj.Invocation:case jj.StreamItem:case jj.Completion:case jj.StreamInvocation:case jj.CancelInvocation:return!0;case jj.Close:case jj.Sequence:case jj.Ping:case jj.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:jj.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}}class qj{constructor(e,t,n,r){this._message=e,this._id=t,this._resolver=n,this._rejector=r}}var Bj;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(Bj||(Bj={}));class Jj{static create(e,t,n,r,o,i,a){return new Jj(e,t,n,r,o,i,a)}constructor(e,t,n,r,o,i,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Sj.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ij.isRequired(e,"connection"),Ij.isRequired(t,"logger"),Ij.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!=o?o:3e4,this.keepAliveIntervalInMilliseconds=null!=i?i:15e3,this._statefulReconnectBufferSize=null!=a?a:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new Fj,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Bj.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:jj.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Bj.Disconnected&&this._connectionState!==Bj.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Bj.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Bj.Connecting,this._logger.log(Sj.Debug,"Starting HubConnection.");try{await this._startInternal(),Aj.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Bj.Connected,this._connectionStarted=!0,this._logger.log(Sj.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=Bj.Disconnected,this._logger.log(Sj.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise(((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t}));await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(Sj.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(Sj.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Hj(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(Sj.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(e){}}_stopInternal(e){if(this._connectionState===Bj.Disconnected)return this._logger.log(Sj.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Bj.Disconnecting)return this._logger.log(Sj.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=Bj.Disconnecting,this._logger.log(Sj.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Sj.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===Bj.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new gj("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,r);let i;const a=new Wj;return a.cancelCallback=()=>{const e=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],i.then((()=>this._sendWithProtocol(e)))},this._callbacks[o.invocationId]=(e,t)=>{t?a.error(t):e&&(e.type===jj.Completion?e.error?a.error(new Error(e.error)):a.complete():a.next(e.item))},i=this._sendWithProtocol(o).catch((e=>{a.error(e),delete this._callbacks[o.invocationId]})),this._launchStreams(n,i),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(n,o),o}invoke(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,r),i=new Promise(((e,t)=>{this._callbacks[o.invocationId]=(n,r)=>{r?t(r):n&&(n.type===jj.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const r=this._sendWithProtocol(o).catch((e=>{t(e),delete this._callbacks[o.invocationId]}));this._launchStreams(n,r)}));return i}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const e of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(e))switch(e.type){case jj.Invocation:this._invokeClientMethod(e).catch((e=>{this._logger.log(Sj.Error,`Invoke client method threw error: ${Dj(e)}`)}));break;case jj.StreamItem:case jj.Completion:{const t=this._callbacks[e.invocationId];if(t){e.type===jj.Completion&&delete this._callbacks[e.invocationId];try{t(e)}catch(e){this._logger.log(Sj.Error,`Stream callback threw error: ${Dj(e)}`)}}break}case jj.Ping:break;case jj.Close:{this._logger.log(Sj.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}case jj.Ack:this._messageBuffer&&this._messageBuffer._ack(e);break;case jj.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(e);break;default:this._logger.log(Sj.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(e){const t="Error parsing handshake response: "+e;this._logger.log(Sj.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(Sj.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(Sj.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===Bj.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(Sj.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(Sj.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),o=!!e.invocationId;let i,a,s;for(const n of r)try{const r=i;i=await n.apply(this,e.arguments),o&&i&&r&&(this._logger.log(Sj.Error,`Multiple results provided for '${t}'. Sending error to server.`),s=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(e){a=e,this._logger.log(Sj.Error,`A callback for the method '${t}' threw error '${e}'.`)}s?await this._sendWithProtocol(s):o?(a?s=this._createCompletionMessage(e.invocationId,`${a}`,null):void 0!==i?s=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(Sj.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),s=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(s)):i&&this._logger.log(Sj.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(Sj.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new gj("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Bj.Disconnecting?this._completeClose(e):this._connectionState===Bj.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Bj.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Bj.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!=e?e:new Error("Connection closed.")),this._messageBuffer=void 0),Aj.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(Sj.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,r);if(null===o)return this._logger.log(Sj.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=Bj.Reconnecting,e?this._logger.log(Sj.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(Sj.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(Sj.Error,`An onreconnecting callback called with error '${e}' threw error '${t}'.`)}if(this._connectionState!==Bj.Reconnecting)return void this._logger.log(Sj.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(Sj.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise((e=>{this._reconnectDelayHandle=setTimeout(e,o)})),this._reconnectDelayHandle=void 0,this._connectionState!==Bj.Reconnecting)return void this._logger.log(Sj.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=Bj.Connected,this._logger.log(Sj.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((e=>e.apply(this,[this.connection.connectionId])))}catch(e){this._logger.log(Sj.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`)}return}catch(e){if(this._logger.log(Sj.Information,`Reconnect attempt failed because of error '${e}'.`),this._connectionState!==Bj.Reconnecting)return this._logger.log(Sj.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===Bj.Disconnecting&&this._completeClose());r=e instanceof Error?e:new Error(e.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(Sj.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(Sj.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach((n=>{const r=t[n];try{r(null,e)}catch(t){this._logger.log(Sj.Error,`Stream 'error' callback called with '${e}' threw error: ${Dj(t)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:jj.Invocation}:{arguments:t,target:e,type:jj.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:n.toString(),streamIds:r,target:e,type:jj.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:jj.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:e=>{let r;r=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:e=>{t=t.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,e))))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let r=0;r<e.length;r++){const o=e[r];if(this._isObservable(o)){const i=this._invocationId;this._invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:jj.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:jj.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:jj.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:jj.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:jj.Completion}:{invocationId:e,result:n,type:jj.Completion}}_createCloseMessage(){return{type:jj.Close}}}const zj=[0,2e3,1e4,3e4,null];class Yj{constructor(e){this._retryDelays=void 0!==e?[...e,null]:zj}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Xj{}Xj.Authorization="Authorization",Xj.Cookie="Cookie";class Kj extends yj{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Xj.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Xj.Authorization]&&delete e.headers[Xj.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var Qj,Zj;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(Qj||(Qj={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(Zj||(Zj={}));let eW=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class tW{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new eW,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(Ij.isRequired(e,"url"),Ij.isRequired(t,"transferFormat"),Ij.isIn(t,Zj,"transferFormat"),this._url=e,this._logger.log(Sj.Trace,"(LongPolling transport) Connecting."),t===Zj.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=Pj(),o={[n]:r,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===Zj.Binary&&(i.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(Sj.Trace,`(LongPolling transport) polling: ${a}.`);const s=await this._httpClient.get(a,i);200!==s.statusCode?(this._logger.log(Sj.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new dj(s.statusText||"",s.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(Sj.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(Sj.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(Sj.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new dj(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(Sj.Trace,`(LongPolling transport) data received. ${bj(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(Sj.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof pj?this._logger.log(Sj.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(Sj.Trace,`(LongPolling transport) Poll errored after shutdown: ${e.message}`)}}finally{this._logger.log(Sj.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Oj(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Sj.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Sj.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=Pj();e[t]=n;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,r)}catch(e){o=e}o?o instanceof dj&&(404===o.statusCode?this._logger.log(Sj.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Sj.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(Sj.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Sj.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(Sj.Trace,e),this.onclose(this._closeError)}}}class nW{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return Ij.isRequired(e,"url"),Ij.isRequired(t,"transferFormat"),Ij.isIn(t,Zj,"transferFormat"),this._logger.log(Sj.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let o,i=!1;if(t===Zj.Text){if(Aj.isBrowser||Aj.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[r,i]=Pj();n[r]=i,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{o.onmessage=e=>{if(this.onreceive)try{this._logger.log(Sj.Trace,`(SSE transport) data received. ${bj(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(e){return void this._close(e)}},o.onerror=e=>{i?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(Sj.Information,`SSE connected to ${this._url}`),this._eventSource=o,i=!0,n()}}catch(e){return void r(e)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(e){return this._eventSource?Oj(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class rW{constructor(e,t,n,r,o,i){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,t){let n;return Ij.isRequired(e,"url"),Ij.isRequired(t,"transferFormat"),Ij.isIn(t,Zj,"transferFormat"),this._logger.log(Sj.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,o)=>{let i;e=e.replace(/^http/,"ws");const a=this._httpClient.getCookieString(e);let s=!1;if(Aj.isNode||Aj.isReactNative){const t={},[r,o]=Pj();t[r]=o,n&&(t[Xj.Authorization]=`Bearer ${n}`),a&&(t[Xj.Cookie]=a),i=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);i||(i=new this._webSocketConstructor(e)),t===Zj.Binary&&(i.binaryType="arraybuffer"),i.onopen=t=>{this._logger.log(Sj.Information,`WebSocket connected to ${e}.`),this._webSocket=i,s=!0,r()},i.onerror=e=>{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(Sj.Information,`(WebSockets transport) ${t}.`)},i.onmessage=e=>{if(this._logger.log(Sj.Trace,`(WebSockets transport) data received. ${bj(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(e){return void this._close(e)}},i.onclose=e=>{if(s)this._close(e);else{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(t))}}}))}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Sj.Trace,`(WebSockets transport) sending data. ${bj(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Sj.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class oW{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ij.isRequired(e,"url"),this._logger=function(e){return void 0===e?new Nj(Sj.Information):null===e?Ej.instance:void 0!==e.log?e:new Nj(e)}(t.logger),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let n=null,r=null;if(Aj.isNode&&"undefined"!=typeof require){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;n=e("ws"),r=e("eventsource")}Aj.isNode||"undefined"==typeof WebSocket||t.WebSocket?Aj.isNode&&!t.WebSocket&&n&&(t.WebSocket=n):t.WebSocket=WebSocket,Aj.isNode||"undefined"==typeof EventSource||t.EventSource?Aj.isNode&&!t.EventSource&&void 0!==r&&(t.EventSource=r):t.EventSource=EventSource,this._httpClient=new Kj(t.httpClient||new $j(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Zj.Binary,Ij.isIn(e,Zj,"transferFormat"),this._logger.log(Sj.Debug,`Starting connection with transfer format '${Zj[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Sj.Error,e),await this._stopPromise,Promise.reject(new gj(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Sj.Error,e),Promise.reject(new gj(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new iW(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(Sj.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(Sj.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((e=>{this._stopPromiseResolver=e})),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(e){}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(Sj.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Sj.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==Qj.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(Qj.WebSockets),await this._startTransport(t,e)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new gj("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof tW&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(Sj.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(Sj.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}}async _getNegotiationResponse(e){const t={},[n,r]=Pj();t[n]=r;const o=this._resolveNegotiateUrl(e);this._logger.log(Sj.Debug,`Sending negotiation request: ${o}.`);try{const e=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect?Promise.reject(new mj("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(e){let t="Failed to complete negotiation with the server: "+e;return e instanceof dj&&404===e.statusCode&&(t+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Sj.Error,t),Promise.reject(new mj(t))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,r){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(Sj.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,r),void(this.connectionId=n.connectionId);const i=[],a=n.availableTransports||[];let s=n;for(const n of a){const a=this._resolveTransportOrError(n,t,r,!0===(null==s?void 0:s.useStatefulReconnect));if(a instanceof Error)i.push(`${n.transport} failed:`),i.push(a);else if(this._isITransport(a)){if(this.transport=a,!s){try{s=await this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}o=this._createConnectUrl(e,s.connectionToken)}try{return await this._startTransport(o,r),void(this.connectionId=s.connectionId)}catch(e){if(this._logger.log(Sj.Error,`Failed to start the transport '${n.transport}': ${e}`),s=void 0,i.push(new _j(`${n.transport} failed: ${e}`,Qj[n.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(Sj.Debug,e),Promise.reject(new gj(e))}}}}return i.length>0?Promise.reject(new vj(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case Qj.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new rW(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Qj.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new nW(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Qj.LongPolling:return new tW(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let r=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{r=!0}r&&this._stopConnection(n)}else this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,r){const o=Qj[e.transport];if(null==o)return this._logger.log(Sj.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||!!(t&e)}(t,o))return this._logger.log(Sj.Debug,`Skipping transport '${Qj[o]}' because it was disabled by the client.`),new fj(`'${Qj[o]}' is disabled by the client.`,o);if(!(e.transferFormats.map((e=>Zj[e])).indexOf(n)>=0))return this._logger.log(Sj.Debug,`Skipping transport '${Qj[o]}' because it does not support the requested transfer format '${Zj[n]}'.`),new Error(`'${Qj[o]}' does not support ${Zj[n]}.`);if(o===Qj.WebSockets&&!this._options.WebSocket||o===Qj.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Sj.Debug,`Skipping transport '${Qj[o]}' because it is not supported in your environment.'`),new hj(`'${Qj[o]}' is not supported in your environment.`,o);this._logger.log(Sj.Debug,`Selecting transport '${Qj[o]}'.`);try{return this.features.reconnect=o===Qj.WebSockets?r:void 0,this._constructTransport(o)}catch(e){return e}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(Sj.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(Sj.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(Sj.Error,`Connection disconnected with error '${e}'.`):this._logger.log(Sj.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((e=>{this._logger.log(Sj.Error,`TransportSendQueue.stop() threw error '${e}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(Sj.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(Sj.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!Aj.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(Sj.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class iW{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new aW,this._transportResult=new aW,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new aW),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new aW;const e=this._transportResult;this._transportResult=void 0;const t="string"==typeof this._buffer[0]?this._buffer.join(""):iW._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(t){e.reject(t)}}}static _concatBuffers(e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r=0;for(const t of e)n.set(new Uint8Array(t),r),r+=t.byteLength;return n.buffer}}class aW{constructor(){this.promise=new Promise(((e,t)=>[this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class sW{constructor(){this.name="json",this.version=2,this.transferFormat=Zj.Text}parseMessages(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=Ej.instance);const n=Vj.parse(e),r=[];for(const e of n){const n=JSON.parse(e);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case jj.Invocation:this._isInvocationMessage(n);break;case jj.StreamItem:this._isStreamItemMessage(n);break;case jj.Completion:this._isCompletionMessage(n);break;case jj.Ping:case jj.Close:break;case jj.Ack:this._isAckMessage(n);break;case jj.Sequence:this._isSequenceMessage(n);break;default:t.log(Sj.Information,"Unknown message type '"+n.type+"' ignored.");continue}r.push(n)}return r}writeMessage(e){return Vj.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}const lW={trace:Sj.Trace,debug:Sj.Debug,info:Sj.Information,information:Sj.Information,warn:Sj.Warning,warning:Sj.Warning,error:Sj.Error,critical:Sj.Critical,none:Sj.None};class cW{configureLogging(e){if(Ij.isRequired(e,"logging"),function(e){return void 0!==e.log}(e))this.logger=e;else if("string"==typeof e){const t=function(e){const t=lW[e.toLowerCase()];if(void 0!==t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new Nj(t)}else this.logger=new Nj(e);return this}withUrl(e,t){return Ij.isRequired(e,"url"),Ij.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return Ij.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Yj(e):this.reconnectPolicy=e:this.reconnectPolicy=new Yj,this}withServerTimeout(e){return Ij.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Ij.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null==e?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new oW(this.url,e);return Jj.create(t,this.logger||Ej.instance,this.protocol||new sW,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var uW,dW,pW,gW=4294967295;function hW(e,t,n){var r=Math.floor(n/4294967296),o=n;e.setUint32(t,r),e.setUint32(t+4,o)}function fW(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var _W=("undefined"==typeof process||"never"!==(null===(uW=null===process||void 0===process?void 0:process.env)||void 0===uW?void 0:uW.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function mW(e){for(var t=e.length,n=0,r=0;r<t;){var o=e.charCodeAt(r++);if(4294967168&o)if(4294965248&o){if(o>=55296&&o<=56319&&r<t){var i=e.charCodeAt(r);56320==(64512&i)&&(++r,o=((1023&o)<<10)+(1023&i)+65536)}n+=4294901760&o?4:3}else n+=2;else n++}return n}var vW=_W?new TextEncoder:void 0,TW=_W?"undefined"!=typeof process&&"force"!==(null===(dW=null===process||void 0===process?void 0:process.env)||void 0===dW?void 0:dW.TEXT_ENCODING)?200:0:gW;var yW=(null==vW?void 0:vW.encodeInto)?function(e,t,n){vW.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(vW.encode(e),n)};function SW(e,t,n){for(var r=t,o=r+n,i=[],a="";r<o;){var s=e[r++];if(128&s)if(192==(224&s)){var l=63&e[r++];i.push((31&s)<<6|l)}else if(224==(240&s)){l=63&e[r++];var c=63&e[r++];i.push((31&s)<<12|l<<6|c)}else if(240==(248&s)){var u=(7&s)<<18|(l=63&e[r++])<<12|(c=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u)}else i.push(s);else i.push(s);i.length>=4096&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(a+=String.fromCharCode.apply(String,i)),a}var EW=_W?new TextDecoder:null,IW=_W?"undefined"!=typeof process&&"force"!==(null===(pW=null===process||void 0===process?void 0:process.env)||void 0===pW?void 0:pW.TEXT_DECODER)?200:0:gW;var AW=function(e,t){this.type=e,this.data=t},bW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wW=function(e){function t(n){var r=e.call(this,n)||this,o=Object.create(t.prototype);return Object.setPrototypeOf(r,o),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return bW(t,e),t}(Error);var OW={type:-1,encode:function(e){var t,n,r,o;return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,n),o}var i=n/4294967296,a=4294967295&n;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,r<<2|3&i),t.setUint32(4,a),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,r),hW(t,4,n),o}((t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),o=Math.floor(r/1e9),{sec:n+o,nsec:r-1e9*o})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:fW(t,4),nsec:t.getUint32(0)};default:throw new wW("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},RW=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(OW)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var o=1+t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(o=r(e,t)))return new AW(-1-n,o)}for(n=0;n<this.encoders.length;n++){var r,o;if(null!=(r=this.encoders[n]))if(null!=(o=r(e,t)))return new AW(n,o)}return e instanceof AW?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new AW(t,e)},e.defaultCodec=new e,e}();function NW(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var PW=function(){function e(e,t,n,r,o,i,a,s){void 0===e&&(e=RW.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=o,this.forceFloat32=i,this.ignoreUndefined=a,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>TW){var t=mW(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),yW(e,this.bytes,this.pos),this.pos+=t}else{t=mW(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,o=n,i=0;i<r;){var a=e.charCodeAt(i++);if(4294967168&a){if(4294965248&a){if(a>=55296&&a<=56319&&i<r){var s=e.charCodeAt(i);56320==(64512&s)&&(++i,a=((1023&a)<<10)+(1023&s)+65536)}4294901760&a?(t[o++]=a>>18&7|240,t[o++]=a>>12&63|128,t[o++]=a>>6&63|128):(t[o++]=a>>12&15|224,t[o++]=a>>6&63|128)}else t[o++]=a>>6&31|192;t[o++]=63&a|128}else t[o++]=a}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=NW(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,o=e;r<o.length;r++){var i=o[r];this.doEncode(i,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,o=t;r<o.length;r++){void 0!==e[o[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var o=0,i=n;o<i.length;o++){var a=i[o],s=e[a];this.ignoreUndefined&&void 0===s||(this.encodeString(a),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,o=n;e.setUint32(t,r),e.setUint32(t+4,o)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),hW(this.view,this.pos,e),this.pos+=8},e}();function LW(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var CW=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,o=this.caches[n-1];r<o.length;r++){for(var i=o[r],a=i.bytes,s=0;s<n;s++)if(a[s]!==e[t+s])continue e;return i.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var o=SW(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,o),o},e}(),xW=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},kW=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},DW=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},UW=function(e){return this instanceof UW?(this.v=e,this):new UW(e)},MW=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof UW?Promise.resolve(e.value.v).then(l,c):u(i[0][2],e)}(o[e](t))}catch(e){u(i[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},GW=new DataView(new ArrayBuffer(0)),$W=new Uint8Array(GW.buffer),VW=function(){try{GW.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),FW=new VW("Insufficient data"),jW=new CW,WW=function(){function e(e,t,n,r,o,i,a,s){void 0===e&&(e=RW.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=gW),void 0===r&&(r=gW),void 0===o&&(o=gW),void 0===i&&(i=gW),void 0===a&&(a=gW),void 0===s&&(s=jW),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=i,this.maxExtLength=a,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=GW,this.bytes=$W,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=NW(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=NW(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=NW(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return kW(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,o;return xW(this,void 0,void 0,(function(){var i,a,s,l,c,u,d,p;return kW(this,(function(g){switch(g.label){case 0:i=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),t=DW(e),g.label=2;case 2:return[4,t.next()];case 3:if((n=g.sent()).done)return[3,5];if(s=n.value,i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{a=this.doDecodeSync(),i=!0}catch(e){if(!(e instanceof VW))throw e}this.totalPos+=this.pos,g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=g.sent(),r={error:l},[3,12];case 7:return g.trys.push([7,,10,11]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,9];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(i){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw u=(c=this).headByte,d=c.pos,p=c.totalPos,new RangeError("Insufficient data in parsing ".concat(LW(u)," at ").concat(p," (").concat(d," in the current buffer)"))}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return MW(this,arguments,(function(){var n,r,o,i,a,s,l,c,u;return kW(this,(function(d){switch(d.label){case 0:n=t,r=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),o=DW(e),d.label=2;case 2:return[4,UW(o.next())];case 3:if((i=d.sent()).done)return[3,12];if(a=i.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,UW(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=d.sent())instanceof VW))throw s;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=d.sent(),c={error:l},[3,19];case 14:return d.trys.push([14,,17,18]),i&&!i.done&&(u=o.return)?[4,UW(u.call(o))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!==(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){r=this.lookU16();t=this.decodeExtension(r,2)}else{if(201!==e)throw new wW("Unrecognized type byte: ".concat(LW(e)));r=this.lookU32();t=this.decodeExtension(r,4)}this.complete();for(var o=this.stack;o.length>0;){var i=o[o.length-1];if(0===i.type){if(i.array[i.position]=t,i.position++,i.position!==i.size)continue e;o.pop(),t=i.array}else{if(1===i.type){if(a=void 0,"string"!==(a=typeof t)&&"number"!==a)throw new wW("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new wW("The key __proto__ is not allowed");i.key=t,i.type=2;continue e}if(i.map[i.key]=t,i.readCount++,i.readCount!==i.size){i.key=null,i.type=1;continue e}o.pop(),t=i.map}}return t}var a},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new wW("Unrecognized array type byte: ".concat(LW(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new wW("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new wW("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new wW("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw FW;var r,o=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,o,e):e>IW?function(e,t,n){var r=e.subarray(t,t+n);return EW.decode(r)}(this.bytes,o,e):SW(this.bytes,o,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new wW("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw FW;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new wW("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=fW(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();class HW{static write(e){let t=e.byteLength||e.length;const n=[];do{let e=127&t;t>>=7,t>0&&(e|=128),n.push(e)}while(t>0);t=e.byteLength||e.length;const r=new Uint8Array(n.length+t);return r.set(n,0),r.set(e,n.length),r.buffer}static parse(e){const t=[],n=new Uint8Array(e),r=[0,7,14,21,28];for(let o=0;o<e.byteLength;){let i,a=0,s=0;do{i=n[o+a],s|=(127&i)<<r[a],a++}while(a<Math.min(5,e.byteLength-o)&&128&i);if(128&i&&a<5)throw new Error("Cannot read message size.");if(5===a&&i>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=o+a+s))throw new Error("Incomplete message.");t.push(n.slice?n.slice(o+a,o+a+s):n.subarray(o+a,o+a+s)),o=o+a+s}return t}}const qW=new Uint8Array([145,jj.Ping]);class BW{constructor(e){this.name="messagepack",this.version=2,this.transferFormat=Zj.Binary,this._errorResult=1,this._voidResult=2,this._nonVoidResult=3,e=e||{},this._encoder=new PW(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat),this._decoder=new WW(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength)}parseMessages(e,t){if(!(n=e)||"undefined"==typeof ArrayBuffer||!(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var n;null===t&&(t=Ej.instance);const r=HW.parse(e),o=[];for(const e of r){const n=this._parseMessage(e,t);n&&o.push(n)}return o}writeMessage(e){switch(e.type){case jj.Invocation:return this._writeInvocation(e);case jj.StreamInvocation:return this._writeStreamInvocation(e);case jj.StreamItem:return this._writeStreamItem(e);case jj.Completion:return this._writeCompletion(e);case jj.Ping:return HW.write(qW);case jj.CancelInvocation:return this._writeCancelInvocation(e);case jj.Close:return this._writeClose();case jj.Ack:return this._writeAck(e);case jj.Sequence:return this._writeSequence(e);default:throw new Error("Invalid message type.")}}_parseMessage(e,t){if(0===e.length)throw new Error("Invalid payload.");const n=this._decoder.decode(e);if(0===n.length||!(n instanceof Array))throw new Error("Invalid payload.");const r=n[0];switch(r){case jj.Invocation:return this._createInvocationMessage(this._readHeaders(n),n);case jj.StreamItem:return this._createStreamItemMessage(this._readHeaders(n),n);case jj.Completion:return this._createCompletionMessage(this._readHeaders(n),n);case jj.Ping:return this._createPingMessage(n);case jj.Close:return this._createCloseMessage(n);case jj.Ack:return this._createAckMessage(n);case jj.Sequence:return this._createSequenceMessage(n);default:return t.log(Sj.Information,"Unknown message type '"+r+"' ignored."),null}}_createCloseMessage(e){if(e.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:e.length>=3?e[2]:void 0,error:e[1],type:jj.Close}}_createPingMessage(e){if(e.length<1)throw new Error("Invalid payload for Ping message.");return{type:jj.Ping}}_createInvocationMessage(e,t){if(t.length<5)throw new Error("Invalid payload for Invocation message.");const n=t[2];return n?{arguments:t[4],headers:e,invocationId:n,streamIds:[],target:t[3],type:jj.Invocation}:{arguments:t[4],headers:e,streamIds:[],target:t[3],type:jj.Invocation}}_createStreamItemMessage(e,t){if(t.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:e,invocationId:t[2],item:t[3],type:jj.StreamItem}}_createCompletionMessage(e,t){if(t.length<4)throw new Error("Invalid payload for Completion message.");const n=t[3];if(n!==this._voidResult&&t.length<5)throw new Error("Invalid payload for Completion message.");let r,o;switch(n){case this._errorResult:r=t[4];break;case this._nonVoidResult:o=t[4]}return{error:r,headers:e,invocationId:t[2],result:o,type:jj.Completion}}_createAckMessage(e){if(e.length<1)throw new Error("Invalid payload for Ack message.");return{sequenceId:e[1],type:jj.Ack}}_createSequenceMessage(e){if(e.length<1)throw new Error("Invalid payload for Sequence message.");return{sequenceId:e[1],type:jj.Sequence}}_writeInvocation(e){let t;return t=e.streamIds?this._encoder.encode([jj.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments,e.streamIds]):this._encoder.encode([jj.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments]),HW.write(t.slice())}_writeStreamInvocation(e){let t;return t=e.streamIds?this._encoder.encode([jj.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments,e.streamIds]):this._encoder.encode([jj.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments]),HW.write(t.slice())}_writeStreamItem(e){const t=this._encoder.encode([jj.StreamItem,e.headers||{},e.invocationId,e.item]);return HW.write(t.slice())}_writeCompletion(e){const t=e.error?this._errorResult:void 0!==e.result?this._nonVoidResult:this._voidResult;let n;switch(t){case this._errorResult:n=this._encoder.encode([jj.Completion,e.headers||{},e.invocationId,t,e.error]);break;case this._voidResult:n=this._encoder.encode([jj.Completion,e.headers||{},e.invocationId,t]);break;case this._nonVoidResult:n=this._encoder.encode([jj.Completion,e.headers||{},e.invocationId,t,e.result])}return HW.write(n.slice())}_writeCancelInvocation(e){const t=this._encoder.encode([jj.CancelInvocation,e.headers||{},e.invocationId]);return HW.write(t.slice())}_writeClose(){const e=this._encoder.encode([jj.Close,null]);return HW.write(e.slice())}_writeAck(e){const t=this._encoder.encode([jj.Ack,e.sequenceId]);return HW.write(t.slice())}_writeSequence(e){const t=this._encoder.encode([jj.Sequence,e.sequenceId]);return HW.write(t.slice())}_readHeaders(e){const t=e[1];if("object"!=typeof t)throw new Error("Invalid headers.");return t}}var JW,zW,YW=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};class XW{constructor(e){var t,n,r,o;this.currentVersion={$type:cF.$type,version:void 0},this.isInitialized=!1,this.pendingEvents=[],this.sentEvents=[],this.confirmedEvents=[],this.syncedSnapshot=aD(),this.incomingEventBatches=e.pipe(wC((e=>uj(e))),(o=LL(t=e=>{(function(e){return e.$type===eF.$type})(e)&&this.handleConfirmedMessage(e),function(e){return e.$type===tF.$type}(e)&&this.handleInitializedMessage()})||n||r?{next:t,error:n,complete:r}:t)?ZL((function(e,t){var n;null===(n=o.subscribe)||void 0===n||n.call(o);var r=!0;e.subscribe(eC(t,(function(e){var n;null===(n=o.next)||void 0===n||n.call(o,e),t.next(e)}),(function(){var e;r=!1,null===(e=o.complete)||void 0===e||e.call(o),t.complete()}),(function(e){var n;r=!1,null===(n=o.error)||void 0===n||n.call(o,e),t.error(e)}),(function(){var e,t;r&&(null===(e=o.unsubscribe)||void 0===e||e.call(o)),null===(t=o.finalize)||void 0===t||t.call(o)})))})):XL,OC(lj),wC((e=>this.handlePublished(e))),CC())}addClientEvents(e){return YW(this,void 0,void 0,(function*(){this.pendingEvents.push(...e),yield this.trySendPendingEvents()}))}handleConfirmedMessage(e){this.currentVersion=e.currentVersion,this.syncedSnapshot=this.sentEvents.reduce(rj,this.syncedSnapshot),this.confirmedEvents.push(...this.sentEvents),this.sentEvents=[],this.trySendPendingEvents()}handlePublished(e){const t=e.events;this.syncedSnapshot=t.reduce(rj,this.syncedSnapshot);const{transformedIncomingEvents:n,transformedExistingEvents:r}=MF(t,this.sentEvents);this.sentEvents=r;const{transformedIncomingEvents:o,transformedExistingEvents:i}=MF(n,this.pendingEvents);return this.pendingEvents=i,this.confirmedEvents.push(...o),this.currentVersion=e.currentVersion,this.trySendPendingEvents(),o}connectToSession(e){this.isInitialized=!1,this.sendEvents=e,this.trySendPendingEvents()}trySendPendingEvents(){return YW(this,void 0,void 0,(function*(){if(yield zF(0),0===this.pendingEvents.length||this.sentEvents.length>0||!this.isInitialized||!this.sendEvents)return;const e=this.pendingEvents.reduce(((e,t)=>{if(function(e){var t,n;return void 0!==e&&(null===(t=e.range)||void 0===t?void 0:t.start)===(null===(n=e.range)||void 0===n?void 0:n.end)&&0===e.text.length}(t.textChangeOperation))return e;if(0===e.length)return[t];const n=e[e.length-1];if((null==n?void 0:n.fieldName)!==t.fieldName||!t.textChangeOperation||!(null==n?void 0:n.textChangeOperation))return[...e,t];const r=n.textChangeOperation,o=t.textChangeOperation,i=o.range.start-r.range.start,a=o.range.end-r.range.start,s=Math.max(0,i),l=Math.min(r.text.length,a);if(s>l)return[...e,t];const c=Math.min(0,i),u=a-i-(l-s),d=wF(OF(r.range.start+c,r.range.end+c+u,r.text.slice(0,s)+o.text+r.text.slice(l)),t.fieldName);return[...e.slice(0,-1),d]}),new Array);e.length>0&&(this.sentEvents=this.sendEvents(e,this.currentVersion)),this.pendingEvents=[]}))}handleInitializedMessage(){this.sentEvents.length>0&&this.sendEvents(this.sentEvents,this.currentVersion),this.isInitialized=!0,this.trySendPendingEvents()}}function KW(e){switch(e){case 0:case"STATUS_CODE_UNSPECIFIED":return zW.UNSPECIFIED;case 1:case"STATUS_CODE_CANCELLED":return zW.CANCELLED;case 2:case"STATUS_CODE_UNKNOWN":return zW.UNKNOWN;case 3:case"STATUS_CODE_INVALID_ARGUMENT":return zW.INVALID_ARGUMENT;case 4:case"STATUS_CODE_DEADLINE_EXCEEDED":return zW.DEADLINE_EXCEEDED;case 5:case"STATUS_CODE_NOT_FOUND":return zW.NOT_FOUND;case 6:case"STATUS_CODE_ALREADY_EXISTS":return zW.ALREADY_EXISTS;case 7:case"STATUS_CODE_PERMISSION_DENIED":return zW.PERMISSION_DENIED;case 8:case"STATUS_CODE_RESOURCE_EXHAUSTED":return zW.RESOURCE_EXHAUSTED;case 9:case"STATUS_CODE_FAILED_PRECONDITION":return zW.FAILED_PRECONDITION;case 10:case"STATUS_CODE_ABORTED":return zW.ABORTED;case 11:case"STATUS_CODE_OUT_OF_RANGE":return zW.OUT_OF_RANGE;case 12:case"STATUS_CODE_UNIMPLEMENTED":return zW.UNIMPLEMENTED;case 13:case"STATUS_CODE_INTERNAL":return zW.INTERNAL;case 14:case"STATUS_CODE_UNAVAILABLE":return zW.UNAVAILABLE;case 15:case"STATUS_CODE_DATA_LOSS":return zW.DATA_LOSS;case 16:case"STATUS_CODE_UNAUTHENTICATED":return zW.UNAUTHENTICATED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START_SESSION_REQUEST=1]="START_SESSION_REQUEST",e[e.START_SESSION_RESPONSE=2]="START_SESSION_RESPONSE",e[e.EVENT_VERSION=3]="EVENT_VERSION",e[e.PARTICIPANT_REQUEST=4]="PARTICIPANT_REQUEST",e[e.PARTICIPANT_RESPONSE=5]="PARTICIPANT_RESPONSE",e[e.CLIENT_ERROR_INFO=6]="CLIENT_ERROR_INFO"}(JW||(JW={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(zW||(zW={}));const QW={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",encode:(e,t=new iM)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QW.$type,value:eH(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>QW.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const ZW={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",encode(e,t=new iM){0!==e.statusCode&&t.uint32(8).int32(e.statusCode),void 0!==e.detailCode&&QW.encode(e.detailCode,t.uint32(18).fork()).join();for(const n of e.fallbackDetailCodes)QW.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof aM?e:new aM(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.statusCode=n.int32();continue;case 2:if(18!==e)break;o.detailCode=QW.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.fallbackDetailCodes.push(QW.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZW.$type,statusCode:eH(e.statusCode)?KW(e.statusCode):0,detailCode:eH(e.detailCode)?QW.fromJSON(e.detailCode):void 0,fallbackDetailCodes:globalThis.Array.isArray(null==e?void 0:e.fallbackDetailCodes)?e.fallbackDetailCodes.map((e=>QW.fromJSON(e))):[]}),toJSON(e){var t;const n={};return 0!==e.statusCode&&(n.statusCode=function(e){switch(e){case zW.UNSPECIFIED:return"STATUS_CODE_UNSPECIFIED";case zW.CANCELLED:return"STATUS_CODE_CANCELLED";case zW.UNKNOWN:return"STATUS_CODE_UNKNOWN";case zW.INVALID_ARGUMENT:return"STATUS_CODE_INVALID_ARGUMENT";case zW.DEADLINE_EXCEEDED:return"STATUS_CODE_DEADLINE_EXCEEDED";case zW.NOT_FOUND:return"STATUS_CODE_NOT_FOUND";case zW.ALREADY_EXISTS:return"STATUS_CODE_ALREADY_EXISTS";case zW.PERMISSION_DENIED:return"STATUS_CODE_PERMISSION_DENIED";case zW.RESOURCE_EXHAUSTED:return"STATUS_CODE_RESOURCE_EXHAUSTED";case zW.FAILED_PRECONDITION:return"STATUS_CODE_FAILED_PRECONDITION";case zW.ABORTED:return"STATUS_CODE_ABORTED";case zW.OUT_OF_RANGE:return"STATUS_CODE_OUT_OF_RANGE";case zW.UNIMPLEMENTED:return"STATUS_CODE_UNIMPLEMENTED";case zW.INTERNAL:return"STATUS_CODE_INTERNAL";case zW.UNAVAILABLE:return"STATUS_CODE_UNAVAILABLE";case zW.DATA_LOSS:return"STATUS_CODE_DATA_LOSS";case zW.UNAUTHENTICATED:return"STATUS_CODE_UNAUTHENTICATED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}(e.statusCode)),void 0!==e.detailCode&&(n.detailCode=QW.toJSON(e.detailCode)),(null===(t=e.fallbackDetailCodes)||void 0===t?void 0:t.length)&&(n.fallbackDetailCodes=e.fallbackDetailCodes.map((e=>QW.toJSON(e)))),n},create:e=>ZW.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};return r.statusCode=null!==(t=e.statusCode)&&void 0!==t?t:0,r.detailCode=void 0!==e.detailCode&&null!==e.detailCode?QW.fromPartial(e.detailCode):void 0,r.fallbackDetailCodes=(null===(n=e.fallbackDetailCodes)||void 0===n?void 0:n.map((e=>QW.fromPartial(e))))||[],r}};function eH(e){return null!=e}function tH(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function nH(){const e=new RW;return e.register({type:JW.START_SESSION_REQUEST,encode:e=>tH(e)&&"sessionMode"in e?XV.encode(e).finish():null,decode:e=>XV.decode(e)}),e.register({type:JW.START_SESSION_RESPONSE,encode:e=>tH(e)&&"sessionId"in e&&"participantId"in e&&"sessionToken"in e?KV.encode(e).finish():null,decode:e=>KV.decode(e)}),e.register({type:JW.EVENT_VERSION,encode:e=>tH(e)&&"version"in e?cF.encode(e).finish():null,decode:e=>cF.decode(e)}),e.register({type:JW.PARTICIPANT_REQUEST,encode:e=>tH(e)&&("appendMessage"in e||"updateAuthenticationTokenMessage"in e)?QV.encode(e).finish():null,decode:e=>QV.decode(e)}),e.register({type:JW.PARTICIPANT_RESPONSE,encode:e=>tH(e)&&"confirmedMessage"in e&&"initializedMessage"in e&&"publishedMessage"in e?ZV.encode(e).finish():null,decode:e=>ZV.decode(e)}),e.register({type:JW.CLIENT_ERROR_INFO,encode:e=>tH(e)&&"statusCode"in e&&"detailCode"in e&&"fallbackDetailCodes"in e?ZW.encode(e).finish():null,decode:e=>ZW.decode(e)}),e}function rH(e,t){return e.start===t.start&&e.end===t.end}function oH(e,t){return t.start<=e.start&&e.end<=t.end}function iH(e,t){return oH(e,t)&&!rH(e,t)}function aH(e,t=!1){const n={start:0,end:e.plainText.length};if(t){const t=function(e,t){const n=IH(e),{remainingForest:r,extractedTrees:o}=EH(n,t);return o.reduce(SH,r)}(dH(e.textFormattingAnnotations,!1),n);return gH(e.plainText,n,t)}{const t=dH(e.textFormattingAnnotations);return gH(e.plainText,n,t)}}function sH(e,t,n){if(t.nodeType===Node.TEXT_NODE)return{text:t.textContent,id:void 0};const r={$type:zG.$type,value:crypto.randomUUID()};let o=n,i="";const a=[];if(t.hasChildNodes())for(const n of t.childNodes){const t=sH(e,n,o),r=t.text,s=t.id;o+=r.length,i=i.concat(r),void 0!==s&&a.push(s)}const s={$type:AM.$type,start:n,end:o},l={};if(t instanceof HTMLAnchorElement){t.href.length<=1024?l.href=t.href:console.warn("[text-formatting] discarding href with too many bytes")}if("HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"HEAD"!==t.nodeName){const n={$type:YG.$type,textFormattingId:r,name:t.nodeName,children:a,attributes:l};e.push({operation:{$type:JV.$type,annotationId:{$type:vM.$type,value:crypto.randomUUID()},range:s,textFormattingPayload:n},specificPayload:n})}return{text:i,id:r}}function lH(e){const t=(new DOMParser).parseFromString(`<body>${e}</body>`,"text/html"),n=new Array,{text:r}=sH(n,t.body,0);return{plainText:r,textFormattingAnnotations:n}}function cH(e,t){return Object.assign(Object.assign({},e),{children:t,childTextFormattingIds:t.map((e=>e.textFormattingId))})}function uH(e){const{textFormattingId:t,name:n,children:r,attributes:o}=e.specificPayload;WF(void 0!==t,"[text-formatting] text formatting annotation without ID");const{range:i}=e.operation;return WF(void 0!==i,"[text-formatting] text formatting annotation without range"),WF(void 0!==e.operation.annotationId,"[text-formatting] annotation without annotationId"),{textFormattingId:t.value,annotationId:e.operation.annotationId.value,tag:n,range:i,childTextFormattingIds:r.map((e=>e.value)),href:o.href}}function dH(e,t=!0){const n=new Map;for(const r of e){const e=uH(r);try{WF(!n.has(e.textFormattingId),"[text-formatting] multiple formatting annotations with same formatting ID"),n.set(e.textFormattingId,e)}catch(e){if(t)throw e;console.warn(e)}}const r=new Set;const o=new Set(n.keys());for(const e of n.values())for(const t of e.childTextFormattingIds)o.delete(t);return[...o].sort(((e,t)=>{const r=n.get(e),o=n.get(t);return r.range.start-o.range.start||r.range.end-o.range.end})).flatMap((function e(o){try{WF(!r.has(o),`[text-formatting] ID "${o}" is child of multiple annotations.`);const t=n.get(o);return WF(void 0!==t,`[text-formatting] no annotation for ID "${o}".`),n.delete(o),r.add(o),[cH(t,t.childTextFormattingIds.flatMap(e))]}catch(e){if(t)throw e;return console.warn(e),[]}}))}function pH(e,t){const n=gH(e,t.range,t.children);if("BR"===t.tag)return WF(""===n,"[text-formatting] BR element with children"),"<BR/>";if("A"===t.tag){return`<A${void 0===t.href||""===t.href?"":` href="${t.href}"`}>${n}</A>`}return`<${t.tag}>${n}</${t.tag}>`}function gH(e,t,n){let r=t.start,o="";for(const t of n)WF(r<=t.range.start,"[text-formatting] sibling annotations with overlapping ranges"),o+=qF(e.slice(r,t.range.start)),o+=pH(e,t),r=t.range.end;return WF(r<=t.end,"[text-formatting] child annotation leaks out of parent range"),o+=qF(e.slice(r,t.end)),o}function hH(e,t){const n=dH(e),r=dH(t);performance.now();const o=function(e,t){const n=new Map,r=(e,t)=>{if(!function(e,t){return e.tag===t.tag&&e.range.start===t.range.start&&e.range.end===t.range.end}(e,t))return 0;if(e.children.length!==t.children.length)return 1;const o=n.get(e.textFormattingId),i=null==o?void 0:o.get(t.textFormattingId);if(void 0!==i)return i;const a=[...JF(e.children,t.children)].map((([e,t])=>r(e,t))),s=Math.min(...a)+1;return void 0===o?n.set(e.textFormattingId,new Map([[t.textFormattingId,s]])):o.set(t.textFormattingId,s),s},{operations:o}=vH(e,t,r);return o}(n,r);return performance.now(),o}function fH(e){return function(e){const t=zG.create({value:e.textFormattingId}),n=YG.create({textFormattingId:t,name:e.tag,children:e.childTextFormattingIds.map((e=>({$type:zG.$type,value:e}))),attributes:e.href?{href:e.href}:{}});return{operation:JV.create({annotationId:vM.create({value:crypto.randomUUID()}),range:AM.create({start:e.range.start,end:e.range.end}),textFormattingPayload:n}),specificPayload:n}}(e).operation}function _H(e){return zV.create({annotationId:vM.create({value:e.annotationId})})}function mH(e){return e.flatMap((e=>[e,...mH(e.children)]))}function vH(e,t,n){if(0===e.length)return{resultForest:t,operations:mH(t).map(fH)};if(0===t.length)return{resultForest:[],operations:mH(e).map(_H)};const[r,...o]=e,[i,...a]=t;if(n(r,i)===1/0){const e=vH(o,a,n);return{resultForest:[r,...e.resultForest],operations:e.operations}}return TH(e,t,n)}function TH(e,t,n){if(0===e.length)return{resultForest:t,operations:mH(t).map(fH)};if(0===t.length)return{resultForest:[],operations:mH(e).map(_H)};const r=e[e.length-1],o=e.slice(0,-1),i=t[t.length-1],a=t.slice(0,-1),s=n(r,i);if(s===1/0){const e=TH(o,a,n);return{resultForest:[...e.resultForest,r],operations:e.operations}}const l=vH(r.children,i.children,n);if(0===s){const e=cH(i,l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...mH(o).map(_H),_H(r),...mH(a).map(fH),fH(e)]}}if(1===s){const e=cH({tag:i.tag,range:i.range,annotationId:i.annotationId,textFormattingId:r.textFormattingId},l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...mH(o).map(_H),_H(r),...mH(a).map(fH),fH(e)]}}{const e=cH(r,l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...mH(o).map(_H),...mH(a).map(fH)]}}}function yH(e,t){const n=["DIV","P","H1","H2","H3","H4","H5","H6","UL","OL","LI","A","B","STRONG","I","EM","INS","DEL","CODE","U","S","SPAN","BR"],r=n.indexOf(e.tag);-1===r&&console.warn(`[text-formatting] Don't know how to merge trees with tag <${e.tag}>`);const o=n.indexOf(t.tag);return-1===r&&console.warn(`[text-formatting] Don't know how to merge trees with tag <${t.tag}>`),r<=o?cH(e,SH(e.children,t)):cH(t,SH(t.children,e))}function SH(e,t){if(0===e.length)return[t];{const[n,...r]=e;if(t.range.end<=n.range.start)return[t,...e];if(t.range.start>=n.range.end)return[n,...SH(r,t)];if(rH(t.range,n.range))return[yH(t,n),...r];if(iH(t.range,n.range)){return[cH(n,SH(n.children,t)),...r]}if(iH(n.range,t.range)){const e=cH(t,SH(t.children,n));return SH(r,e)}return console.warn("[text-formatting] Dropping annotation with unrecoverable range overlap."),console.warn("tried to insert tree: ",t),console.warn("into forest: ",e),e}}function EH(e,t){if(0===e.length)return{extractedTrees:[],remainingForest:[]};const[n,...r]=e,o=EH(n.children,n.range),i=cH(n,o.remainingForest);if(oH(i.range,t)){const e=EH(r,{start:i.range.end,end:t.end});return{remainingForest:[i,...e.remainingForest],extractedTrees:[...o.extractedTrees,...e.extractedTrees]}}{console.warn("[text-formatting] Annotation range overlaps with sibling or leaks out of parent. Will try to recover."),console.warn("Offending tree: ",n);const e=EH(r,t);return{remainingForest:e.remainingForest,extractedTrees:[i,...e.extractedTrees,...o.extractedTrees]}}}function IH(e){return e.flatMap((e=>"BR"===e.tag&&e.range.start!==e.range.end?(console.warn("[text-formatting] Dropping <BR> with non-zero range."),e.children):[cH(e,IH(e.children))]))}const AH="autodetect",bH="en-US",wH="autodetect";var OH,RH,NH=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Negotiate=0]="Negotiate",e[e.EnforceLongPolling=1]="EnforceLongPolling",e[e.OptimisticWebsocket=2]="OptimisticWebsocket"}(OH||(OH={})),function(e){e[e.Connecting=0]="Connecting",e[e.Reconnecting=1]="Reconnecting",e[e.Restoring=2]="Restoring",e[e.Connected=3]="Connected",e[e.Disconnected=4]="Disconnected"}(RH||(RH={}));class PH extends Error{constructor(){super(...arguments),this.name="ConnectionError"}}class LH extends Error{constructor(e){super("There was an error with the session on the server. See the info property for details."),this.info=e,this.name="SessionError"}}class CH{constructor(e,t,n,r,o){this.config=e,this.client=t,this.dangerousEnableItaMessageConsoleLogging=n,this.serverUrl=r,this.metaInfo=o,this.participantResponses=new rC,this.participantRequests=new rC,this.errorInfoSubject=new iC(null),this.traceIdSubject=new rC,this.traceId=this.traceIdSubject.asObservable(),this.error=this.errorInfoSubject.pipe(OC((e=>null!==e))),this.statusSubject=new iC(RH.Disconnected),this.status=this.statusSubject.asObservable(),this.messagesSubject=new rC,this.messages=this.messagesSubject.asObservable(),this.accountIdAtSessionStart=this.config.accountId.value,this.participantRequests.subscribe((e=>this.messagesSubject.next(e))),this.participantResponses.subscribe((e=>this.messagesSubject.next(e))),this.dangerousEnableItaMessageConsoleLogging&&this.messages.subscribe((e=>{const t=JSON.parse(JSON.stringify(uj(e)));sj(e)?console.info("[Session] send:",t):console.info("[Session] recv:",t)})),this.eventHandler=new XW(this.participantResponses),e.isRestoredSession||this.client.addChangeHandler((e=>{this.eventHandler.addClientEvents(e)})),e.isRestoredSession||this.eventHandler.incomingEventBatches.subscribe((e=>this.client.applyFieldEventBatch(e))),this.participantResponses.pipe(wC(uj),OC(cj)).subscribe((e=>{var t;return null===(t=this.metaInfo)||void 0===t?void 0:t.addMetaInfoMessage(e)})),this.statusSubject.subscribe((e=>{var t;e===RH.Disconnected&&(null===(t=this.connection)||void 0===t||t.stop())}))}connect(e,t){return NH(this,void 0,void 0,(function*(){return this.connectInternal({baseDocument:e,appInformation:t})}))}connectInternal(e){return NH(this,void 0,void 0,(function*(){if(this.statusSubject.value!==RH.Disconnected)return;this.errorInfoSubject.next(null),this.startSessionResponse&&!e.baseDocument?this.statusSubject.next(RH.Reconnecting):this.statusSubject.next(RH.Connecting),this.startSessionResponse&&!e.baseDocument||(this.startSessionResponse=yield this.startSession(e));const{signalrEndpoint:t}=this.startSessionResponse;WF(void 0!==t,"Signalr V2 endpoint undefined in StartSessionResponse");const n=this.serverUrl.origin+t;let r;try{r=yield xH(n,this.config.accessToken,this.config.transportStrategy)}catch(e){throw this.statusSubject.next(RH.Disconnected),e}const o=new iC(null);r.on("OnError",(e=>{o.next(new LH(e))}));const i=new Promise((e=>{r.onclose(e)}));try{if(yield r.invoke("Participate",this.eventHandler.currentVersion),null!==o.value)throw o.value}catch(e){throw null===o.value?new PH(`Error calling Participate: ${e}`):o.value}var a;this.eventHandler.connectToSession(((e,t)=>{const n=e.map((e=>Object.assign(Object.assign({},e),{participantId:this.startSessionResponse.participantId})));if(this.statusSubject.value!==RH.Connected)return n;const r=GF(function(e,t){return{$type:iF.$type,events:e,baseVersion:t}}(n,t));return this.sendAppendRequest(r),n})),this.config.accessToken.pipe(OC((e=>"string"==typeof e)),(a=this.status.pipe(OC((e=>e===RH.Connected))),ZL((function(e,t){var n=!1,r=eC(t,(function(){null==r||r.unsubscribe(),n=!0}),jL);vC(a).subscribe(r),e.subscribe(eC(t,(function(e){return n&&t.next(e)})))}))),DC(this.status.pipe(OC((e=>e===RH.Disconnected))))).subscribe((e=>this.updateAuthenticationToken(e))),r.on("AppendResponse",(e=>{this.statusSubject.value!==RH.Connected&&this.statusSubject.next(RH.Connected),this.participantResponses.next(e)})),o.subscribe((e=>{null!==e&&this.statusSubject.next(RH.Disconnected),this.errorInfoSubject.next(e)})),i.then((e=>{o.complete(),this.statusSubject.value===RH.Connected&&(this.statusSubject.next(RH.Disconnected),this.errorInfoSubject.next(new PH(`The connection was closed with error: ${e} `)))})),this.connection=r}))}sendAppendRequest(e){return NH(this,void 0,void 0,(function*(){try{this.participantRequests.next(e),WF(void 0!==this.connection),yield this.connection.invoke("AppendRequest",e)}catch(e){WF(e instanceof Error),this.statusSubject.next(RH.Disconnected);const t="Server timeout elapsed without receiving a message from the server.",n="Cannot send data if the connection is not in the 'Connected' State.";if(/^An unexpected error occurred invoking 'AppendRequest' on the server. HubException(WithLogLevel)?: Message validation failed$/.test(e.message)){const e=ZW.create({detailCode:QW.create({value:"304_message_validation_failed"}),fallbackDetailCodes:[]});this.errorInfoSubject.next(new LH(e))}else e.message===t||e.message===n?(this.errorInfoSubject.next(new PH(e.message)),this.statusSubject.next(RH.Disconnected)):(console.error(`[SessionV2] AppendRequest failed with unknown error type: ${e.message}`),this.errorInfoSubject.next(new PH),this.statusSubject.next(RH.Disconnected))}}))}startSession(e){return NH(this,void 0,void 0,(function*(){var t;let n=null==e?void 0:e.appInformation;void 0!==n&&(n=Object.assign(Object.assign({},n),{appVersion:`${n.appVersion} (ITA SDK 6.0.1)`}));const r={$type:XV.$type,sessionMode:this.client.sessionMode,baseDocument:null==e?void 0:e.baseDocument,previousSessionId:null==e?void 0:e.previousSessionId,translatorSessionOptions:{$type:mV.$type,enableTranscription:this.config.enableTranscription,enableTranslatorQuoteConversion:this.config.enableTranslatorQuoteConversion,disableLanguageWeights:this.config.disableLanguageWeights,doNotOverrideRequestedSourceLanguage:this.config.doNotOverrideRequestedSourceLanguage,enableInlineSuggestions:this.config.enableInlineSuggestions,usageType:m$.UNSPECIFIED},appInformation:n};try{const e=XV.encode(r).finish(),n=new URL("/v2/startSession",this.serverUrl),o={"Content-Type":"application/x-protobuf"},i=this.config.accessToken.getValue();i&&(o.Authorization=`Bearer ${i}`);const a=yield fetch(n,{method:"POST",headers:o,body:e,credentials:"include"}),s=null!==(t=a.headers.get("x-trace-id"))&&void 0!==t?t:void 0;this.traceIdSubject.next(s);const l=a.headers.get("Content-Type"),c=l&&l.includes("application/x-protobuf"),u=new Uint8Array(yield a.arrayBuffer());if(!a.ok&&c){const e=ZW.decode(u);throw new LH(e)}if(!a.ok)throw new PH(`HTTP error! Status: ${a.status}`);if(!c)throw new PH(`Response does not include a StartSessionResponse payload. Status: ${a.status}`);return KV.decode(u)}catch(e){throw this.statusSubject.next(RH.Disconnected),e instanceof LH||e instanceof PH?e:e instanceof TypeError?new PH(e.message):new PH(`Error starting session via HTTP POST: ${e}`)}}))}restore(){return NH(this,void 0,void 0,(function*(){var e,t;const n=this.errorInfoSubject.value,r=n&&n instanceof LH&&"304_message_validation_failed"===(null===(e=n.info.detailCode)||void 0===e?void 0:e.value);this.errorInfoSubject.next(null),this.statusSubject.next(RH.Restoring),this.participantResponses.complete(),null===(t=this.connection)||void 0===t||t.stop();const o=nj(this.eventHandler.syncedSnapshot);return this.restoreFrom(o,null!=r&&r)}))}restoreFrom(e,t){return NH(this,void 0,void 0,(function*(){var n;const r=Object.assign(Object.assign({},this.config),{isRestoredSession:!0}),o=new CH(r,this.client,this.dangerousEnableItaMessageConsoleLogging,this.serverUrl,this.metaInfo);o.eventHandler.incomingEventBatches.pipe(DC(o.participantResponses.pipe(OC((e=>!!e.initializedMessage)))),RC(((e,t)=>[...e,...t]),[])).subscribe((n=>{const r=this.client.document.stateReadonly.value;let i=n.reduce(rj,o.client.document.initialState);if(!t&&(void 0===e||function(e,t){var n;const r=new Set([...e.fields.map((e=>e.fieldName)),...t.keys()]);for(const o of r){const r=e.fields.find((e=>e.fieldName===o));if((null!==(n=null==r?void 0:r.text)&&void 0!==n?n:"")!==ij(o,t).content)return!1}return!0}(e,i))){let e=[...this.eventHandler.sentEvents,...this.eventHandler.pendingEvents];e=function(e,t,n){const r=e.filter((e=>{var t;return!(null===(t=e.createAnnotationOperation)||void 0===t?void 0:t.textFormattingPayload)})),o=[];for(const[e,r]of n.entries()){const n=hH(QF(r,YG.$type),QF(ij(e,t),YG.$type));o.push(...n.map((t=>wF(t,e))))}return[...r,...o]}(e,r,i),e=function(e,t){return e.map((e=>{var n;const r=e.setPropertyOperation;if(void 0===r)return e;const o=function(e){var t,n,r,o,i,a;const s=vF(e);if(s)switch(s.$type){case ZM.$type:return null===(t=s.language)||void 0===t?void 0:t.code;case eG.$type:return null===(n=s.language)||void 0===n?void 0:n.code;case W$.$type:return null===(r=s.sourceLanguage)||void 0===r?void 0:r.code;case H$.$type:return null===(o=s.sourceLanguage)||void 0===o?void 0:o.code;case q$.$type:return null===(i=s.targetLanguage)||void 0===i?void 0:i.code;case B$.$type:return null===(a=s.targetLanguage)||void 0===a?void 0:a.code;default:return}}(r);if(void 0===o)return e;const i=function(e,t){var n,r,o;if(e===VV.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE||e===VV.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE){const e=null===(n=ij($V.TRANSLATOR_SOURCE_TEXT,t).properties.get(VV.TRANSLATOR_SOURCE_LANGUAGES))||void 0===n?void 0:n.value;return void 0===e?[]:(WF(e.$type===F$.$type),e.sourceLanguages.map((e=>e.code)))}if(e===VV.TRANSLATOR_CALCULATED_TARGET_LANGUAGE||e===VV.TRANSLATOR_REQUESTED_TARGET_LANGUAGE){const e=null===(r=ij($V.TRANSLATOR_TARGET_TEXT,t).properties.get(VV.TRANSLATOR_TARGET_LANGUAGES))||void 0===r?void 0:r.value;return void 0===e?[]:(WF(e.$type===j$.$type),e.targetLanguages.map((e=>e.code)))}if(e===VV.WRITE_CALCULATED_LANGUAGE||e===VV.WRITE_REQUESTED_LANGUAGE){const e=null===(o=ij($V.WRITE_SOURCE_TEXT,t).properties.get(VV.WRITE_LANGUAGES))||void 0===o?void 0:o.value;return void 0===e?[]:(WF(e.$type===KM.$type),e.languages.map((e=>e.code)))}return[]}(r.propertyName,t);if("autodetect"===o||i.includes(o))return e;{const t=null!==(n=function(e){switch(e){case VV.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE:return AH;case VV.TRANSLATOR_REQUESTED_TARGET_LANGUAGE:return bH;case VV.WRITE_REQUESTED_LANGUAGE:return wH;default:return}}(r.propertyName))&&void 0!==n?n:i[0];return WF(["autodetect",...i].includes(t)),Object.assign(Object.assign({},e),{setPropertyOperation:yF(r,t)})}}))}(e,i);const t=e.map((e=>Object.assign(Object.assign({},e),{participantId:o.startSessionResponse.participantId})));i=t.reduce(rj,i),o.eventHandler.addClientEvents(t),i=function(e,t){let n=e;for(const[e,r]of t){const t=ij(e,n),o=r.content,i=t.content;WF(o.startsWith(i),"Logic error while restoring excess field content: New content should be prefix of old content."),n=n.set(e,Object.assign(Object.assign({},t),{content:o}))}return n}(i,r)}o.client.document.updateState((e=>i)),o.client.addChangeHandler((e=>{o.eventHandler.addClientEvents(e)})),o.eventHandler.incomingEventBatches.subscribe((e=>o.client.applyFieldEventBatch(e)))}));try{let t=null===(n=this.startSessionResponse)||void 0===n?void 0:n.sessionId;this.accountIdAtSessionStart!==this.config.accountId.value&&(console.error("[ITA SDK] Warning: Restoring a session for a different account."),t=void 0),yield o.connectInternal({baseDocument:e,previousSessionId:t})}catch(e){throw this.statusSubject.next(RH.Disconnected),e}return o}))}closeConnection(){return NH(this,void 0,void 0,(function*(){void 0===this.connection?console.warn("called closeConnection without active connection"):yield this.connection.stop()}))}updateAuthenticationToken(e){const t=GF({$type:aF.$type,token:e});this.sendAppendRequest(t)}}function xH(e,t,n){return NH(this,void 0,void 0,(function*(){const r=(new cW).withHubProtocol(new BW({extensionCodec:nH()})).configureLogging(Sj.Critical);let o;t.value&&(o=()=>{const e=t.value;return WF(void 0!==e),e});const i=r.withUrl(e,Object.assign({accessTokenFactory:o},function(e){switch(e){case OH.EnforceLongPolling:return{transport:Qj.LongPolling};case OH.Negotiate:return{};case OH.OptimisticWebsocket:return{transport:Qj.WebSockets,skipNegotiation:!0};default:HF()}}(n))).build();try{return yield i.start(),i}catch(r){WF(r instanceof Error,"Caught value which is not of type Error");const o=r.message.includes("Status code '401'"),i=r.message.includes("Status code '403'");if(o||i)throw new LH(ZW.create({detailCode:QW.create({value:"1601_missing_or_invalid_authentication"})}));if(n===OH.OptimisticWebsocket)return console.error(`[SessionV2] Initial connection attempt failed with error: ${r}. Retrying with long-polling transport.`),xH(e,t,OH.EnforceLongPolling);throw new PH(`Error starting connection: ${r}`)}}))}var kH=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const DH=["301_invalid_session_token","303_unknown_session","1001_session_ended_transient","1300_session_ended_internal_error","900_multiple_invocations_forbidden"],UH=["400_session_ended_idle_timeout","1301_session_ended_manual_eviction"],MH=["1002_transient","1302_unhandled_internal_error"],GH=["000_session_ended_mutual_end","200_session_ended","300_unsupported_session_mode","302_invalid_session_version","304_message_validation_failed","305_invalid_participant_id","700_service_level_mismatch","800_rate_limited","801_rate_limited_restricted","802_quota_exceeded","901_append_not_allowed","1000_participant_evicted","1200_obsolete_version_unavailable","1601_missing_or_invalid_authentication"],$H=[...DH,...UH,...MH,...GH,"1600_session_ended_authentication_token_expired"];class VH{constructor(e,t){this.appInformation=t,this.states=new iC({type:"initial",session:e}),this.statesReadonly=this.states.asObservable(),this.statesReadonly.subscribe((e=>{var t;console.log(`[PersistentSession] state: "${e.type}" ${null!==(t=function(e){var t,n,r;switch(e.type){case"initial":case"connect-on-user-action":case"restore-on-user-action":case"restoring":case"permanently-disconnected":case"await-access-token-update":return;case"connected":return`(session ID: ${null===(r=null===(n=null===(t=e.session)||void 0===t?void 0:t.startSessionResponse)||void 0===n?void 0:n.sessionId)||void 0===r?void 0:r.value})`;case"connecting":return`(retry #${e.retryCount})`;default:HF()}}(e))&&void 0!==t?t:""}`)})),this.errors=new rC,this.errorsReadonly=this.errors.asObservable()}getCurrentState(){return this.states.value}onStart(e){const t=this.states.value;WF("initial"===t.type,'[PersistentSession] called "start" despite already started'),console.log('[PersistentSession] event: "start"'),this.initialConnect(t.session,e),this.states.next({type:"connecting",retryCount:0,session:t.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})}onStop(){"permanently-disconnected"===this.states.value.type?console.warn('[PersistentSession] called "stop" despite already disconnected'):(console.log('[PersistentSession] event: "stop"'),this.states.next({type:"permanently-disconnected",visibleError:void 0}))}onUserAction(){const e=this.states.value;"initial"===e.type||("connect-on-user-action"===e.type?(console.log('[PersistentSession] event: "user action"'),this.reconnect(e.session,0),this.states.next({type:"connecting",retryCount:0,session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})):"restore-on-user-action"===e.type&&(console.log('[PersistentSession] event: "user action"'),this.restore(e.session),this.states.next({type:"restoring",session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})))}onConnected(e){const t=this.states.value;WF("connecting"===t.type||"restoring"===t.type,`Connection established despite no connection attempt or already connected (current state: "${t.type}")`),this.states.next({type:"connected",session:e,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})}onError(e){if(e instanceof PH)this.errors.next(e),this.onConnectionError(e);else{if(!(e instanceof LH))throw console.error("[PersistentSession] Uncaught error:"),e;this.errors.next(e),this.onSessionError(e)}}onSessionError(e){const t=this.states.value;WF("initial"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),WF("restore-on-user-action"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),WF("connect-on-user-action"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),WF("restoring"!==t.type,"[PersistentSession] SessionError despite no session"),WF("await-access-token-update"!==t.type,"[PersistentSession] SessionError despite no session");const n=function(e){var t;if(void 0!==(null===(t=e.detailCode)||void 0===t?void 0:t.value)&&BF(e.detailCode.value,$H))return e.detailCode.value;for(const t of e.fallbackDetailCodes)if(void 0!==t.value&&BF(t.value,$H))return t.value}(e.info);if(console.log(`[PersistentSession] event: "session error" (${n})`),"connected"===t.type||"connecting"===t.type)if(BF(n,UH))this.states.next({type:"restore-on-user-action",session:t.session,visibleError:void 0});else if("1600_session_ended_authentication_token_expired"===n)this.states.next({type:"await-access-token-update",session:t.session});else if(BF(n,DH))this.restore(t.session),this.states.next({type:"restoring",visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps});else if(BF(n,MH)){const n=Date.now(),r=[n,...t.recentFailLoopErrorTimestamps.filter((e=>n-e<=12e4))];r.length>=6?this.states.next({type:"permanently-disconnected",visibleError:e}):(this.restore(t.session),this.states.next({type:"restoring",visibleError:e,recentFailLoopErrorTimestamps:r,session:t.session}))}else BF(n,GH)||void 0===n?this.states.next({type:"permanently-disconnected",visibleError:e}):HF();else"permanently-disconnected"===t.type||HF()}onConnectionError(e){const t=this.states.value;WF("initial"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),WF("restore-on-user-action"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),WF("connect-on-user-action"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),WF("await-access-token-update"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),console.log('[PersistentSession] event: "connection error"'),"connecting"===t.type?t.retryCount>=5?this.states.next({type:"connect-on-user-action",visibleError:e,session:t.session}):(this.reconnect(t.session,t.retryCount),this.states.next({type:"connecting",retryCount:t.retryCount+1,visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})):"connected"===t.type?(this.reconnect(t.session,0),this.states.next({type:"connecting",retryCount:0,visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})):"restoring"===t.type?this.states.next({type:"restore-on-user-action",session:t.session,visibleError:e}):"permanently-disconnected"===t.type||HF()}onAccessTokenUpdate(){const e=this.states.value;console.log('[PersistentSession] event: "access token update"'),"await-access-token-update"===e.type&&(this.restore(e.session),this.states.next({type:"restoring",session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0}))}restore(e){return kH(this,void 0,void 0,(function*(){try{const t=yield e.restore();t.error.subscribe((e=>{this.onError(e)})),this.onConnected(t)}catch(e){yield zF(0),this.onError(e)}}))}initialConnect(e,t){return kH(this,void 0,void 0,(function*(){try{void 0!==t&&(e.eventHandler.pendingEvents.length>0&&(console.warn("[PersistentSession] Discarded pending client events that happened before receiving base document"),e.eventHandler.pendingEvents=[]),e.client.document.updateState((()=>function(e){let t=aD();for(const n of e.fields){let e=XF;e=Object.assign(Object.assign({},e),{content:n.text});for(const t of n.annotations)e=KF(e,t);for(const t of n.properties)e=KF(e,t);t=t.set(n.fieldName,e)}return t}(t))));const n=yield e.restoreFrom(t,!1);n.error.subscribe((e=>{this.onError(e)})),this.onConnected(n)}catch(e){yield zF(0),this.onError(e)}}))}reconnect(e,t){return kH(this,void 0,void 0,(function*(){yield function(e){return kH(this,void 0,void 0,(function*(){e>0&&(yield zF(Math.pow(2,e-1)*FH))}))}(t);try{yield e.connect(void 0,this.appInformation),this.onConnected(e)}catch(e){this.onError(e)}}))}}const FH=500*(1+Math.random());var jH;function WH(e){switch(e.type){case"initial":case"connect-on-user-action":case"restore-on-user-action":case"permanently-disconnected":return jH.Disconnected;case"connected":return jH.Connected;case"restoring":case"connecting":case"await-access-token-update":return jH.Connecting;default:HF()}}!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(jH||(jH={}));class HH{constructor(e,t,n,r){const o=t();var i;this.stateMachine=new VH(o,r),e.document.stateReadonly.subscribe((()=>{this.stateMachine.onUserAction()})),o.error.subscribe((e=>{this.stateMachine.onError(e)})),n.pipe(NC(),(i=1,OC((function(e,t){return i<=t})))).subscribe((e=>{WF(void 0!==e,"got undefined access token"),this.stateMachine.onAccessTokenUpdate()})),this.status=this.stateMachine.statesReadonly.pipe(wC(WH)),this.userVisibleError=this.stateMachine.statesReadonly.pipe(wC((e=>"visibleError"in e?e.visibleError:void 0))),this.anyError=this.stateMachine.errorsReadonly,this.connectionAttemptLatency=this.stateMachine.statesReadonly.pipe(UC(),LC(),OC((([e,t])=>"connecting"===e.value.type&&"connected"===t.value.type)),wC((([e,t])=>t.timestamp-e.timestamp))),this.restorationAttemptLatency=this.stateMachine.statesReadonly.pipe(UC(),LC(),OC((([e,t])=>"restoring"===e.value.type&&"connected"===t.value.type)),wC((([e,t])=>t.timestamp-e.timestamp))),this.failLoopDetected=this.stateMachine.statesReadonly.pipe(OC((e=>"permanently-disconnected"===e.type)),wC((e=>{var t,n;return null===(n=null===(t=e.visibleError)||void 0===t?void 0:t.info.detailCode)||void 0===n?void 0:n.value})),OC((e=>BF(e,MH))));const a=this.stateMachine.statesReadonly.pipe(kC((e=>"session"in e?bC(e.session):bC())),NC());this.messages=a.pipe(kC((e=>e.messages))),this.sessionId=this.status.pipe(MC(a),wC((([e,t])=>{var n,r;return null===(r=null===(n=t.startSessionResponse)||void 0===n?void 0:n.sessionId)||void 0===r?void 0:r.value})),NC()),this.traceId=a.pipe(kC((e=>e.traceId)))}start(e){this.stateMachine.onStart(e)}stop(){this.stateMachine.onStop()}}class qH{constructor(){this.entries=[],this.entry$=new iC(null)}log(e,t){const n={level:e,message:t,timestamp:new Date};switch(this.entries.push(n),this.entry$.next(n),e){case Sj.Error:case Sj.Critical:console.error(`[ITALogger] ${t}`);case Sj.Debug:case Sj.Warning:}}subscribe(e){return this.entry$.subscribe(e)}getAllLogs(){return[...this.entries]}}class BH{constructor(e,t,n){this.serverUrl=e,this.options=n,this.logger=new qH;const r=new URL(e);r.pathname+="/sessions";const o=[(null==n?void 0:n.disableRateLimiting)?"disable-rate-limiting":null,(null==n?void 0:n.disableBotProtection)?"disable-bot-protection":null,(null==n?void 0:n.dangerousEnableUserTextLogging)?"dangerous-enable-user-text-logging":null].filter(Boolean).join(",");""!==o&&r.searchParams.set("x-deepl-options",o),!0===(null==n?void 0:n.addClientIdentifier)&&r.searchParams.set("client",crypto.randomUUID()),this.accountIdSubject=new iC(null==n?void 0:n.initialAccountId),this.accessTokenSubject=new iC(t)}createPersistentSession(e,t,n,r){var o,i;let a=null!==(i=null===(o=this.options)||void 0===o?void 0:o.transportStrategy)&&void 0!==i?i:OH.Negotiate;a===OH.OptimisticWebsocket&&void 0===globalThis.WebSocket&&(a=OH.EnforceLongPolling);return new HH(e,(()=>{var r,o;return new CH(Object.assign({enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1,accessToken:this.accessTokenSubject,accountId:this.accountIdSubject,transportStrategy:a},n),e,null!==(o=null===(r=this.options)||void 0===r?void 0:r.dangerousEnableItaMessageConsoleLogging)&&void 0!==o&&o,this.serverUrl,t)}),this.accessTokenSubject,r)}updateAccessToken(e){this.accessTokenSubject.next(e)}updateAccountId(e){this.accountIdSubject.next(e)}}class JH{constructor(e,t,n){this.payloadType=e,this.fieldName=t,this.document=n,this.annotations=this.document.stateReadonly.pipe(wC((e=>this.getAnnotations(e))),NC()),this.payloads=this.annotations.pipe(wC((e=>e.map((e=>e.specificPayload)))),NC())}getAnnotations(e){return QF(ij(this.fieldName,e),this.payloadType)}getCurrentAnnotations(){return this.getAnnotations(this.document.stateReadonly.value)}add(e,t,n){const r=RF({$type:vM.$type,value:crypto.randomUUID()},e,t,n);return this.document.applyItaEventBatch([uF.create({fieldName:this.fieldName,createAnnotationOperation:r})]),[r]}set(e){this.document.updateFieldState(this.fieldName,(t=>{const n=t.annotations.set(this.payloadType,e);return Object.assign(Object.assign({},t),{annotations:n})}))}removeAnnotation(e){const t=function(e){return{$type:zV.$type,annotationId:e}}(e);return this.document.applyItaEventBatch([uF.create({fieldName:this.fieldName,removeAnnotationOperation:t})]),[t]}serialize(){return this.getAnnotations(this.document.stateReadonly.value).map((e=>e.operation))}prettyPrint(){return this.getAnnotations(this.document.stateReadonly.value).map((e=>{var t;return{id:null===(t=e.operation.annotationId)||void 0===t?void 0:t.value,range:e.operation.range,annotationPayload:e.specificPayload}}))}reset(){this.set([])}}class zH{constructor(e,t,n,r){this.propertyName=e,this.propertyType=t,this.fieldName=n,this.document=r,this.value=this.document.stateReadonly.pipe(wC((e=>this.valueFrom(e))),NC())}valueFrom(e){var t;const n=null===(t=ij(this.fieldName,e).properties.get(this.propertyName))||void 0===t?void 0:t.value;if(void 0!==n)return WF(n.$type===this.propertyType,`Property ${this.propertyName} has unexpected type ${n.$type}, expected ${this.propertyType}`),n}getCurrentValue(){return this.valueFrom(this.document.stateReadonly.value)}set(e){const t=NF(this.propertyName,e);return this.document.applyItaEventBatch([uF.create({fieldName:this.fieldName,setPropertyOperation:t})]),[t]}prettyPrint(){return{propertyName:VV[this.propertyName],propertyValue:this.getCurrentValue()}}}class YH extends zH{constructor(e,t){super(VV.TRANSLATOR_TEXT_DIRECTION,aV.$type,e,t),this.isRightToLeft=this.value.pipe(wC((e=>(null==e?void 0:e.textDirection)===f$.RIGHT_TO_LEFT)))}}const XH=e=>!!e;let KH=class extends zH{constructor(e,t){super(VV.TRANSLATOR_MAXIMUM_TEXT_LENGTH,sV.$type,e,t),this.max=this.value.pipe(OC(XH),wC((e=>e.max)))}},QH=class extends zH{constructor(e,t){super(VV.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE,lV.$type,e,t),this.unsupported=this.value.pipe(wC((e=>!!e)))}};class ZH extends zH{constructor(e,t){super(VV.TRANSLATOR_INTERFACE_LANGUAGE,Y$.$type,e,t)}updateInterfaceLanguage(e){return super.set({$type:Y$.$type,interfaceLanguage:e})}}class eq extends zH{constructor(e){super(VV.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE,H$.$type,$V.TRANSLATOR_SOURCE_TEXT,e),this.language=this.value.pipe(wC((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(wC((e=>(null==e?void 0:e.origin)===PM.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:H$.$type,sourceLanguage:{$type:bV.$type,code:e},origin:PM.REQUESTED_LANGUAGE,isLanguageDetectionConfident:!1})}getCurrent(){var e,t;return null===(t=null===(e=this.getCurrentValue())||void 0===e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}}class tq extends zH{constructor(e){super(VV.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE,W$.$type,$V.TRANSLATOR_SOURCE_TEXT,e),this.language=this.value.pipe(wC((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:W$.$type,sourceLanguage:{$type:bV.$type,code:e}})}}class nq extends zH{constructor(e){super(VV.TRANSLATOR_SOURCE_LANGUAGES,F$.$type,$V.TRANSLATOR_SOURCE_TEXT,e),this.sourceLanguages=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.sourceLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class rq extends zH{constructor(e){super(VV.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS,cV.$type,$V.TRANSLATOR_SOURCE_TEXT,e),this.weights=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.weights)&&void 0!==t?t:[]})))}updateSourceLanguageDetectionWeights(e){return super.set(void 0===e?void 0:{$type:cV.$type,weights:e})}}class oq extends zH{constructor(e){super(VV.TRANSLATOR_HYPOTHESES_COMPARISON_ENABLED,_V.$type,$V.TRANSLATOR_SOURCE_TEXT,e)}}let iq=class extends YF{constructor(){super(...arguments),this.calculatedSourceLanguageProperty=new eq(this.document),this.requestedSourceLanguageProperty=new tq(this.document),this.sourceLanguagesProperty=new nq(this.document),this.maximumTextLengthProperty=new KH($V.TRANSLATOR_SOURCE_TEXT,this.document),this.unsupportedLanguageProperty=new QH($V.TRANSLATOR_SOURCE_TEXT,this.document),this.sourceLanguageDetectionWeightsProperty=new rq(this.document),this.interfaceLanguageProperty=new ZH($V.TRANSLATOR_SOURCE_TEXT,this.document),this.textDirection=new YH($V.TRANSLATOR_SOURCE_TEXT,this.document),this.hypothesesComparisonEnabledProperty=new oq(this.document),this.sourceTextUnitAnnotations=new JH(QG.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.textFormattingAnnotations=new JH(YG.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.requestClarifyAnnotations=new JH(N$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyQuestionAnnotations=new JH(C$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyHighlightAnnotations=new JH(L$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.selectClarifyAnswerAnnotations=new JH(x$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyStatusAnnotations=new JH(P$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.customRuleHighlightAnnotations=new JH(MM.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document),this.tmSegmentAnnotations=new JH(l$.$type,$V.TRANSLATOR_SOURCE_TEXT,this.document)}};class aq extends zH{constructor(e){super(VV.TRANSLATOR_TARGET_LANGUAGES,j$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.targetLanguages=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.targetLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class sq extends zH{constructor(e){super(VV.TRANSLATOR_CALCULATED_TARGET_LANGUAGE,B$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.language=this.value.pipe(wC((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){return super.set({$type:B$.$type,targetLanguage:{$type:wV.$type,code:e}})}}class lq extends zH{constructor(e){super(VV.TRANSLATOR_REQUESTED_TARGET_LANGUAGE,q$.$type,$V.TRANSLATOR_TARGET_TEXT,e)}updateLanguage(e){return super.set({$type:q$.$type,targetLanguage:{$type:wV.$type,code:e}})}getCurrent(){var e,t;return null===(t=null===(e=this.getCurrentValue())||void 0===e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}}let cq=class extends zH{constructor(e){super(VV.TRANSLATOR_STYLE_GUIDE_ID,z$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.styleGuideId=this.value.pipe(wC((e=>null==e?void 0:e.styleGuideId)))}updateStyleGuideId(e){return super.set({$type:z$.$type,styleGuideId:e?{$type:$M.$type,id:e}:void 0})}},uq=class extends zH{constructor(e){super(VV.TRANSLATOR_FREE_TEXT_PROMPT_LIST,X$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.freeTextPromptList=this.value.pipe(wC((e=>null==e?void 0:e.freeTextPromptList)))}updateFreeTextPromptList(e){return super.set({$type:X$.$type,freeTextPromptList:e?{$type:RM.$type,prompts:e}:void 0})}},dq=class extends zH{constructor(e){super(VV.TRANSLATOR_CUSTOMIZATIONS,K$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.customizations=this.value.pipe(wC((e=>null==e?void 0:e.customizations)))}updateGlossaryIds(e){var t,n,r;return super.set({$type:K$.$type,customizations:{$type:h$.$type,glossaryIds:null!=e?e:[],freeTextPrompts:null!==(r=null===(n=null===(t=this.getCurrentValue())||void 0===t?void 0:t.customizations)||void 0===n?void 0:n.freeTextPrompts)&&void 0!==r?r:[]}})}updateFreeTextPromptList(e){var t,n,r;return super.set({$type:K$.$type,customizations:{$type:h$.$type,glossaryIds:null!==(r=null===(n=null===(t=this.getCurrentValue())||void 0===t?void 0:t.customizations)||void 0===n?void 0:n.glossaryIds)&&void 0!==r?r:[],freeTextPrompts:null!=e?e:[]}})}},pq=class extends zH{constructor(e){super(VV.TRANSLATOR_STYLE_GUIDE_SUPPORT,Z$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}};class gq extends zH{constructor(e){super(VV.TRANSLATOR_GLOSSARY_SUPPORT,Q$.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}class hq extends zH{constructor(e){super(VV.TRANSLATOR_GLOSSARY_LIST,IV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.entries=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateGlossaryList(e){return super.set(void 0===e?void 0:{$type:IV.$type,glossaryEntries:e})}}class fq extends zH{constructor(e){super(VV.TRANSLATOR_GLOSSARY_SUGGESTIONS,IV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}}class _q extends zH{constructor(e){super(VV.TRANSLATOR_FORMALITY_MODES,nV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}}class mq extends zH{constructor(e){super(VV.TRANSLATOR_FORMALITY_MODE,rV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:rV.$type,formalityMode:e})}}class vq extends zH{constructor(e){super(VV.TRANSLATOR_LANGUAGE_MODELS,oV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}}class Tq extends zH{constructor(e){super(VV.TRANSLATOR_LANGUAGE_MODEL,iV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:iV.$type,languageModel:e})}}class yq extends zH{constructor(e){super(VV.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES,SV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:SV.$type,preferences:e})}}class Sq extends zH{constructor(e){super(VV.TRANSLATOR_GLOSSARY_ID,J$.$type,$V.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:J$.$type,glossaryId:e})}}class Eq extends zH{constructor(e){super(VV.TRANSLATOR_RTF_SUPPORT,eV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}let Iq=class extends zH{constructor(e){super(VV.TRANSLATOR_STYLE_VARIANTS,uV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.styleVariants=this.value.pipe(wC((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}},Aq=class extends zH{constructor(e){super(VV.TRANSLATOR_STYLE_VARIANT,dV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.styleVariant=this.value.pipe(wC((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:dV.$type,styleVariant:e?{$type:MV.$type,value:e}:void 0})}};class bq extends zH{constructor(e){super(VV.TRANSLATOR_TRANSLATION_MEMORY_LIST,pV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.translationMemories=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.translationMemories)&&void 0!==t?t:[]}))),this.error=this.value.pipe(wC((e=>null==e?void 0:e.error)))}updateTranslationMemoryList(e){return super.set({$type:pV.$type,translationMemories:e})}}class wq extends zH{constructor(e){super(VV.TRANSLATOR_SELECTED_TRANSLATION_MEMORY,hV.$type,$V.TRANSLATOR_TARGET_TEXT,e),this.selectedTranslationMemoryId=this.value.pipe(wC((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.translationMemoryId)||void 0===t?void 0:t.value)&&void 0!==n?n:null}))),this.selectedTranslationMemoryThreshold=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.threshold)&&void 0!==t?t:100})))}updateSelectedTranslationMemory(e,t=0){return super.set({$type:hV.$type,translationMemoryId:e?{$type:d$.$type,value:e}:void 0,threshold:t})}}class Oq extends zH{constructor(e){super(VV.TRANSLATOR_REPHRASE_TARGET_TEXT_STATUS,fV.$type,$V.TRANSLATOR_TARGET_TEXT,e)}}let Rq=class extends YF{constructor(){super(...arguments),this.requestedTargetLanguageProperty=new lq(this.document),this.calculatedTargetLanguageProperty=new sq(this.document),this.targetLanguagesProperty=new aq(this.document),this.requestWordAlternativesAnnotations=new JH(IM.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.providedWordAlternativesAnnotations=new JH(yM.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.selectWordAlternativeAnnotations=new JH(BG.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.requestTextUnitAlternativesAnnotations=new JH(EM.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.providedTextUnitAlternativesAnnotations=new JH(O$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.providedWordAlternativeHighlighAnnotations=new JH(mM.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.selectTextUnitAlternativeAnnotations=new JH(HG.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.requestAutocompletionAnnotations=new JH(I$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.providedAutocompletionAnnotations=new JH(A$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.selectAutocompletionAnnotations=new JH(b$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.providedAutomaticTextUnitAlternativesAnnotations=new JH(R$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.selectAutomaticTextUnitAlternativeAnnotations=new JH(jG.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.targetTextUnitAnnotations=new JH(QG.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.glossaryReplacementAnnotations=new JH(w$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.customRuleHighlightAnnotations=new JH(MM.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.textFormattingAnnotations=new JH(YG.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.clarifyHighlightAnnotations=new JH(L$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.requestRephraseTargetTextAnnotations=new JH(k$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.translationMemoryHighlightAnnotations=new JH(n$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.hypothesesComparisonStateAnnotations=new JH(U$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.selectHypothesesComparisonVariantAnnotations=new JH(M$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.skipHypothesesComparisonAnnotations=new JH(G$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.tmSegmentAnnotations=new JH(l$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.updateTranslationMemorySegmentsAnnotations=new JH($$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.updateTranslationMemorySegmentsResultAnnotations=new JH(V$.$type,$V.TRANSLATOR_TARGET_TEXT,this.document),this.glossarySupport=new gq(this.document),this.glossaryListProperty=new hq(this.document),this.glossarySuggestions=new fq(this.document),this.formalityModes=new _q(this.document),this.formalityMode=new mq(this.document),this.languageModels=new vq(this.document),this.languageModel=new Tq(this.document),this.translationMemoryListProperty=new bq(this.document),this.selectedTranslationMemoryProperty=new wq(this.document),this.textDirection=new YH($V.TRANSLATOR_TARGET_TEXT,this.document),this.glossaryId=new Sq(this.document),this.maximumTextLengthProperty=new KH($V.TRANSLATOR_TARGET_TEXT,this.document),this.styleGuideSupport=new pq(this.document),this.languageModelPreferences=new yq(this.document),this.freeTextPromptList=new uq(this.document),this.customizations=new dq(this.document),this.styleGuideId=new cq(this.document),this.rtfSupport=new Eq(this.document),this.styleVariantsProperty=new Iq(this.document),this.styleVariantProperty=new Aq(this.document),this.rephraseTargetTextStatus=new Oq(this.document)}};class Nq extends YF{constructor(){super(...arguments),this.targetTranscriptionTextUnitAnnotations=new JH(QG.$type,$V.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT,this.document)}}const Pq=["429_too_many_requests","500_internal_error"];function Lq([e,t]){var n;if(0===t.length)return"initial";const r=t.map((e=>{var t;return null===(t=e.operation.annotationId)||void 0===t?void 0:t.value})),o=e.filter((e=>{var t;return r.includes(null===(t=e.specificPayload.referenceId)||void 0===t?void 0:t.value)}));if(t.length!==o.length)return"busy";const i=o.filter((e=>e.specificPayload.status===_$.ERROR));if(i.length>0){const e=null===(n=i[0].specificPayload.errorInfo)||void 0===n?void 0:n.errorCode;return a=e,Pq.includes(a)?e:"500_internal_error"}var a;return"success"}class Cq extends tj{constructor(){super(...arguments),this.sourceTextField=new iq(this,$V.TRANSLATOR_SOURCE_TEXT),this.targetTextField=new Rq(this,$V.TRANSLATOR_TARGET_TEXT),this.targetTranscriptionTextField=new Nq(this,$V.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT),this.textUnitAnnotations=this.stateReadonly.pipe(wC((e=>{const t=ij($V.TRANSLATOR_SOURCE_TEXT,e),n=ij($V.TRANSLATOR_TARGET_TEXT,e),r=ij($V.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT,e),o=QF(t,QG.$type),i=QF(n,QG.$type),a=QF(r,QG.$type);return o.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,n,r,o;const s=e.operation.range,l=null!==(n=null===(t=i.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==n?n:AM.fromJSON({}),c=null!==(o=null===(r=a.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===r?void 0:r.operation.range)&&void 0!==o?o:AM.fromJSON({});return{sourceStart:s.start,sourceEnd:s.end,sourceLength:s.end-s.start,targetStart:l.start,targetEnd:l.end,targetLength:l.end-l.start,targetTranscriptionStart:c.start,targetTranscriptionEnd:c.end,targetTranscriptionLength:c.end-c.start}}))})),NC()),this.requestClarifyStatus=this.stateReadonly.pipe(wC((e=>{const t=ij($V.TRANSLATOR_SOURCE_TEXT,e);return Lq([QF(t,P$.$type),QF(t,N$.$type)])})),NC()),this.selectClarifyAnswerStatus=this.stateReadonly.pipe(wC((e=>{const t=ij($V.TRANSLATOR_SOURCE_TEXT,e);return Lq([QF(t,P$.$type),QF(t,x$.$type)])})),NC())}}class xq extends aj{constructor(e){super("Translator",FV.TRANSLATOR,new Cq),this.config=e,this.translationMemoryList=this.document.targetTextField.translationMemoryListProperty.translationMemories,this.translationMemoryListError=this.document.targetTextField.translationMemoryListProperty.error,this.selectedTranslationMemoryId=this.document.targetTextField.selectedTranslationMemoryProperty.selectedTranslationMemoryId,this.selectedTranslationMemoryThreshold=this.document.targetTextField.selectedTranslationMemoryProperty.selectedTranslationMemoryThreshold,this.targetLanguage=this.document.targetTextField.requestedTargetLanguageProperty.value.pipe(wC((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})),NC()),this.formattedSourceText=this.document.stateReadonly.pipe(wC((e=>{const t=ij($V.TRANSLATOR_SOURCE_TEXT,e);return aH({plainText:t.content,textFormattingAnnotations:QF(t,YG.$type)},!0)})),NC(),CC()),this.formattedTargetText=this.document.stateReadonly.pipe(wC((e=>{const t=ij($V.TRANSLATOR_TARGET_TEXT,e);return aH({plainText:t.content,textFormattingAnnotations:QF(t,YG.$type)},!0)})),NC(),CC()),this.hypothesesComparison={enable:(e,t)=>{const n=this.document.sourceTextField.hypothesesComparisonEnabledProperty.set({$type:_V.$type,enabled:!0,browserLanguage:null!=e?e:void 0,userCountry:null!=t?t:void 0});this.publishChange($V.TRANSLATOR_SOURCE_TEXT,n)},disable:()=>{const e=this.document.sourceTextField.hypothesesComparisonEnabledProperty.set({$type:_V.$type,enabled:!1});this.publishChange($V.TRANSLATOR_SOURCE_TEXT,e)},state:this.document.stateReadonly.pipe(wC((e=>{const t=QF(ij($V.TRANSLATOR_TARGET_TEXT,e),U$.$type).map((e=>e.specificPayload));return 1!==t.length?null:t[0]}))),acceptOriginal:e=>{const t=this.document.targetTextField.selectHypothesesComparisonVariantAnnotations.add(0,0,{$type:M$.$type,flowId:e,selection:0});this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)},acceptAlternative:e=>{const t=this.document.targetTextField.selectHypothesesComparisonVariantAnnotations.add(0,0,{$type:M$.$type,flowId:e,selection:1});this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)},skip:e=>{const t=this.document.targetTextField.skipHypothesesComparisonAnnotations.add(0,0,{$type:G$.$type,flowId:e});this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}},this.document.sourceTextField.maximumTextLengthProperty.max.subscribe((t=>{const n=e.maximumSourceTextLength;t!==n&&console.warn(`Source text limit mismatch: local=${n}, backend=${t}`)})),this.document.targetTextField.maximumTextLengthProperty.max.subscribe((t=>{const n=e.maximumTargetTextLength;t!==n&&console.warn(`Target text limit mismatch: local=${n}, backend=${t}`)})),this.config.preventSameLanguages.enabled&&this.document.sourceTextField.calculatedSourceLanguageProperty.language.pipe(OC((e=>!!e))).subscribe((e=>{const t=this.document.targetTextField.requestedTargetLanguageProperty.getCurrent();t&&this.config.preventSameLanguages.enabled&&jF(e,t)&&this.updateRequestedTargetLanguage(this.config.preventSameLanguages.getAlternativeTargetLanguage(t))}))}applyFieldEventBatch(e){this.document.applyItaEventBatch(e);for(const t of e)if(t.fieldName===$V.TRANSLATOR_TARGET_TEXT&&t.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),e.push(...this.cancelAutocompletionFlows()),this.publishChange($V.TRANSLATOR_TARGET_TEXT,e)}}updateStyleGuideId(e){const t=this.document.targetTextField.styleGuideId.updateStyleGuideId(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateFreeTextPromptList(e){var t;const n=this.document.targetTextField.customizations.updateFreeTextPromptList(null!==(t=null==e?void 0:e.map(((e,t)=>FM.create({clientPromptId:t.toString(),prompt:e}))))&&void 0!==t?t:null);this.publishChange($V.TRANSLATOR_TARGET_TEXT,n)}updateFreeTextPrompts(e){const t=this.document.targetTextField.customizations.updateFreeTextPromptList(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateGlossaryIds(e){const t=this.document.targetTextField.customizations.updateGlossaryIds(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateSourceText(e){const t=this.document.sourceTextField,n=xq.toRemoveOperations(t.textFormattingAnnotations),r=t.getCurrentContent(),o=this.config.maximumSourceTextLength,i=VF(FF(r.slice(0,o),e.slice(0,o)));this.publishChanges([[t.name,n],[t.name,i]]),this.document.updateFieldState($V.TRANSLATOR_SOURCE_TEXT,(t=>{const n=ej(t.annotations.set(YG.$type,[]),i);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateFormattedSourceText(e){this.updateFormattedText(this.document.sourceTextField,e)}updateTargetText(e){const t=this.document.targetTextField,n=xq.toRemoveOperations(t.textFormattingAnnotations),r=t.getCurrentContent(),o=this.config.maximumTargetTextLength,i=VF(FF(r.slice(0,o),e.slice(0,o)));this.publishChanges([[t.name,this.cancelTextUnitAlternativesFlows()],[t.name,this.cancelWordAlternativesFlows()],[t.name,this.cancelAutocompletionFlows()],[t.name,n],[t.name,i]]),this.document.updateFieldState($V.TRANSLATOR_TARGET_TEXT,(t=>{const n=ej(t.annotations.set(YG.$type,[]),i);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateFormattedTargetText(e){this.updateFormattedText(this.document.targetTextField,e)}updateRequestedTargetLanguage(e){var t;if(this.config.preventSameLanguages.enabled&&jF(e,null!==(t=this.document.sourceTextField.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:""))return;const n=this.document.targetTextField.requestedTargetLanguageProperty.updateLanguage(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,n)}updateRequestedSourceLanguage(e){const t=this.document.sourceTextField.requestedSourceLanguageProperty.updateLanguage(e);this.publishChange($V.TRANSLATOR_SOURCE_TEXT,t)}updateInterfaceLanguage(e){const t=this.document.sourceTextField.interfaceLanguageProperty.updateInterfaceLanguage(e);this.publishChange($V.TRANSLATOR_SOURCE_TEXT,t)}switchLanguages(e){var t,n,r,o,i,a,s,l,c;const{sourceTextField:u,targetTextField:d}=this.document,p=this.config.maximumSourceTextLength,g=this.config.maximumTargetTextLength,h=null!==(t=u.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:null===(r=null===(n=u.requestedSourceLanguageProperty.getCurrentValue())||void 0===n?void 0:n.sourceLanguage)||void 0===r?void 0:r.code,f=null!==(a=null===(i=null===(o=d.calculatedTargetLanguageProperty.getCurrentValue())||void 0===o?void 0:o.targetLanguage)||void 0===i?void 0:i.code)&&void 0!==a?a:null===(l=null===(s=d.requestedTargetLanguageProperty.getCurrentValue())||void 0===s?void 0:s.targetLanguage)||void 0===l?void 0:l.code,_=d.getCurrentContent(),m=u.getCurrentContent();if(!h||!f)return;const v=f.split("-")[0],T=null!==(c=e[h])&&void 0!==c?c:h,y=aH({plainText:null!=_?_:"",textFormattingAnnotations:d.textFormattingAnnotations.getCurrentAnnotations()},!0),S=xq.toRemoveOperations(d.textFormattingAnnotations),E=xq.toRemoveOperations(u.textFormattingAnnotations),I=xq.toRemoveOperations(d.targetTextUnitAnnotations),A=xq.toRemoveOperations(u.sourceTextUnitAnnotations),b=FF(_,""),w=FF(m,""),O=FF(_.slice(0,g),""),R=FF(m.slice(0,p),"");this.document.applyOperationBatch([[$V.TRANSLATOR_TARGET_TEXT,S],[$V.TRANSLATOR_SOURCE_TEXT,E],[$V.TRANSLATOR_TARGET_TEXT,I],[$V.TRANSLATOR_SOURCE_TEXT,A],[$V.TRANSLATOR_TARGET_TEXT,b],[$V.TRANSLATOR_SOURCE_TEXT,w]]),this.publishChanges([[$V.TRANSLATOR_TARGET_TEXT,S],[$V.TRANSLATOR_SOURCE_TEXT,E],[$V.TRANSLATOR_TARGET_TEXT,O],[$V.TRANSLATOR_SOURCE_TEXT,R],[$V.TRANSLATOR_TARGET_TEXT,d.requestedTargetLanguageProperty.updateLanguage(T)],[$V.TRANSLATOR_SOURCE_TEXT,u.requestedSourceLanguageProperty.updateLanguage(v)]]),""!==y&&this.updateFormattedSourceText(y),u.calculatedSourceLanguageProperty.updateLanguage(v)}updateFormattedText(e,t){const n=e.name===$V.TRANSLATOR_SOURCE_TEXT?this.config.maximumSourceTextLength:this.config.maximumTargetTextLength,r=lH(t);this.document.updateFieldState(e.name,(t=>{var o;const{textFormattingAnnotations:i}=function(e,t){if(e.plainText.length<=t)return e;const n=e.plainText.slice(0,t),r=e.textFormattingAnnotations.filter((e=>e.operation.range.start<t)).map((e=>e.operation.range.end<=t?e:Object.assign(Object.assign({},e),{operation:Object.assign(Object.assign({},e.operation),{range:Object.assign(Object.assign({},e.operation.range),{end:t})})}))),o=new Set(r.map((e=>e.specificPayload.textFormattingId.value)));return{plainText:n,textFormattingAnnotations:r.map((e=>{const t=e.specificPayload.children.filter((e=>o.has(e.value))),n=Object.assign(Object.assign({},e.specificPayload),{children:t});return{operation:Object.assign(Object.assign({},e.operation),{textFormattingPayload:n}),specificPayload:n}}))}}(r,n),a=t.content,s=r.plainText,l=VF(FF(a.slice(0,n),s.slice(0,n))),c=ej(t.annotations,l),u={properties:t.properties,content:s,annotations:c},d=hH(null!==(o=c.get(YG.$type))&&void 0!==o?o:[],i),p=d.reduce(KF,u);return this.publishChanges([[e.name,[...l,...d]]]),p}))}static toRemoveOperations(e){var t;return null!==(t=e.getCurrentAnnotations().map((e=>({$type:zV.$type,annotationId:e.operation.annotationId}))))&&void 0!==t?t:[]}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelAutocompletionFlows(){return this.document.targetTextField.requestAutocompletionAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestAutocompletionAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){WF(Number.isInteger(e),`[requestWordAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=t.length,`[requestWordAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelWordAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:IM.$type,flowId:{$type:_M.$type,value:r}})[0];return n.push(o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,n),r}requestRephraseTargetText(){const e=[],t=crypto.randomUUID(),n=this.document.targetTextField.requestRephraseTargetTextAnnotations.add(0,0,{$type:k$.$type,flowId:t})[0];return e.push(n),this.publishChange($V.TRANSLATOR_TARGET_TEXT,e),this.document.targetTextField.rephraseTargetTextStatus.set({$type:fV.$type,rephraseTargetTextStatus:v$.IN_PROGRESS}),t}requestTextUnitAlternatives(e){WF(Number.isInteger(e),`[requestTextUnitAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=t.length,`[requestTextUnitAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelTextUnitAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:EM.$type,flowId:{$type:SM.$type,value:r}})[0];return n.push(o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,n),r}requestAutocompletion(e){WF(Number.isInteger(e),`[requestAutocompletion] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=t.length,`[requestAutocompletion] out of range offset: ${e}`);const n=[];n.push(...this.cancelAutocompletionFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestAutocompletionAnnotations.add(e,e,{$type:I$.$type,flowId:{$type:u$.$type,value:r}})[0];return n.push(o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,n),r}cancelClarifyFlows(){return this.document.sourceTextField.requestClarifyAnnotations.getCurrentAnnotations().flatMap((e=>this.document.sourceTextField.requestClarifyAnnotations.removeAnnotation(e.operation.annotationId)))}requestClarify(){const e=[];e.push(...this.cancelClarifyFlows());const t=this.document.sourceTextField.getCurrentContent().length,n=crypto.randomUUID(),r=this.document.sourceTextField.requestClarifyAnnotations.add(0,t,{$type:N$.$type,flowId:{$type:xV.$type,value:n}})[0];return e.push(r),this.publishChange($V.TRANSLATOR_SOURCE_TEXT,e),n}resetClarify(){const e=[];e.push(...this.cancelClarifyFlows()),this.publishChange($V.TRANSLATOR_SOURCE_TEXT,e)}selectClarifyAnswer(e,t){var n,r,o,i,a,s;const l=[],c=this.document.sourceTextField.clarifyQuestionAnnotations.getCurrentAnnotations().find((t=>{var n,r,o;return(null===(o=null===(r=null===(n=t.specificPayload.questionWithAnswers)||void 0===n?void 0:n.question)||void 0===r?void 0:r.id)||void 0===o?void 0:o.value)===e}));if(!c)throw new Error(`Unknown question id "${e}" found!`);const u=null!==(r=null===(n=c.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0,d=null!==(i=null===(o=c.operation.range)||void 0===o?void 0:o.end)&&void 0!==i?i:0,p=this.document.sourceTextField.selectClarifyAnswerAnnotations.add(u,d,{$type:x$.$type,flowId:c.specificPayload.flowId,questionId:null===(s=null===(a=c.specificPayload.questionWithAnswers)||void 0===a?void 0:a.question)||void 0===s?void 0:s.id,answer:{$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:t}})[0];l.push(p),this.publishChange($V.TRANSLATOR_SOURCE_TEXT,l)}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:BG.$type,flowId:{$type:_M.$type,value:t},selection:n});r.push(...o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:HG.$type,flowId:{$type:SM.$type,value:t},selection:n});r.push(...o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,r)}selectAutocompletion(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectAutocompletionAnnotations.add(e,e,{$type:b$.$type,flowId:{$type:u$.$type,value:t},selection:n});r.push(...o),this.publishChange($V.TRANSLATOR_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:jG.$type,selection:t});n.push(...r),this.publishChange($V.TRANSLATOR_TARGET_TEXT,n)}updateGlossaryList(e){const t=this.document.targetTextField.glossaryListProperty.updateGlossaryList(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateSourceLanguageDetectionWeights(e){const t=this.document.sourceTextField.sourceLanguageDetectionWeightsProperty.updateSourceLanguageDetectionWeights(e);this.publishChange($V.TRANSLATOR_SOURCE_TEXT,t)}updateFormalityMode(e){const t=this.document.targetTextField.formalityMode.update(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModel(e){const t=this.document.targetTextField.languageModel.update(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModelPreferences(e){const t=this.document.targetTextField.languageModelPreferences.update(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange($V.TRANSLATOR_TARGET_TEXT,t)}updateSelectedTranslationMemory(e,t=75){const n=this.document.targetTextField.selectedTranslationMemoryProperty.updateSelectedTranslationMemory(e,t);this.publishChange($V.TRANSLATOR_TARGET_TEXT,n)}updateTranslationMemorySegments(){const e=[],t=crypto.randomUUID(),n=this.document.targetTextField.updateTranslationMemorySegmentsAnnotations.add(0,0,{$type:$$.$type,flowId:{$type:kV.$type,value:t}})[0];return e.push(n),this.publishChange($V.TRANSLATOR_TARGET_TEXT,e),t}}const kq=e=>{PL(e),wL(e)};function Dq(e,t){e&&(t?e.updateGlossaryId({$type:NM.$type,id:t}):e.updateGlossaryId())}function Uq(){return r(this,void 0,void 0,(function*(){const e=yield mI(["activeTermbaseId","isGlossaryEnabled","hasTermbaseService",mo.auth.isLoggedIn]);let t;if(e.isGlossaryEnabled&&uT(e)&&e.activeTermbaseId){const[n]=yield TN();t=n.find((t=>t.id===e.activeTermbaseId))}return{glossaryId:null==t?void 0:t.id,isAutoTermbase:null==t?void 0:t.isAutoTermbase,isShared:null==t?void 0:t.shared}}))}function Mq(e,t){const n=t===Yn.TRANSLATOR?{anonymous:{source:1500,target:6e3},freeAccount:{source:5e3,target:2e4},proAccount:{source:3e5,target:12e5}}:{anonymous:{source:2e3,target:4e3},freeAccount:{source:2e3,target:4e3},proAccount:{source:3e5,target:12e5}};return e.isLoggedIn?cT(e,t)?{maximumSourceTextLength:n.proAccount.source,maximumTargetTextLength:n.proAccount.target}:{maximumSourceTextLength:n.freeAccount.source,maximumTargetTextLength:n.freeAccount.target}:{maximumSourceTextLength:n.anonymous.source,maximumTargetTextLength:n.anonymous.target}}const Gq={};function $q(e){return r(this,arguments,void 0,(function*({sourceText:e,targetLanguage:t,port:n,itaDocumentState:o,domainName:i,translationTrigger:a=""}){TI(),delete Gq[n.name];const s=yield bA.getAccessToken(),l=yield $I(),c=cT(l,Yn.TRANSLATOR)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",{maximumSourceTextLength:u,maximumTargetTextLength:d}=Mq(l,Yn.TRANSLATOR),p=new BH(new URL(c),s,{}),g=new xq({maximumSourceTextLength:u,maximumTargetTextLength:d,preventSameLanguages:{enabled:!1}});let h;try{h=yield wo()}catch(e){console.error(e)}const f=p.createPersistentSession(g,void 0,void 0,h);f.start(o),TE({itaSessionType:Kr,itaSessionEventType:o?eo:Zr});AL(n.name,{session:f,client:g,updateAccessToken:e=>{p.updateAccessToken(e)},domainName:i,translationTrigger:a}),nT()&&f.sessionId.subscribe((e=>{console.log("ITA Translate session ID:",e)}));const _=yield Uq();let m;Dq(g,null==_?void 0:_.glossaryId),AL(n.name,{glossaryProperties:_});try{m=yield WI()}catch(e){console.error(e)}return t&&g.updateRequestedTargetLanguage(Kv({lang:t,languageList:m})),e&&g.updateSourceText((e=>e.replaceAll("\r",""))(e)),function(e,t,n){const o=[];o.push(e.userVisibleError.subscribe((e=>{e&&function(e,t){var n,r,o,i,a,s,l,c;if(Gq[t.name]=e,e instanceof LH){nT()&&console.error(`ITA session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(i=e.info)||void 0===i?void 0:i.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const c=bL(t.name),u=null===(s=null===(a=null==e?void 0:e.info)||void 0===a?void 0:a.detailCode)||void 0===s?void 0:s.value;_L(u)&&(Jy({errorCode:e.name,errorMessage:u||e.message,domainName:c.domainName,targetLang:c.targetLanguage,websiteLanguage:c.translateSourceLanguage,trigger:c.translationTrigger,characterCount:null===(l=c.sourceText)||void 0===l?void 0:l.length}),t.postMessage({type:GA,payload:{error:mL(u)}}),gT(e,Hv)),TE({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:oo,itaErrorMessage:u||e.message}),ZE({action:to,error:u||e.message})}else if(e instanceof PH){const n=vL(e.message);gT(e,Hv),n?t.postMessage({type:KA,payload:{error:n}}):t.postMessage({type:YA,payload:{error:e}}),ZE({action:YA,error:e.message});const r=bL(t.name);Jy({errorCode:e.name,errorMessage:e.message,domainName:r.domainName,targetLang:r.targetLanguage,websiteLanguage:r.translateSourceLanguage,trigger:r.translationTrigger,characterCount:null===(c=r.sourceText)||void 0===c?void 0:c.length}),TE({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:e.message})}}(e,n)}))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){return yield qq(e,n)}))))),o.push(t.document.targetTextField.content.subscribe((e=>{Hq(t,n),n.postMessage({type:DA,payload:{targetText:e}}),AL(n.name,{targetText:e})}))),o.push(t.document.sourceTextField.content.subscribe((e=>{AL(n.name,{sourceText:e})}))),o.push(t.document.targetTextField.requestedTargetLanguageProperty.value.subscribe((e=>{var r,o,i;Hq(t,n),AL(n.name,{targetLanguage:null===(r=null==e?void 0:e.targetLanguage)||void 0===r?void 0:r.code}),(null===(o=null==e?void 0:e.targetLanguage)||void 0===o?void 0:o.code)&&n.postMessage({type:ZA.REPLY.ITA_TARGET_LANGUAGE,payload:{language:null===(i=null==e?void 0:e.targetLanguage)||void 0===i?void 0:i.code}})}))),o.push(t.document.sourceTextField.calculatedSourceLanguageProperty.language.subscribe((e=>{Hq(t,n),AL(n.name,{translateSourceLanguage:e}),n.postMessage({type:xA,payload:{language:e}})}))),o.push(t.document.sourceTextField.calculatedSourceLanguageProperty.isAutoDetected.subscribe((e=>{Hq(t,n),AL(n.name,{isTranslateSourceLanguageAutoDetected:e}),n.postMessage({type:kA,payload:{isAutoDetected:e}})}))),o.push(t.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{Hq(t,n),AL(n.name,{isTranslateSourceLanguageUnsupported:e}),n.postMessage({type:JA,payload:{isUnsupported:e}})}))),o.push(t.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const t=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));n.postMessage({type:ZA.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:t}})}))),o.push(t.document.targetTextField.glossaryReplacementAnnotations.annotations.subscribe((e=>{AL(n.name,{glossaryAnnotationsApplied:e.length>0})})))}(f,g,n),f}))}function Vq(e){return r(this,void 0,void 0,(function*(){var t,n,o,i;if(e.name in Gq){const n=Gq[e.name];nT()&&console.error("Detected error for ITA translator session so will attempt to restore",n);const o=Object.assign({},bL(e.name));delete Gq[e.name];try{return yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,i;return nT()&&console.log(`Attempting to recreate an ITA Translate session for port ${t.name}`),null===(n=e.session)||void 0===n||n.stop(),$q(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.client)||void 0===r?void 0:r.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",translationTrigger:null!==(i=e.translationTrigger)&&void 0!==i?i:D}))}))}(o,e),null!==(t=bL(e.name).client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const a=yield bA.getAccessToken();return null===(o=(n=bL(e.name)).updateAccessToken)||void 0===o||o.call(n,a),null!==(i=bL(e.name).client)&&void 0!==i?i:null}))}function Fq(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield Vq(e);if(!n)return;let r;try{r=yield WI()}catch(e){console.error(e)}n.updateRequestedTargetLanguage(Kv({lang:t,languageList:r})),AL(e.name,{targetLanguage:t}),TE({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:io})}))}function jq(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield Vq(e);if(!n)return;let r;try{r=yield WI()}catch(e){console.error(e)}n.updateRequestedSourceLanguage(Kv({lang:t,direction:"source",languageList:r})),AL(e.name,{sourceLanguage:t}),TE({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:ao})}))}function Wq(e,t){return r(this,void 0,void 0,(function*(){const n=yield Vq(e);if(!n)return;const r={value:t,$type:vV.$type};n.updateFormalityMode(r),TE({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:so})}))}function Hq(e,t){t.postMessage({type:$A,payload:{itaDocumentState:e.document.serialize()}})}const qq=(e,t)=>r(void 0,void 0,void 0,(function*(){var n,r;nT()&&console.log("ITA_TRANSLATE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(bL(t.name).isTranslateSourceLanguageUnsupported||Jq(t),t.postMessage({type:ZA.REPLY.ITA_BACKEND_IDLE}))}));function Bq(e){return r(this,void 0,void 0,(function*(){const t=bL(e.name).session;null==t||t.stop(),delete Gq[e.name],wL(e),nT()&&console.log(`Disposed translate session for port ${e.name}`)}))}const Jq=e=>r(void 0,void 0,void 0,(function*(){var t,n,r,o;const i=bL(e.name);i.translateSourceLanguage&&(yield Promise.allSettled([qy({installationId:(yield mI(["installationId"])).installationId,trigger:i.translationTrigger,websiteLanguage:i.translateSourceLanguage,targetLanguage:i.targetLanguage,characterCount:null===(t=i.sourceText)||void 0===t?void 0:t.length,domainName:i.domainName,isIta:!0,glossaryTrackingInfo:{isGlossaryEnabled:!!(null===(n=i.glossaryProperties)||void 0===n?void 0:n.glossaryId),isGlossaryShared:!!(null===(r=i.glossaryProperties)||void 0===r?void 0:r.isShared),isAutoTermbase:!!(null===(o=i.glossaryProperties)||void 0===o?void 0:o.isAutoTermbase),didGlossaryChangeTranslation:i.glossaryAnnotationsApplied},isInputReviewUiUsed:i.translationTrigger===L}),eP()]))}));function zq(e,t){const n=bL(e.name).client;null==n||n.selectAutomaticTextUnitAlternative(t.index,t.text)}const Yq=e=>!!e;class Xq extends zH{constructor(e,t){super(VV.WRITE_MAXIMUM_TEXT_LENGTH,aG.$type,e,t),this.max=this.value.pipe(OC(Yq),wC((e=>e.max)))}}class Kq extends zH{constructor(e,t){super(VV.WRITE_UNSUPPORTED_LANGUAGE,cG.$type,e,t),this.unsupported=this.value.pipe(wC((e=>!!e)))}}class Qq extends zH{constructor(e){super(VV.WRITE_LANGUAGES,KM.$type,$V.WRITE_SOURCE_TEXT,e),this.languageCodes=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class Zq extends zH{constructor(e){super(VV.WRITE_GLOSSARY_LANGUAGES,QM.$type,$V.WRITE_SOURCE_TEXT,e),this.languageCodes=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class eB extends zH{constructor(e){super(VV.WRITE_CALCULATED_LANGUAGE,eG.$type,$V.WRITE_SOURCE_TEXT,e),this.language=this.value.pipe(wC((e=>{var t;return null===(t=null==e?void 0:e.language)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(wC((e=>(null==e?void 0:e.origin)===PM.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:eG.$type,language:{$type:TG.$type,code:e},origin:PM.REQUESTED_LANGUAGE,isLanguageDetectionConfident:!1})}}class tB extends zH{constructor(e){super(VV.WRITE_TEMPLATE_ADAPTATION_TEMPLATES,NG.$type,$V.WRITE_SOURCE_TEXT,e),this.templates=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.templateIds.map((e=>e.value)))&&void 0!==t?t:[]})))}}class nB extends zH{constructor(e){super(VV.WRITE_INLINE_SUGGESTIONS_LOADING,uG.$type,$V.WRITE_SOURCE_TEXT,e),this.loading=this.value.pipe(wC((e=>!!e)))}}class rB extends YF{constructor(){super(...arguments),this.sourceTextUnitAnnotations=new JH(QG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.diffUnitAnnotations=new JH(zM.$type,$V.WRITE_SOURCE_TEXT,this.document),this.customRuleHighlightAnnotations=new JH(MM.$type,$V.WRITE_SOURCE_TEXT,this.document),this.languages=new Qq(this.document),this.glossaryLanguages=new Zq(this.document),this.calculatedLanguage=new eB(this.document),this.maximumTextLengthProperty=new Xq($V.WRITE_SOURCE_TEXT,this.document),this.unsupportedLanguageProperty=new Kq($V.WRITE_SOURCE_TEXT,this.document),this.templatesProperty=new tB(this.document),this.inlineSuggestionsLoadingProperty=new nB(this.document),this.requestTemplateAdaptationAnnotations=new JH(LG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.providedTemplateAdaptationAnnotations=new JH(xG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionAnnotations=new JH(DG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionSpanAnnotations=new JH(UG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.actOnInlineSuggestionAnnotations=new JH(MG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionsTextUnitStateAnnotations=new JH(GG.$type,$V.WRITE_SOURCE_TEXT,this.document),this.requestInlineSuggestionImprovedTextAnnotations=new JH($G.$type,$V.WRITE_SOURCE_TEXT,this.document),this.providedInlineSuggestionImprovedTextAnnotations=new JH(VG.$type,$V.WRITE_SOURCE_TEXT,this.document)}}class oB extends zH{constructor(e){super(VV.WRITE_REQUESTED_LANGUAGE,ZM.$type,$V.WRITE_TARGET_TEXT,e)}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:ZM.$type,language:{$type:TG.$type,code:e}})}}class iB extends zH{constructor(e){super(VV.WRITE_STYLE_VARIANTS,sG.$type,$V.WRITE_TARGET_TEXT,e),this.styleVariants=this.value.pipe(wC((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}}class aB extends zH{constructor(e){super(VV.WRITE_STYLE_VARIANT,lG.$type,$V.WRITE_TARGET_TEXT,e),this.styleVariant=this.value.pipe(wC((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:lG.$type,styleVariant:e?{$type:EG.$type,value:e}:void 0})}}class sB extends zH{constructor(e){super(VV.WRITE_STYLE_GUIDE_ID,nG.$type,$V.WRITE_TARGET_TEXT,e),this.styleGuideId=this.value.pipe(wC((e=>null==e?void 0:e.styleGuideId)))}updateStyleGuideId(e){return super.set({$type:nG.$type,styleGuideId:e?{$type:$M.$type,id:e}:void 0})}}class lB extends zH{constructor(e){super(VV.WRITE_FREE_TEXT_PROMPT_LIST,oG.$type,$V.WRITE_TARGET_TEXT,e),this.freeTextPromptList=this.value.pipe(wC((e=>null==e?void 0:e.freeTextPromptList)))}updateFreeTextPromptList(e){return super.set({$type:oG.$type,freeTextPromptList:e?{$type:RM.$type,prompts:e}:void 0})}}class cB extends zH{constructor(e){super(VV.WRITE_CUSTOMIZATIONS,iG.$type,$V.WRITE_TARGET_TEXT,e),this.customizations=this.value.pipe(wC((e=>null==e?void 0:e.customizations)))}updateFreeTextPromptList(e){return super.set({$type:iG.$type,customizations:{$type:WM.$type,freeTextPrompts:null!=e?e:[]}})}}class uB extends zH{constructor(e){super(VV.WRITE_GLOSSARY_SUPPORT,hG.$type,$V.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}class dB extends zH{constructor(e){super(VV.WRITE_STYLE_GUIDE_SUPPORT,fG.$type,$V.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}class pB extends zH{constructor(e){super(VV.WRITE_CORRECTIONS_ONLY_SUPPORT,_G.$type,$V.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}class gB extends zH{constructor(e){super(VV.WRITE_CORRECTIONS_ONLY,rG.$type,$V.WRITE_TARGET_TEXT,e),this.enabled=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.correctionsOnly)&&void 0!==t&&t})))}updateCorrectionsOnly(e){return super.set({$type:rG.$type,correctionsOnly:e})}}class hB extends zH{constructor(e){super(VV.WRITE_GLOSSARY_LIST,gG.$type,$V.WRITE_TARGET_TEXT,e),this.entries=this.value.pipe(wC((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateNeverEditList(e){return super.set(void 0===e?void 0:{$type:gG.$type,glossaryEntries:e})}}class fB extends zH{constructor(e){super(VV.WRITE_GLOSSARY_ID,tG.$type,$V.WRITE_TARGET_TEXT,e),this.glossaryId=this.value.pipe(wC((e=>null==e?void 0:e.glossaryId)))}update(e){return super.set(void 0===e?void 0:{$type:tG.$type,glossaryId:e})}}class _B extends zH{constructor(e){super(VV.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT,mG.$type,$V.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(wC((e=>!!e)))}}class mB extends YF{constructor(){super(...arguments),this.requestedLanguage=new oB(this.document),this.targetTextUnitAnnotations=new JH(QG.$type,$V.WRITE_TARGET_TEXT,this.document),this.diffUnitAnnotations=new JH(zM.$type,$V.WRITE_TARGET_TEXT,this.document),this.customRuleHighlightAnnotations=new JH(MM.$type,$V.WRITE_TARGET_TEXT,this.document),this.styleVariantsProperty=new iB(this.document),this.styleVariantProperty=new aB(this.document),this.maximumTextLengthProperty=new Xq($V.WRITE_TARGET_TEXT,this.document),this.neverEditSupport=new uB(this.document),this.styleGuideSupport=new dB(this.document),this.neverEditListProperty=new hB(this.document),this.glossaryId=new fB(this.document),this.styleGuideId=new sB(this.document),this.correctionsOnlySupport=new pB(this.document),this.correctionsOnly=new gB(this.document),this.textUnitAlternativesSupport=new _B(this.document),this.requestWordAlternativesAnnotations=new JH(IM.$type,$V.WRITE_TARGET_TEXT,this.document),this.providedWordAlternativesAnnotations=new JH(yM.$type,$V.WRITE_TARGET_TEXT,this.document),this.freeTextPromptList=new lB(this.document),this.customizations=new cB(this.document),this.selectWordAlternativeAnnotations=new JH(BG.$type,$V.WRITE_TARGET_TEXT,this.document),this.requestTextUnitAlternativesAnnotations=new JH(EM.$type,$V.WRITE_TARGET_TEXT,this.document),this.providedWordAlternativeHighlighAnnotations=new JH(mM.$type,$V.WRITE_TARGET_TEXT,this.document),this.providedTextUnitAlternativesAnnotations=new JH(YM.$type,$V.WRITE_TARGET_TEXT,this.document),this.selectTextUnitAlternativeAnnotations=new JH(HG.$type,$V.WRITE_TARGET_TEXT,this.document),this.providedAutomaticTextUnitAlternativesAnnotations=new JH(XM.$type,$V.WRITE_TARGET_TEXT,this.document),this.selectAutomaticTextUnitAlternativeAnnotations=new JH(jG.$type,$V.WRITE_TARGET_TEXT,this.document),this.requestChangeStyleAlternativesAnnotations=new JH(AG.$type,$V.WRITE_TARGET_TEXT,this.document),this.providedChangeStyleAlternativesAnnotations=new JH(wG.$type,$V.WRITE_TARGET_TEXT,this.document),this.selectChangeStyleAlternativeAnnotations=new JH(OG.$type,$V.WRITE_TARGET_TEXT,this.document)}}class vB extends tj{constructor(){super(...arguments),this.sourceTextField=new rB(this,$V.WRITE_SOURCE_TEXT),this.targetTextField=new mB(this,$V.WRITE_TARGET_TEXT),this.textUnitAnnotations=this.stateReadonly.pipe(wC((e=>{const t=ij($V.WRITE_SOURCE_TEXT,e),n=ij($V.WRITE_TARGET_TEXT,e),r=QF(t,QG.$type),o=QF(n,QG.$type);return r.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,n;const r=e.operation.range,i=null!==(n=null===(t=o.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==n?n:AM.fromJSON({});return{sourceStart:r.start,sourceEnd:r.end,sourceLength:r.end-r.start,targetStart:i.start,targetEnd:i.end,targetLength:i.end-i.start}}))})))}}class TB extends aj{constructor(e){super("Write",FV.WRITE,new vB),this.config=e,this.inlineSuggestions={suggestions:this.document.stateReadonly.pipe(wC((e=>{const t=ij($V.WRITE_SOURCE_TEXT,e),n=QF(t,DG.$type).map((e=>e.specificPayload)),r=QF(t,UG.$type),o=QF(t,VG.$type),i=[],a={};for(const{id:e,categories:t,description:r,userChoice:o}of n){const n={id:e,spans:[],categories:t,description:r,userChoice:o,improvedText:null};a[n.id.value]=n,i.push(n)}for(const e of r){const{id:t}=e.specificPayload,n=a[t.value];n&&n.spans.push(e.operation.range)}for(const e of o){const{inlineSuggestionId:t,improvedText:n}=e.specificPayload,r=a[t.value];r&&(r.improvedText=n)}return i}))),suggestionsLoading:this.document.sourceTextField.inlineSuggestionsLoadingProperty.loading,correctSuggestion:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:MG.$type,inlineSuggestionId:e,userChoice:qM.CORRECT})[0]];this.publishChange($V.WRITE_SOURCE_TEXT,t)},rejectSuggestion:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:MG.$type,inlineSuggestionId:e,userChoice:qM.RETAIN})[0]];this.publishChange($V.WRITE_SOURCE_TEXT,t)},undoSuggestionChoice:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:MG.$type,inlineSuggestionId:e,userChoice:qM.PENDING})[0]];this.publishChange($V.WRITE_SOURCE_TEXT,t)},requestSuggestionPreview:e=>{const t=[this.document.sourceTextField.requestInlineSuggestionImprovedTextAnnotations.add(0,0,{$type:$G.$type,inlineSuggestionId:e})[0]];this.publishChange($V.WRITE_SOURCE_TEXT,t)}},this.document.sourceTextField.maximumTextLengthProperty.max.subscribe((t=>{const n=e.maximumSourceTextLength;t!==n&&console.warn(`Source text limit mismatch: local=${n}, backend=${t}`)})),this.document.targetTextField.maximumTextLengthProperty.max.subscribe((t=>{const n=e.maximumTargetTextLength;t!==n&&console.warn(`Target text limit mismatch: local=${n}, backend=${t}`)}))}applyFieldEventBatch(e){this.document.applyItaEventBatch(e);for(const t of e)if(t.fieldName===$V.WRITE_TARGET_TEXT&&t.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),this.publishChange($V.WRITE_TARGET_TEXT,e)}}updateStyleGuideId(e){const t=this.document.targetTextField.styleGuideId.updateStyleGuideId(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}updateCorrectionsOnly(e){const t=this.document.targetTextField.correctionsOnly.updateCorrectionsOnly(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}updateFreeTextPromptList(e){var t;const n=this.document.targetTextField.customizations.updateFreeTextPromptList(null!==(t=null==e?void 0:e.map(((e,t)=>FM.create({clientPromptId:t.toString(),prompt:e}))))&&void 0!==t?t:null);this.publishChange($V.WRITE_TARGET_TEXT,n)}updateFreeTextPrompts(e){const t=this.document.targetTextField.customizations.updateFreeTextPromptList(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}updateSourceText(e){const t=this.document.sourceTextField,n=t.getCurrentContent(),r=this.config.maximumSourceTextLength,o=VF(FF(n.slice(0,r),e.slice(0,r)));this.publishChanges([[t.name,o]]),this.document.updateFieldState($V.WRITE_SOURCE_TEXT,(t=>{const n=ej(t.annotations,o);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateTargetText(e){const t=this.document.targetTextField,n=t.getCurrentContent(),r=this.config.maximumTargetTextLength,o=VF(FF(n.slice(0,r),e.slice(0,r)));this.publishChanges([[t.name,this.cancelTextUnitAlternativesFlows()],[t.name,this.cancelWordAlternativesFlows()],[t.name,o]]),this.document.updateFieldState($V.WRITE_TARGET_TEXT,(t=>{const n=ej(t.annotations,o);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateRequestedLanguage(e){const t=this.document.targetTextField.requestedLanguage.updateLanguage(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}updateNeverEditList(e){const t=this.document.targetTextField.neverEditListProperty.updateNeverEditList(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}updateNeverEditGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange($V.WRITE_TARGET_TEXT,t)}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelChangeStyleAlternativesFlows(){return this.document.targetTextField.requestChangeStyleAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestChangeStyleAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTemplateAdaptationFlows(){return this.document.sourceTextField.requestTemplateAdaptationAnnotations.getCurrentAnnotations().flatMap((e=>this.document.sourceTextField.requestTemplateAdaptationAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){WF(Number.isInteger(e),`[requestWordAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=t.length,`[requestWordAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelWordAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:IM.$type,flowId:{$type:_M.$type,value:r}})[0];return n.push(o),this.publishChange($V.WRITE_TARGET_TEXT,n),r}requestTextUnitAlternatives(e){WF(Number.isInteger(e),`[requestTextUnitAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=t.length,`[requestTextUnitAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelTextUnitAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:EM.$type,flowId:{$type:SM.$type,value:r}})[0];return n.push(o),this.publishChange($V.WRITE_TARGET_TEXT,n),r}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:BG.$type,flowId:{$type:_M.$type,value:t},selection:n});r.push(...o),this.publishChange($V.WRITE_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n,r){const o=[];o.push(...this.cancelWordAlternativesFlows());const i=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:HG.$type,flowId:{$type:SM.$type,value:t},selection:n,rephraseVariant:r});o.push(...i),this.publishChange($V.WRITE_TARGET_TEXT,o)}selectAutomaticTextUnitAlternative(e,t,n){const r=[],o=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:jG.$type,selection:t,rephraseVariant:n});r.push(...o),this.publishChange($V.WRITE_TARGET_TEXT,r)}requestShortenAlternatives(e,t){WF(Number.isInteger(e),`[requestShortenAlternatives] non-integer offset: ${e}`),WF(Number.isInteger(t),`[requestShortenAlternatives] non-integer length: ${t}`);const n=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=n.length,`[requestShortenAlternatives] out of range offset: ${e}`);const r=e+t;WF(r>=0&&r<=n.length,`[requestShortenAlternatives] out of range length: ${t}`);const o=[];o.push(...this.cancelChangeStyleAlternativesFlows());const i=crypto.randomUUID(),a=this.document.targetTextField.requestChangeStyleAlternativesAnnotations.add(e,r,AG.create({flowId:IG.create({value:i}),styleVariant:EG.create({value:"shorten"})}))[0];return o.push(a),this.publishChange($V.WRITE_TARGET_TEXT,o),i}selectShortenAlternative(e,t,n,r){WF(Number.isInteger(e),`[selectShortenAlternative] non-integer offset: ${e}`),WF(Number.isInteger(t),`[selectShortenAlternative] non-integer length: ${t}`);const o=this.document.targetTextField.getCurrentContent();WF(e>=0&&e<=o.length,`[selectShortenAlternative] out of range offset: ${e}`);const i=e+t;WF(i>=0&&i<=o.length,`[selectShortenAlternative] out of range length: ${t}`);const a=[];a.push(...this.cancelChangeStyleAlternativesFlows());const s=this.document.targetTextField.selectChangeStyleAlternativeAnnotations.add(e,i,OG.create({flowId:IG.create({value:n}),selection:r}));a.push(...s),this.publishChange($V.WRITE_TARGET_TEXT,a)}adaptTextToTemplate(e,t){const n=[];n.push(...this.cancelTemplateAdaptationFlows());const r=crypto.randomUUID(),o=this.document.sourceTextField.requestTemplateAdaptationAnnotations.add(0,0,LG.create({flowId:IG.create({value:r}),input:e,templateIds:[RG.create({value:t})]}))[0];return n.push(o),this.publishChange($V.WRITE_SOURCE_TEXT,n),r}useAdaptedText(e){this.updateSourceText(e),this.publishChange($V.WRITE_SOURCE_TEXT,this.cancelTemplateAdaptationFlows())}}const yB={};function SB(e){return r(this,arguments,void 0,(function*({sourceText:e,requestedLanguage:t,port:n,itaDocumentState:o,domainName:i,writeTrigger:a=""}){TI(),delete yB[n.name];const s=yield bA.getAccessToken(),l=yield $I(),c=cT(l,Yn.WRITE)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",{maximumSourceTextLength:u,maximumTargetTextLength:d}=Mq(l,Yn.WRITE),p=new BH(new URL(c),s,{}),g=new TB({maximumSourceTextLength:u,maximumTargetTextLength:d});let h;try{h=yield wo()}catch(e){console.error(e)}const f=p.createPersistentSession(g,void 0,void 0,h);f.start(o),TE({itaSessionType:Qr,itaSessionEventType:o?eo:Zr});return RL(n.name,{session:f,client:g,updateAccessToken:e=>{p.updateAccessToken(e)},writeTrigger:a,domainName:i}),nT()&&f.sessionId.subscribe((e=>{console.log("ITA Write session ID:",e)})),t&&g.updateRequestedLanguage(Kv({lang:t})),e&&g.updateSourceText(e),function(e,t,n){const o=[];o.push(t.document.targetTextField.content.subscribe((e=>r(this,void 0,void 0,(function*(){wB(t,n),n.postMessage({type:UA,payload:{targetText:e}}),RL(n.name,{targetText:e})}))))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){return yield IB(e,n)}))))),o.push(e.userVisibleError.subscribe((e=>{e&&function(e,t){var n,r,o,i,a,s,l,c,u,d;if(yB[t.name]=e,e instanceof LH){nT()&&console.log(`ITA Write session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(i=e.info)||void 0===i?void 0:i.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const u=NL(t.name),d=null===(s=null===(a=null==e?void 0:e.info)||void 0===a?void 0:a.detailCode)||void 0===s?void 0:s.value;_L(d)&&(jS(ar,{lang:u.writeSourceLanguage,sourceLength:null===(l=u.sourceText)||void 0===l?void 0:l.length,targetLength:null===(c=u.targetText)||void 0===c?void 0:c.length,style:u.writeStyle,trigger:u.writeTrigger,domainName:u.domainName,error:d||e.message}),t.postMessage({type:GA,payload:{error:mL(d,!0)}}),gT(e,Hv)),TE({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:oo,itaErrorMessage:d||e.message}),ZE({action:to,error:d||e.message})}else if(e instanceof PH){const n=vL(e.message);gT(e,Hv),t.postMessage({type:XA,payload:{error:n||e}}),ZE({action:XA,error:n||e.message});const r=NL(t.name);jS(ar,{lang:r.writeSourceLanguage,sourceLength:null===(u=r.sourceText)||void 0===u?void 0:u.length,targetLength:null===(d=r.targetText)||void 0===d?void 0:d.length,style:r.writeStyle,trigger:r.writeTrigger,domainName:r.domainName,error:e.name}),TE({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:e.message})}}(e,n)}))),o.push(t.document.sourceTextField.content.subscribe((e=>{RL(n.name,{sourceText:e})}))),o.push(t.document.sourceTextField.calculatedLanguage.language.subscribe((e=>{const r={en:"en-GB",pt:"pt-PT",zh:"zh-Hans"};if(["en","pt","zh"].includes(null==e?void 0:e.toLowerCase()))return e=r[e.toLowerCase()]||"en-GB",void AB({port:n,language:e});wB(t,n),RL(n.name,{writeSourceLanguage:e}),n.postMessage({type:HA,payload:{language:e}})}))),o.push(t.document.sourceTextField.calculatedLanguage.isAutoDetected.subscribe((e=>{wB(t,n),RL(n.name,{isWriteSourceLanguageAutoDetected:e}),n.postMessage({type:qA,payload:{isAutoDetected:e}})}))),o.push(t.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{wB(t,n),RL(n.name,{isWriteSourceLanguageUnsupported:e}),n.postMessage({type:zA,payload:{isUnsupported:e}})}))),o.push(t.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const t=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));n.postMessage({type:QA.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:t}})}))),o.push(t.document.sourceTextField.languages.languageCodes.subscribe((e=>{nT()&&console.log("ITA_WRITE_SOURCE_LANGUAGE_CODES",e)})))}(f,g,n),f}))}function EB(e){return r(this,void 0,void 0,(function*(){var t,n,o,i;if(e.name in yB){nT()&&console.error("Detected error for Write session so will attempt to restore",yB[e.name]);const n=Object.assign({},NL(e.name));delete yB[e.name];try{return yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,i;return nT()&&console.log(`Attempting to recreate an ITA Write session for port ${t.name}`),null===(n=e.session)||void 0===n||n.stop(),SB(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.client)||void 0===r?void 0:r.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",writeTrigger:null!==(i=e.writeTrigger)&&void 0!==i?i:Wr}))}))}(n,e),null!==(t=NL(e.name).client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const a=yield bA.getAccessToken();return null===(o=(n=NL(e.name)).updateAccessToken)||void 0===o||o.call(n,a),null!==(i=NL(e.name).client)&&void 0!==i?i:null}))}const IB=(e,t)=>r(void 0,void 0,void 0,(function*(){var n,r;nT()&&console.log("ITA_WRITE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(NL(t.name).isWriteSourceLanguageUnsupported||PB(t),t.postMessage({type:QA.REPLY.ITA_BACKEND_IDLE}))}));function AB(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield EB(e);null==n||n.updateRequestedLanguage(Kv({lang:t})),RL(e.name,{targetLanguage:t}),TE({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:ao})}))}function bB(e,t){return r(this,void 0,void 0,(function*(){const n=yield EB(e);null==n||n.updateStyleVariant(t),RL(e.name,{writeStyle:t}),TE({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:lo})}))}function wB(e,t){t.postMessage({type:VA,payload:{itaDocumentState:e.document.serialize()}})}function OB(e,t){return r(this,void 0,void 0,(function*(){const n=yield EB(e);null==n||n.updateSourceText(t)}))}function RB(e){return r(this,void 0,void 0,(function*(){const t=NL(e.name).session;null==t||t.stop(),delete yB[e.name],PL(e),nT()&&console.log(`Disposed write session for port ${e.name}`)}))}function NB(e,t){const n=NL(e.name).client;null==n||n.selectAutomaticTextUnitAlternative(t.index,t.text),TE({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:co})}const PB=e=>r(void 0,void 0,void 0,(function*(){var t,n;const r=NL(e.name);r.writeSourceLanguage&&(yield jS(Zn,{lang:r.writeSourceLanguage,sourceLength:null===(t=r.sourceText)||void 0===t?void 0:t.length,targetLength:null===(n=r.targetText)||void 0===n?void 0:n.length,style:r.writeStyle,trigger:r.writeTrigger,domainName:r.domainName,isInputReviewUiUsed:r.writeTrigger===$r}))}));let LB=!1;const CB=()=>r(void 0,void 0,void 0,(function*(){if(!(yield wI()))return;let e=!1;try{const t=yield $N();e=2===NE(t,IE)}catch(e){console.error(e),ZE({action:"AUTO_LOGIN",error:e.message})}if(e&&!No()&&chrome.cookies){try{yield kB(),ZE({action:"AUTO_LOGIN"})}catch(e){aT(e),ZE({action:"AUTO_LOGIN",error:e.message})}try{UB()}catch(e){console.error(e),ZE({action:"AUTO_LOGIN",error:e.message})}}yield QP()})),xB=()=>r(void 0,void 0,void 0,(function*(){const e=yield BI();if(yield AI())return!1;const t=yield chrome.storage.local.get([mo.auth.lastLogoutTrigger]);return!((null==t?void 0:t[mo.auth.lastLogoutTrigger])&&t[mo.auth.lastLogoutTrigger]===xn&&!(null==e?void 0:e.enforceSsoAutologin)&&!(null==e?void 0:e.requireLogin))})),kB=()=>r(void 0,void 0,void 0,(function*(){if(!(yield xB()))return;const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_session"});if(0===e.length)return;yield $B(e[0].value)})),DB="dl_session",UB=()=>{if(LB)return;LB=!0;const e=(()=>{let e=Promise.resolve(),t=0;return{enqueue:n=>(t++,e=e.then(n,n).finally((()=>t--)),e),length:()=>t,waitForAll:()=>e}})();chrome.cookies.onChanged.addListener((t=>{if(t.cookie.name===DB){if(t.removed&&"expired_overwrite"===t.cause)return void GB(t.cookie.value);if(!t.removed&&"explicit"===t.cause)return void e.enqueue((()=>MB(t.cookie.value)))}"releaseGroups"!==t.cookie.name||iL()}))},MB=e=>r(void 0,void 0,void 0,(function*(){try{if(aT("Website cookie was added",e),!(yield xB()))return;yield $B(e),ZE({action:"LOGIN_VIA_COOKIE_EXCHANGE"})}catch(e){aT("Failed to process added auth cookie",e),ZE({action:"LOGIN_VIA_COOKIE_EXCHANGE",error:e.message})}})),GB=e=>r(void 0,void 0,void 0,(function*(){aT("Website cookie was removed",e),ZE({action:"ON_AUTH_COOKIE_REMOVED"});const t=(yield chrome.storage.local.get("delegatedLoginMapping")).delegatedLoginMapping;if(yield FB(t,e)){yield Promise.all([RI(),SI(),EI(),jI()]);try{qS(),kS({trigger:kn,reason:"autologout"})}catch(e){console.error(e)}yield wA(!0),pI()}})),$B=e=>r(void 0,void 0,void 0,(function*(){try{const t="https://w.deepl.com/oidc/cookie_bearer_exchange?client=chromeExtension",n=yield fetch(t,{method:"GET",credentials:"include"}),r=yield n.json();yield OA(r,{trigger:Un,reason:"autologin"});const o=(yield II()).id_token;return!!o&&(yield chrome.storage.local.set({delegatedLoginMapping:VB(o,e)}),pI(),!0)}catch(e){if(aT(e),e instanceof Error)try{gT(e,Hv),By({errorCode:e.name,errorMessage:e.message,errorCategory:zr})}catch(e){aT(e)}}return!1})),VB=(e,t)=>{var n;const r=S(e);return{delegatedSessionId:null!==(n=null==r?void 0:r.sid)&&void 0!==n?n:"",originatingSessionId:t}},FB=(e,t)=>r(void 0,void 0,void 0,(function*(){var n;if(!e||e.originatingSessionId!==t)return aT("No delegated login mapping found or session ID mismatch"),!1;const r=(yield II()).id_token;return!(!r||(null===(n=S(r))||void 0===n?void 0:n.sid)!==e.delegatedSessionId)||(aT("No current id token found, or the current ID token does not match the delegated session ID"),!1)})),jB={syncExperiments:"sync_experiments",syncClientState:"sync_client_state",trackClientStateWeb:"track_client_state_web",getAccountInfo:"get_account_info",cleanupActionLogs:"cleanup_action_logs",getSupportedTranslationLanguages:"get_supported_translation_languages"},WB={translateWithDeepL:"dlTranslateWithDeepL",captureAndTranslate:"dlCaptureAndTranslate",translateFullPage:"dlTranslateFullPage"};function HB(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const qB={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},BB={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#translator",SETTINGS_WRITING:"settings.html#write",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",SETTINGS_GLOSSARY:"settings.html#glossary",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",ONBOARDING_AFTER_SUCCESSFUL_LOGIN:"onboarding.html#successful_login",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html",CREATE_ACCOUNT:"create-account.html"};function JB({payload:e}){const{destination:t,openInSameTab:n,hash:r}=e;if(void 0===t)return;let o="";switch(t){case qB.developer_tools:o=zB(BB.DEVELOPER_TOOLS);break;case qB.settings_page:o=zB(BB.SETTINGS_PAGE,r);break;case qB.settings_writing:o=zB(BB.SETTINGS_WRITING);break;case qB.settings_reading:o=zB(BB.SETTINGS_READING);break;case qB.settings_customizations:o=zB(BB.SETTINGS_CUSTOMIZATIONS);break;case qB.settings_glossary:o=zB(BB.SETTINGS_GLOSSARY);break;case qB.onboarding:o=No()?zB(BB.ONBOARDING_FIREFOX):zB(BB.ONBOARDING);break;case qB.onboarding_after_successful_login:o=zB(BB.ONBOARDING_AFTER_SUCCESSFUL_LOGIN);break;case qB.firefox_first_run:o=zB(BB.FIREFOX_FIRST_RUN);break;case qB.privacy_policy:o=zB(BB.PRIVACY_POLICY);break;case qB.create_account:o=zB(BB.CREATE_ACCOUNT)}o&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:o})})):chrome.tabs.create({url:o,active:!0}))}function zB(e,t){console.log(chrome.runtime.getURL(e));const n=new URL(chrome.runtime.getURL(e));return n.searchParams.append("dl_brex_internal_page","true"),t&&(n.hash=t),n.toString()}function YB(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,i,a,s,l,c;try{yield JI(),yield Ub({nicheIntegration:e.nicheIntegration||yn,sourceTexts:[e.sourceText],isWriteRequest:!1}),yield $q({sourceText:e.sourceText,targetLanguage:e.targetLanguage,domainName:e.domainName,translationTrigger:e.trigger,port:t}),nT()&&console.log(`ITA Translator session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(i=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===i?void 0:i.id}}`)}catch(n){throw nT()&&console.error(`Error creating ITA Translator session for sender: ${null===(s=null===(a=t.sender)||void 0===a?void 0:a.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(c=null===(l=t.sender)||void 0===l?void 0:l.tab)||void 0===c?void 0:c.id}}`,n),gT(n,Hv),Jy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:e.targetLanguage,websiteLanguage:e.websiteLanguage,trigger:e.trigger,characterCount:e.sourceText.length}),TE({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:n.message||n}),n}}))}function XB(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,i,a,s,l,c;try{yield JI(),yield Ub({nicheIntegration:e.nicheIntegration||yn,sourceTexts:[e.sourceText],isWriteRequest:!0}),yield SB({sourceText:e.sourceText,requestedLanguage:e.requestedLanguage,domainName:e.domainName,writeTrigger:e.trigger,port:t}),nT()&&console.log(`ITA Write session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(i=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===i?void 0:i.id}}`)}catch(n){throw nT()&&console.error(`Error creating ITA Write session for sender: ${null===(s=null===(a=t.sender)||void 0===a?void 0:a.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(c=null===(l=t.sender)||void 0===l?void 0:l.tab)||void 0===c?void 0:c.id}}`,n),gT(n,Hv),jS(ar,{sourceLength:e.sourceText.length,error:n.name,trigger:e.trigger,domainName:e.domainName}),TE({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:n.message||n}),n}}))}const KB={dlRequestLogin:"dlRequestLogin",dlRequestSignUp:"dlRequestSignUp",dlRequestLogout:"dlRequestLogout",dlGetUserState:"dlGetUserState",dlGetClientState:"dlGetClientState",dlManipulateGetClientState:"dlManipulateGetClientState",dlGetUsersCharacterLimit:"dlGetUsersCharacterLimit"},QB={dlTextToSpeech:"dlTextToSpeech",dlGetSupportedVoices:"dlGetSupportedVoices",dlStopSpeech:"dlStopSpeech"},ZB={dlSendNotification:"dlSendNotification"},eJ={dlTriggerImproveInline:"dlTriggerImproveInline",dlTriggerImproveInput:"dlTriggerImproveInput",dlRequestAlternatives:"dlRequestAlternatives",dlRequestImproveWriting:"dlRequestImproveWriting"},tJ={dlRequestGDocsSplitText:"dlRequestGDocsSplitText"},nJ={dlCheckCommandShortcuts:"dlCheckCommandShortcuts",dlGetAppSettings:"dlGetAppSettings",dlUpdateAppSettings:"dlUpdateAppSettings"},rJ={dlRequestHtmlTranslation:"dlRequestHtmlTranslation",dlRequestInlineTranslation:"dlRequestInlineTranslation",dlTriggerTranslateInline:"dlTriggerTranslateInline",dlTriggerTranslateInput:"dlTriggerTranslateInput",dlRequestInputTranslation:"dlRequestInputTranslation",dlRequestZendeskInputTranslation:"dlRequestZendeskInputTranslation",dlRequestGmailReceivedEmailTranslation:"dlRequestGmailReceivedEmailTranslation",dlRequestWhatsAppMessageTranslation:"dlRequestWhatsAppMessageTranslation",dlRequestTwitterTweetTranslation:"dlRequestTwitterTweetTranslation",dlRequestYouTubeTranslation:"dlRequestYouTubeTranslation",dlRequestLinkedInPostTranslation:"dlRequestLinkedInPostTranslation",dlRequestZendeskMessageTranslation:"dlRequestZendeskMessageTranslation",dlRequestWhatsAppMessagesTranslation:"dlRequestWhatsAppMessagesTranslation",dlRequestGDocsProcessContent:"dlRequestGDocsProcessContent",dlTranslatedInputTextNotSet:"dlTranslatedInputTextNotSet"},oJ={dlRequestTermbases:"dlRequestTermbases",dlGetDictionary:"dlGetDictionary"},iJ={dlStoreTranslationLanguages:"dlStoreTranslationLanguages"},aJ={dlTrackInlineSettingOpened:"dlTrackInlineSettingOpened",dlTrackPolicyLoginRequiredNotification:"dlTrackPolicyLoginRequiredNotification",dlTrackUpgradeNotificationAction:"dlTrackUpgradeNotificationAction",dlTrackLogoClickedEvent:"dlTrackLogoClickedEvent",dlTrackDetectLanguage:"dlTrackDetectLanguage",dlTrackSidePanelOpened:"dlTrackSidePanelOpened",dlTrackFormalitySelected:"dlTrackFormalitySelected",dlTrackWriteTextTonesChanged:"dlTrackWriteTextTonesChanged",dlTrackWriteTextStylesApplied:"dlTrackWriteTextStylesApplied",dlTrackWriteTextStylesChanged:"dlTrackWriteTextStylesChanged",dlTrackClicksOnAdsButton:"dlTrackClicksOnAdsButton",dlTrackIframeTranslationFailed:"dlTrackIframeTranslationFailed",dlTrackSeeAlternativesClicked:"dlTrackSeeAlternativesClicked",dlTrackAlternativeSelected:"dlTrackAlternativeSelected",dlTrackLanguageDetectionForTextProcessing:"dlTrackLanguageDetectionForTextProcessing",dlTrackUpgradeNotificationClosed:"dlTrackUpgradeNotificationClosed",dlTrackUpgradeNotificationIsDisplayed:"dlTrackUpgradeNotificationIsDisplayed",dlOnSuccessfulZendeskTranslation:"dlOnSuccessfulZendeskTranslation",dlTrackAlternativesEvent:"dlTrackAlternativesEvent",dlTrackGmailCharLimitReached:"dlTrackGmailCharLimitReached",dlTrackCustomizationEnabledEvent:"dlTrackCustomizationEnabledEvent",dlTrackTranslateAcceptOrRevertEvent:"dlTrackTranslateAcceptOrRevertEvent",dlTrackGDocsReplaceText:"dlTrackGDocsReplaceText",dlTrackLandingOnWebsite:"dlTrackLandingOnWebsite",dlTrackOnboardingOpenExternalLink:"dlTrackOnboardingOpenExternalLink",dlTrackOnboardingStepChange:"dlTrackOnboardingStepChange",dlTrackIconHover:"dlTrackIconHover",dlTrackVoiceOverStops:"dlTrackVoiceOverStops",dlTrackInlineListen:"dlTrackInlineListen",dlTrackInlineCopy:"dlTrackInlineCopy",dlTrackFptHide:"dlTrackFptHide",dlTrackInlineDragStart:"dlTrackInlineDragStart",dlTrackInlinePositionChange:"dlTrackInlinePositionChange",dlTrackRightClick:"dlTrackRightClick",dlTrackRecommendToAFriendClick:"dlTrackRecommendToAFriendClick",dlTrackDocTransClick:"dlTrackDocTransClick",dlTrackExtensionOpenedEvent:"dlTrackExtensionOpenedEvent",dlTrackInputTranslationInjection:"dlTrackInputTranslationInjection",dlTrackUseOfShortcut:"dlTrackUseOfShortcut",dlTrackUiAction:"dlTrackUiAction",dlTrackSettingChanged:"dlTrackSettingChanged",dlTrackOpenInputHighlighter:"dlTrackOpenInputHighlighter",dlTrackOpenInlineHighlighter:"dlTrackOpenInlineHighlighter",dlTrackCloseInputHighlighter:"dlTrackCloseInputHighlighter",dlTrackCloseInlineHighlighter:"dlTrackCloseInlineHighlighter",dlTrackDictionaryStatus:"dlTrackDictionaryStatus",dlTrackOpenDictionarySection:"dlTrackOpenDictionarySection",dlTrackDisabledDictionaryHover:"dlTrackDisabledDictionaryHover",dlTrackZendeskCustomizationEvent:"dlTrackZendeskCustomizationEvent",dlTrackZendeskGlossaryOpened:"dlTrackZendeskGlossaryOpened",dlTrackGlossaryEnabled:"dlTrackGlossaryEnabled",dlTrackGlossaryDisabled:"dlTrackGlossaryDisabled",dlTrackDeeplWriteEvent:"dlTrackDeeplWriteEvent",dlTrackLingueeErrorData:"dlTrackLingueeErrorData",dlTrackGdocsMaxCharExceededShown:"dlTrackGdocsMaxCharExceededShown",dlTrackGDocsMaxCharExceededTryProClicked:"dlTrackGDocsMaxCharExceededTryProClicked",dlTrackOnboardingModalShown:"dlTrackOnboardingModalShown",dlTrackUILocationClicked:"dlTrackUILocationClicked",dlTrackIframeTranslationSuccessful:"dlTrackIframeTranslationSuccessful",dlTrackReplaceInField:"dlTrackReplaceInField",dlTrackFptPopupOpen:"dlTrackFptPopupOpen",dlTrackExperimentTrigger:"dlTrackExperimentTrigger",dlTrackOcrTranslationInstructionsClosed:"dlTrackOcrTranslationInstructionsClosed",dlTrackInlineHighlightsShown:"dlTrackInlineHighlightsShown"},sJ={dlGetExperiments:"dlGetExperiments"},lJ={dlCheckFeatureFlagEnabled:"dlCheckFeatureFlagEnabled",dlGetExperimentParameter:"dlGetExperimentParameter"},cJ={dlTestClassicAPI:"dlTestClassicAPI",dlOpenInternalPage:"dlOpenInternalPage",checkForOpenSidePanel:"checkForOpenSidePanel",dlExternalURLRedirect:"dlExternalURLRedirect",newWebsiteState:"newWebsiteState",resetWebsiteState:"resetWebsiteState",dlOpenSidePanel:"dlOpenSidePanel",dlOpenAllBrowserFeedbackSurvey:"dlOpenAllBrowserFeedbackSurvey",dlGetActionLogs:"dlGetActionLogs",dlGetCleanupStats:"dlGetCleanupStats",dlManualCleanupActionLogs:"dlManualCleanupActionLogs"},uJ={dlGetCustomLogo:"dlGetCustomLogo"};function dJ(e,t,n){return nT()&&!{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.71.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.DISABLE_DEBUG_LOGS&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),pJ({action:e.action,request:e,sendResponse:n},t)}function pJ(e,t){var n,r,o;const{action:i,request:a,sendResponse:s}=e;switch(ZE({action:i}),i){case rJ.dlRequestHtmlTranslation:return iw(e.request).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestInlineTranslation:return hN(a).then((e=>{s(e)})).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlTriggerTranslateInline:return uN(t.tab.id),!1;case eJ.dlTriggerImproveInline:return pN(t.tab.id),!1;case eJ.dlTriggerImproveInput:return gN(t.tab.id),!1;case rJ.dlTriggerTranslateInput:return dN(t.tab.id),!1;case rJ.dlRequestInputTranslation:return fN(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestZendeskInputTranslation:return _N(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestGmailReceivedEmailTranslation:return dw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestWhatsAppMessageTranslation:return sw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestTwitterTweetTranslation:return cw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestYouTubeTranslation:return aw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestLinkedInPostTranslation:return uw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestZendeskMessageTranslation:return vN(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestWhatsAppMessagesTranslation:return lw(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case tJ.dlRequestGDocsSplitText:return mN(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case rJ.dlRequestGDocsProcessContent:return tL(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case oJ.dlRequestTermbases:return TN().then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackDetectLanguage:return yN(a),!1;case KB.dlRequestLogin:return VN().then((()=>s(!0))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case KB.dlRequestSignUp:return FN().then((()=>s(!0))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case KB.dlRequestLogout:return jN().then((()=>s(!0))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case nJ.dlGetAppSettings:return chrome.storage.sync.get(null,(function(e){s(e)})),!0;case nJ.dlUpdateAppSettings:return chrome.storage.sync.set(a.payload,(function(){s(a.payload)})),!0;case rJ.dlTranslatedInputTextNotSet:return zy({errorCode:vT,errorMessage:"The translated text could not be set",domainName:a.payload}),!1;case KB.dlGetUserState:return WN().then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case cJ.dlExternalURLRedirect:return xo(a.payload),!1;case cJ.dlOpenInternalPage:return JB(a),!1;case cJ.dlOpenSidePanel:return XN(),!1;case aJ.dlTrackInputTranslationInjection:return SN(a.payload),!1;case aJ.dlTrackExtensionOpenedEvent:return EN(a.payload),!1;case aJ.dlTrackLogoClickedEvent:return IN(a.payload),!1;case aJ.dlTrackDocTransClick:return AN(),!1;case aJ.dlTrackRecommendToAFriendClick:return bN(),!1;case ZB.dlSendNotification:return HN(a.payload),!1;case nJ.dlCheckCommandShortcuts:return qN().then((e=>s(e))),!0;case aJ.dlTrackUseOfShortcut:return BN(a.payload),!1;case aJ.dlTrackUiAction:return JN(a.payload),!1;case aJ.dlTrackInlineSettingOpened:return wN(a.payload),!1;case aJ.dlTrackSettingChanged:return ON(a.payload),!1;case aJ.dlTrackUILocationClicked:return mP(a.payload),!1;case aJ.dlTrackRightClick:return RN(a.payload),!1;case aJ.dlTrackInlinePositionChange:return NN(a.payload),!1;case aJ.dlTrackInlineDragStart:return PN(a.payload),!1;case aJ.dlTrackFptHide:return LN(a.payload),!1;case aJ.dlTrackInlineCopy:return xN(a.payload),!1;case aJ.dlTrackInlineListen:return DN(a.payload),!1;case aJ.dlTrackIconHover:return CN(a.payload),!1;case aJ.dlTrackVoiceOverStops:return UN(a.payload),!1;case aJ.dlTrackOnboardingStepChange:return kN(a.payload),!1;case aJ.dlTrackOnboardingOpenExternalLink:return MN(a.payload),!1;case aJ.dlTrackLandingOnWebsite:return QN(a.payload),!1;case aJ.dlTrackGDocsReplaceText:return GN(a.payload),!1;case sJ.dlGetExperiments:return $N(null===(n=a.payload)||void 0===n?void 0:n.forceFetch).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(e)})),!0;case KB.dlGetClientState:return wP("payload"in a?null===(r=a.payload)||void 0===r?void 0:r.forceFetch:void 0).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(e)})),!0;case KB.dlManipulateGetClientState:return nT()&&(null===(o=a.payload)||void 0===o?void 0:o.state)&&WP(a.payload.state).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(e)})),!0;case QB.dlTextToSpeech:return tP(a.payload,t.tab.id).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case oJ.dlGetDictionary:return lP(a.payload).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case iJ.dlStoreTranslationLanguages:return iL(a.payload.releaseGroups).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case QB.dlGetSupportedVoices:return nP().then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case QB.dlStopSpeech:return rP().then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackOpenInputHighlighter:return oP(a.payload),!1;case aJ.dlTrackOpenInlineHighlighter:return iP(a.payload),!1;case aJ.dlTrackCloseInputHighlighter:return aP(a.payload),!1;case aJ.dlTrackCloseInlineHighlighter:return sP(a.payload),!1;case aJ.dlTrackDictionaryStatus:return cP(a.payload),!1;case aJ.dlTrackOpenDictionarySection:return uP(),!1;case aJ.dlTrackDisabledDictionaryHover:return dP(),!1;case aJ.dlTrackZendeskCustomizationEvent:return pP(a.payload),!1;case aJ.dlTrackZendeskGlossaryOpened:return LP(a.payload).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackGlossaryEnabled:return CP(a.payload).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackGlossaryDisabled:return xP(a.payload).then((()=>s())).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackDeeplWriteEvent:return vP(a.payload),!1;case aJ.dlTrackLingueeErrorData:return gP(a.payload),!1;case aJ.dlTrackGdocsMaxCharExceededShown:return hP(a.payload),!1;case aJ.dlTrackGDocsMaxCharExceededTryProClicked:return fP(a.payload),!1;case aJ.dlTrackOnboardingModalShown:return _P(a.payload),!1;case eJ.dlRequestImproveWriting:return TP(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case eJ.dlRequestAlternatives:return $P(a).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e))})),!0;case aJ.dlTrackTranslateAcceptOrRevertEvent:return yP(a.payload),!1;case aJ.dlTrackCustomizationEnabledEvent:return SP(a.payload),!1;case aJ.dlTrackGmailCharLimitReached:return IP(a.payload),!1;case KB.dlGetUsersCharacterLimit:return RP().then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackAlternativesEvent:return bP(a.payload),!1;case cJ.dlTestClassicAPI:return DP(a.payload).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlOnSuccessfulZendeskTranslation:return ZN(),!1;case aJ.dlTrackUpgradeNotificationIsDisplayed:return NP(a.payload),!1;case aJ.dlTrackUpgradeNotificationClosed:return PP(a.payload),!1;case aJ.dlTrackUpgradeNotificationAction:return kP(a.payload),!1;case aJ.dlTrackLanguageDetectionForTextProcessing:return UP(a.payload).finally((()=>s())),!0;case aJ.dlTrackSeeAlternativesClicked:return MP(),!1;case aJ.dlTrackAlternativeSelected:return GP(a.payload),!1;case aJ.dlTrackIframeTranslationSuccessful:return VP(),!1;case aJ.dlTrackIframeTranslationFailed:return FP(a.payload),!1;case aJ.dlTrackClicksOnAdsButton:return jP(),!1;case aJ.dlTrackWriteTextStylesChanged:return HP(a.payload),!1;case aJ.dlTrackWriteTextStylesApplied:return qP(a.payload),!1;case aJ.dlTrackWriteTextTonesChanged:return BP(a.payload),!1;case aJ.dlTrackFormalitySelected:return gE(a.payload),!1;case aJ.dlTrackSidePanelOpened:return hE(),!1;case aJ.dlTrackPolicyLoginRequiredNotification:return Qy(a.payload),!1;case aJ.dlTrackReplaceInField:return mE(a.payload),!1;case uJ.dlGetCustomLogo:return qb(a.payload.logoId).then((e=>{s({logoUrl:null==e?void 0:e.imageObjectURL})})).catch((e=>{sI(),lI(),ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case cJ.dlOpenAllBrowserFeedbackSurvey:return nI(),!1;case aJ.dlTrackFptPopupOpen:return SE(a.payload),!1;case cJ.dlGetActionLogs:return KE().then((e=>s(e))).catch((e=>{s(UT(e,Hv))})),!0;case cJ.dlGetCleanupStats:return tI().then((e=>s(e))).catch((e=>{s(UT(e,Hv))})),!0;case cJ.dlManualCleanupActionLogs:return eI().then((e=>s(Object.assign({success:!0},e)))).catch((e=>{s({success:!1,error:e.message})})),!0;case aJ.dlTrackOcrTranslationInstructionsClosed:return KP(),!1;case lJ.dlCheckFeatureFlagEnabled:return ZP(a.payload.featureFlagName).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case lJ.dlGetExperimentParameter:return eL(a.payload).then((e=>s(e))).catch((e=>{ZE({action:i,error:e.message}),s(UT(e,Hv))})),!0;case aJ.dlTrackInlineHighlightsShown:return vE(a.payload),!1}return!1}function gJ(e){switch(console.log(`Command "${e}" triggered`),e){case Dt:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:eb.dlTriggerTranslationShortcut})}));break;case Ut:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}));break;case Mt:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.sidePanel.open({windowId:e[0].windowId},(()=>{YN()}))}));try{qN().then((e=>{const t=e.filter((e=>e.name===Mt))[0].shortcut;Zy({shortcutType:Mt,shortcut:t})}))}catch(e){console.error(e)}break;default:Zy({shortcutType:Gt,shortcut:e})}ZE({action:e})}function hJ(e){switch(e.name){case jB.syncExperiments:$N();break;case jB.syncClientState:wP();break;case jB.trackClientStateWeb:OP().then((e=>dE(e))).catch((()=>pE()));break;case jB.getAccountInfo:zP();break;case jB.cleanupActionLogs:QE();break;case jB.getSupportedTranslationLanguages:iL()}ZE({action:e.name})}function fJ(e,t){e.menuItemId===WB.translateWithDeepL&&(zN(),ZE({action:WB.translateWithDeepL})),t&&e.menuItemId===WB.captureAndTranslate&&chrome.sidePanel.open({windowId:t.windowId}).then((()=>{YN(),ZE({action:WB.captureAndTranslate})})).catch((e=>{const t=e instanceof Error?e.message:String(e)||"";yE({errorCode:TT,errorMessage:t}),ZE({action:TT,error:t})})),e.menuItemId===WB.translateFullPage&&(KN(),ZE({action:WB.translateFullPage}))}function _J(e,t){return r(this,void 0,void 0,(function*(){let n=!1;if("sync"===t)for(let[t,{oldValue:r,newValue:o}]of Object.entries(e))if("installationId"===t&&r!==o){try{yield $N(!0)}catch(e){console.error(`Error fetching experiments after installationId change: ${e}`)}n=!0}if("local"===t){["organizationId","accountId"].some((t=>{const n=e[t];return n&&n.oldValue!==n.newValue}))&&(n=!0)}if(n){(yield cN()).initialize(2e3)}ZE({action:"onStorageChanged"})}))}function mJ(e,t){const{type:n,payload:r}=e;switch(nT()&&console.log(`Port message received, port name: ${t.name}, sender: ${t.sender.tab.url}, tab ID: ${t.sender.tab.id}, message type ${n}`),ZE({action:n}),n){case RA:YB({request:r,port:t}).then().catch((e=>{ZE({action:n,error:e.message}),TJ(e,t)}));break;case ZA.REQUEST.ITA_UPDATE_TARGET_LANGUAGE:Fq({port:t,language:r.language});break;case ZA.REQUEST.ITA_UPDATE_SOURCE_LANGUAGE:jq({port:t,language:r.language});break;case MA:Wq(t,r.formality);break;case CA:$q({itaDocumentState:r.itaDocumentState,domainName:r.domainName,translationTrigger:r.trigger,port:t});break;case PA:XB({request:r,port:t}).then().catch((e=>{ZE({action:n,error:e.message}),TJ(e,t)}));break;case FA:AB({port:t,language:r.language});break;case jA:bB(t,r.styleVariant);break;case WA:SB({itaDocumentState:r.itaDocumentState,domainName:r.domainName,writeTrigger:r.trigger,port:t});break;case LA:OB(t,r.sourceText);break;case NA:Bq(t);break;case BA:RB(t);break;case QA.REQUEST.ITA_SELECT_ALTERNATIVE:NB(t,r.alternative);break;case ZA.REQUEST.ITA_SELECT_ALTERNATIVE:zq(t,r.alternative);break;default:nT()&&console.log(`Unrecognised message type: ${n}`)}}function vJ(e){nT()&&console.log(`Port name: ${e.name} disconnected`),kq(e)}function TJ(e,t){t.postMessage({type:GA,payload:UT(e,Hv)}),ZE({action:GA,error:e.message})}const yJ={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.71.0 ${navigator.userAgent} `}]}},SJ={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]},deeplInteractiveTextApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://ita-*.www*.deepl.com/*",resourceTypes:["xmlhttprequest","websocket"]},deeplOneShotApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://oneshot-*.www*.deepl.com/*",resourceTypes:["xmlhttprequest"]}};function EJ(){var e,t;if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4,5,6],addRules:[{id:2,priority:1,action:yJ.setBrowserExtensionUserAgent,condition:SJ.lingueeDomainFilter},{id:3,priority:1,action:yJ.setBrowserExtensionUserAgent,condition:SJ.deeplToolingApiDomainFilter},{id:4,priority:1,action:yJ.setBrowserExtensionUserAgent,condition:SJ.deeplStatisticsDomainFilter},{id:5,priority:1,action:yJ.setBrowserExtensionUserAgent,condition:SJ.deeplInteractiveTextApiDomainFilter},{id:6,priority:1,action:yJ.setBrowserExtensionUserAgent,condition:SJ.deeplOneShotApiDomainFilter}]},(e=>r(this,void 0,void 0,(function*(){nT()&&console.log("created",e)}))));else if(null===(e=chrome.webRequest)||void 0===e?void 0:e.onBeforeSendHeaders){const e=nT()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.71.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics",...(t=["https://ita-free.www.deepl.com/v1/*","https://ita-pro.www.deepl.com/v1/*","https://oneshot-free.www.deepl.com/v1/*","https://oneshot-pro.www.deepl.com/v1/*"],t.map((e=>e.replace(/^https:\/\//,"*://"))))]},["blocking","requestHeaders"])}}function IJ(e){nT()&&console.log(`Start setup routine after ${null==e?void 0:e.reason}`),function(){return r(this,void 0,void 0,(function*(){let e=!1,t=!1;const n=nT(),r=yield chrome.storage.sync.get(null),o={settingSchemeVersion:47,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:E.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.langCode]:O})),{}),selectedTargetLanguage:zv(),recentlyUsedLanguages:[],isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.71.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.DEEPL_PRO_API_KEY,installationId:m(),closeSidebarOnFPT:!0,enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,enableInlineHighlights:!1,languagePreferenceForWriting:Xv(),languagePreferenceForReading:Xv(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,reviewPopupRemindAt:null,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,hasITAInlineOnboardingBeenShown:!1,hasITAPopupHideRemarkBeenShown:!1,useAdvancedWindowModeForInlineFunctionality:!0,regionalVariant:void 0,isSurveyLinkHidden:!1,isSidePanelSurveyVisible:!1,sidePanelSurveyHasBeenDisplayed:!1,successfulSidepanelTranslations:0,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:Ir,gDocsWriteLang:null,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,isYoutubeEnabled:!0,customizationsActiveStates:{[On]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1,firefoxAnonPermissionGranted:!0,firefoxPersonalPermissionGranted:!1,enableItaDev:!1,enableItaWriteDev:!1,enableItaInputDev:!1,freeTrialFTPAnonymousUser:5,freeTrialFTPFreeUser:15,enableAdvancedTriggerIcon:!1,userProfileSurvey2025:{popupShown:!1,remindAt:null},targetLanguageSidePanel:Yv()};if(!r||!r.settingSchemeVersion||r.settingSchemeVersion<o.settingSchemeVersion){let t={};for(const[i,a]of Object.entries(o))i in r&&"settingSchemeVersion"!==i?t[i]=r[i]:("installationId"===i&&(e=!0,n&&console.log("installation id set",a)),t[i]=a);yield chrome.storage.sync.clear(),yield chrome.storage.sync.set(t),n&&console.log("settings set: ",t)}else n&&console.log("No need to update the settings");return(yield xI())||(yield CI(),t=!0,n&&console.log("browser instance id set")),{installationIdWasSet:e,browserInstanceIdWasSet:t}}))}().then((t=>{bJ(e,t)})).catch((t=>{bJ(e).finally((()=>{console.error(t),By({errorCode:mT,errorMessage:`setSettingsAfterInstall failed: ${t.message}`})}))}))}function AJ(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(null);return yield cT(e,Yn.TRANSLATOR)}))}function bJ(e,t){return r(this,void 0,void 0,(function*(){let n,o=nT();o&&console.log("get experiments");try{n=yield $N(!0),o&&console.log("fetched experiments",n)}catch(e){console.error(e),By({errorCode:mT,errorMessage:"Unable to fetch experiments in install block"}),ZE({action:mT,error:e.message})}o&&console.log("get client state and set perodic code execution");try{yield wP(!0)}catch(e){console.error(e),By({errorCode:mT,errorMessage:e.message}),ZE({action:mT,error:e.message})}try{yield zP()}catch(e){console.error(e),By({errorCode:mT,errorMessage:e.message}),ZE({action:mT,error:e.message})}try{yield function(){return r(this,void 0,void 0,(function*(){yield chrome.alarms.clearAll(),yield chrome.alarms.create(jB.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),yield chrome.alarms.create(jB.syncClientState,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(jB.trackClientStateWeb,{delayInMinutes:360,periodInMinutes:360}),yield chrome.alarms.create(jB.getAccountInfo,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(jB.cleanupActionLogs,{delayInMinutes:5,periodInMinutes:15}),yield chrome.alarms.create(jB.getSupportedTranslationLanguages,{delayInMinutes:30,periodInMinutes:30})}))}()}catch(e){console.error(e),By({errorCode:mT,errorMessage:e.message}),ZE({action:mT,error:e.message})}try{yield iL()}catch(e){console.error(e),By({errorCode:mT,errorMessage:e.message}),ZE({action:mT,error:e.message})}try{const t=yield chrome.management.getSelf();_E(Object.assign(Object.assign({},t),{installReason:e.reason}))}catch(e){console.error(e)}t?(o&&console.log("start tracking of installation result"),function(e,t){r(this,void 0,void 0,(function*(){const n=nT();if((null==t?void 0:t.browserInstanceIdWasSet)&&e===chrome.runtime.OnInstalledReason.INSTALL){n&&console.log("track - installation successful"),AS(),n&&console.log("track - browser instance id creation"),FS();try{const e=yield OP();uE(e),n&&console.log("track - client state of website",e)}catch(e){pE(),console.error(e)}}else n&&console.log(`install reason: ${e}, no need to track browser instance id creation, install successful event or the web client state`);(null==t?void 0:t.installationIdWasSet)?(n&&console.log("track - installation id creation"),VS()):n&&console.log(`install reason: ${e}, no need to track installation id creation`)}))}(e.reason,t),ZE({action:`INSTALLATION_REASON_${e.reason}`})):o&&console.log("tracking of installation result not needed");try{yield pI(),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`);try{yield CB()}catch(e){aT("Error initializing auto login:",e),ZE({action:mT,error:e.message})}e.reason!==chrome.runtime.OnInstalledReason.INSTALL||oT()||(yield iT())||wJ(),chrome.contextMenus.removeAll((function(){return r(this,void 0,void 0,(function*(){const e=yield AJ();chrome.contextMenus.create({id:WB.translateWithDeepL,title:chrome.i18n.getMessage("right_click_menu_translate_with_deepl"),contexts:["selection"],enabled:!0}),chrome.contextMenus.create({id:WB.translateFullPage,title:chrome.i18n.getMessage("right_click_menu_translate_web_page"),contexts:["all"],enabled:e}),!No()&&chrome.sidePanel&&chrome.contextMenus.create({id:WB.captureAndTranslate,title:chrome.i18n.getMessage("right_click_menu_capture_and_translate"),contexts:["all"]})}))})),chrome.tabs.query({},(function(e){for(const t of e)HB(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){By({errorCode:mT,errorMessage:e.message}),ZE({action:mT,error:e.message})}}))}chrome.storage.local.onChanged.addListener((()=>r(void 0,void 0,void 0,(function*(){const e=yield AJ();chrome.contextMenus.update(WB.translateFullPage,{enabled:e})}))));const wJ=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){var e;const t=yield BI();return null!==(e=null==t?void 0:t.skipOnboarding)&&void 0!==e&&e}));e||(No()?JB({payload:{destination:qB.firefox_first_run}}):JB({payload:{destination:qB.create_account}}))})),OJ={log:console.log,error:console.error,warn:console.warn,info:console.info,debug:console.debug},RJ=(e,t={})=>{if(!{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.71.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.71.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.71.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.LOGGING.SEQ_ENABLED)return;const n=(n,...o)=>{try{let i="";try{for(const e of o)i+=JSON.stringify(e)+" "}catch(e){i=o.toString()}((e,t,...n)=>{r(void 0,[e,t,...n],void 0,(function*(e,t,n={}){try{return yield fetch("http://localhost:5579/api/events/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Events:[{Timestamp:(new Date).toISOString(),Level:e,MessageTemplate:t,Properties:n}]})})}catch(e){}}))})(n,i.trim(),Object.assign({scope:e},t))}catch(e){}};console.log=(...e)=>{OJ.log(...e),n("Information",...e)},console.error=(...e)=>{OJ.error(...e),n("Error",...e)},console.warn=(...e)=>{OJ.warn(...e),n("Warning",...e)},console.info=(...e)=>{OJ.info(...e),n("Information",...e)},console.debug=(...e)=>{OJ.debug(...e),n("Debug",...e)}};var NJ;QE(),nT()&&RJ("background-script"),self.addEventListener("error",(function(e){const t=e.message||"";dT(t)&&e.preventDefault(),ZE({action:"error",error:t})})),self.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";dT(t)&&e.preventDefault(),ZE({action:"error",error:t})})),$p(Object.assign({},pT)),js("appContext",{location:"background"}),NJ=Hv,chrome.storage.sync.get(["installationId","session",mo.auth.isLoggedIn,mo.auth.translatorServiceType,mo.auth.writeServiceType],(function(e){var t;NJ.setTag("internal_session_id",null===(t=null==e?void 0:e.session)||void 0===t?void 0:t.id),NJ.setTag("is_translator_pro",cT(e,Yn.TRANSLATOR)),NJ.setTag("is_write_pro",cT(e,Yn.WRITE)),NJ.setTag("is_logged_in",e.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(e){NJ.setTag("browser_instance_id",e.browserInstanceId)})),chrome.storage.onChanged.addListener((e=>{var t,n,r,o;return(null===(t=null==e?void 0:e.session)||void 0===t?void 0:t.newValue)&&NJ.setTag("internal_session_id",e.session.newValue.id),(null===(n=null==e?void 0:e.installationId)||void 0===n?void 0:n.newValue)&&NJ.setUser({id:e.installationId.newValue}),(null==e?void 0:e.browser_instance_id)&&NJ.setTag("browser_instance_id",e.browserInstanceId.newValue),!0!==(null===(r=e.isLoggedIn)||void 0===r?void 0:r.newValue)&&!1!==(null===(o=e.isLoggedIn)||void 0===o?void 0:o.newValue)||NJ.setTag("is_logged_in",e.isLoggedIn.newValue),e.translatorServiceType&&chrome.storage.local.get([mo.auth.isLoggedIn],(t=>NJ.setTag("is_translator_pro",cT(Object.assign(Object.assign({},t),{translatorServiceType:e.translatorServiceType.newValue}),Yn.TRANSLATOR)))),e.writeServiceType&&chrome.storage.local.get([mo.auth.isLoggedIn],(t=>NJ.setTag("is_write_pro",cT(Object.assign(Object.assign({},t),{writeServiceType:e.writeServiceType.newValue}),Yn.WRITE)))),!0})),console.info("Sentry initialised"),YP(),EJ(),chrome.runtime.onInstalled.addListener(IJ),chrome.contextMenus.onClicked.addListener(fJ),chrome.tabs.onActivated.addListener((function(e){return r(this,void 0,void 0,(function*(){HB((yield chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:nb.dlTabChanged});const t=No();chrome.tabs.query({},(function(n){t&&(n=n.filter((e=>{var t;return!(null===(t=e.url)||void 0===t?void 0:t.startsWith("about:"))})));for(const t of n)chrome.tabs.sendMessage(t.id,{action:nb.dlChangeActiveTabStatus,payload:{isActive:t.id===e.tabId}})})),wP()}))}));return chrome.runtime.onConnect.addListener((function(e){var t,n;nT()&&console.log(`PORT connected to tab with id: ${null===(n=null===(t=e.sender)||void 0===t?void 0:t.tab)||void 0===n?void 0:n.id}, port name: ${e.name}`),e.onMessage.addListener(mJ),e.onDisconnect.addListener(vJ)})),chrome.runtime.onConnect.addListener((e=>{e.name===ho&&e.onDisconnect.addListener((()=>{var e;e={action:nb.dlShowPageLoadPopup},chrome.tabs.query({active:!0,currentWindow:!0},(t=>{chrome.tabs.sendMessage(t[0].id,e)})),SE({trigger:go})}))})),chrome.runtime.onMessage.addListener(dJ),chrome.storage.onChanged.addListener(_J),chrome.commands.onCommand.addListener(gJ),chrome.alarms.onAlarm.addListener(hJ),chrome.runtime.onMessage.addListener((e=>("reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()})),!1))),No()||chrome.webRequest.onBeforeSendHeaders.addListener((()=>{}),{urls:["<all_urls>"]},["requestHeaders","extraHeaders"]),JP(),CB(),e.AlternativesSegmentationType={ALTERNATIVES_SEGMENTATION_TYPE_UNSPECIFIED:0,ALTERNATIVES_SEGMENTATION_TYPE_WORD:1,ALTERNATIVES_SEGMENTATION_TYPE_SENTENCE:2},e.BrowserExtensionType={BROWSER_EXTENSION_TYPE_UNSPECIFIED:0,BROWSER_EXTENSION_TYPE_CHROME:1,BROWSER_EXTENSION_TYPE_EDGE:2,BROWSER_EXTENSION_TYPE_FIREFOX:3},e.CONTENT_PROCESS_MODE=Rb,e.CONTEXT_MENU_ENTRIES=WB,e.CloseInlineHighlighterTriggerType=VT,e.CloseInputHighlighterTriggerType=$T,e.ContentProcessingModeType={CONTENT_PROCESSING_MODE_TYPE_UNSPECIFIED:0,CONTENT_PROCESSING_MODE_TYPE_TRANSLATE:1,CONTENT_PROCESSING_MODE_TYPE_WRITE:2},e.DictionaryErrorType={DICTIONARY_ERROR_TYPE_UNSPECIFIED:0,DICTIONARY_ERROR_TYPE_ENTRY_NOT_FOUND:1,DICTIONARY_ERROR_TYPE_SERVER_ERRORS:2},e.DictionaryStatusType={DICTIONARY_STATUS_TYPE_UNSPECIFIED:0,DICTIONARY_STATUS_TYPE_ENABLE:1,DICTIONARY_STATUS_TYPE_DISABLE:2},e.EVENT_TYPES=TL,e.ErrorCategory={ERROR_CATEGORY_UNSPECIFIED:0,ERROR_CATEGORY_LOGIN:1,ERROR_CATEGORY_AUTO_LOGIN:2,ERROR_CATEGORY_OCR:3,ERROR_CATEGORY_FPT:4},e.EventID=MT,e.ExtensionDisabledReason={EXTENSION_DISABLED_REASON_UNSPECIFIED:0,EXTENSION_DISABLED_REASON_PERMISSIONS_INCREASE:1,EXTENSION_DISABLED_REASON_UNKNOWN:2},e.ExtensionInstallType={EXTENSION_INSTALL_TYPE_REASON_UNSPECIFIED:0,EXTENSION_INSTALL_TYPE_NORMAL:1,EXTENSION_INSTALL_TYPE_DEVELOPMENT:2,EXTENSION_INSTALL_TYPE_ADMIN:3,EXTENSION_INSTALL_TYPE_SIDELOAD:4,EXTENSION_INSTALL_TYPE_OTHER:5},e.ExtensionOnInstalledReason={EXTENSION_ON_INSTALLED_REASON_UNSPECIFIED:0,EXTENSION_ON_INSTALLED_REASON_INSTALL:1,EXTENSION_ON_INSTALLED_REASON_UPDATE:2,EXTENSION_ON_INSTALLED_REASON_CHROME_UPDATE:3,EXTENSION_ON_INSTALLED_REASON_SHARED_MODULE_UPDATE:4},e.ExtensionOpenedFrom={EXTENSION_OPENED_FROM_UNSPECIFIED:0,EXTENSION_OPENED_FROM_EXTENSION_ICON:1,EXTENSION_OPENED_FROM_FPT_AUTO_INJECT:2},e.FptHideType={FPT_HIDE_TYPE_UNSPECIFIED:0,FPT_HIDE_TYPE_DOMAIN:1,FPT_HIDE_TYPE_LANG:2,FPT_HIDE_TYPE_FPT:3},e.FptPopupOpenDataTriggerType=GT,e.GmailActionType={GMAIL_ACTION_TYPE_UNSPECIFIED:0,GMAIL_ACTION_TYPE_READING_VIEW_TRANSLATE:1,GMAIL_ACTION_TYPE_COMPOSE_VIEW_TRANSLATE:2,GMAIL_ACTION_TYPE_COMPOSE_VIEW_IMPROVE:3},e.INTERNAL_PAGE_FILES=BB,e.INTERNAL_PAGE_KEYS=qB,e.InlineListenActionType={INLINE_LISTEN_ACTION_TYPE_UNSPECIFIED:0,INLINE_LISTEN_ACTION_TYPE_PLAY:1,INLINE_LISTEN_ACTION_TYPE_STOP:2},e.InlineListenContext={INLINE_LISTEN_CONTEXT_UNSPECIFIED:0,INLINE_LISTEN_CONTEXT_TRANSLATE:1,INLINE_LISTEN_CONTEXT_WRITE:2},e.InlineListenTextKind={INLINE_LISTEN_TEXT_KIND_UNSPECIFIED:0,INLINE_LISTEN_TEXT_KIND_SOURCE:1,INLINE_LISTEN_TEXT_KIND_TARGET:2},e.InlinePositionType={INLINE_POSITION_TYPE_UNSPECIFIED:0,INLINE_POSITION_TYPE_TOP:1,INLINE_POSITION_TYPE_RIGHT:2,INLINE_POSITION_TYPE_BOTTOM:3,INLINE_POSITION_TYPE_LEFT:4},e.ItaErrorType=WT,e.ItaParticipationErrorCodes={participant_evicted:"1000_participant_evicted"},e.ItaSessionConnectionErrorCodes=hL,e.ItaSessionEndedErrorCodes=pL,e.ItaSessionEventType=jT,e.ItaSessionSendingErrorCodes=fL,e.ItaSessionStartErrorCodes=gL,e.ItaSessionType=FT,e.ItaUserInteractionType=HT,e.LOGO_CACHE_MAX_AGE_MINUTES=Hb,e.LandOnWebsiteType={LAND_ON_WEBSITE_TYPE_UNSPECIFIED:0,LAND_ON_WEBSITE_TYPE_DEEPL:1,LAND_ON_WEBSITE_TYPE_LINGUEE:2,LAND_ON_WEBSITE_TYPE_GOOGLE_TRANSLATE:3,LAND_ON_WEBSITE_TYPE_WORD_365:4,LAND_ON_WEBSITE_TYPE_POWER_POINT_365:5,LAND_ON_WEBSITE_TYPE_JIRA:6,LAND_ON_WEBSITE_TYPE_CONFLUENCE:7,LAND_ON_WEBSITE_TYPE_GMAIL:8},e.LoginTriggerType={LOGIN_TRIGGER_TYPE_UNSPECIFIED:0,LOGIN_TRIGGER_TYPE_USER:1,LOGIN_TRIGGER_TYPE_AUTOMATIC:2},e.LogoClickedFrom={LOGO_CLICKED_FROM_UNSPECIFIED:0,LOGO_CLICKED_FROM_DEFAULT_POPUP:1,LOGO_CLICKED_FROM_INJECTED_FPT_POPUP:2,LOGO_CLICKED_FROM_INLINE_POPUP:3},e.LogoutTriggerType={LOGOUT_TRIGGER_TYPE_UNSPECIFIED:0,LOGOUT_TRIGGER_TYPE_USER:1,LOGOUT_TRIGGER_TYPE_EXTENSION:2},e.NativeMessageAction={NATIVE_MESSAGE_ACTION_UNSPECIFIED:0,NATIVE_MESSAGE_ACTION_HANDSHAKE:1,NATIVE_MESSAGE_ACTION_TRANSLATE:2},e.NativeMessageSourceDesktopApp={NATIVE_MESSAGE_SOURCE_DESKTOP_APP_UNSPECIFIED:0,NATIVE_MESSAGE_SOURCE_DESKTOP_APP_WINDOWS:1,NATIVE_MESSAGE_SOURCE_DESKTOP_APP_MACOS:2},e.NicheIntegrationType={NICHE_INTEGRATION_TYPE_UNSPECIFIED:0,NICHE_INTEGRATION_TYPE_DEFAULT:1,NICHE_INTEGRATION_TYPE_GDOCS:2,NICHE_INTEGRATION_TYPE_WHATSAPPWEB:3,NICHE_INTEGRATION_TYPE_TWITTER:4,NICHE_INTEGRATION_TYPE_ZENDESK:5,NICHE_INTEGRATION_TYPE_GMAIL:6,NICHE_INTEGRATION_TYPE_GSLIDES:7,NICHE_INTEGRATION_TYPE_LINKEDIN:8,NICHE_INTEGRATION_TYPE_YOUTUBE:9},e.NotificationType={NOTIFICATION_TYPE_UNSPECIFIED:0,NOTIFICATION_TYPE_HINT_KEYBOARD_SHORTCUT:1,NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY:2},e.ONE_SHOT_TRANSLATE_MAXIMUM_TEXTS=100,e.OidcSessionType={OIDC_SESSION_TYPE_UNSPECIFIED:0,OIDC_SESSION_TYPE_NONE:1,OIDC_SESSION_TYPE_PRO:2,OIDC_SESSION_TYPE_FREE:3},e.OnboardingStepChangeTriggerType={ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_UNSPECIFIED:0,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_OPEN_PAGE:1,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_BACK_BUTTON:2,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NEXT_BUTTON:3,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NAVIGATION:4},e.OriginStore={ORIGIN_STORE_UNSPECIFIED:0,ORIGIN_STORE_CHROME:1,ORIGIN_STORE_EDGE:2,ORIGIN_STORE_LOCAL:3,ORIGIN_STORE_FIREFOX:4},e.PERODIC_CODE_EXECUTION_NAMES=jB,e.PageID={PAGE_ID_UNSPECIFIED:0,PAGE_ID_PAGE_HUB:1},e.PermissionAction={PERMISSION_ACTION_UNSPECIFIED:0,PERMISSION_ACTION_GRANTED:1,PERMISSION_ACTION_DECLINED:2,PERMISSION_ACTION_REMOVED:3},e.PermissionType={PERMISSION_TYPE_UNSPECIFIED:0,PERMISSION_TYPE_NATIVE_MESSAGING:1},e.ReplacementType={REPLACEMENT_TYPE_UNSPECIFIED:0,REPLACEMENT_TYPE_TRANSLATION:1,REPLACEMENT_TYPE_IMPROVEMENT:2,REPLACEMENT_TYPE_INLINE_CORRECTION:3},e.ResponseCode={RESPONSE_CODE_UNSPECIFIED:0,RESPONSE_CODE_OK:1,RESPONSE_CODE_ERROR:2,RESPONSE_CODE_INVALID_MESSAGE:3,RESPONSE_CODE_OK_WITH_WARNINGS:4},e.RightClickTranslationType={RIGHT_CLICK_TRANSLATION_TYPE_UNSPECIFIED:0,RIGHT_CLICK_TRANSLATION_TYPE_INLINE:1,RIGHT_CLICK_TRANSLATION_TYPE_INPUT:2,RIGHT_CLICK_TRANSLATION_TYPE_SCREEN_CAPTURE_OCR:3,RIGHT_CLICK_TRANSLATION_TYPE_FPT:4},e.SETTINGS_PAGE_TAB={translator:"translator",write:"write",fpt:"full-page-translation"},e.ServiceLevel={SERVICE_LEVEL_UNSPECIFIED:0,SERVICE_LEVEL_FREE:1,SERVICE_LEVEL_PRO:2,SERVICE_LEVEL_NONE:3},e.SessionTriggerType={SESSION_TRIGGER_TYPE_UNSPECIFIED:0,SESSION_TRIGGER_TYPE_TRANSLATION:1,SESSION_TRIGGER_TYPE_LOGIN:2},e.SettingType={SETTING_TYPE_UNSPECIFIED:0,SETTING_TYPE_DISABLE_EVERYWHERE:1,SETTING_TYPE_DISABLE_PER_SITE:2,SETTING_TYPE_ENABLE_EVERYWHERE:3,SETTING_TYPE_ENABLE_PER_SITE:4},e.ShortcutType={SHORTCUT_TYPE_UNSPECIFIED:0,SHORTCUT_TYPE_TRIGGER_TRANSLATION:1,SHORTCUT_TYPE_SCREENSHOT_TRANSLATION:2},e.StatsigFeatureService=lN,e.StopVoiceOverTriggerType={STOP_VOICE_OVER_TRIGGER_TYPE_UNSPECIFIED:0,STOP_VOICE_OVER_TRIGGER_TYPE_ON_BUTTON_CLOSE:1,STOP_VOICE_OVER_TRIGGER_TYPE_ON_INLINE_MODAL_CLOSE:2},e.TranslationFormalityType={TRANSLATION_FORMALITY_TYPE_UNSPECIFIED:0,TRANSLATION_FORMALITY_TYPE_FORMAL:1,TRANSLATION_FORMALITY_TYPE_INFORMAL:2},e.TranslationTrigger={TRANSLATION_TRIGGER_UNSPECIFIED:0,TRANSLATION_TRIGGER_MANUAL:1,TRANSLATION_TRIGGER_AUTOMATIC:2,TRANSLATION_TRIGGER_INLINE:3,TRANSLATION_TRIGGER_INPUT:4,TRANSLATION_TRIGGER_INPUT_ALTERNATIVES:5,TRANSLATION_TRIGGER_SIDE_PANEL:6,TRANSLATION_TRIGGER_CUSTOMIZATION:7},e.URL_ACTIONS=Po,e.URL_LIST=Lo,e.UiFunction={UI_FUNCTION_UNSPECIFIED:0,UI_FUNCTION_INPUT_TRANSLATION:1,UI_FUNCTION_INLINE_TRANSLATION:2,UI_FUNCTION_FULL_PAGE_TRANSLATION:3},e.UiLocation={UI_LOCATION_UNSPECIFIED:0,UI_LOCATION_INPUT_TRANSLATION_TRIGGER_ICON:1,UI_LOCATION_INLINE_TRANSLATION_TRIGGER_ICON:2,UI_LOCATION_INLINE_TRANSLATION_SETTING_POPUP:3,UI_LOCATION_INPUT_TRANSLATION_SETTING_POPUP:4,UI_LOCATION_SETTINGS_PAGE_FPT:5,UI_LOCATION_SETTINGS_PAGE_READING:6,UI_LOCATION_SETTINGS_PAGE_WRITING:7,UI_LOCATION_FPT_HIDE_MODAL:8,UI_LOCATION_INPUT_TRANSLATION_SETTINGS_ICON:9,UI_LOCATION_INLINE_TRANSLATION_SETTINGS_ICON:10,UI_LOCATION_INPUT_TRANSLATION_READ_MORE_LINK:11,UI_LOCATION_INLINE_TRANSLATION_READ_MORE_LINK:12,UI_LOCATION_FPT_TRANSLATION_READ_MORE_LINK:13,UI_LOCATION_EXTENSION_HUB_TOGGLE_SWITCH:14,UI_LOCATION_HUB_CUSTOMIZE_SHORTCUT:15,UI_LOCATION_HUB_LOGIN_BUTTON:16,UI_LOCATION_HUB_UPGRADE_TO_PRO_LINK:17,UI_LOCATION_HUB_TRY_PRO_LINK:18,UI_LOCATION_SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON:19,UI_LOCATION_HUB_FPT_ENABLE_CHECKBOX:20,UI_LOCATION_HUB_FPT_DISABLE_CHECKBOX:21,UI_LOCATION_DEEPL_WRITE_TRIGGER_ICON:22,UI_LOCATION_HUB_VIEW_INTEGRATIONS:23,UI_LOCATION_HUB_CLOSE_CUSTOMIZATIONS_WIDGET:24,UI_LOCATION_GMAIL_ONBOARDING_POPUP:25,UI_LOCATION_GMAIL_ONBOARDING_ICON:26,UI_LOCATION_GMAIL_CHAR_LIMIT_POPUP_LOGIN:27,UI_LOCATION_GMAIL_FEEDBACK_SURVEY:28,UI_LOCATION_GSLIDES_FEEDBACK_SURVEY:29,UI_LOCATION_GSLIDES_CHAR_LIMIT_POPUP_LOGIN:30,UI_LOCATION_ZENDESK_TRY_PRO_LINK:31,UI_LOCATION_SETTINGS_PAGE_INTEGRATIONS:32,UI_LOCATION_ONBOARDING_SIGN_UP:33,UI_LOCATION_ONBOARDING_SKIP_SIGNUP:34,UI_LOCATION_ONBOARDING_LOGIN:35,UI_LOCATION_ONBOARDING_SEE_ALL_INTEGRATIONS:36,UI_LOCATION_INPUT_IMPROVE_TRIGGER_ICON:37,UI_LOCATION_ICON_TOGGLE_IN_HUB_TRANSLATOR:38,UI_LOCATION_ICON_TOGGLE_IN_HUB_WRITE:39,UI_LOCATION_MANAGE_ICON_SETTINGS:40,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_HUB:41,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_SETTINGS:42,UI_LOCATION_SIDE_PANEL_ICON_ON_WEBSITE:43,UI_LOCATION_HUB_ONBOARDING_LINK:44,UI_LOCATION_INLINE_SELECTION_TRANSLATE_ICON:45,UI_LOCATION_INLINE_SELECTION_WRITE_ICON:46,UI_LOCATION_INPUT_SELECTION_TRANSLATE_ICON:47,UI_LOCATION_INPUT_SELECTION_WRITE_ICON:48,UI_LOCATION_INLINE_SELECTION_TRIGGER_OFF_ICON:49,UI_LOCATION_INPUT_SELECTION_TRIGGER_OFF_ICON:50,UI_LOCATION_SIDE_PANEL_LOGIN_BUTTON:51,UI_LOCATION_SIDE_PANEL_SETTINGS_BUTTON:52,UI_LOCATION_SIDE_PANEL_LOGOUT_BUTTON:53,UI_LOCATION_SIDE_PANEL_UPGRADE_BUTTON:54,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TAB:55,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TARGET_LANG:56,UI_LOCATION_SIDE_PANEL_TRANSLATOR_SOURCE_LANG:57,UI_LOCATION_SIDE_PANEL_TRANSLATION_DIR_INDICATOR:58,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD:59,UI_LOCATION_SIDE_PANEL_TARGET_TEXT_FIELD:60,UI_LOCATION_SETTING_USE_ADVANCED_WINDOW_FOR_INPUT_FIELDS:61,UI_LOCATION_REVIEW_WINDOW_CLOSE_ICON:62,UI_LOCATION_REVIEW_WINDOW_TRANSLATE_ALTERNATIVES:63,UI_LOCATION_REVIEW_WINDOW_WRITE_ALTERNATIVES:64,UI_LOCATION_USER_PROFILE_SURVEY_CLOSE_BUTTON:65,UI_LOCATION_USER_PROFILE_SURVEY_REMIND_LATER_BUTTON:66,UI_LOCATION_USER_PROFILE_SURVEY_LAUNCH_BUTTON:67,UI_LOCATION_EXPERIENCE_FEEDBACK_AMAZING_BUTTON:68,UI_LOCATION_EXPERIENCE_FEEDBACK_NOT_GOOD_BUTTON:69,UI_LOCATION_FPT_TRANSLATION_POPUP_MENU_OPTION:70,UI_LOCATION_FPT_TRANSLATION_POPUP_OPEN_SETTINGS:71,UI_LOCATION_FPT_TRANSLATION_POPUP_CLOSE_BUTTON:72,UI_LOCATION_FPT_TRANSLATION_POPUP_SHOW_ORIGINAL:73,UI_LOCATION_FPT_TRANSLATION_POPUP_OPEN_SIDEBAR_BUTTON:74,UI_LOCATION_INLINE_TRANSLATION_TOOLBAR_TARGET_LANGUAGE_SELECTOR:75,UI_LOCATION_INLINE_TRANSLATION_WRITE_TOOLBAR_LANGUAGE_SELECTOR:76,UI_LOCATION_INPUT_TRANSLATION_SETTING_LANGUAGE_SELECTOR:77,UI_LOCATION_SETTINGS_PAGE_TRANSLATOR_READING_TARGET_LANGUAGE_SELECTOR:78,UI_LOCATION_SETTINGS_PAGE_TRANSLATOR_WRITING_TARGET_LANGUAGE_SELECTOR:79,UI_LOCATION_SETTINGS_PAGE_FULL_PAGE_TRANSLATION_TARGET_LANGUAGE_SELECTOR:80,UI_LOCATION_EXPERIENCE_FEEDBACK_CLOSE_BUTTON:81,UI_LOCATION_EXPERIENCE_FEEDBACK_REMIND_LATER_BUTTON:82,UI_LOCATION_EXPERIENCE_FEEDBACK_WRITE_REVIEW_BUTTON:83,UI_LOCATION_DOWNLOAD_LOGS_BUTTON:84,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD_OCR_ICON:85,UI_LOCATION_OCR_TRANSLATION_INSTRUCTIONS_OPEN_SHORTCUTS_SETTINGS_BUTTON:86,UI_LOCATION_SIDE_PANEL_VIEWPORT:87,UI_LOCATION_INPUT_INLINE_HIGHLIGHT:88,UI_LOCATION_SIDE_PANEL_ENABLE_INLINE_HIGHLIGHTS_BUTTON:89,UI_LOCATION_SIDE_PANEL_DISABLE_INLINE_HIGHLIGHTS_BUTTON:90,UI_LOCATION_SIDE_PANEL_ENABLE_DESKTOP_TRANSLATE_BUTTON:91,UI_LOCATION_SIDE_PANEL_DISABLE_DESKTOP_TRANSLATE_BUTTON:92,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SHOW_PERMISSION_PROMPT:93,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SHOW_APP_NOT_INSTALLED:94,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SEND_TRANSLATION:95,UI_LOCATION_INLINE_HIGHLIGHT_DISMISS_BUTTON:96},e.UpgradeNotificationAction={UPGRADE_NOTIFICATION_ACTION_UNSPECIFIED:0,UPGRADE_NOTIFICATION_ACTION_LOGIN:1,UPGRADE_NOTIFICATION_ACTION_SIGNUP:2,UPGRADE_NOTIFICATION_ACTION_PRO_TRIAL:3},e.UpgradeNotificationType={UPGRADE_NOTIFICATION_TYPE_UNSPECIFIED:0,UPGRADE_NOTIFICATION_TYPE_ANONYMOUS_USER_LIMIT_EXCEEDED:1,UPGRADE_NOTIFICATION_TYPE_FREE_ACCOUNT_LIMIT_EXCEEDED:2,UPGRADE_NOTIFICATION_TYPE_WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:3,UPGRADE_NOTIFICATION_TYPE_WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:4},e.UserType={USER_TYPE_UNSPECIFIED:0,USER_TYPE_NOT_LOGGED_IN:1,USER_TYPE_LOGGED_IN_PRO:2,USER_TYPE_LOGGED_IN_FREE:3},e.WhatsappTranslatorType={WHATSAPP_TRANSLATOR_TYPE_UNSPECIFIED:0,WHATSAPP_TRANSLATOR_TYPE_MESSAGE:1,WHATSAPP_TRANSLATOR_TYPE_CHAT:2},e.WriteStyles={WRITE_STYLES_UNSPECIFIED:0,WRITE_STYLES_SIMPLE:1,WRITE_STYLES_BUSINESS:2,WRITE_STYLES_ACADEMIC:3,WRITE_STYLES_CASUAL:4,WRITE_STYLES_ENTHUSIASTIC:5,WRITE_STYLES_FRIENDLY:6,WRITE_STYLES_CONFIDENT:7,WRITE_STYLES_DIPLOMATIC:8},e.WriteTrigger={WRITE_TRIGGER_UNSPECIFIED:0,WRITE_TRIGGER_INLINE:1,WRITE_TRIGGER_INPUT:2,WRITE_TRIGGER_INPUT_ALTERNATIVES:3,WRITE_TRIGGER_CUSTOMIZATION:4,WRITE_TRIGGER_INLINE_HIGHLIGHTS:5},e.auth=bA,e.buildInternalUrl=zB,e.buildOneShotUrl=Jb,e.buildSurveySegmentationParams=rI,e.cacheClientState=HE,e.cacheCustomLogoBlob=zE,e.cacheExperiments=BE,e.checkCommandShortcuts=qN,e.checkFeatureFlagEnabled=ZP,e.checkLimitsOrThrow=Ub,e.clearLoginTimestamp=RI,e.commandListener=gJ,e.connectDatabase=FE,e.createBatches=oI,e.createGlossaryTrackingInfo=Kb,e.createITATranslatorSession=$q,e.createITAWriteSession=SB,e.createInteractiveTranslation=YB,e.createInteractiveWrite=XB,e.deleteAuthTokens=SI,e.deletePortSettings=kq,e.deleteTranslationPortSettings=wL,e.deleteWritePortSettings=PL,e.determineEventType=e=>{if(e.textChangeOperation)return TL.TEXT_CHANGE;if(e.setPropertyOperation){if(yL in e.setPropertyOperation)return TL.TARGET_LANGUAGE_CHANGE;if(SL in e.setPropertyOperation)return TL.FORMALITY_CHANGE;if(EL in e.setPropertyOperation)return TL.WRITE_STYLE_CHANGE}},e.determineOneShotProcessor=rw,e.disposeTranslateSession=Bq,e.disposeWriteSession=RB,e.dlSessionCookieName=DB,e.doesContextQualifyForAutologout=FB,e.efficientCleanupActionLogs=QE,e.executeImprovement=fw,e.executeTranslation=ow,e.fetchClientState=wA,e.fetchClientStateWeb=ib,e.fetchExperimentOverrides=KI,e.fetchExperiments=XI,e.fetchLanguageCodes=oL,e.fetchTermbases=TN,e.generateOriginatingSessionMapping=VB,e.getAccountCountryForSurvey=hI,e.getAccountID=kI,e.getAccountInfo=Wb,e.getActionLogs=KE,e.getActionLogsByAction=function(e){return r(this,void 0,void 0,(function*(){return LE||(yield FE()),LE.objectStoreNames.contains(kE)?new Promise(((t,n)=>{const r=LE.transaction(kE,"readonly").objectStore(kE).index("action").getAll(e);r.onsuccess=function(){t(r.result||[])},r.onerror=function(e){n(e)}})):[]}))},e.getActiveTermbase=e=>r(void 0,void 0,void 0,(function*(){if(uT(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==Rb.WRITE){const[t]=yield TN(),n=Mb(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${Jv(e.sourceLang)}>${Jv(e.targetLang)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}})),e.getActiveTranslator=Vq,e.getActiveWriter=EB,e.getAllServiceLevels=$I,e.getAuthTokens=II,e.getBrowserInstanceId=xI,e.getBrowserQueryParameterForSurvey=gI,e.getCachedClientState=qE,e.getCachedCustomLogoBlob=YE,e.getCachedExperiments=JE,e.getCharacterLimit=MI,e.getCleanupStats=tI,e.getClientState=wP,e.getClientStateWeb=OP,e.getCloseInputHighlighterTriggerType=ky,e.getCurrentExperiments=function(){return r(this,void 0,void 0,(function*(){try{const e=yield WE(UE,xE);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}))},e.getCustomLogo=qb,e.getDapAlternativesSegmentationType=Ey,e.getDapApiConfig=qT,e.getDapApiExtensionOpenedFromId=zT,e.getDapApiFptPopupOpenTrigger=Uy,e.getDapApiInlinePositionType=ny,e.getDapApiLingueeError=JT,e.getDapApiLogoClickedFromId=YT,e.getDapApiNotificationType=XT,e.getDapApiSettingType=ty,e.getDapApiShortcutTypes=QT,e.getDapApiTranslationTriggerId=BT,e.getDapApiUiActionEventId=ZT,e.getDapApiUiFunctionality=ey,e.getDapApiUiLocation=KT,e.getDapApiWriteTriggerId=Oy,e.getDapContentProcessingModeType=yy,e.getDapErrorCategory=Ny,e.getDapExtensionDisabledReason=by,e.getDapExtensionInstallType=Ay,e.getDapExtensionOnInstalledReason=wy,e.getDapGmailActionType=vy,e.getDapInputReplacementType=Ry,e.getDapItaErrorType=Cy,e.getDapItaSessionEventType=Ly,e.getDapItaSessionType=Py,e.getDapItaUserInteractionType=xy,e.getDapLoginTrigger=hy,e.getDapLogoutTrigger=gy,e.getDapNicheIntegration=sy,e.getDapOnboardingExternalLink=ry,e.getDapOnboardingStepChangeTrigger=oy,e.getDapOriginStore=iy,e.getDapServiceLevel=my,e.getDapSessionType=Iy,e.getDapSessionTypeTrigger=fy,e.getDapUidCookieValue=VI,e.getDapUpgradeNotificationAction=Sy,e.getDapUpgradeNotificationType=Ty,e.getDapWhatsAppTranslator=_y,e.getDictionary=lP,e.getExperimentParameter=eL,e.getExperiments=$N,e.getExperimentsDataForTracking=DI,e.getExternalUrl=Co,e.getFeatureService=cN,e.getGlossaryProperties=Uq,e.getHighlighterCloseTriggerType=Dy,e.getInlineListenContext=cy,e.getInlineListenTextKind=ly,e.getInstallationId=wI,e.getItaError=mL,e.getItaTextLengthConfigForService=Mq,e.getOrganizationId=HI,e.getRequestSize=iI,e.getSecondsSinceLastLogin=NI,e.getSessionType=bI,e.getSettings=mI,e.getStatsigClient=rN,e.getStatsigUserID=ZR,e.getSupportedVoices=nP,e.getTermbases=Cb,e.getTranslateFormality=dy,e.getTranslationLanguages=WI,e.getTranslationSessionSettings=bL,e.getUILanguageForSurvey=fI,e.getUserInfo=LI,e.getUserState=WN,e.getUserType=UI,e.getUserTypeForSurvey=_I,e.getUsersCharacterLimit=RP,e.getWebUserInfoData=Wy,e.getWebsiteIdFromWebsite=ay,e.getWriteSessionSettings=NL,e.getWriteStyle=uy,e.handleJobs=Lb,e.handleSuccessfulGmailTranslationsCount=EP,e.handleSuccessfulGslidesTranslationsCount=AP,e.handleSuccessfulTranslationsCount=eP,e.handleSuccessfulZendeskTranslationsCount=ZN,e.improveInputRequest=_w,e.initializeAutoLogin=CB,e.initializeStatsigClient=oN,e.isEligibleForChurnSurvey=dI,e.isItaGeoBlockedError=vL,e.isPayloadNecessaryForUIEvent=py,e.isProServiceLevel=GI,e.isStatsigClientInitialized=function(){return void 0!==eN},e.isUserLoggedIn=AI,e.jsonrpc_composeMethodCallDict=jy,e.listenToCookieChanges=UB,e.listenToPerodicCodeExecution=hJ,e.logAction=ZE,e.login=rb,e.loginRequest=VN,e.loginViaCookieExchange=$B,e.logout=ob,e.logoutRequest=jN,e.manipulateClientState=WP,e.manualCleanupActionLogs=eI,e.markLoginTimestamp=OI,e.messageListener=dJ,e.messageListenerInner=pJ,e.onAuthCookieAdded=MB,e.onAuthCookieRemoved=GB,e.onContextMenuClicked=fJ,e.onInstalled=IJ,e.onPortDisconnect=vJ,e.onStorageChanged=_J,e.openAllBrowserFeedbackSurvey=nI,e.openInternalPage=JB,e.openSidePanel=XN,e.parseReleaseGroupsFromString=nL,e.performGDocsProcessContent=tL,e.performGDocsSplitText=mN,e.portListener=mJ,e.processContent=Nb,e.processImprovement=pw,e.processJobsBatched=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),o=oI(n,24576,(e=>JSON.stringify(e))),i=yield Promise.allSettled(o.map((t=>r(void 0,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},e),{jobs:t});return yield Lb(n)})))));if(i.some((e=>"rejected"===e.status)))throw new Error("Failed to process all jobs");const a=i.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),s=a[0];if(a.length>1)for(let e=1;e<a.length;++e){const t=a[e];s.result.translations.push(...t.result.translations)}return s})),e.processOAuthTokenSet=OA,e.protobufPackage="deepl.pb.analytics.browser_extension",e.qualifiesForExplicitLogin=xB,e.readData=WE,e.redirectToExternalURL=xo,e.refreshAccountState=zP,e.removeAccountInfo=jI,e.requestAlternatives=$P,e.requestDictionary=ZI,e.resetExtensionActionIconToDefault=sI,e.resetExtensionActionTitleToDefault=lI,e.resetGlossary=EI,e.runItaOneShot=zb,e.scheduleStatsigInitialization=aN,e.selectTranslateAlternative=zq,e.selectWriteAlternative=NB,e.sendActionToCurrentTab=e=>{chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,e)}))},e.sendDAPAlternativeSelected=nE,e.sendDAPAlternativesEvent=QS,e.sendDAPBrowserInstanceIdCreated=FS,e.sendDAPCloseInlineHighlighter=wS,e.sendDAPCloseInputHighlighter=ES,e.sendDAPContentScriptErrorData=zy,e.sendDAPCustomizationEnabled=JS,e.sendDAPDeeplWriteEvent=jS,e.sendDAPDetectLanguage=iS,e.sendDAPDictionaryStatus=OS,e.sendDAPDisabledDictionaryHover=NS,e.sendDAPDocTransClick=tS,e.sendDAPErrorData=By,e.sendDAPExtensionInfo=_E,e.sendDAPExtensionOpened=Xy,e.sendDAPFPTHide=gS,e.sendDAPFTPBlockSizeExceeded=function(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))}))},e.sendDAPFptPopupOpen=SE,e.sendDAPGDocsMaxCharExceededShown=DS,e.sendDAPGDocsMaxCharExceededTryProClicked=US,e.sendDAPGDocsReplaceText=IS,e.sendDAPGlossaryEnabledOrDisabled=ZS,e.sendDAPGmailCharLimitReached=zS,e.sendDAPIconHover=_S,e.sendDAPInlineCopy=hS,e.sendDAPInlineDragStart=lS,e.sendDAPInlineHighlightsShown=vE,e.sendDAPInlineListen=fS,e.sendDAPInlinePositionChange=sS,e.sendDAPInlineSettingOpened=rS,e.sendDAPInputTranslationInjection=Yy,e.sendDAPInstallSuccess=AS,e.sendDAPInstallationIdCreated=VS,e.sendDAPItaSessionData=TE,e.sendDAPLandingOnSpecificWebsite=TS,e.sendDAPLingueeErrorData=PS,e.sendDAPLoggedIn=HS,e.sendDAPLoggedOut=qS,e.sendDAPLogin=xS,e.sendDAPLogoClicked=Ky,e.sendDAPLogout=kS,e.sendDAPNotificationViewed=Qy,e.sendDAPOnboardingModalShown=GS,e.sendDAPOnboardingOpenExternalPage=vS,e.sendDAPOnboardingStepChange=mS,e.sendDAPOpenDictionarySection=RS,e.sendDAPOpenInlineHighlighter=bS,e.sendDAPOpenInputHighlighter=SS,e.sendDAPRecommendToAFriendClick=nS,e.sendDAPReplaceInFieldInfo=mE,e.sendDAPRightClick=aS,e.sendDAPScreenCaptureErrorData=yE,e.sendDAPSeeAlternativesClicked=tE,e.sendDAPSessionStarted=WS,e.sendDAPSettingsChanged=oS,e.sendDAPShortcutUsed=Zy,e.sendDAPTrackAdsButtonClicked=iE,e.sendDAPTrackAdsShown=aE,e.sendDAPTrackDailyWebsiteUserLoginCheck=dE,e.sendDAPTrackExtensionInstallWithWebsiteUserLoginCheck=uE,e.sendDAPTrackIframeTranslationFailed=oE,e.sendDAPTrackIframeTranslationSuccessful=rE,e.sendDAPTrackLanguageDetectionForTextProcessing=eE,e.sendDAPTrackOcrTranslationInstructionsClosed=EE,e.sendDAPTrackUpgradeNotificationAction=KS,e.sendDAPTrackUpgradeNotificationClosed=XS,e.sendDAPTrackUpgradeNotificationDisplayed=YS,e.sendDAPTrackViewPortDimension=function(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_VIEW_PORT_DIMENSION,viewPortDimensionData:{uiLocation:KT(e.location),width:e.width,height:e.height}})))}))},e.sendDAPTrackWriteTextStylesApplied=lE,e.sendDAPTrackWriteTextStylesChanged=sE,e.sendDAPTrackWriteTextTonesChanged=cE,e.sendDAPTranslateAcceptOrUndoEvent=BS,e.sendDAPTranslationErrorData=Jy,e.sendDAPTranslationRequest=qy,e.sendDAPTwitterTweetTranslationFailed=dS,e.sendDAPUILocationClicked=$S,e.sendDAPUiAction=eS,e.sendDAPVoiceOverStops=yS,e.sendDAPWhatsAppMessageTranslated=cS,e.sendDAPWhatsAppMessageTranslationFailed=uS,e.sendDAPYoutubeCommentTranslationFailed=pS,e.sendDAPZendeskCustomizationEvent=LS,e.sendDAPZendeskGlossaryConfigOpened=CS,e.sendDAPtrackSessionType=MS,e.sendDapFormalitySelected=gE,e.sendDapSidePanelOpened=hE,e.sendDapTrackGetWebsiteUserDataFailed=pE,e.sendEvent=uI,e.sendNotification=HN,e.sendSidePanelTranslatorTargetLangChanged=function(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED,sidePanelLanguageChangeData:{lang:e}})))}))},e.sendUIInteractionSidePanel=function(e){return r(this,void 0,void 0,(function*(){return Hy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UI_INTERACTION_SIDE_PANEL,sidePanelInteractionData:{uiLocation:KT(e.uiLocation),isSidePanelOpen:e.isSidePanelOpen}})))}))},e.sendUIInteractionSidePanelFails=fE,e.setAccountInfo=FI,e.setAuthTokens=yI,e.setBrowserInstanceId=CI,e.setExtensionActionIconFromCache=YP,e.setExtensionActionTitle=cI,e.setExtensionActionTitleFromCache=XP,e.setImageAsExtensionIcon=aI,e.setSidePanelAsDefault=JP,e.setUninstallUrl=pI,e.setUserInfoFromClientState=PI,e.shouldInformUser=_L,e.signUpRequest=FN,e.splitText=Pb,e.stopSpeech=rP,e.storageKeys=mo,e.storeActionLog=XE,e.storeTranslationLanguages=iL,e.testClassicApi=DP,e.textToSpeech=tP,e.trackAlternativeSelected=GP,e.trackAlternativesEvent=bP,e.trackClickOnAdsButton=jP,e.trackCloseInlineHighlighter=sP,e.trackCloseInputHighlighter=aP,e.trackCustomizationEnabled=SP,e.trackDeeplWriteEvent=vP,e.trackDetectLanguage=yN,e.trackDictionaryStatus=cP,e.trackDisabledDictionaryHover=dP,e.trackDocTransClick=AN,e.trackExtensionOpenedEvent=EN,e.trackFptHide=LN,e.trackGDocsMaxCharExceededTryProClicked=fP,e.trackGDocsReplaceText=GN,e.trackGdocsMaxCharExceededShown=hP,e.trackGlossaryDisabled=xP,e.trackGlossaryEnabled=CP,e.trackGmailCharLimitReached=IP,e.trackIconHover=CN,e.trackIframeTranslationFailed=FP,e.trackIframeTranslationSuccessful=VP,e.trackInlineCopy=xN,e.trackInlineDragStart=PN,e.trackInlineListen=DN,e.trackInlinePositionChange=NN,e.trackInlineSettingsOpened=wN,e.trackInputTranslationInjection=SN,e.trackLandingOnWebsite=QN,e.trackLanguageDetectionForTextProcessing=UP,e.trackLingueeErrorData=gP,e.trackLogoClickedEvent=IN,e.trackOcrTranslationInstructionsClosed=KP,e.trackOnboardingModalShown=_P,e.trackOnboardingOpenExternalLink=MN,e.trackOnboardingStepChange=kN,e.trackOpenDictionarySection=uP,e.trackOpenInlineHighlighter=iP,e.trackOpenInputHighlighter=oP,e.trackRecommendToAFriendClick=bN,e.trackRightClick=RN,e.trackSeeAlternativesClicked=MP,e.trackSettingChanged=ON,e.trackTranslateAcceptOrUndoEvent=yP,e.trackUILocationClicked=mP,e.trackUiAction=JN,e.trackUpgradeNotificationAction=kP,e.trackUpgradeNotificationClosed=PP,e.trackUpgradeNotificationDisplayed=NP,e.trackUseOfShortcut=BN,e.trackVoiceOverStops=UN,e.trackWriteTextStylesApplied=qP,e.trackWriteTextStylesChanged=HP,e.trackWriteTextTonesChanged=BP,e.trackZendeskCustomizationEvent=pP,e.trackZendeskGlossaryOpened=LP,e.translateCapture=YN,e.translateGmailReceivedEmail=dw,e.translateHtmlRequest=iw,e.translateInlineRequest=hN,e.translateLinkedInPostRequest=uw,e.translateSelection=zN,e.translateTwitterTweetRequest=cw,e.translateWebPage=KN,e.translateWhatsAppMessageRequest=sw,e.translateWhatsAppMessagesRequest=lw,e.translateYouTubeCommentRequest=aw,e.translateZendeskInputRequest=_N,e.translateZendeskMessageRequest=vN,e.triggerEnforcedSsoAutologin=QP,e.triggerImproveInline=pN,e.triggerImproveInput=gN,e.triggerTranslateInline=uN,e.triggerTranslateInput=dN,e.updateDynamicRules=EJ,e.updateGlossaryId=Dq,e.updateITAFormality=Wq,e.updateITASourceLanguage=jq,e.updateITATargetLanguage=Fq,e.updateRequestedLanguage=AB,e.updateSession=TI,e.updateSourceText=OB,e.updateStyleVariant=bB,e.updateTranslationSessionSettings=AL,e.updateWriteSessionSettings=RL,e.writeData=jE,e}({});
//# sourceMappingURL=background.js.map
